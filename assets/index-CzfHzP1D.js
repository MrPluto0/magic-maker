import{o as V,f as $,M as k,a as q,aP as X,R as de,$ as tt,g as m,n as je,L as x,K as I,P as ee,D as P,ax as K,I as _e,ao as wt,ay as re,a0 as Y,i as ke,aa as Te,az as J,aj as he,aB as ae,aQ as nt,aR as se,J as Q,aS as E,aT as xt,H as Ct,aU as ot,j as U,aI as H,aV as Rt,aW as St,aX as rt,aD as Me,aY as me,aZ as jt,a_ as z,a$ as ue,b0 as kt,b1 as Le,b2 as Re,b3 as Ue,b4 as It,av as W,b5 as Et,b6 as oe,b7 as Vt,b8 as Pt,b9 as at,aq as $t,ba as Ot,aw as At,T as Mt,a1 as Dt,bb as Tt,bc as Lt}from"./index-DUIAo018.js";import{G as Ut,C as Ft,h as ce,E as Nt}from"./hotkeys.esm-oEmevXoJ.js";import{E as zt}from"./el-divider-CYtTj5zz.js";import{E as Wt}from"./el-image-viewer-Bs5Miiwj.js";const Bt={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"};function Ht(e,n){return V(),$("svg",Bt,n[0]||(n[0]=[k("path",{fill:"currentColor",d:"M338.752 104.704a64 64 0 0 0 0 90.496l316.8 316.8l-316.8 316.8a64 64 0 0 0 90.496 90.496l362.048-362.048a64 64 0 0 0 0-90.496L429.248 104.704a64 64 0 0 0-90.496 0"},null,-1)]))}const Kt={name:"ep-arrow-right-bold",render:Ht},Yt={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"};function Gt(e,n){return V(),$("svg",Yt,n[0]||(n[0]=[k("path",{fill:"currentColor",d:"M685.248 104.704a64 64 0 0 1 0 90.496L368.448 512l316.8 316.8a64 64 0 0 1-90.496 90.496L232.704 557.248a64 64 0 0 1 0-90.496l362.048-362.048a64 64 0 0 1 90.496 0"},null,-1)]))}const qt={name:"ep-arrow-left-bold",render:Gt},Xt={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"};function Zt(e,n){return V(),$("svg",Xt,n[0]||(n[0]=[k("path",{fill:"currentColor",d:"M544 805.888V168a32 32 0 1 0-64 0v637.888L246.656 557.952a30.72 30.72 0 0 0-45.312 0a35.52 35.52 0 0 0 0 48.064l288 306.048a30.72 30.72 0 0 0 45.312 0l288-306.048a35.52 35.52 0 0 0 0-48a30.72 30.72 0 0 0-45.312 0L544 805.824z"},null,-1)]))}const st={name:"ep-bottom",render:Zt},Jt="data:image/svg+xml,%3csvg%20width='37'%20height='37'%20viewBox='0%200%2037%2037'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.70801%2018.5L16.958%209.25M7.70801%2018.5L16.958%2027.75M7.70801%2018.5L29.2913%2018.5'%20stroke='white'%20stroke-width='5'%20stroke-linecap='round'%20stroke-linejoin='round'%20/%3e%3c/svg%3e",Qt={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"};function en(e,n){return V(),$("svg",Qt,n[0]||(n[0]=[k("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"},null,-1)]))}const tn={name:"ep-plus",render:en},nn={class:"flex flex-wrap items-center gap-4"},on=["onDrag"],rn=["onClick"],Ie=q({__name:"MaterialList",props:{materials:{}},setup(e){const n=X(),t=async r=>{try{n.loading=!0,r.category==="template_psd"?await n.addTemplate(r.psdMetadata):await n.addMaterial(r)}finally{n.loading=!1}};return(r,s)=>{const l=Wt,o=tn,a=ee;return V(),$("div",nn,[(V(!0),$(de,null,tt(r.materials,(u,i)=>(V(),$("div",{key:i,onDrag:c=>m(n).dragInfo=u},[k("div",{class:je(["relative",u.category==="template_psd"?"w-32":"w-20"])},[k("div",{class:je(["h-20 cursor-pointer center dark:bg-night hover:border-2 hover:border-purple box-border overflow-hidden",u.category==="template_psd"?"h-32":"h-20"])},[x(l,{class:"max-h-full max-w-full","preview-teleported":"",src:u.url,"preview-src-list":[u.url]},null,8,["src","preview-src-list"])],2),k("div",{class:"absolute bottom-2 right-1 bg-blue-500 rounded-full w-6 h-6 opacity-0 hover:opacity-100 transition-opacity duration-150",onClick:c=>t(u)},[x(a,{size:16,color:"#fff",class:"cursor-pointer p-1 box-content"},{default:I(()=>[x(o)]),_:1})],8,rn)],2)],40,on))),128))])}}}),an={class:"h-full flex flex-col gap-4"},sn={class:"flex items-center gap-2"},ln={key:0},un={class:"text-sm mb-4 font-bold"},cn=["onClick"],pn={key:0,class:"flex justify-center"},fn={key:1,class:"relative"},dn={class:"text-base mb-4 font-bold text-center"},_n={key:0,class:"flex justify-center mt-4"},hn=q({__name:"MaterialContainer",setup(e){const n=P(!1),t=P([]),r=K({page:0,pageSize:3,total:100,content:""}),s=P(!1),l=P(!1),o=P([]),a=K({page:1,pageSize:6,category:"",total:7}),u=async(h,_)=>{l.value=!0,a.category=h,o.value=[..._],a.page=1,i()},i=()=>{J.info("前端模式下暂无在线素材")},c=()=>{J.info("前端模式下暂无在线分类")},d=h=>{h&&(r.content=""),r.page=0,t.value=[],c()};return _e(async()=>{c()}),(h,_)=>{const f=he,j=ae,R=zt,b=st,S=ee,v=nt,C=se;return V(),$("div",an,[k("div",sn,[x(f,{modelValue:m(r).content,"onUpdate:modelValue":_[0]||(_[0]=w=>m(r).content=w),class:"flex-1",placeholder:"搜索贴纸类型",onKeyup:wt(d,["enter"])},null,8,["modelValue"]),k("div",null,[x(j,{onClick:_[1]||(_[1]=w=>d(!1))},{default:I(()=>_[4]||(_[4]=[re("搜索")])),_:1})]),k("div",null,[x(j,{onClick:_[2]||(_[2]=w=>d(!0))},{default:I(()=>_[5]||(_[5]=[re("重置")])),_:1})])]),x(v,{class:"flex flex-col flex-1 overflow-hidden"},{default:I(()=>[m(l)?Y((V(),$("div",fn,[k("div",{onClick:_[3]||(_[3]=w=>l.value=!1),class:"w-[25px] h-[25px] cursor-pointer absolute"},_[6]||(_[6]=[k("img",{src:Jt,alt:""},null,-1)])),k("div",dn,Te(m(a).category),1),x(Ie,{materials:m(o)},null,8,["materials"]),m(a).page*m(a).pageSize<m(a).total?(V(),$("div",_n,[x(j,{size:"large",circle:"",onClick:i},{default:I(()=>[x(S,null,{default:I(()=>[x(b)]),_:1})]),_:1})])):ke("",!0)])),[[C,m(s)]]):Y((V(),$("div",ln,[(V(!0),$(de,null,tt(m(t),(w,y)=>(V(),$("div",{key:y},[k("div",un,Te(w.category),1),x(Ie,{materials:w.records},null,8,["materials"]),x(R,null,{default:I(()=>[k("div",{class:"cursor-pointer",onClick:O=>u(w.category,w.records)}," 加载更多 ",8,cn)]),_:2},1024)]))),128)),m(r).page*m(r).pageSize<m(r).total?(V(),$("div",pn,[x(j,{size:"large",circle:"",onClick:c},{default:I(()=>[x(S,null,{default:I(()=>[x(b)]),_:1})]),_:1})])):ke("",!0)])),[[C,m(n)]])]),_:1})])}}}),mn={key:0,class:"flex justify-center mt-4"},vn=q({__name:"TemplateContainer",setup(e){P(!1);const n=P([]),t=K({page:0,pageSize:6,total:1,category:"template_psd"}),r=()=>{J.info("前端模式下暂无在线模板")};return _e(()=>{r()}),(s,l)=>{const o=st,a=ee,u=ae,i=nt;return V(),Q(i,{class:"flex flex-col h-full overflow-auto"},{default:I(()=>[x(Ie,{materials:m(n)},null,8,["materials"]),m(t).page*m(t).pageSize<m(t).total?(V(),$("div",mn,[x(u,{size:"large",circle:"",onClick:r},{default:I(()=>[x(a,null,{default:I(()=>[x(o)]),_:1})]),_:1})])):ke("",!0)]),_:1})}}});var lt={exports:{}},ve={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yn=E,gn=Symbol.for("react.element"),bn=Symbol.for("react.fragment"),wn=Object.prototype.hasOwnProperty,xn=yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cn={key:!0,ref:!0,__self:!0,__source:!0};function it(e,n,t){var r,s={},l=null,o=null;t!==void 0&&(l=""+t),n.key!==void 0&&(l=""+n.key),n.ref!==void 0&&(o=n.ref);for(r in n)wn.call(n,r)&&!Cn.hasOwnProperty(r)&&(s[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps,n)s[r]===void 0&&(s[r]=n[r]);return{$$typeof:gn,type:e,key:l,ref:o,props:s,_owner:xn.current}}ve.Fragment=bn;ve.jsx=it;ve.jsxs=it;lt.exports=ve;var g=lt.exports;function Rn(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e&&e.addEventListener&&e.addEventListener.apply(e,n)}function Sn(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e&&e.removeEventListener&&e.removeEventListener.apply(e,n)}var jn=["mousedown","touchstart"],Fe=function(e,n,t){t===void 0&&(t=jn);var r=E.useRef(n);E.useEffect(function(){r.current=n},[n]),E.useEffect(function(){for(var s=function(u){var i=e.current;i&&!i.contains(u.target)&&r.current(u)},l=0,o=t;l<o.length;l++){var a=o[l];Rn(document,a,s)}return function(){for(var u=0,i=t;u<i.length;u++){var c=i[u];Sn(document,c,s)}}},[t,e])};function kn(){const e=X(),[n,t]=E.useState(""),[r,s]=E.useState(""),l=E.useRef(null),[o,a]=E.useState(!1),[u,i]=E.useState([]);Fe(l,()=>{a(!1)});const c=E.useRef(null),[d,h]=E.useState(!1),[_,f]=E.useState("");Fe(c,()=>{h(!1)});const j=()=>{const R=e.getSelected();R&&["image","rectangle","ellipse","diamond"].includes(R.type)?e.api.setToast({message:"前端模式下暂不支持AI图片生成功能",closable:!0,duration:3e3}):e.api.setToast({message:"请选择图片、矩形、菱形、椭圆形后重新操作",closable:!0,duration:1e3})};return g.jsxs("div",{className:"flex ml-6 h-full gap-2",children:[g.jsx("select",{className:"rounded-lg px-2 w-20 text-xs dark:bg-[#232329] bg-[#ececf4]",value:r,onChange:R=>s(R.target.value),children:g.jsx("option",{className:"!bg-red !text-sm",style:{appearance:"none"},children:"即梦"})}),g.jsxs("div",{className:"flex h-full relative",children:[g.jsx("input",{className:"rounded-lg px-2 w-100 text-xs dark:bg-[#232329] bg-[#ececf4] pr-[66px]",placeholder:"请输入提示词",value:n,onChange:R=>t(R.target.value),onKeyDown:R=>{R.key=="Enter"&&j()}}),g.jsx("div",{className:"absolute rounded-lg w-5 h-5 cursor-pointer",style:{left:"340px",top:"7px"},onClick:()=>a(!o),children:g.jsx("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",children:g.jsx("path",{d:"M7.5 15C6.51509 15 5.53982 14.806 4.62987 14.4291C3.71993 14.0522 2.89314 13.4997 2.1967 12.8033C0.790176 11.3968 0 9.48912 0 7.5C0 5.51088 0.790176 3.60322 2.1967 2.1967C3.60322 0.790176 5.51088 0 7.5 0C11.625 0 15 3 15 6.75C15 7.94347 14.5259 9.08807 13.682 9.93198C12.8381 10.7759 11.6935 11.25 10.5 11.25H9.15C8.925 11.25 8.775 11.4 8.775 11.625C8.775 11.7 8.85 11.775 8.85 11.85C9.15 12.225 9.3 12.675 9.3 13.125C9.375 14.175 8.55 15 7.5 15ZM7.5 1.5C5.9087 1.5 4.38258 2.13214 3.25736 3.25736C2.13214 4.38258 1.5 5.9087 1.5 7.5C1.5 9.0913 2.13214 10.6174 3.25736 11.7426C4.38258 12.8679 5.9087 13.5 7.5 13.5C7.725 13.5 7.875 13.35 7.875 13.125C7.875 12.975 7.8 12.9 7.8 12.825C7.5 12.45 7.35 12.075 7.35 11.625C7.35 10.575 8.175 9.75 9.225 9.75H10.5C11.2956 9.75 12.0587 9.43393 12.6213 8.87132C13.1839 8.30871 13.5 7.54565 13.5 6.75C13.5 3.825 10.8 1.5 7.5 1.5ZM3.375 6C3.975 6 4.5 6.525 4.5 7.125C4.5 7.725 3.975 8.25 3.375 8.25C2.775 8.25 2.25 7.725 2.25 7.125C2.25 6.525 2.775 6 3.375 6ZM5.625 3C6.225 3 6.75 3.525 6.75 4.125C6.75 4.725 6.225 5.25 5.625 5.25C5.025 5.25 4.5 4.725 4.5 4.125C4.5 3.525 5.025 3 5.625 3ZM9.375 3C9.975 3 10.5 3.525 10.5 4.125C10.5 4.725 9.975 5.25 9.375 5.25C8.775 5.25 8.25 4.725 8.25 4.125C8.25 3.525 8.775 3 9.375 3ZM11.625 6C12.225 6 12.75 6.525 12.75 7.125C12.75 7.725 12.225 8.25 11.625 8.25C11.025 8.25 10.5 7.725 10.5 7.125C10.5 6.525 11.025 6 11.625 6Z",fill:"currentColor"})})}),o&&g.jsx("div",{ref:l,className:"grid-container absolute",children:Ut.map((R,b)=>g.jsx("div",{className:"item",onClick:()=>{u.includes(R)?i(u.filter(S=>S!=R)):i([...u,R])},children:g.jsx("span",{className:`text ${u.includes(R)?"active":""}`,children:R})},b))}),g.jsx("div",{className:"absolute rounded-lg border-2 border-black dark:border-white w-5 h-5 cursor-pointer",style:{backgroundColor:_,left:"370px",top:"7px"},onClick:()=>h(!d)}),d&&g.jsxs("div",{ref:c,className:"color-container",children:[Ft.map(({label:R,value:b},S)=>g.jsx("div",{className:`item ${_===b?"active":""}`,style:{width:"25px",height:"25px",backgroundColor:b},title:R,onClick:()=>f(b)},S)),g.jsx("div",{className:"item border-1 border-white flex justify-center items-center",style:{width:"25px",height:"25px"},onClick:()=>f(""),children:g.jsxs("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6967",width:"16",height:"16",children:[g.jsx("path",{d:"M14.08 919.296L919.424 14.208l90.496 90.496L104.704 1009.92z",fill:"currentColor","p-id":"6968"}),g.jsx("path",{d:"M104.704 14.08l905.088 905.216-90.496 90.496L14.08 104.704z",fill:"currentColor","p-id":"6969"})]})})]})]}),g.jsx("button",{className:"btn rounded-lg px-3 text-xs dark:bg-[#232329] bg-[#ececf4]",onClick:j,children:"生成"})]})}const In={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"};function En(e,n){return V(),$("svg",In,n[0]||(n[0]=[k("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"},null,-1)]))}const ut={name:"ep-refresh",render:En},Vn={class:"px-8 p-6 flex flex-col items-center w-full"},Pn={class:"mt-4 flex w-full justify-between"},$n={class:"flex flex-shrink-0 gap-4"},On={class:"flex w-[160px] gap-2 items-center"},An={class:"flex gap-2"},Mn=q({__name:"MaskRedraw",props:{dataUrl:{}},emits:["finish"],setup(e,{emit:n}){const t=e,r=P(),s=P(),l=K({width:0,height:0}),o=xt(null),a=P(!1),u=P(!0),i=P(!1),c=P(30),d=P(""),h=(b,S)=>{const v=r.value,C=v.getContext("2d"),w=C.getImageData(0,0,v.width,v.height);for(let y=-c.value;y<c.value;y++)for(let O=-c.value;O<c.value;O++){const M=b+y,F=S+O;if(M>=0&&F>=0&&M<v.width&&F<v.height){const L=(F*v.width+M)*4,D=Math.sqrt(y*y+O*O);D<c.value&&(w.data[L+3]*=D/c.value)}}C.putImageData(w,0,0)},_=()=>{const b=o.undo();s.value.putImageData(b,0,0)},f=()=>{const b=o.redo();s.value.putImageData(b,0,0)},j=()=>{const b=o.reset();s.value.putImageData(b,0,0)},R=()=>{J.info("前端模式下暂不支持局部重绘功能"),u.value=!1};return _e(async()=>{if(await Ct(),!r.value)return;const b=1e3,S=600,v=r.value,C=v.getContext("2d");s.value=C;const w=new Image;w.src=t.dataUrl,w.onload=()=>{let y=w.width,O=w.height;const M=b/w.width,F=S/w.height;if(w.width>b||w.height>S){const D=Math.min(M,F);y=w.width*D,O=w.height*D}l.width=y,l.height=O,v.width=y,v.height=O,C.drawImage(w,0,0,v.width,v.height);const L=C.getImageData(0,0,v.width,v.height);o.push(L)},v.addEventListener("mousedown",y=>{i.value=!0}),v.addEventListener("mousemove",y=>{i.value&&h(y.offsetX,y.offsetY)}),v.addEventListener("mouseup",()=>{i.value=!1;const y=C.getImageData(0,0,v.width,v.height);o.push(y)}),ce("ctrl+z",_),ce("ctrl+shift+z",f)}),ot(()=>{ce.unbind("ctrl+z"),ce.unbind("ctrl+shift+z")}),(b,S)=>{const v=Rt,C=ee,w=ae,y=St,O=ut,M=rt,F=Nt,L=he,D=Me,N=se;return V(),Q(D,{modelValue:m(u),"onUpdate:modelValue":S[2]||(S[2]=ne=>H(u)?u.value=ne:null),width:"1200","align-center":"",title:"区域重绘"},{default:I(()=>[Y((V(),$("div",Vn,[k("canvas",{ref_key:"canvasRef",ref:r,style:U({width:`${m(l).width}px`,height:`${m(l).height}px`})},null,4),k("div",Pn,[k("div",$n,[x(M,null,{default:I(()=>[x(w,{onClick:_},{default:I(()=>[x(C,{size:"15"},{default:I(()=>[x(v)]),_:1})]),_:1}),x(w,{onClick:f},{default:I(()=>[x(C,{size:"15"},{default:I(()=>[x(y)]),_:1})]),_:1}),x(w,{onClick:j},{default:I(()=>[x(C,{size:"17"},{default:I(()=>[x(O)]),_:1})]),_:1})]),_:1}),k("div",On,[S[3]||(S[3]=k("div",{class:"flex-shrink-0"},"笔刷",-1)),x(F,{modelValue:m(c),"onUpdate:modelValue":S[0]||(S[0]=ne=>H(c)?c.value=ne:null)},null,8,["modelValue"])])]),k("div",An,[x(L,{placeholder:"输入提示词",modelValue:m(d),"onUpdate:modelValue":S[1]||(S[1]=ne=>H(d)?d.value=ne:null),class:"w-60"},null,8,["modelValue"]),x(w,{type:"primary",onClick:R},{default:I(()=>S[4]||(S[4]=[re("重绘选区")])),_:1})])])])),[[N,m(a)]])]),_:1},8,["modelValue"])}}}),Dn=async e=>{e.registerAction({name:"Partial Redraw",label:"局部重绘",icon:g.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6140",width:"16",height:"16",children:g.jsx("path",{d:"M66.56 275.072c31.488-31.445333 80.469333-76.245333 125.184-108.586667 22.613333-16.384 42.368-28.330667 57.344-34.261333 4.053333-1.621333 7.210667-2.56 9.514667-3.072 0.384 1.109333 0.810667 2.56 1.237333 4.309333 1.706667 6.826667 2.730667 16.213333 3.029333 28.16 0.597333 23.893333-1.834667 52.736-4.565333 82.56l-0.426667 4.821334c-2.474667 27.093333-5.077333 55.466667-4.352 77.397333 0.341333 11.221333 1.621333 24.490667 6.272 35.882667 2.432 5.973333 6.570667 13.354667 13.738667 19.370666 7.808 6.485333 17.365333 9.813333 27.306667 9.813334 16.938667 0 35.285333-7.850667 49.664-15.146667 16-8.106667 33.536-18.901333 50.645333-30.421333a1196.16 1196.16 0 0 0 91.477333-68.906667l-40.96-49.152a1132.288 1132.288 0 0 1-86.186666 64.938667 435.029333 435.029333 0 0 1-48.085334 28.501333c-0.256-17.536 1.92-41.258667 4.437334-68.992l0.213333-2.304c2.645333-29.056 5.546667-61.738667 4.821333-90.026667a200.405333 200.405333 0 0 0-4.864-41.642666c-3.072-12.672-8.661333-27.136-19.925333-38.4a54.698667 54.698667 0 0 0-40.490667-15.36 104.576 104.576 0 0 0-36.181333 8.192c-22.357333 8.917333-47.232 24.533333-71.253333 41.898666C105.813333 149.717333 54.144 196.992 21.333333 229.802667l45.226667 45.226666zM215.210667 707.882667v192.725333H407.893333a192.768 192.768 0 0 0 183.552-133.930667l0.085334 0.085334 388.693333-482.474667a95.274667 95.274667 0 0 0-133.973333-133.888L393.173333 515.754667a192.725333 192.725333 0 0 0-178.005333 192.128z m192.682666 128.725333H279.210667V707.84a128.682667 128.682667 0 0 1 136.746666-128.426667l0.085334 0.128 0.128-0.128a128.682667 128.682667 0 0 1-8.277334 257.152z m186.88-175.914667a193.109333 193.109333 0 0 0-115.754666-131.925333l78.592-63.36 105.856 110.037333-68.693334 85.248z m109.226667-135.509333l-96.426667-100.138667 278.826667-224.853333a31.274667 31.274667 0 0 1 43.946667 43.946667L704 525.226667z","p-id":"6141",fill:"currentColor"})}),perform:async(n,t)=>{const r=X(),s=r.getSelected(),l=r.api.getFiles();if(!l[s.fileId])return{elements:n,appState:t,storeAction:"none"};const o=document.createElement("div");return document.body.appendChild(o),me(Mn,{dataUrl:l[s.fileId].dataURL,onFinish:u=>{r.replaceFile(u,s)}}).mount(o),{elements:n,appState:t,storeAction:"none"}},custom:!0,visible:(n,t)=>{const r=Object.keys(t.selectedElementIds)[0];return n.findIndex(s=>s.id===r&&s.type==="image")!==-1}})},Tn={class:"px-8 p-6 h-[600px] flex flex-col justify-center items-center gap-10"},Ln={class:"w-[500px] relative"},Un=["src"],Fn={class:"flex w-full justify-between items-center"},Nn={class:"flex items-center gap-2"},zn=q({__name:"ExtendDraw",props:{dataUrl:{}},emits:["finish"],setup(e,{emit:n}){const t=P(),r=P(!0),s=P(!1),l=P(""),o=K({left:0,right:0,top:0,bottom:0,lastL:0,lastR:0,lastT:0,lastB:0}),a=K({isMoving:!1,left:!1,right:!1,top:!1,bottom:!1,startX:0,startY:0}),u=(_,f,j,R,b)=>{a.isMoving=!0,a.left=f,a.right=j,a.top=R,a.bottom=b,a.startX=_.screenX,a.startY=_.screenY,o.lastL=o.left,o.lastR=o.right,o.lastT=o.top,o.lastB=o.bottom},i=_=>{if(!a.isMoving)return;const f=_.screenX-a.startX,j=_.screenY-a.startY;a.left&&(o.left=Math.min(o.lastL+f,0)),a.right&&(o.right=Math.min(o.lastR-f,0)),a.top&&(o.top=Math.min(o.lastT+j,0)),a.bottom&&(o.bottom=Math.min(o.lastB-j,0))},c=_=>{a.isMoving=!1,a.left=!1,a.right=!1,a.top=!1,a.bottom=!1},d=()=>{o.left=0,o.right=0,o.top=0,o.bottom=0},h=()=>{J.info("前端模式下暂不支持图像扩图功能"),r.value=!1};return(_,f)=>{const j=ut,R=ee,b=ae,S=rt,v=he,C=Me,w=se;return V(),Q(C,{modelValue:m(r),"onUpdate:modelValue":f[10]||(f[10]=y=>H(r)?r.value=y:null),width:"1200","align-center":"",title:"图像扩图"},{default:I(()=>[Y((V(),$("div",Tn,[k("div",{class:"flex-1 w-full flex justify-center items-center",onMousemove:i,onMouseup:c,onMouseleave:c},[k("div",Ln,[k("img",{ref_key:"imgRef",ref:t,class:"w-full h-fit relative z-[2]",src:_.dataUrl,alt:""},null,8,Un),k("div",{class:"absolute bg-[#424040] z-[1]",style:U({border:"3px dashed rgba(255, 255, 255, 0.5)",top:`${m(o).top-2}px`,left:`${m(o).left-2}px`,bottom:`${m(o).bottom-2}px`,right:`${m(o).right-2}px`})},null,4),k("div",{class:"absolute z-[3] h-1 cursor-ns-resize",style:U({top:`${m(o).top}px`,left:`${m(o).top}px`,right:`${m(o).right}px`}),onMousedown:f[0]||(f[0]=y=>u(y,!1,!1,!0,!1))},null,36),k("div",{class:"absolute z-[3] h-1 cursor-ns-resize",style:U({bottom:`${m(o).bottom}px`,left:`${m(o).left}px`,right:`${m(o).right}px`}),onMousedown:f[1]||(f[1]=y=>u(y,!1,!1,!1,!0))},null,36),k("div",{class:"absolute z-[3] w-1 cursor-ew-resize",style:U({left:`${m(o).left}px`,top:`${m(o).top}px`,bottom:`${m(o).bottom}px`}),onMousedown:f[2]||(f[2]=y=>u(y,!0,!1,!1,!1))},null,36),k("div",{class:"absolute z-[3] w-1 top-0 bottom-0 cursor-ew-resize",style:U({right:`${m(o).right}px`,top:`${m(o).top}px`,bottom:`${m(o).bottom}px`}),onMousedown:f[3]||(f[3]=y=>u(y,!1,!0,!1,!1))},null,36),k("div",{class:"absolute z-[3] w-3 h-3 bg-black dark:bg-white cursor-nwse-resize",style:U({top:`${m(o).top-6}px`,left:`${m(o).left-6}px`}),onMousedown:f[4]||(f[4]=y=>u(y,!0,!1,!0,!1))},null,36),k("div",{class:"absolute z-[3] w-3 h-3 bg-black dark:bg-white cursor-nwse-resize",style:U({top:`${m(o).top-6}px`,right:`${m(o).right-6}px`}),onMousedown:f[5]||(f[5]=y=>u(y,!1,!0,!0,!1))},null,36),k("div",{class:"absolute z-[3] w-3 h-3 bg-black dark:bg-white cursor-nesw-resize",style:U({top:`${m(o).top-6}px`,right:`${m(o).right-6}px`}),onMousedown:f[6]||(f[6]=y=>u(y,!1,!0,!0,!1))},null,36),k("div",{class:"absolute z-[3] w-3 h-3 bg-black dark:bg-white cursor-nesw-resize",style:U({bottom:`${m(o).bottom-6}px`,left:`${m(o).left-6}px`}),onMousedown:f[7]||(f[7]=y=>u(y,!0,!1,!1,!0))},null,36),k("div",{class:"absolute z-[3] w-3 h-3 bg-black dark:bg-white cursor-nwse-resize",style:U({bottom:`${m(o).bottom-6}px`,right:`${m(o).right-6}px`}),onMousedown:f[8]||(f[8]=y=>u(y,!1,!0,!1,!0))},null,36)])],32),k("div",Fn,[x(S,null,{default:I(()=>[x(b,{onClick:d},{default:I(()=>[x(R,{size:"17"},{default:I(()=>[x(j)]),_:1}),f[11]||(f[11]=k("span",{class:"ml-[1px]"},"重置",-1))]),_:1})]),_:1}),k("div",Nn,[x(v,{placeholder:"输入提示词",modelValue:m(l),"onUpdate:modelValue":f[9]||(f[9]=y=>H(l)?l.value=y:null),class:"w-60"},null,8,["modelValue"]),x(b,{type:"primary",onClick:h},{default:I(()=>f[12]||(f[12]=[re("新尺寸扩图")])),_:1})])])])),[[w,m(s)]])]),_:1},8,["modelValue"])}}}),Wn=async e=>{e.registerAction({name:"Extend Image",label:"AI扩图",icon:g.jsxs("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4254",width:"16",height:"16",children:[g.jsx("path",{d:"M760 280v207.328h-66.736V345.472H548.672V280z","p-id":"4255",fill:"currentColor"}),g.jsx("path",{d:"M678.976 311.12l48.408 45.064-1.64 1.696-0.608 0.632-1.2 1.232-0.616 0.64-31.68 32.752c-41.696 43.12-41.696 43.12-107.232 110.864L536 458.936l71.256-73.68 2.288-2.352 33.688-34.832 31.024-32.08 0.656-0.672 0.312-0.32 0.608-0.632 3.144-3.248z","p-id":"4256",fill:"currentColor"}),g.jsx("path",{d:"M896 136v760H136V136h760z m-66.408 66.408H202.408v627.184h627.184V202.408z","p-id":"4257",fill:"currentColor"}),g.jsx("path",{d:"M280 760V552.672h66.736v141.856h144.592V760z","p-id":"4258",fill:"currentColor"}),g.jsx("path",{d:"M361.024 728.88l-48.408-45.064 1.64-1.696 0.608-0.632 1.2-1.232 0.616-0.64 31.68-32.752c41.696-43.12 41.696-43.12 107.232-110.864L504 581.064l-71.256 73.68-2.288 2.352-33.688 34.832-31.024 32.08-0.656 0.672-0.312 0.32-0.608 0.632-3.144 3.248z","p-id":"4259",fill:"currentColor"})]}),perform:async(n,t)=>{const r=X(),s=r.getSelected(),l=r.api.getFiles();if(!l[s.fileId])return{elements:n,appState:t,storeAction:"none"};const o=document.createElement("div");return document.body.appendChild(o),me(zn,{dataUrl:l[s.fileId].dataURL,onFinish:u=>{r.replaceFile(u,s)}}).mount(o),{elements:n,appState:t,storeAction:"none"}},custom:!0,visible:(n,t)=>{const r=Object.keys(t.selectedElementIds)[0];return n.findIndex(s=>s.id===r&&s.type==="image")!==-1}})},Bn={class:"px-8 p-6"},Hn={class:"w-full h-[600px]"},Kn=["src"],Yn={class:"mt-4 flex justify-center gap-2"},Gn=q({__name:"StyleRedraw",props:{dataUrl:{}},emits:["finish"],setup(e,{emit:n}){const t=P(!1),r=P(!0),s=P(""),l=()=>{J.info("前端模式下暂不支持风格迁移功能"),r.value=!1};return(o,a)=>{const u=he,i=ae,c=Me,d=se;return V(),Q(c,{modelValue:m(r),"onUpdate:modelValue":a[1]||(a[1]=h=>H(r)?r.value=h:null),width:"1000","align-center":"",title:"风格重绘"},{default:I(()=>[Y((V(),$("div",Bn,[k("div",Hn,[k("img",{class:"w-full h-full object-contain",src:o.dataUrl,alt:""},null,8,Kn)]),k("div",Yn,[x(u,{placeholder:"输入提示词",modelValue:m(s),"onUpdate:modelValue":a[0]||(a[0]=h=>H(s)?s.value=h:null),class:"w-60"},null,8,["modelValue"]),x(i,{type:"primary",onClick:l},{default:I(()=>a[2]||(a[2]=[re("风格重绘")])),_:1})])])),[[d,m(t)]])]),_:1},8,["modelValue"])}}}),qn=async e=>{e.registerAction({name:"Style Redraw",label:"风格重绘",icon:g.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6670",width:"16",height:"16",children:g.jsx("path",{d:"M887.478857 157.878857V102.4q0-14.153143-10.020571-24.137143-9.984-9.984-24.137143-9.984H102.4q-14.153143 0-24.137143 9.984t-9.984 24.137143v750.957714q0 14.116571 9.984 24.137143 9.984 9.984 24.137143 9.984h55.478857v68.278857H102.4q-42.422857 0-72.411429-29.988571-29.988571-29.988571-29.988571-72.411429V102.4Q0 59.977143 29.988571 29.988571 59.977143 0 102.4 0h750.957714q42.422857 0 72.411429 29.988571 29.988571 29.988571 29.988571 72.411429v55.478857h-68.278857zM204.8 273.078857v682.678857q0 28.269714 20.004571 48.274286 20.004571 19.968 48.274286 19.968h682.678857q28.269714 0 48.274286-20.004571 19.968-19.968 19.968-48.274286V273.115429q0-28.269714-20.004571-48.274286-19.968-20.004571-48.274286-20.004572H273.115429q-28.269714 0-48.274286 20.004572T204.8 273.078857z m68.278857 634.404572V765.074286L340.114286 698.002286a23.332571 23.332571 0 0 1-19.638857-24.978286l4.754285-56.685714-52.187428 52.187428v-142.372571l253.074285-253.074286h142.372572l-53.394286 53.394286 5.266286 0.036571c17.042286 0.402286 34.340571-0.073143 50.944-3.84a148.48 148.48 0 0 1 47.177143-3.072l46.555428-46.518857h142.409143l-93.842286 93.805714c15.872 17.188571 27.830857 38.326857 34.230858 62.317715l107.885714-107.885715v142.409143l-57.490286 57.490286c5.485714 7.021714 8.484571 15.908571 8.045714 25.234286l-3.401142 66.669714 52.845714-52.845714v142.409143l-253.074286 253.074285H560.274286l56.32-56.356571h-3.181715c-16.932571-0.146286-34.048 0.548571-50.541714 4.315428a157.622857 157.622857 0 0 1-50.322286 3.218286l-48.822857 48.822857H321.353143l94.610286-94.646857a156.781714 156.781714 0 0 1-37.12-59.428571l-105.764572 105.801143z m156.525714-634.404572l-156.525714 156.525714v-156.525714h156.525714z m-23.771428 323.072a206.848 206.848 0 0 1 160.768-185.526857 207.286857 207.286857 0 0 1 142.701714 19.090286l-7.606857-33.28 55.332571-12.617143 7.314286 32.365714 5.888 25.746286 12.068572 52.882286 0.036571 0.365714a28.416 28.416 0 0 1-21.284571 33.938286l-16.969143 3.876571-5.046857 1.170286-1.170286 0.256-45.787429 10.496-20.114285 4.608a14.665143 14.665143 0 0 1-0.365715 0.073143l-10.386285 2.377142-2.450286-10.752-3.657143-15.798857-6.546286-28.708571 45.056-10.313143a150.381714 150.381714 0 0 0-123.830857-18.029714 150.308571 150.308571 0 0 0-101.814857 101.814857 152.283429 152.283429 0 0 0-5.668571 30.537143l-2.304 28.306285-56.502858-4.681142 2.377143-28.196572z m37.12 136.96a28.342857 28.342857 0 0 1 21.284571-33.901714l99.84-22.857143 3.364572 14.738286v0.109714l3.474285 14.994286 5.814858 25.417143-40.484572 9.252571a149.211429 149.211429 0 0 0 113.517714 19.236571 151.588571 151.588571 0 0 0 117.211429-139.593142l1.462857-28.342858 56.649143 2.889143-0.841143 16.164572v0.292571l-0.621714 11.885714a206.08 206.08 0 0 1-33.170286 102.180572 209.737143 209.737143 0 0 1-61.805714 61.769143 206.262857 206.262857 0 0 1-66.194286 28.013714 210.102857 210.102857 0 0 1-60.891428 4.900571l-2.194286-0.146285a204.470857 204.470857 0 0 1-84.516572-26.368l8.740572 38.217143-55.332572 12.580571-6.582857-29.110857-7.606857-33.353143-10.313143-45.312-0.804571-3.657143z m356.278857 222.646857l156.525714-156.525714v156.525714h-156.525714z","p-id":"6671",fill:"currentColor"})}),perform:async(n,t)=>{const r=X(),s=r.getSelected(),l=r.api.getFiles();if(!l[s.fileId])return{elements:n,appState:t,storeAction:"none"};const o=document.createElement("div");return document.body.appendChild(o),me(Gn,{dataUrl:l[s.fileId].dataURL,onFinish:u=>{r.replaceFile(u,s)}}).mount(o),{elements:n,appState:t,storeAction:"none"}},custom:!0,visible:(n,t)=>{const r=Object.keys(t.selectedElementIds)[0];return n.findIndex(s=>s.id===r&&s.type==="image")!==-1}})};function Xn(){const e=X(),n=s=>{const l=[];for(let o in e.files)l.push(e.files[o]);s.addFiles(l),Dn(s),Wn(s),qn(s);for(const o in Le)s.setFontFamily(o,Le[o],!1);for(const o in Re)s.setFontFamily(o,Re[o],!1);s.setFontFamily("BebasNeue",Re.Bellefair,!0),e.api=s},t=async()=>{try{e.loading=!0,e.api.resetScene();const s=await Ue({accept:".psd",multiple:!1}),l=await It(s[0]);e.updateContent(l.elements,l.files)}finally{e.loading=!1}},r=async()=>{try{e.loading=!0;const s=await Ue({accept:".ttf,.woff,.woff2",multiple:!1}),l=URL.createObjectURL(s[0]),o=s[0].name.split(".")[0];e.api.setFontFamily(o,[{url:l}])}finally{e.loading=!1}};return g.jsx("div",{style:{height:"100%",width:"100%"},children:g.jsxs(jt,{name:"test",initialData:{elements:e.eles,appState:e.state,scrollToContent:!0},langCode:"zh-CN",excalidrawAPI:n,children:[g.jsxs(z,{children:[g.jsx(z.DefaultItems.LoadScene,{}),g.jsx(z.Item,{icon:g.jsxs("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9677",width:"16",height:"16",children:[g.jsx("path",{d:"M791.96 978.54H232.04c-60.76 0-110.18-49.43-110.18-110.18V155.64c0-60.76 49.43-110.18 110.18-110.18h409.47c38.98 0 76.13 16.78 101.9 46.03l124.82 141.65a135.735 135.735 0 0 1 33.91 89.79v545.43c0 60.76-49.43 110.18-110.18 110.18zM232.04 118.52c-20.47 0-37.12 16.65-37.12 37.12v712.72c0 20.47 16.65 37.12 37.12 37.12h559.92c20.47 0 37.12-16.65 37.12-37.12V322.93c0-15.28-5.57-30.02-15.67-41.49L688.59 139.79a62.796 62.796 0 0 0-47.08-21.27H232.04z",fill:"currentColor","p-id":"9678"}),g.jsx("path",{d:"M867.49 360.56H717.04c-60.76 0-110.18-49.43-110.18-110.18V79.55h73.06v170.83c0 20.47 16.65 37.12 37.12 37.12h150.45v73.06z",fill:"currentColor","p-id":"9679"}),g.jsx("path",{d:"M339.29 682.61v62.23H298.6V564.19h63.74c45.52 0 68.28 19.19 68.28 57.57 0 18.14-6.53 32.82-19.59 44.03-13.06 11.21-30.51 16.82-52.34 16.82h-19.4z m0-87.18v56.31h16c21.67 0 32.5-9.49 32.5-28.47s-10.83-27.84-32.5-27.84h-16zM448.76 737.91V697.6c7.31 6.13 15.24 10.73 23.81 13.79 8.57 3.07 17.22 4.6 25.95 4.6 5.12 0 9.59-0.46 13.42-1.38 3.82-0.92 7.01-2.2 9.57-3.84 2.56-1.64 4.47-3.57 5.73-5.8 1.26-2.22 1.89-4.64 1.89-7.24 0-3.53-1.01-6.68-3.02-9.45-2.02-2.77-4.77-5.33-8.25-7.68-3.49-2.35-7.62-4.62-12.41-6.8-4.79-2.18-9.95-4.41-15.49-6.68-14.11-5.88-24.63-13.06-31.56-21.54-6.93-8.48-10.39-18.73-10.39-30.74 0-9.4 1.89-17.49 5.67-24.25 3.78-6.76 8.92-12.32 15.43-16.69 6.51-4.36 14.05-7.58 22.61-9.64 8.57-2.06 17.64-3.09 27.21-3.09s17.74 0.57 25.01 1.7c7.26 1.13 13.96 2.88 20.09 5.23v37.67c-3.02-2.1-6.32-3.95-9.89-5.54a79.067 79.067 0 0 0-11.02-3.97 83.625 83.625 0 0 0-11.27-2.33c-3.74-0.5-7.29-0.76-10.64-0.76-4.62 0-8.82 0.44-12.6 1.32-3.78 0.88-6.97 2.12-9.57 3.72-2.61 1.6-4.62 3.51-6.05 5.73-1.43 2.23-2.14 4.72-2.14 7.5 0 3.02 0.8 5.73 2.39 8.12 1.59 2.39 3.86 4.66 6.8 6.8 2.94 2.14 6.51 4.24 10.71 6.3 4.2 2.06 8.94 4.18 14.23 6.36 7.22 3.02 13.71 6.24 19.46 9.64 5.75 3.4 10.69 7.24 14.8 11.53a45.09 45.09 0 0 1 9.45 14.68c2.18 5.5 3.27 11.9 3.27 19.21 0 10.08-1.91 18.54-5.73 25.38-3.82 6.85-9.01 12.39-15.56 16.63-6.55 4.24-14.17 7.29-22.86 9.13-8.69 1.85-17.87 2.77-27.53 2.77s-19.34-0.84-28.28-2.52c-8.94-1.68-16.69-4.2-23.24-7.56zM601.69 744.84V564.19h64c64.16 0 96.25 29.35 96.25 88.06 0 28.14-8.76 50.6-26.27 67.4-17.51 16.8-40.84 25.2-69.98 25.2h-64z m40.69-147.52v114.51h20.16c17.64 0 31.47-5.29 41.51-15.87 10.03-10.58 15.05-24.98 15.05-43.21 0-17.22-4.98-30.76-14.93-40.63-9.95-9.87-23.92-14.8-41.89-14.8h-19.91z",fill:"currentColor","p-id":"9680"})]}),onSelect:t,children:"上传PSD"}),g.jsx(z.Item,{icon:g.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6307",width:"16",height:"16",children:g.jsx("path",{d:"M236.970667 938.666667H145.066667L469.333333 128h85.333334l324.266666 810.666667h-91.904l-102.4-256H339.370667l-102.4 256z m136.533333-341.333334h276.992L512 251.093333 373.504 597.333333z","p-id":"6308",fill:"currentColor"})}),onSelect:r,children:"上传字体"}),g.jsx(z.DefaultItems.Export,{}),g.jsx(z.DefaultItems.SaveAsImage,{}),g.jsx(z.DefaultItems.ClearCanvas,{}),g.jsx(z.DefaultItems.Help,{}),g.jsx("div",{style:{height:"1px",backgroundColor:"rgb(115 115 116)",margin:"0.5rem 0px"}}),g.jsx(z.DefaultItems.ToggleTheme,{}),g.jsx(z.DefaultItems.ChangeCanvasBackground,{})]}),g.jsxs(ue,{children:[g.jsx(ue.Hints.MenuHint,{}),g.jsx(ue.Hints.ToolbarHint,{}),g.jsx(ue.Hints.HelpHint,{})]}),g.jsx(kt,{children:g.jsx("div",{className:"h-full w-full flex justify-center items-center",style:{marginLeft:"-80px"},children:g.jsx(kn,{})})})]})})}function Ne(e,n){var t,r=Object.keys(e);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(e),n&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,t)),r}function p(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Ne(Object(t),!0).forEach(function(r){te(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ne(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function A(e){return(A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}function le(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function ze(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,n,t){return n&&ze(e.prototype,n),t&&ze(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function te(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function G(){return(G=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t,r=arguments[n];for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}function ye(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&ct(e,n)}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)})(e)}function ct(e,n){return(ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(e,n)}function Zn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jn(e,n){if(e==null)return{};for(var t,r={},s=Object.keys(e),l=0;l<s.length;l++)t=s[l],0<=n.indexOf(t)||(r[t]=e[t]);return r}function T(e,n){if(e==null)return{};var t,r=Jn(e,n);if(Object.getOwnPropertySymbols)for(var s=Object.getOwnPropertySymbols(e),l=0;l<s.length;l++)t=s[l],0<=n.indexOf(t)||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t]);return r}function fe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qn(e,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fe(e)}function ge(e){var n=Zn();return function(){var t,r=Ee(e);return Qn(this,n?(t=Ee(this).constructor,Reflect.construct(r,arguments,t)):r.apply(this,arguments))}}function We(e,n){return to(e)||oo(e,n)||pt(e,n)||ao()}function be(e){return eo(e)||no(e)||pt(e)||ro()}function eo(e){if(Array.isArray(e))return Ve(e)}function to(e){if(Array.isArray(e))return e}function no(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oo(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var r,s,l=[],o=!0,a=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);o=!0);}catch(u){a=!0,s=u}finally{try{o||t.return==null||t.return()}finally{if(a)throw s}}return l}}function pt(e,n){var t;if(e)return typeof e=="string"?Ve(e,n):(t=(t=Object.prototype.toString.call(e).slice(8,-1))==="Object"&&e.constructor?e.constructor.name:t)==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ve(e,n):void 0}function Ve(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ro(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ao(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function so(e,n){if(typeof e!="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t===void 0)return(n==="string"?String:Number)(e);if(t=t.call(e,n||"default"),typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}function Be(e){return e=so(e,"string"),typeof e=="symbol"?e:String(e)}var ft={react:{componentWrap:"div",slotWrap:"div",componentWrapAttrs:{__use_react_component_wrap:"",style:{all:"unset"}},slotWrapAttrs:{__use_react_slot_wrap:"",style:{all:"unset"}},vueNamedSlotsKey:["node:"]},vue:{componentWrapHOC:function(e){return function(){var n=(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{}).portals;return E.createElement(E.Fragment,null,e,(n===void 0?[]:n).map(function(s){var r=s.Portal,s=s.key;return E.createElement(r,{key:s})}))}},componentWrapAttrs:{"data-use-vue-component-wrap":"",style:{all:"unset"}},slotWrapAttrs:{"data-use-vue-slot-wrap":"",style:{all:"unset"}}}};function dt(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{react:{},vue:{}},t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:ft,n=2<arguments.length?arguments[2]:void 0,t=(e.vue||(e.vue={}),e.react||(e.react={}),[t,p(p({},e),{},{react:p(p(p({},t.react),e.react),{},{componentWrapAttrs:p(p({},t.react.componentWrapAttrs),e.react.componentWrapAttrs),slotWrapAttrs:p(p({},t.react.slotWrapAttrs),e.react.slotWrapAttrs)}),vue:p(p(p({},t.vue),e.vue),{},{componentWrapAttrs:p(p({},t.vue.componentWrapAttrs),e.vue.componentWrapAttrs),slotWrapAttrs:p(p({},t.vue.slotWrapAttrs),e.vue.slotWrapAttrs)})})]);return n&&t.unshift({}),Object.assign.apply(this,t)}var _t=["getElementById","getElementsByClassName","getElementsByTagName","getElementsByTagNameNS","querySelector","querySelectorAll"],Z={Document:{},Element:{}};function lo(e){Object.keys(Z).forEach(function(n){_t.forEach(function(t){var r=Z[n][t]||window[n].prototype[t];r&&(Z[n][t]=r,window[n].prototype[t]=function(){for(var s=arguments.length,l=new Array(s),o=0;o<s;o++)l[o]=arguments[o];var a=r.apply(this,l);return a&&(a.constructor!==NodeList||a.constructor===NodeList&&0<a.length)?a:((a=t)==="getElementById"&&(a="querySelector",l=["#"+l[0]]),(Z.Element[a]||Element.prototype[a]).apply(e,l))})})})}function io(){Object.keys(Z).forEach(function(e){_t.forEach(function(n){window[e].prototype[n]=Z[e][n]})})}var uo=["ref"],co=["key"],po=["hashList"],He=parseInt(E.version);var fo=function(){ye(n,E.Component);var e=ge(n);function n(t){return le(this,n),e.call(this,t)}return ie(n,[{key:"render",value:function(){var t=this.props.component,r=this.props.passedProps,r=(r.ref,T(r,uo));return E.createElement(t,r,this.props.children)}}]),n}(),_o=function(e,n,t){var r=function(){ye(l,E.Component);var s=ge(l);function l(o){var a;return le(this,l),(a=s.call(this,o)).state=p(p({},o),n.isSlots?{children:e}:{}),a.setRef=a.setRef.bind(fe(a)),a.vueInReactCall=a.vueInReactCall.bind(fe(a)),(a.__veauryVueWrapperRef__=t).__veauryVueInReactCall__=a.vueInReactCall,a}return ie(l,[{key:"reactPropsLinkToVueInstance",value:function(o){Object.keys(o).forEach(function(a){t[a]||(t[a]=o[a])}),Object.getOwnPropertyNames(o.__proto__).filter(function(a){return["constructor","render"].indexOf(a)<0}).forEach(function(a){t[a]||(t[a]=o[a])})}},{key:"setRef",value:function(o){var a=this;o&&(t.__veauryReactRef__=o,this.reactPropsLinkToVueInstance(o),Promise.resolve().then(function(){return a.reactPropsLinkToVueInstance(o)}),(this.setRef.current=o).__veauryVueWrapperRef__=t)}},{key:"createSlot",value:function(o){return{originVNode:o,inheritAttrs:!1,__fromReactSlot:!0,render:function(){var a,u;return((a=o=(o=((u=this.$slots)==null||(a=u.default)==null?void 0:a.call(u))||o)instanceof Function?o(this):o)==null?void 0:a.length)===1&&(u=o[0])!=null&&u.data&&((a=this.$attrs).key,u=T(a,co),o[0].props=p(p({},u),o[0].props)),o}}}},{key:"componentWillUnmount",value:function(){t.__veauryReactRef__&&(t.__veauryReactRef__.__veauryVueWrapperRef__=null,t.__veauryReactRef__=null)}},{key:"vueInReactCall",value:function(o){var a=this,u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return 2<arguments.length&&arguments[2]&&o&&o[0]?o.map(function(i,c){return pe(a.createSlot(i instanceof Function?i:[i]),p(p(p({},n),u),{},{isSlots:!0,wrapInstance:t})).render({key:(i==null?void 0:i.key)||void 0})}):pe(this.createSlot(o),p(p(p({},n),u),{},{isSlots:!0,wrapInstance:t})).render()}},{key:"render",value:function(){var o,a,u,i=this,R=this.state,c=R.hashList,d=T(R,po),h={},_={};for(o in d)a=o,u=void 0,d.hasOwnProperty(a)&&d[a]!=null&&(d[a].__slot?(d[a].reactSlot?d[a]=d[a].reactSlot:(u=d[a],n.defaultSlotsFormatter&&d[a].__trueChildren?(d[a].__trueChildren.__top__=i.__veauryVueWrapperRef__,d[a]=n.defaultSlotsFormatter(d[a].__trueChildren,i.vueInReactCall,c),d[a]instanceof Array?d[a]=be(d[a]):-1<["string","number"].indexOf(A(d[a]))?d[a]=[d[a]]:A(d[a])==="object"&&(d[a]=p({},d[a]))):d[a]=p({},pe(i.createSlot(d[a]),p(p({},n),{},{isSlots:!0,wrapInstance:t})).render()),d[a].vueFunction=u),h[a]=d[a]):d[a].__scopedSlot&&(d[a]=d[a](i.createSlot),_[a]=d[a]));var f,j,R={};return R.ref=this.setRef,n.isSlots?this.state.children||this.props.children:(f=d,e.__syncUpdateForPureReactInVue&&Object.keys(e.__syncUpdateForPureReactInVue).map(function(b){var S,v;f[b]&&typeof f[b]=="function"&&(S=i.__veauryVueWrapperRef__,v=f[b],f[b]=function(){for(var C=arguments.length,w=new Array(C),y=0;y<C;y++)w[y]=arguments[y];S.__veaurySyncUpdateProps__(e.__syncUpdateForPureReactInVue[b].apply(this,w)),v.apply(this,w),S.macroTaskUpdate=!0,S.__veauryMountReactComponent__(!0,!0,{})})}),j=p(p(p({},f=n.defaultPropsFormatter?n.defaultPropsFormatter.call(this,f,this.vueInReactCall,c):f),h),_),Object.getPrototypeOf(e)!==Function.prototype&&(A(e)!=="object"||e.render)||l.catchVueRefs()?(Object.getPrototypeOf(e)===Function.prototype&&delete R.ref,E.createElement(e,G({},j,R))):E.createElement(fo,G({passedProps:j,component:e},R),j.children))}}],[{key:"catchVueRefs",value:function(){if(t.$parent){for(var o in t.$parent.$refs)if(t.$parent.$refs[o]===t)return!0}return!1}}]),l}();return te(r,"displayName","applyReact_".concat(e.displayName||e.name||"Component")),r};function De(e){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return e.__esModule&&e.default&&(e=e.default),n.isSlots&&(e=e()),n=dt(n,void 0,!0),{originReactComponent:e,setup:function(t,r){var s,l,o,a;if(!n.isSlots)return s={},l=K({}),o=$t(),typeof(a=n.useInjectPropsFromWrapper||e.__veauryInjectPropsFromWrapper__)=="function"&&(typeof(a=a.call(o.proxy,t))!="function"?(Object.assign(l,a),s.__veauryInjectedProps__=l):o.proxy.__veauryInjectedComputed__=a),s},data:function(){return{VEAURY_Portals:[]}},created:function(){this.__veauryPortalKeyPool__=[],this.__veauryMaxPortalCount__=0},computed:{__veauryInjectedProps__:function(){var t;return(t=this.__veauryInjectedComputed__)==null?void 0:t.call(this)}},render:function(){var t=W(n.react.componentWrap,p({ref:"react"},n.react.componentWrapAttrs||{}),this.VEAURY_Portals.map(function(l){var s=l.Portal,l=l.key;return s(W,l)}));return this.__veauryCheckReactSlot__(this.$slots),t},methods:{__veauryCheckReactSlot__:function(t){var r=this;function s(l,o,a){return o[a]&&(l[a]=o[a],1)}A(t)==="object"&&t!=null&&(t instanceof Array?t.forEach(function(l){r.__veauryCheckReactSlot__(l.children)}):Object.keys(t).forEach(function(u){var o,a,u=t[u];if(typeof u=="function"){try{o=u.apply(r,u.__reactArgs||[{}])}catch{return}(u.__trueChildren=o).forEach(function(i){i.children&&r.__veauryCheckReactSlot__(i.children)}),o.length!==1||s(u,o=o[0],"reactSlot")||s(u,o,"reactFunction")||o.type!==de||((a=o.children)==null?void 0:a.length)!==1||s(u,a=o.children[0],"reactSlot")||s(u,a,"reactFunction")}}))},__veauryPushVuePortal__:function(t){var r=this.__veauryPortalKeyPool__.shift()||this.__veauryMaxPortalCount__++;this.VEAURY_Portals.push({Portal:t,key:r})},__veauryRemoveVuePortal__:function(t){var r,s=this.VEAURY_Portals.find(function(l,o){if(l.Portal===t)return r=o,!0});this.__veauryPortalKeyPool__.push(s.key),this.VEAURY_Portals.splice(r,1)},__veauryGetScopeSlot__:function(t,r,s){var l=this;function o(a){function u(){for(var i,c=this,d=arguments.length,h=new Array(d),_=0;_<d;_++)h[_]=arguments[_];return t.reactFunction?t.reactFunction.apply(this,h):n.defaultSlotsFormatter?((i=t.apply(this,h)).__top__=l,(i=n.defaultSlotsFormatter(i,l.__veauryVueInReactCall__,r))instanceof Array||-1<A(i).indexOf("string","number")?i=be(i):A(i)==="object"&&(i=p({},i)),i):pe(a(function(){return t.apply(c,h)}),p(p({},n),{},{isSlots:!0,wrapInstance:l})).render()}return n.pureTransformer&&s?u.vueFunction=s:u.vueFunction=t,u}return o.__scopedSlot=!0,o},__veaurySyncUpdateProps__:function(t){this.__veauryReactInstance__&&this.__veauryReactInstance__.setState(t)},__veauryMountReactComponent__:function(t,r){var s,l,o=this,a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},u={},i=[],c=this.$.vnode.scopeId,d=(c&&(u[c]="",i.push(c)),{}),h={};if(!t||r!=null&&r.slot)for(var _ in this.$slots||{})(function(v){var C;o.$slots.hasOwnProperty(v)&&o.$slots[v]!=null&&((C=n.react.vueNamedSlotsKey.find(function(w){return v.indexOf(w)===0}))||v==="default"?(C=v.replace(new RegExp("^".concat(C)),""),d[C]=o.$slots[v],d[C].__slot=!0):h[v]=o.__veauryGetScopeSlot__(o.$slots[v],i,(C=o.$.vnode)==null||(C=C.children)==null?void 0:C[v]))})(_);(!t||r!=null&&r.slot)&&(l=p({},d),s=l.default,delete l.default),this.__veauryLast__=this.__veauryLast__||{},this.__veauryLast__.slot=this.__veauryLast__.slot||{},this.__veauryLast__.attrs=this.__veauryLast__.attrs||{};var f={slot:function(){o.__veauryLast__.slot=p(p(p({},s?{children:s}:{children:null}),l),h)},attrs:function(){o.__veauryLast__.attrs=o.$attrs}};if(r&&Object.keys(r).forEach(function(v){return f[v]()}),t){let v=function(){o.__veauryReactInstance__&&o.__veauryReactInstance__.setState(function(C){return Object.keys(C).forEach(function(w){n.isSlots&&w==="children"||delete C[w]}),p(p(p(p({},o.__veauryCache__),o.__veauryInjectedProps__),!n.isSlots&&o.__veauryLast__.slot),o.__veauryLast__.attrs)}),o.__veauryCache__=null};!this.microTaskUpdate||this.__veauryCache__||this.$nextTick(function(){v(),o.microTaskUpdate=!1}),this.macroTaskUpdate&&(clearTimeout(this.updateTimer),this.updateTimer=setTimeout(function(){clearTimeout(o.updateTimer),v(),o.macroTaskUpdate=!1})),this.__veauryCache__=p(p({},this.__veauryCache__||{}),p(p(p(p({},a),this.$attrs.class?{className:this.$attrs.class}:{}),p({},u)),{},{hashList:i},this.$attrs.style?{style:this.$attrs.style}:{})),this.macroTaskUpdate||this.microTaskUpdate||v()}else{f.slot(),f.attrs();var c=_o(e,n,this),j=E.createElement(c,G({},this.$attrs,this.__veauryInjectedProps__,{children:s},l,h,this.$attrs.class?{className:this.$attrs.class}:{},u,{hashList:i},this.$attrs.style?{style:this.$attrs.style}:{},{ref:function(C){return o.__veauryReactInstance__=C}})),R=this.$refs.react,b=n.wrapInstance;if(b)(b=n.wrapInstance).__veauryVueWrapperRef__=this;else for(var S=this.$parent;S;){if(S.parentReactWrapperRef){b=S.parentReactWrapperRef;break}if(S.reactWrapperRef){b=S.reactWrapperRef;break}S=S.$parent}b?(this.parentReactWrapperRef=b,this.reactPortal=function(){return Et.createPortal(j,R)},b.pushReactPortal(this.reactPortal)):17<He?(oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED!==void 0&&(oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.usingClientEntryPoint=!0),this.__veauryReactApp__=oe.createRoot(R),this.__veauryReactApp__.render(j)):oe.render(j,R)}}},mounted:function(){var t=this;this.__VEAURY_IGNORE_STRANGE_UPDATE__=!0,Promise.resolve().then(function(){t.__VEAURY_IGNORE_STRANGE_UPDATE__=!1}),clearTimeout(this.updateTimer),this.__veauryMountReactComponent__()},beforeUnmount:function(){var t;clearTimeout(this.updateTimer),lo(this.$refs.react),this.reactPortal?(t=this.parentReactWrapperRef)!=null&&t.removeReactPortal(this.reactPortal):17<He?(t=this.__veauryReactApp__)!=null&&t.unmount():oe.unmountComponentAtNode(this.$refs.react),io()},updated:function(){this.__VEAURY_IGNORE_STRANGE_UPDATE__||this.__veauryMountReactComponent__(!0,{slot:!0})},inheritAttrs:!1,watch:{$attrs:{handler:function(){this.__veauryMountReactComponent__(!0,{attrs:!0})},deep:!0},__veauryInjectedProps__:{handler:function(){this.__veauryMountReactComponent__(!0,{attrs:!0})},deep:!0}}}}var ho=new Set(["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onChange","onInput","onInvalid","onReset","onSubmit","onError","onLoad","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onScroll","onWheel","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onLoad","onError","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionEnd","onToggle"]);function mo(e,n){for(var t=(e=n=(e==null?void 0:e._reactInternals)||(e==null?void 0:e._reactInternalFiber)||n)==null?void 0:e.return;t;){var r=t.stateNode;if(r=(r==null?void 0:r.parentVueWrapperRef)||(r==null?void 0:r.__veauryVueWrapperRef__))return r;t=t.return}}function Ke(e,n,t){var r={};return t.forEach(function(s){r[s]=!0}),e[(n==="modelValue"?"model":n)+"Modifiers"]=r}function Ye(e,n,t){var r=this,s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"v-model",l=n;if(!(l instanceof Array))throw Error("[error:veaury] Parameter type error from '".concat(s,"', a single v-model is an array, such as [val, setter, argumentKey, modifiers] or [val, setter, modifiers]"));if(typeof l[1]!="function")throw Error("[error:veaury] Parameter type error from '".concat(s,"', a single v-model is an array, the second element of the array must be a setter function"));var o=l[1],a=(typeof l[2]=="string"?(t=l[2],l[3]instanceof Array&&Ke(e,t,l[3])):l[2]instanceof Array&&Ke(e,t,l[2]),e["onUpdate:"+t]);e["onUpdate:"+t]=typeof a=="function"?function(){for(var u=arguments.length,i=new Array(u),c=0;c<u;c++)i[c]=arguments[c];a.apply(r,i),o.apply(r,i)}:o,e[t]=l[0]}function Pe(e){var n=this,t={},r=p({},e);return Object.keys(e).forEach(function(s){var l,o=s.match(/^onUpdate-([^-]+)/);if(o)delete r[s],l=t["onUpdate:".concat(o[1])],t["onUpdate:".concat(o[1])]=typeof l=="function"?function(){for(var u=arguments.length,i=new Array(u),c=0;c<u;c++)i[c]=arguments[c];l.apply(n,i),e[s].apply(n,i)}:e[s];else if(o=s.match(/^v-model($|:([^:]+)|-([^:]+))/))o=o[2]||o[3]||"modelValue",Ye(t,e[s],o),delete r[s];else if(s==="v-models"){if(A(e[s])!=="object"||e[s]instanceof Array)throw Error("[error:veaury] The parameter 'v-models' must be an object type, such as {[argumentKey]: singleVModel}");var a=e[s];Object.keys(a).forEach(function(u){Ye(t,a[u],u,"v-models")}),delete r[s]}}),p(p({},r),t)}var we=function(){function e(){le(this,e),te(this,"pool",new Set)}return ie(e,[{key:"getRandomId",value:function(n){var t=n+(Math.random()+"").substr(2);return this.pool.has(t)?this.getRandomId(n):(this.pool.add(t),t)}}]),e}();function ht(r,n){var t,r=r.node;if(typeof r=="function"&&(r=r()),(t=n)!=null&&t.current||typeof n=="function"||(t=n)!=null&&t.toString().match(/^function/)||(n=null),-1<["string","number"].indexOf(A(r)))return r;if(r instanceof Array){if(r.length!==1)return r;r=r[0]}return p(p({},r),{},{ref:n})}var vo=De(ht);function $e(e){return W(vo,{node:function(){return e.node}})}$e.originReactComponent=E.forwardRef(ht);var yo=["component","node"],go=["component","$slots","children","class","style"],bo=["className","classname"],B="veaury-options",Ge=new we;function wo(e,n){var t;return e=typeof e=="string"&&n?(n=n.$)==null||(n=n.appContext)==null||(n=n.app)==null||(t=n.component)==null?void 0:t.call(n,e):e}function qe(e){if(e)return Object.keys(e).forEach(function(n){var t=e[n];t!=null&&(typeof t=="function"?(e[n]=t,e[n].reactFunction=t):(e[n]=function(){return t},e[n].reactSlot=t),t.vueFunction&&(e[n].vueFunction=t.vueFunction))}),e}function xo(e){var n;return(n=e.node)==null?void 0:n.call(e)}var Oe=E.forwardRef(function(s,n){var t,o=s.component,r=s.node,s=T(s,yo);if(o==null&&r==null)return null;if(r!=null){if(r.$$typeof||typeof r=="string"||typeof r=="number")return r;typeof r!="function"&&(t=r,r=function(){return t})}var l,o=o||xo,a=dt(s[B]||{},void 0,!0),u=a.useInjectPropsFromWrapper||o.__veauryInjectPropsFromWrapper__;return a.isSlots||typeof u=="function"&&(l=u(s)),E.createElement(Co,G({},p(p(p(p({component:o},r?{node:r}:{}),s),l),{},te({},B,a)),{ref:n}))}),Co=function(){ye(n,E.Component);var e=ge(n);function n(t){var r;return le(this,n),(r=e.call(this,t)).state={portals:[]},r.__veauryPortalKeyPool__=[],r.__veauryMaxPortalCount__=0,r.__veauryCurrentVueComponent__=t.component,r.__veauryCreateVueInstance__=r.__veauryCreateVueInstance__.bind(fe(r)),r.__veauryVueComponentContainer__=r.createVueComponentContainer(),r}return ie(n,[{key:"pushReactPortal",value:function(t){var r=this.state.portals,s=this.__veauryPortalKeyPool__.shift()||this.__veauryMaxPortalCount__++;r.push({Portal:t,key:s}),this.setState({portals:r})}},{key:"removeReactPortal",value:function(t){var r,s=this.state.portals,l=s.find(function(o,a){if(o.Portal===t)return r=a,!0});this.__veauryPortalKeyPool__.push(l.key),s.splice(r,1),this.__veauryVueRef__&&this.setState({portals:s})}},{key:"createVueComponentContainer",value:function(){var t=this,r={},s=this.props[B];return s.isSlots?(Object.keys(this.props).forEach(function(l){ho.has(l)&&typeof t.props[l]=="function"&&(r[l]=t.props[l])}),s.vue.slotWrapAttrs&&(r=p(p({},r),s.vue.slotWrapAttrs))):s.vue.componentWrapAttrs&&(r=p(p({},r),s.vue.componentWrapAttrs)),s.vue.componentWrapHOC(E.createElement("div",G({},s.vue.componentWrapAttrs,{ref:this.__veauryCreateVueInstance__,key:null})),r)}},{key:"shouldComponentUpdate",value:function(t,r,s){var l,o,a,u,i=this;return t!==this.props&&(l=t.component,t[B],o=(o=t["v-slots"])===void 0?null:o,a=t.children,t=T(t,["component",B,"v-slots","children"].map(Be)),this.__veauryCurrentVueComponent__!==l&&this.updateVueComponent(l),l.__fromReactSlot||this.__veauryVueInstance__&&(a&&(o=o||{},A(a)!=="object"||a instanceof Array||a.$$typeof?o.default=a:o=a),(u=this.__veauryVueInstance__.$data.$slots)&&Object.keys(u).forEach(function(c){delete u[c]}),o&&(u||(this.__veauryVueInstance__.$data.$slots={}),Object.assign(this.__veauryVueInstance__.$data.$slots,qe(o))),Object.keys(this.__veauryVueInstance__.$data).forEach(function(c){c!=="$slots"&&delete i.__veauryVueInstance__.$data[c]}),this.__veauryVueInstance__&&Object.assign(this.__veauryVueInstance__.$data,Pe(t)))),!0}},{key:"componentWillUnmount",value:function(){this.vuePortal?this.parentVueWrapperRef.__veauryRemoveVuePortal__(this.vuePortal):(this.__veauryVueInstance__&&this.__veauryVueInstance__.$.appContext.app.unmount(),Ge.pool.delete(this.__veauryVueTargetId__),this.vueCreated=!1)}},{key:"componentDidMount",value:function(){this.__veauryCreateVueInstance__(this.vueContainerElement)}},{key:"__veauryCreateVueInstance__",value:function(t){var r,s,l,o,a,u,i,c,d=this;function h(_){this.__veauryVueInstance__||(this.__veauryVueInstance__=_)}this.vueCreated||(this.vueCreated=!0,(r=this).vueContainerElement=t,(l=this.props).component,s=l[B],i=l.children,c=(c=l["v-slots"])===void 0?{}:c,l=T(l,["component",B,"children","v-slots"].map(Be)),i&&(A(i)!=="object"||i instanceof Array||i.$$typeof?c.default=i:c=i),(c=qe(c))&&(l.$slots=c),h=h.bind(this),o=p({},Pe(l)),a={data:function(){return s.isSlots?{children:r.__veauryCurrentVueComponent__.originVNode}:o},created:function(){this.reactWrapperRef=r,h(this)},methods:{reactInVueCall:function(_){return 2<arguments.length&&arguments[2]&&_&&_[0]?_.map(function(f,j){return W($e,{node:f,key:(f==null||(f=f.data)==null?void 0:f.key)||j})}):W($e,{node:_})},getScopedSlots:function(_,f){var j,R=this,b=(this.getScopedSlots.__scopeSlots||(this.getScopedSlots.__scopeSlots={}),p({},f));for(j in b)(function(S){var v,C;!b.hasOwnProperty(S)||(v=b[S])==null||(b[S]=(C=v,function(){for(var w,y,O,M,F=arguments.length,L=new Array(F),D=0;D<F;D++)L[D]=arguments[D];return C.vueFunction?C.vueFunction.apply(R,L):(O=C.reactSlot,M=C.reactFunction,O=O||(M==null?void 0:M.apply(R,L)),M=s.defaultSlotsFormatter,(w=R.getScopedSlots.__scopeSlots[S])!=null&&(w=w.component)!=null&&(w=w.ctx)!=null&&w.__veauryReactInstance__?(y=R.getScopedSlots.__scopeSlots[S],Promise.resolve().then(function(){var N;(N=y)!=null&&(N=N.component)!=null&&(N=N.ctx)!=null&&(N=N.__veauryReactInstance__)!=null&&N.setState({children:C.apply(R,L)})})):(y=M&&O?[M(O,R.reactInVueCall)]:_(De(function(){return C.apply(R,L)},p(p({},s),{},{isSlots:!0,wrapInstance:r}))),R.getScopedSlots.__scopeSlots[S]=y),C.reactFunction?y.reactFunction=C.reactFunction:C.reactSlot&&(y.reactSlot=C.reactSlot),y)}),b[S].reactFunction=v)})(j);return b}},mounted:function(){t.removeAttribute("id"),r.__veauryVueRef__=this.$refs.use_vue_wrapper,this.$refs.use_vue_wrapper.reactWrapperRef=r},beforeUnmount:function(){r.__veauryVueRef__=null,this.$refs.use_vue_wrapper.reactWrapperRef=null},render:function(){var _=this,v=this.$data,b=(v.component,v.$slots),f=(v.children,v.class),j=v.style,v=T(v,go),R=this.getScopedSlots(W,p({},b)),b=v.className,S=v.classname,v=T(v,bo),C={};return Object.keys(R).forEach(function(w){var y=R[w];C[w]=typeof y=="function"?y:function(){return y}}),W(wo(r.__veauryCurrentVueComponent__,this),p(p(p(p({},v),f||b||S?{class:f||b||S}:{}),j?{style:j}:{}),{},{ref:"use_vue_wrapper"}),p({},s.isSlots&&this.children?{default:typeof this.children=="function"?this.children:function(){return _.children}}:p({},C)))}},t&&(u=Ge.getRandomId("__vue_wrapper_container_"),t.id=u,this.__veauryVueTargetId__=u,(i=s.wrapInstance)?(i=s.wrapInstance).reactWrapperRef=r:i=mo(this),i&&document.getElementById(u)?(this.parentVueWrapperRef=i,this.vuePortal=function(_,f){return _(Vt,{to:"#"+u,key:u},[_(Object.assign(a,{router:d._router}))])},i.__veauryPushVuePortal__(this.vuePortal)):(c=me(a),typeof s.beforeVueAppMount=="function"&&s.beforeVueAppMount(c),this.__veauryVueInstance__=c.mount(t))))}},{key:"updateVueComponent",value:function(t){this.__veauryVueInstance__&&(t.__fromReactSlot?this.__veauryVueInstance__.children=typeof t.originVNode=="function"?t.originVNode:function(){return t.originVNode}:(this.__veauryCurrentVueComponent__=t,this.__veauryVueInstance__.$forceUpdate()))}},{key:"render",value:function(){return E.createElement(this.__veauryVueComponentContainer__,{portals:this.state.portals})}}]),n}();function pe(e){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},t=(e||console.warn("Component must be passed in applyVueInReact!"),e.__esModule&&e.default&&(e=e.default),E.forwardRef(function(r,s){return E.createElement(Oe,G({},r,{component:e,ref:s},te({},B,n)))}));return t.originVueComponent=e,t}new we;function Ro(e){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},t=n.globalName,r=n.combinedOption,s=(n.transparentApi,De(e,r||{}));return s.install=function(l){var o=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).globalName;return t&&l.component(o||t,s),s},s}function Xe(e){return e.replace(/-(\w)/g,function(n,t){return t.toUpperCase()})}function xe(e){var n;return e?typeof e=="string"?(e=e.trim()).split(/\s*;\s*/).reduce(function(t,r){return r&&(r=r.split(/\s*:\s*/)).length===2&&Object.assign(t,te({},Xe(r[0]),r[1])),t},{}):A(e)==="object"?(n={},Object.keys(e).forEach(function(t){n[Xe(t)]=e[t]}),n):{}:{}}function Ce(e){return e?e instanceof Array?e:typeof e=="string"?(e=e.trim()).split(/\s+/):A(e)==="object"?Object.keys(e).filter(function(n){return!!e[n]}):[]:[]}var So=["ref"];function jo(e,n,t,r,s){var l=e.props||{},l=(l.ref,T(l,So)),o={},a=(Object.keys(e.children||{}).forEach(function(c){var d=e.children[c],h=ft.react.vueNamedSlotsKey.find(function(_){return c.indexOf(_)===0});h||c==="default"?(h=c.replace(new RegExp("^".concat(h)),"").replace(/^default$/,"children"),o[h]=r.call(e.__top__,d(),t,s)):typeof d=="function"&&(o[c]=function(){for(var _=arguments.length,f=new Array(_),j=0;j<_;j++)f[j]=arguments[j];return d.__reactArgs=f,r(d.apply(this,f),t,s)})}),{}),u=xe(l.style),i=Array.from(new Set(Ce(l.class))).join(" ");return 0<Object.keys(u).length&&(a.style=u),i!==""&&(a.className=i),Object.assign(l,p(p({},a),o)),delete l.class,typeof l.ref_for=="boolean"&&delete l.ref_for,l}function Ze(e){return e.type===Ot}new we;function mt(e,n){var t;return 0<((t=e.dirs)==null?void 0:t.length)?E.createElement(ko,{vnode:e},n):n}var ko=function(){ye(n,E.Component);var e=ge(n);function n(t){var r;return le(this,n),(r=e.call(this,t)).state={prevVnode:null,savedDirectives:[],ref:null,prevProps:t},r}return ie(n,[{key:"findDirectiveName",value:function(t){var r=t.dir,s=-1;return[this.state.savedDirectives.find(function(l,o){if(l.dir===r)return s=o,!0}),s]}},{key:"doDirective",value:function(){var t=this,o=this.state,r=o.savedDirectives;if(!(s=o.ref)){for(var s=(this._reactInternals||this._reactInternalFiber).child;s&&s.tag!==5;)s=s.child;if(!s)return;s=s.stateNode}var l=this.props.vnode,o=l.dirs;o&&(o.forEach(function(a){var u,i,c,d,h,_,f;a&&(f=(u=We(t.findDirectiveName(a),2))[0],u=u[1],i=(h=a.dir).created,c=h.beforeMount,d=h.mounted,_=h.beforeUpdate,h=h.updated,f?(r[u]=p(p(p({},f),a),{},{oldValue:f.oldValue}),f=[s,r[u],l,t.state.prevVnode],_!=null&&_.apply(null,f),h!=null&&h.apply(null,f),r[u].oldValue=a.value):(r.push(a),_=[s,a,l,null],i!=null&&i.apply(null,_),c!=null&&c.apply(null,_),d!=null&&d.apply(null,_),a.oldValue=a.value))}),this.setState({prevVnode:p({},l),savedDirectives:r,ref:s}))}},{key:"componentDidMount",value:function(){this.doDirective()}},{key:"componentDidUpdate",value:function(t){t.vnode!==this.props.vnode&&this.doDirective()}},{key:"componentWillUnmount",value:function(){var t=this,r=this.props.vnode,a=this.state,s=a.savedDirectives,l=a.ref,o=a.prevVnode,a=r.dirs;a&&(a.forEach(function(u){var i,c,d,h;u&&(i=(h=We(t.findDirectiveName(u),2))[0],h=h[1],i&&(c=(d=u.dir).beforeUnmount,d=d.unmounted,s[h]=p(p({},i),u),h=[l,i,r,o],c!=null&&c.apply(null,h),d!=null&&d.apply(null,h)))}),this.setState({prevVnode:p({},r),savedDirectives:s}))}},{key:"render",value:function(){var t=this.props;return t.vnode,t.children}}]),n}();function Io(e,n){var t;return typeof e=="function"&&(t=e.toString(),e.prototype!==void 0&&e.prototype.constructor===e&&(t.slice(0,5)=="class"||2<=Object.getOwnPropertyNames(e.prototype).length||!/^function\s+\(|^function\s+anonymous\(/.test(t)&&!!/\b\(this\b|\bthis[\.\[]\b/.test(t)&&!n))}function vt(e,n){var t,r,s,l;return typeof((s=e.type)==null?void 0:s.originReactComponent)!="function"||Io((s=e.type)==null?void 0:s.originReactComponent)?((s=e.ref)!=null&&s.k?(t=(s=e.ref)==null?void 0:s.k,r=(s=e.ref)==null?void 0:s.r):t=(s=e.ref)==null?void 0:s.r,t&&typeof t=="string"&&(l=t,t=function(o){var a;(a=e.ref)!=null&&(a=a.i)!=null&&a.refs&&((a=p({},e.ref.i.refs))[l]=o,e.ref.i.refs=a),r?r.value=o:e.ref.i.setupState&&l in e.ref.i.setupState&&(e.ref.i.setupState[l]=o),o&&(o.__syncUpdateProps=function(){n.__top__&&(e.__extraData=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},n.__top__.__syncUpdateProps({}))})},t=new Proxy(t,{get:function(o,a){return o[a]},set:function(o,a,u){var i;return(i=e.ref)!=null&&(i=i.i)!=null&&i.refs&&l in((i=e.ref)==null||(i=i.i)==null?void 0:i.refs)&&((i=p({},e.ref.i.refs))[a]=u,e.ref.i.refs=i),u}})),t):null}function Ae(e,n){return!n||n instanceof Array&&n.length===0||(typeof n=="string"&&(n=[n]),(e=p({},e)).props=p({},e.props),n.forEach(function(t){e.props[t]=""})),e}var Eo=["style","class"];function Je(e,n,t,r,s,l,o){var a,u,i;return n==="all"||n instanceof Array||(n=n?[n]:[]),e.type===de?s.call(o,e.children,t,l):typeof e.type=="string"&&(n==="all"||-1<n.indexOf(e.type))?(n=vt(e),i=(u=e.props||{}).style,a=u.class,u=p(p({},T(u,Eo)),{},{style:xe(i),className:Array.from(new Set(Ce(a))).join(" ")},n?{ref:n}:{}),(i=e.children||u.children)&&((i=-1<["string","number"].indexOf(A(i))?[i]:be(i)).__top__=o),mt(e,Ae(at.createElement(e.type,u,s.call(o,i,t,l)),e.scopeId))):t([e],null,r)}function Vo(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0,t=2<arguments.length?arguments[2]:void 0;return t.__syncUpdateForPureReactInVue&&Object.keys(t.__syncUpdateForPureReactInVue).map(function(r){var s;e[r]&&typeof e[r]=="function"&&n.__top__&&(s=e[r],e[r]=function(){for(var l=arguments.length,o=new Array(l),a=0;a<l;a++)o[a]=arguments[a];n.__extraData=t.__syncUpdateForPureReactInVue[r].apply(this,o),n.__top__.__veaurySyncUpdateProps__({}),n.__top__.macroTaskUpdate=!0,s.apply(this,o),n.__top__&&Promise.resolve().then(function(){n.__extraData=null,n.__top__.__veauryMountReactComponent__(!0)})})}),e}function Qe(e,n,t){return!((e=e instanceof Array&&e.length===1?e[0]:e)instanceof Array)&&e.key==null&&1<n.length&&((e=p({},e)).key="_key_".concat(t)),e}function yt(r){var n=r.reactComponents,t=r.domTags,r=r.division,s=r===void 0||r;return function l(o,a,u){var i;return o&&o.forEach?(o.__top__||(o.__top__=this),i=[],o.forEach(function(c,d){if(c&&c.type!==Pt){if((f=c.type)==null||!f.originReactComponent)return c.$$typeof||typeof c=="string"||typeof c=="number"?void i.push(c):Ze(c)?void(c.children.trim()!==""&&i.push(c.children.trim())):void(c.type&&(Ae(f=Qe(Je(c,t,a,s,l,u,o.__top__),o,d),c.scopeId),i.push(f)));var h,_,f=c.type.originReactComponent;Ae(h=Qe(h=(n=n==="all"||n instanceof Array?n:[n])==="all"||-1<n.indexOf(f)?(c.__top__=o.__top__,h=jo(c,"_key_".concat(d),a,l,u),_=vt(c,o),c.children&&(c.children.__top__=o.__top__),mt(c,at.createElement(f,p(p(p({},Vo(h,c,f)),c.__extraData||{}),_?{ref:_}:{})))):Ze(c)?c.text:Je(c,t,a,s,l,u),o,d),c.scopeId),i.push(h)}}),i.length===1?i[0]:i):o}}var Se=yt({reactComponents:"all",domTags:"all"});function Po(e,n){return Ro(e,{combinedOption:p({pureTransformer:!0,defaultSlotsFormatter:Se,defaultPropsFormatter:function(t,r,s){var l={};return Object.keys(t).forEach(function(o){var a=t[o];a&&(a.vueFunction?(l[o]=function(){for(var u=arguments.length,i=new Array(u),c=0;c<u;c++)i[c]=arguments[c];return Se(a.vueFunction.apply(this,i),r,s)},Object.defineProperty(l[o],"length",{get:function(){return a.vueFunction.length}})):a.vueSlot&&(l[o]=Se(a.vueSlot,r,s)))}),Object.assign(t,l)}},n)})}yt({reactComponents:"all",domTags:"all"});var $o=["ref","children","v-slots"];function Oo(u,n,t,r,s){var u=u.props||{},i=(u.ref,u.children),o=u["v-slots"],l=o===void 0?{}:o,o=T(u,$o),a=(i&&(A(i)!=="object"||i instanceof Array||i.$$typeof?l.default=i:l=i),null),u=(Object.keys(l||{}).forEach(function(d){var h=l[d];(a=a||{})[d]=function(){if(typeof h=="function"){for(var _=arguments.length,f=new Array(_),j=0;j<_;j++)f[j]=arguments[j];h=h.apply(this,f)}return r(h,t,s)}}),{}),i=xe(o.style),c=Array.from(new Set(Ce(o.className))).join(" ");return 0<Object.keys(i).length&&(u.style=i),c!==""&&(u.class=c),Object.assign(o,p({},u)),delete o.className,{props:o=Pe(o),slots:a}}function gt(e){var n=e.ref;if(n)return A(n)==="object"?function(t){e.ref.current=t}:typeof n=="function"?n:void 0}var Ao=["style","class","children"];function et(e,n,t,r,s,l){var o,a,u,i;return n==="all"||n instanceof Array||(n=n?[n]:[]),e.type===E.Fragment?s((o=e.props)==null?void 0:o.children,t):typeof e.type=="string"&&(n==="all"||-1<n.indexOf(e.type))?(o=gt(e),i=(n=e.props||{}).style,u=n.class,a=n.children,n=T(n,Ao),u=Array.from(new Set(Ce(u))).join(" "),i=xe(i),n=p(p(p(p({},n),Object.keys(i).length===0?{}:{style:i}),u?{className:u}:{}),o?{ref:o}:{}),Object.keys(n).length===0&&(n=null),(i=a)&&((i=-1<["string","number"].indexOf(A(i))?[i]:i instanceof Array?be(i):p({},i)).__top__=l),W(e.type,n,s(i,t))):t([e],null,r)}function bt(r){var n=r.vueComponents,t=r.domTags,r=r.division,s=r===void 0||r;return function l(o,a){if(o==null)return o;o instanceof Array||(o=[o]);var u=[];return o.forEach(function(i,c){if(((d=i.type)==null||!d.originVueComponent)&&i.type!==Oe)return i.__v_isVNode||typeof i=="string"||typeof i=="number"?void u.push(i):void(i.type&&(d=et(i,t,a,s,l,o.__top__),u.push(d)));var d=i.type.originVueComponent;if(i.type===Oe){if(!i.props.component)return void u.push(i.props.node);d=i.props.component,i=p({},i);var h=p({},i.props);delete h.component,i.props=h}d=(n=n==="all"||n instanceof Array?n:[n])==="all"||-1<n.indexOf(d)?((i=p({},i)).__top__=o.__top__,c=(h=Oo(i,"_key_".concat(c),a,l)).props,h=h.slots,gt(i),i.children&&(i.children.__top__=o.__top__),W(d,p({},c),h)):et(i,t,a,s,l),u.push(d)}),(u=u.flat(1/0)).length===1?u[0]:u}}bt({vueComponents:"all",domTags:"all"});bt({reactComponents:"all",domTags:"all"});new we;const Mo={class:"flex flex-1 overflow-hidden gap-4 py-4 h-full"},Do={class:"w-[340px] pl-4 flex flex-col overflow-hidden"},No=q({__name:"index",setup(e){const n=Po(Xn),t=X(),r=At(),s=P(!0),l=P(),o=async a=>{if(t.dragInfo)try{a.preventDefault(),t.loading=!0,t.dragInfo.category==="template_psd"?await t.addTemplate(t.dragInfo.psdMetadata):await t.addMaterial(t.dragInfo)}finally{t.loading=!1}};return _e(()=>{l.value=setInterval(async()=>{await r.saveProject()},30*1e3)}),ot(()=>{clearInterval(l.value)}),(a,u)=>{const i=Tt,c=Lt,d=qt,h=ee,_=Kt,f=se;return V(),$("div",Mo,[x(Mt,{name:"slide-fade"},{default:I(()=>[Y(k("div",Do,[x(c,{type:"border-card",class:"flex-1 overflow-hidden"},{default:I(()=>[x(i,{class:"h-full",label:"素材区"},{default:I(()=>[x(hn)]),_:1}),x(i,{class:"h-full",label:"模板区"},{default:I(()=>[x(vn)]),_:1})]),_:1})],512),[[Dt,m(s)]])]),_:1}),Y((V(),$("div",{class:"flex-1 relative",onDrop:o,"element-loading-text":"资源加载中..."},[k("div",{class:je(["cursor-pointer absolute top-1/2 z-[100] bg-[#e9e9e9] dark:bg-[#33333b] flex justify-center items-center rounded-[50%] p-2",m(s)?"-left-6":"-left-2"]),onClick:u[0]||(u[0]=j=>s.value=!m(s))},[m(s)?(V(),Q(h,{key:0,color:"#b3b3b8"},{default:I(()=>[x(d)]),_:1})):(V(),Q(h,{key:1,color:"#b3b3b8"},{default:I(()=>[x(_)]),_:1}))],2),x(m(n))],32)),[[f,m(t).loading]])])}}});export{No as default};
