import{d as di,e as me,g as be,N as as,D as is,r as Ve,G as os,a as ss,O as us,F as fs,l as ls,f as cs,W as vs,u as ds,s as ps,Y as hs,A as gs}from"./index-C9HzHbyJ.js";import{d as ms}from"./constant-DzChqTSo.js";function bs(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return r.map(function(n){return n.split(" ").map(function(a){return a?""+t+a:""}).join(" ")}).join(" ")}function Ss(t,r){return r.replace(/([^}{]*){/gm,function(e,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function Xt(t,r){return function(e){e&&(t[r]=e)}}function pi(t,r,e){return function(n){n&&(t[r][e]=n)}}function Da(t,r){return function(e){var n=e.prototype;t.forEach(function(a){r(n,a)})}}function xs(t,r){return r===void 0&&(r={}),function(e,n){t.forEach(function(a){var i=r[a]||a;i in e||(e[i]=function(){for(var o,s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var f=(o=this[n])[a].apply(o,s);return f===this[n]?this:f})})}}var Es=function(){function t(){this.keys=[],this.values=[]}var r=t.prototype;return r.get=function(e){return this.values[this.keys.indexOf(e)]},r.set=function(e,n){var a=this.keys,i=this.values,o=a.indexOf(e),s=o===-1?a.length:o;a[s]=e,i[s]=n},t}(),_s=function(){function t(){this.object={}}var r=t.prototype;return r.get=function(e){return this.object[e]},r.set=function(e,n){this.object[e]=n},t}(),Cs=typeof Map=="function",ys=function(){function t(){}var r=t.prototype;return r.connect=function(e,n){this.prev=e,this.next=n,e&&(e.next=this),n&&(n.prev=this)},r.disconnect=function(){var e=this.prev,n=this.next;e&&(e.next=n),n&&(n.prev=e)},r.getIndex=function(){for(var e=this,n=-1;e;)e=e.prev,++n;return n},t}();function Ds(t,r){var e=[],n=[];return t.forEach(function(a){var i=a[0],o=a[1],s=new ys;e[i]=s,n[o]=s}),e.forEach(function(a,i){a.connect(e[i-1])}),t.filter(function(a,i){return!r[i]}).map(function(a,i){var o=a[0],s=a[1];if(o===s)return[0,0];var u=e[o],f=n[s-1],c=u.getIndex();u.disconnect(),f?u.connect(f,f.next):u.connect(void 0,e[0]);var v=u.getIndex();return[c,v]})}var Ms=function(){function t(e,n,a,i,o,s,u,f){this.prevList=e,this.list=n,this.added=a,this.removed=i,this.changed=o,this.maintained=s,this.changedBeforeAdded=u,this.fixed=f}var r=t.prototype;return Object.defineProperty(r,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(r,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),r.caculateOrdered=function(){var e=Ds(this.changedBeforeAdded,this.fixed),n=this.changed,a=[];this.cacheOrdered=e.filter(function(i,o){var s=i[0],u=i[1],f=n[o],c=f[0],v=f[1];if(s!==u)return a.push([c,v]),!0}),this.cachePureChanged=a},t}();function Vr(t,r,e){var n=Cs?Map:e?_s:Es,a=e||function(b){return b},i=[],o=[],s=[],u=t.map(a),f=r.map(a),c=new n,v=new n,l=[],d=[],p={},h=[],g=0,m=0;return u.forEach(function(b,S){c.set(b,S)}),f.forEach(function(b,S){v.set(b,S)}),u.forEach(function(b,S){var x=v.get(b);typeof x>"u"?(++m,o.push(S)):p[x]=m}),f.forEach(function(b,S){var x=c.get(b);typeof x>"u"?(i.push(S),++g):(s.push([x,S]),m=p[S]||0,l.push([x-m,S-g]),d.push(S===x),x!==S&&h.push([x,S]))}),o.reverse(),new Ms(t,r,i,o,h,s,l,d)}var ws=function(){function t(e,n){e===void 0&&(e=[]),this.findKeyCallback=n,this.list=[].slice.call(e)}var r=t.prototype;return r.update=function(e){var n=[].slice.call(e),a=Vr(this.list,n,this.findKeyCallback);return this.list=n,a},t}(),Rs="function",Os="object",Ts="string",Ps="number",kn="undefined",hi=typeof window!==kn,Bs=typeof document!==kn&&document,Is=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],mt=1e-7,ee={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,r){return t*r/100},vw:function(t,r){return r===void 0&&(r=window.innerWidth),t/100*r},vh:function(t,r){return r===void 0&&(r=window.innerHeight),t/100*r},vmax:function(t,r){return r===void 0&&(r=Math.max(window.innerWidth,window.innerHeight)),t/100*r},vmin:function(t,r){return r===void 0&&(r=Math.min(window.innerWidth,window.innerHeight)),t/100*r}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Gs(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),a=0,r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}function sr(t,r,e,n){return(t*n+r*e)/(e+n)}function qr(t){return typeof t===kn}function Wt(t){return t&&typeof t===Os}function bt(t){return Array.isArray(t)}function Gt(t){return typeof t===Ts}function an(t){return typeof t===Ps}function Fn(t){return typeof t===Rs}function zs(t,r){var e=t===""||t==" ",n=r===""||r==" ";return n&&e||t===r}function gi(t,r,e,n,a){var i=Nn(t,r,e);return i?e:As(t,r,e+1,n,a)}function Nn(t,r,e){if(!t.ignore)return null;var n=r.slice(Math.max(e-3,0),e+3).join("");return new RegExp(t.ignore).exec(n)}function As(t,r,e,n,a){for(var i=function(f){var c=r[f].trim();if(c===t.close&&!Nn(t,r,f))return{value:f};var v=f,l=Ut(a,function(d){var p=d.open;return p===c});if(l&&(v=gi(l,r,f,n,a)),v===-1)return o=f,"break";f=v,o=f},o,s=e;s<n;++s){var u=i(s);if(s=o,typeof u=="object")return u.value;if(u==="break")break}return-1}function Ln(t,r){var e=Gt(r)?{separator:r}:r,n=e.separator,a=n===void 0?",":n,i=e.isSeparateFirst,o=e.isSeparateOnlyOpenClose,s=e.isSeparateOpenClose,u=s===void 0?o:s,f=e.openCloseCharacters,c=f===void 0?Is:f,v=c.map(function(_){var R=_.open,y=_.close;return R===y?R:R+"|"+y}).join("|"),l="(\\s*"+a+"\\s*|"+v+"|\\s+)",d=new RegExp(l,"g"),p=t.split(d).filter(function(_){return _&&_!=="undefined"}),h=p.length,g=[],m=[];function b(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var S=function(_){var R=p[_].trim(),y=_,w=Ut(c,function(T){var P=T.open;return P===R}),O=Ut(c,function(T){var P=T.close;return P===R});if(w){if(y=gi(w,p,_,h,c),y!==-1&&u)return b()&&i||(g.push(p.slice(_,y+1).join("")),_=y,i)?(x=_,"break"):(x=_,"continue")}else if(O&&!Nn(O,p,_)){var D=Gs(c);return D.splice(c.indexOf(O),1),{value:Ln(t,{separator:a,isSeparateFirst:i,isSeparateOnlyOpenClose:o,isSeparateOpenClose:u,openCloseCharacters:D})}}else if(zs(R,a)&&!o)return b(),i?(x=_,"break"):(x=_,"continue");y===-1&&(y=h-1),m.push(p.slice(_,y+1).join("")),_=y,x=_},x,C=0;C<h;++C){var E=S(C);if(C=x,typeof E=="object")return E.value;if(E==="break")break}return m.length&&g.push(m.join("")),g}function er(t){return Ln(t,"")}function cr(t){return Ln(t,",")}function mi(t){var r=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!r||r.length<4?{}:{prefix:r[1],value:r[2],suffix:r[3]}}function jr(t){var r=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!r)return{prefix:"",unit:"",value:NaN};var e=r[1],n=r[2],a=r[3];return{prefix:e,unit:a,value:parseFloat(n)}}function ks(t){return t.replace(/[\s-_]+([^\s-_])/g,function(r,e){return e.toUpperCase()})}function Se(t,r){return t.replace(/([a-z])([A-Z])/g,function(e,n,a){return""+n+r+a.toLowerCase()})}function Nr(){return Date.now?Date.now():new Date().getTime()}function $t(t,r,e){e===void 0&&(e=-1);for(var n=t.length,a=0;a<n;++a)if(r(t[a],a,t))return a;return e}function Ut(t,r,e){var n=$t(t,r);return n>-1?t[n]:e}var bi=function(){var t=Nr(),r=hi&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return r?r.bind(window):function(e){var n=Nr(),a=setTimeout(function(){e(n-t)},1e3/60);return a}}(),Fs=function(){var t=hi&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(r){clearTimeout(r)}}();function Rr(t){return Object.keys(t)}function lt(t,r){var e=jr(t),n=e.value,a=e.unit;if(Wt(r)){var i=r[a];if(i){if(Fn(i))return i(n);if(ee[a])return ee[a](n,i)}}else if(a==="%")return n*r/100;return ee[a]?ee[a](n):n}function on(t,r,e){return Math.max(r,Math.min(t,e))}function Ma(t,r,e,n){return n===void 0&&(n=t[0]/t[1]),[[Z(r[0],mt),Z(r[0]/n,mt)],[Z(r[1]*n,mt),Z(r[1],mt)]].filter(function(a){return a.every(function(i,o){var s=r[o],u=Z(s,mt);return e?i<=s||i<=u:i>=s||i>=u})})[0]||t}function Ns(t,r,e,n){if(!n)return t.map(function(d,p){return on(d,r[p],e[p])});var a=t[0],i=t[1],o=n===!0?a/i:n,s=Ma(t,r,!1,o),u=s[0],f=s[1],c=Ma(t,e,!0,o),v=c[0],l=c[1];return a<u||i<f?(a=u,i=f):(a>v||i>l)&&(a=v,i=l),[a,i]}function Ls(t){for(var r=t.length,e=0,n=r-1;n>=0;--n)e+=t[n];return e}function sn(t){for(var r=t.length,e=0,n=r-1;n>=0;--n)e+=t[n];return r?e/r:0}function ht(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=Math.atan2(n,e);return a>=0?a:a+Math.PI*2}function Ys(t){return[0,1].map(function(r){return sn(t.map(function(e){return e[r]}))})}function un(t){var r=Ys(t),e=ht(r,t[0]),n=ht(r,t[1]);return e<n&&n-e<Math.PI||e>n&&n-e<-Math.PI?1:-1}function Nt(t,r){return Math.sqrt(Math.pow((r?r[0]:0)-t[0],2)+Math.pow((r?r[1]:0)-t[1],2))}function Z(t,r){if(!r)return t;var e=1/r;return Math.round(t/r)/e}function wa(t,r){return t.forEach(function(e,n){t[n]=Z(t[n],r)}),t}function _t(t,r){return t.classList?t.classList.contains(r):!!t.className.match(new RegExp("(\\s|^)"+r+"(\\s|$)"))}function Si(t,r){t.classList?t.classList.add(r):t.className+=" "+r}function xi(t,r){if(t.classList)t.classList.remove(r);else{var e=new RegExp("(\\s|^)"+r+"(\\s|$)");t.className=t.className.replace(e," ")}}function Mt(t,r,e,n){t.addEventListener(r,e,n)}function yt(t,r,e,n){t.removeEventListener(r,e,n)}function Ws(t){return(t==null?void 0:t.ownerDocument)||Bs}function qe(t){var r;return((r=t==null?void 0:t.ownerDocument)===null||r===void 0?void 0:r.defaultView)||window}function Xs(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var fn=function(t,r){return fn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},fn(t,r)};function gr(t,r){fn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var tr=function(){return tr=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},tr.apply(this,arguments)};function Ei(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e}function Hs(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),a=0,r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}function ln(t,r){if(t===r)return!1;for(var e in t)if(!(e in r))return!0;for(var e in r)if(t[e]!==r[e])return!0;return!1}function Yn(t,r){var e=Object.keys(t),n=Object.keys(r),a=Vr(e,n,function(u){return u}),i={},o={},s={};return a.added.forEach(function(u){var f=n[u];i[f]=r[f]}),a.removed.forEach(function(u){var f=e[u];o[f]=t[f]}),a.maintained.forEach(function(u){var f=u[0],c=e[f],v=[t[c],r[c]];t[c]!==r[c]&&(s[c]=v)}),{added:i,removed:o,changed:s}}function _i(t){t.forEach(function(r){r()})}function Ra(t){var r=0;return t.map(function(e){return e==null?"$compat"+ ++r:""+e})}function Oa(t,r,e,n){if(Gt(t)||an(t))return new $s("text_"+t,r,e,n,null,{});var a=typeof t.type=="string"?Us:t.type.prototype.render?Zs:Ks;return new a(t.type,r,e,n,t.ref,t.props)}function Ci(t){var r=[];return t.forEach(function(e){r=r.concat(bt(e)?Ci(e):e)}),r}function Ta(t){var r=t.className,e=Ei(t,["className"]);return r!=null&&(e.class=r),delete e.style,delete e.children,e}function je(t,r){if(!r)return t;for(var e in r)qr(t[e])&&(t[e]=r[e]);return t}function At(t,r){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var a=r||{},i=a.key,o=a.ref,s=Ei(a,["key","ref"]);return{type:t,key:i,ref:o,props:tr(tr({},s),{children:Ci(e).filter(function(u){return u!=null&&u!==!1})})}}var $r=function(){function t(e,n,a,i,o,s){s===void 0&&(s={}),this.type=e,this.key=n,this.index=a,this.container=i,this.ref=o,this.props=s,this._providers=[]}var r=t.prototype;return r._should=function(e,n){return!0},r._update=function(e,n,a,i){if(this.base&&!Gt(n)&&!i&&!this._should(n.props,a))return!1;this.original=n,this._setState(a);var o=this.props;return Gt(n)||(this.props=n.props,this.ref=n.ref),this._render(e,this.base?o:{},a),!0},r._mounted=function(){var e=this.ref;e&&e(this.base)},r._setState=function(e){},r._updated=function(){var e=this.ref;e&&e(this.base)},r._destroy=function(){var e=this.ref;e&&e(null)},t}();function Vs(t,r,e){var n=Yn(t,r),a=n.added,i=n.removed,o=n.changed;for(var s in a)e.setAttribute(s,a[s]);for(var s in o)e.setAttribute(s,o[s][1]);for(var s in i)e.removeAttribute(s)}function qs(t,r,e){var n=Yn(t,r),a=n.added,i=n.removed,o=n.changed;for(var s in i)e.removeEventListener(s);for(var s in a)e.addEventListener(s,a[s]);for(var s in o)e.removeEventListener(s),e.addEventListener(s,o[s][1]);for(var s in i)e.removeEventListener(s)}function js(t,r,e){var n=e.style,a=Yn(t,r),i=a.added,o=a.removed,s=a.changed;for(var u in i){var f=Se(u,"-");n.setProperty?n.setProperty(f,i[u]):n[f]=i[u]}for(var u in s){var f=Se(u,"-");n.setProperty?n.setProperty(f,s[u][1]):n[f]=s[u][1]}for(var u in o){var f=Se(u,"-");n.removeProperty?n.removeProperty(f):n[f]=""}}function Pa(t){var r={},e={};for(var n in t)n.indexOf("on")===0?e[n.replace("on","").toLowerCase()]=t[n]:r[n]=t[n];return{attributes:r,events:e}}var $s=function(t){gr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}var e=r.prototype;return e._render=function(n){var a=this,i=!this.base;return i&&(this.base=document.createTextNode(this.type.replace("text_",""))),n.push(function(){i?a._mounted():a._updated()}),!0},e._unmount=function(){this.base.parentNode.removeChild(this.base)},r}($r),Us=function(t){gr(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.events={},n._isSVG=!1,n}var e=r.prototype;return e.addEventListener=function(n,a){var i=this.events;i[n]=function(o){o.nativeEvent=o,a(o)},this.base.addEventListener(n,i[n])},e.removeEventListener=function(n){var a=this.events;this.base.removeEventListener(n,a[n]),delete a[n]},e._should=function(n){return ln(this.props,n)},e._render=function(n,a){var i=this,o=!this.base;if(o){var s=this._hasSVG();this._isSVG=s;var u=this.props.portalContainer;if(!u){var f=this.type;s?u=document.createElementNS("http://www.w3.org/2000/svg",f):u=document.createElement(f)}this.base=u}Ur(this,this._providers,this.props.children,n,null);var c=this.base,v=Pa(a),l=v.attributes,d=v.events,p=Pa(this.props),h=p.attributes,g=p.events;return Vs(Ta(l),Ta(h),c),qs(d,g,this),js(a.style||{},this.props.style||{},c),n.push(function(){o?i._mounted():i._updated()}),!0},e._unmount=function(){var n=this.events,a=this.base;for(var i in n)a.removeEventListener(i,n[i]);this._providers.forEach(function(o){o._unmount()}),this.events={},this.props.portalContainer||a.parentNode.removeChild(a)},e._hasSVG=function(){if(this._isSVG||this.type==="svg")return!0;var n=Wn(this.container);return n&&"ownerSVGElement"in n},r}($r);function Wn(t){if(!t)return null;var r=t.base;return r instanceof Node?r:Wn(t.container)}function Lr(t){if(!t)return null;if(t instanceof Node)return t;var r=t.$_provider._providers;return r.length?Lr(r[0].base):null}var Ks=function(t){gr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}var e=r.prototype;return e._render=function(n){var a=this.type(this.props);return Ur(this,this._providers,a?[a]:[],n),!0},e._unmount=function(){this._providers.forEach(function(n){n._unmount()})},r}($r),yi=function(t){gr(r,t);function r(n){var a=t.call(this,"container","container",0,null)||this;return a.base=n,a}var e=r.prototype;return e._render=function(){return!0},e._unmount=function(){},r}($r),Zs=function(t){gr(r,t);function r(n,a,i,o,s,u){return u===void 0&&(u={}),t.call(this,n,a,i,o,s,je(u,n.defaultProps))||this}var e=r.prototype;return e._should=function(n,a){return this.base.shouldComponentUpdate(je(n,this.type.defaultProps),a||this.base.state)},e._render=function(n,a){var i=this;this.props=je(this.props,this.type.defaultProps);var o=!this.base;o?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var s=this.base,u=s.state,f=s.render();f&&f.props&&!f.props.children.length&&(f.props.children=this.props.children),Ur(this,this._providers,f?[f]:[],n),n.push(function(){o?(i._mounted(),s.componentDidMount()):(i._updated(),s.componentDidUpdate(a,u))})},e._setState=function(n){var a=this.base;!a||!n||(a.state=n)},e._unmount=function(){this._providers.forEach(function(n){n._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},r}($r),Xn=function(){function t(e){e===void 0&&(e={}),this.props=e,this.state={},this.$_timer=0,this.$_state={}}var r=t.prototype;return r.shouldComponentUpdate=function(e,n){return!0},r.render=function(){return null},r.setState=function(e,n,a){var i=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=tr(tr({},this.$_state),e),a?this.$_setState(n,a):this.$_timer=setTimeout(function(){i.$_timer=0,i.$_setState(n,a)})},r.forceUpdate=function(e){this.setState({},e,!0)},r.componentDidMount=function(){},r.componentDidUpdate=function(e,n){},r.componentWillUnmount=function(){},r.$_setState=function(e,n){var a=[],i=this.$_provider,o=Ur(i.container,[i],[i.original],a,tr(tr({},this.state),this.$_state),n);o&&(e&&a.push(e),_i(a))},t}(),Hn=function(t){gr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}var e=r.prototype;return e.shouldComponentUpdate=function(n,a){return ln(this.props,n)||ln(this.state,a)},r}(Xn),Js=function(t){gr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}var e=r.prototype;return e.componentDidMount=function(){var n=this.props,a=n.element,i=n.container;this._portalProvider=new yi(i),xe(a,i,this._portalProvider)},e.componentDidUpdate=function(){var n=this.props,a=n.element,i=n.container;xe(a,i,this._portalProvider)},e.componentWillUnmount=function(){var n=this.props.container;xe(null,n,this._portalProvider),this._portalProvider=null},r}(Hn);function Qs(t,r,e){var n=[];Ur(t,t._providers,r,n,e),_i(n)}function tu(t,r){for(var e=t._providers,n=e.length,a=r.index+1;a<n;++a){var i=Lr(e[a].base);if(i)return i}return null}function ru(t,r,e){var n=e.map(function(u){return Gt(u)?null:u.key}),a=Ra(r.map(function(u){return u.key})),i=Ra(n),o=Vr(a,i,function(u){return u});o.removed.forEach(function(u){r.splice(u,1)[0]._unmount()}),o.ordered.forEach(function(u){var f=u[0],c=u[1],v=r.splice(f,1)[0];r.splice(c,0,v);var l=Lr(v.base),d=Lr(r[c+1]&&r[c+1].base);l&&l.parentNode.insertBefore(l,d)}),o.added.forEach(function(u){r.splice(u,0,Oa(e[u],n[u],u,t))});var s=o.maintained.filter(function(u){u[0];var f=u[1],c=e[f],v=r[f],l=Gt(c)?"text_"+c:c.type;return l!==v.type?(v._unmount(),r.splice(f,1,Oa(c,n[f],f,t)),!0):(v.index=f,!1)});return Hs(o.added,s.map(function(u){u[0];var f=u[1];return f}))}function Ur(t,r,e,n,a,i){var o=ru(t,r,e),s=r.filter(function(f,c){return f._update(n,e[c],a,i)}),u=Wn(t);return u&&o.reverse().forEach(function(f){var c=r[f],v=Lr(c.base);if(v&&u!==v&&!v.parentNode){var l=tu(t,c);u.insertBefore(v,l)}}),s.length>0}function xe(t,r,e){e===void 0&&(e=r.__REACT_COMPAT__);var n=!!e;return e||(e=new yi(r)),Qs(e,t?[t]:[]),n||(r.__REACT_COMPAT__=e),e}function Ba(t,r,e){var n=r.__REACT_COMPAT__;t&&!n&&(r.innerHTML=""),xe(t,r,n)}function eu(t,r){return At(Js,{element:t,container:r})}var nu="simple-1.1.0";function Vn(t,r){for(var e=t.length,n=0;n<e;++n)if(r(t[n],n))return!0;return!1}function Di(t,r){for(var e=t.length,n=0;n<e;++n)if(r(t[n],n))return t[n];return null}function Mi(t){var r=t;if(typeof r>"u"){if(typeof navigator>"u"||!navigator)return"";r=navigator.userAgent||""}return r.toLowerCase()}function qn(t,r){try{return new RegExp(t,"g").exec(r)}catch{return null}}function au(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,r=t.brands||t.uaList;return!!(r&&r.length)}function iu(t,r){var e=qn("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",r);return e?e[3]:""}function cn(t){return t.replace(/_/g,".")}function Pr(t,r){var e=null,n="-1";return Vn(t,function(a){var i=qn("("+a.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",r);return!i||a.brand?!1:(e=a,n=i[3]||"-1",a.versionAlias?n=a.versionAlias:a.versionTest&&(n=iu(a.versionTest.toLowerCase(),r)||n),n=cn(n),!0)}),{preset:e,version:n}}function ne(t,r){var e={brand:"",version:"-1"};return Vn(t,function(n){var a=wi(r,n);return a?(e.brand=n.id,e.version=n.versionAlias||a.version,e.version!=="-1"):!1}),e}function wi(t,r){return Di(t,function(e){var n=e.brand;return qn(""+r.test,n.toLowerCase())})}var Ri=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Oi=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],vn=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Ti=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Pi=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Bi(t){return!!Pr(Ti,t).preset}function ou(t){var r=Mi(t),e=!!/mobi/g.exec(r),n={name:"unknown",version:"-1",majorVersion:-1,webview:Bi(r),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},a={name:"unknown",version:"-1",majorVersion:-1},i=Pr(Ri,r),o=i.preset,s=i.version,u=Pr(Pi,r),f=u.preset,c=u.version,v=Pr(Oi,r);if(n.chromium=!!v.preset,n.chromiumVersion=v.version,!n.chromium){var l=Pr(vn,r);n.webkit=!!l.preset,n.webkitVersion=l.version}return f&&(a.name=f.id,a.version=c,a.majorVersion=parseInt(c,10)),o&&(n.name=o.id,n.version=s,n.webview&&a.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:a,isMobile:e,isHints:!1}}function su(t){var r=navigator.userAgentData,e=(r.uaList||r.brands).slice(),n=r.mobile||!1,a=e[0],i=(r.platform||navigator.platform).toLowerCase(),o={name:a.brand,version:a.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!ne(Ti,e).brand||Bi(Mi())},s={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&Vn(vn,function(l){return wi(e,l)});var u=ne(Oi,e);if(o.chromium=!!u.brand,o.chromiumVersion=u.version||"-1",!o.chromium){var f=ne(vn,e);o.webkit=!!f.brand,o.webkitVersion=f.version||"-1"}var c=Di(Pi,function(l){return new RegExp(""+l.test,"g").exec(i)});s.name=c?c.id:"";{var v=ne(Ri,e);o.name=v.brand||o.name,o.version=v.brand&&t?t.uaFullVersion:v.version}return o.webkit&&(s.name=n?"ios":"mac"),s.name==="ios"&&o.webview&&(o.version="-1"),s.version=cn(s.version),o.version=cn(o.version),s.majorVersion=parseInt(s.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:s,isMobile:n,isHints:!0}}function uu(t){return au()?su():ou(t)}function fu(t,r,e,n,a,i){for(var o=0;o<a;++o){var s=e+o*a,u=n+o*a;t[s]+=t[u]*i,r[s]+=r[u]*i}}function lu(t,r,e,n,a){for(var i=0;i<a;++i){var o=e+i*a,s=n+i*a,u=t[o],f=r[o];t[o]=t[s],t[s]=u,r[o]=r[s],r[s]=f}}function cu(t,r,e,n,a){for(var i=0;i<n;++i){var o=e+i*n;t[o]/=a,r[o]/=a}}function Ii(t,r,e){for(var n=t.slice(),a=0;a<e;++a)n[a*e+r-1]=0,n[(r-1)*e+a]=0;return n[(r-1)*(e+1)]=1,n}function Ht(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=t.slice(),n=dt(r),a=0;a<r;++a){var i=r*a+a;if(!Z(e[i],mt)){for(var o=a+1;o<r;++o)if(e[r*a+o]){lu(e,n,a,o,r);break}}if(!Z(e[i],mt))return[];cu(e,n,a,r,e[i]);for(var o=0;o<r;++o){var s=o,u=o+a*r,f=e[u];!Z(f,mt)||a===o||fu(e,n,s,a,r,-f)}}return n}function vu(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=[],n=0;n<r;++n)for(var a=0;a<r;++a)e[a*r+n]=t[r*n+a];return e}function Gi(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=[],n=t[r*r-1],a=0;a<r-1;++a)e[a]=t[r*(r-1)+a]/n;return e[r-1]=0,e}function du(t,r){for(var e=dt(r),n=0;n<r-1;++n)e[r*(r-1)+n]=t[n]||0;return e}function dr(t,r){for(var e=t.slice(),n=t.length;n<r-1;++n)e[n]=0;return e[r-1]=1,e}function Vt(t,r,e){if(r===void 0&&(r=Math.sqrt(t.length)),r===e)return t;for(var n=dt(e),a=Math.min(r,e),i=0;i<a-1;++i){for(var o=0;o<a-1;++o)n[i*e+o]=t[i*r+o];n[(i+1)*e-1]=t[(i+1)*r-1],n[(e-1)*e+i]=t[(r-1)*r+i]}return n[e*e-1]=t[r*r-1],n}function dn(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=dt(t);return r.forEach(function(a){n=ft(n,a,t)}),n}function ft(t,r,e){e===void 0&&(e=Math.sqrt(t.length));var n=[],a=t.length/e,i=r.length/a;if(a){if(!i)return t}else return r;for(var o=0;o<e;++o)for(var s=0;s<i;++s){n[s*e+o]=0;for(var u=0;u<a;++u)n[s*e+o]+=t[u*e+o]*r[s*a+u]}return n}function rt(t,r){for(var e=Math.min(t.length,r.length),n=t.slice(),a=0;a<e;++a)n[a]=n[a]+r[a];return n}function H(t,r){for(var e=Math.min(t.length,r.length),n=t.slice(),a=0;a<e;++a)n[a]=n[a]-r[a];return n}function pu(t,r){return r===void 0&&(r=t.length===6),r?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function zi(t,r){return r===void 0&&(r=t.length===9),r?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Dt(t,r,e){e===void 0&&(e=r.length);var n=ft(t,r,e),a=n[e-1];return n.map(function(i){return i/a})}function hu(t,r){return ft(t,[1,0,0,0,0,Math.cos(r),Math.sin(r),0,0,-Math.sin(r),Math.cos(r),0,0,0,0,1],4)}function gu(t,r){return ft(t,[Math.cos(r),0,-Math.sin(r),0,0,1,0,0,Math.sin(r),0,Math.cos(r),0,0,0,0,1],4)}function mu(t,r){return ft(t,yr(r,4))}function ae(t,r){var e=r[0],n=e===void 0?1:e,a=r[1],i=a===void 0?1:a,o=r[2],s=o===void 0?1:o;return ft(t,[n,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1],4)}function Kr(t,r){return Dt(yr(r,3),dr(t,3))}function $e(t,r){var e=r[0],n=e===void 0?0:e,a=r[1],i=a===void 0?0:a,o=r[2],s=o===void 0?0:o;return ft(t,[1,0,0,0,0,1,0,0,0,0,1,0,n,i,s,1],4)}function Ia(t,r){return ft(t,r,4)}function yr(t,r){var e=Math.cos(t),n=Math.sin(t),a=dt(r);return a[0]=e,a[1]=n,a[r]=-n,a[r+1]=e,a}function dt(t){for(var r=t*t,e=[],n=0;n<r;++n)e[n]=n%(t+1)?0:1;return e}function jn(t,r){for(var e=dt(r),n=Math.min(t.length,r-1),a=0;a<n;++a)e[(r+1)*a]=t[a];return e}function Yr(t,r){for(var e=dt(r),n=Math.min(t.length,r-1),a=0;a<n;++a)e[r*(r-1)+a]=t[a];return e}function $n(t,r,e,n,a,i,o,s){var u=t[0],f=t[1],c=r[0],v=r[1],l=e[0],d=e[1],p=n[0],h=n[1],g=a[0],m=a[1],b=i[0],S=i[1],x=o[0],C=o[1],E=s[0],_=s[1],R=[u,0,c,0,l,0,p,0,f,0,v,0,d,0,h,0,1,0,1,0,1,0,1,0,0,u,0,c,0,l,0,p,0,f,0,v,0,d,0,h,0,1,0,1,0,1,0,1,-g*u,-m*u,-b*c,-S*c,-x*l,-C*l,-E*p,-_*p,-g*f,-m*f,-b*v,-S*v,-x*d,-C*d,-E*h,-_*h],y=Ht(R,8);if(!y.length)return[];var w=ft(y,[g,m,b,S,x,C,E,_],8);return w[8]=1,Vt(vu(w),3,4)}var zr=function(){return zr=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},zr.apply(this,arguments)};function bu(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Un(t,r){return r===void 0&&(r=0),xr(ur(t,r))}function Su(t,r){var e=Dt(t,[r[0],r[1]||0,r[2]||0,1],4),n=e[3]||1;return[e[0]/n,e[1]/n,e[2]/n]}function xr(t){var r=bu();return t.forEach(function(e){var n=e.matrixFunction,a=e.functionValue;n&&(r=n(r,a))}),r}function ur(t,r){r===void 0&&(r=0);var e=bt(t)?t:er(t);return e.map(function(n){var a=mi(n),i=a.prefix,o=a.value,s=null,u=i,f="";if(i==="translate"||i==="translateX"||i==="translate3d"){var c=Wt(r)?zr(zr({},r),{"o%":r["%"]}):{"%":r,"o%":r},v=cr(o).map(function(T,P){return P===0&&"x%"in c?c["%"]=r["x%"]:P===1&&"y%"in c?c["%"]=r["y%"]:c["%"]=r["o%"],lt(T,c)}),l=v[0],d=v[1],p=d===void 0?0:d,h=v[2],g=h===void 0?0:h;s=$e,f=[l,p,g]}else if(i==="translateY"){var m=Wt(r)?zr({"%":r["y%"]},r):{"%":r},p=lt(o,m);s=$e,f=[0,p,0]}else if(i==="translateZ"){var g=parseFloat(o);s=$e,f=[0,0,g]}else if(i==="scale"||i==="scale3d"){var b=cr(o).map(function(T){return parseFloat(T)}),S=b[0],x=b[1],C=x===void 0?S:x,E=b[2],_=E===void 0?1:E;s=ae,f=[S,C,_]}else if(i==="scaleX"){var S=parseFloat(o);s=ae,f=[S,1,1]}else if(i==="scaleY"){var C=parseFloat(o);s=ae,f=[1,C,1]}else if(i==="scaleZ"){var _=parseFloat(o);s=ae,f=[1,1,_]}else if(i==="rotate"||i==="rotateZ"||i==="rotateX"||i==="rotateY"){var R=jr(o),y=R.unit,w=R.value,O=y==="rad"?w:w*Math.PI/180;i==="rotate"||i==="rotateZ"?(u="rotateZ",s=mu):i==="rotateX"?s=hu:i==="rotateY"&&(s=gu),f=O}else if(i==="matrix3d")s=Ia,f=cr(o).map(function(T){return parseFloat(T)});else if(i==="matrix"){var D=cr(o).map(function(T){return parseFloat(T)});s=Ia,f=[D[0],D[1],0,0,D[2],D[3],0,0,0,0,1,0,D[4],D[5],0,1]}else u="";return{name:i,functionName:u,value:o,matrixFunction:s,functionValue:f}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var pn=function(t,r){return pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},pn(t,r)};function xu(t,r){pn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Ai=typeof Map=="function"?void 0:function(){var t=0;return function(r){return r.__DIFF_KEY__||(r.__DIFF_KEY__=++t)}}(),ki=function(t){xu(r,t);function r(e){return e===void 0&&(e=[]),t.call(this,e,Ai)||this}return r}(ws);function Eu(t,r){return Vr(t,r,Ai)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function _u(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),a=0,r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}function Bt(t){return Z(t,mt)}function Cu(t,r){return t.every(function(e,n){return Bt(e-r[n])===0})}function yu(t,r){return!Bt(t[0]-r[0])&&!Bt(t[1]-r[1])}function Fi(t){return t.length<3?0:Math.abs(Ls(t.map(function(r,e){var n=t[e+1]||t[0];return r[0]*n[1]-n[0]*r[1]})))/2}function Ga(t,r){var e=r.width,n=r.height,a=r.left,i=r.top,o=nr(t),s=o.minX,u=o.minY,f=o.maxX,c=o.maxY,v=e/(f-s),l=n/(c-u);return t.map(function(d){return[a+(d[0]-s)*v,i+(d[1]-u)*l]})}function nr(t){var r=t.map(function(n){return n[0]}),e=t.map(function(n){return n[1]});return{minX:Math.min.apply(Math,r),minY:Math.min.apply(Math,e),maxX:Math.max.apply(Math,r),maxY:Math.max.apply(Math,e)}}function hn(t,r,e){var n=t[0],a=t[1],i=nr(r),o=i.minX,s=i.maxX,u=[[o,a],[s,a]],f=_e(u[0],u[1]),c=gn(r),v=[];if(c.forEach(function(p){var h=_e(p[0],p[1]),g=p[0];if(Cu(f,h))v.push({pos:t,line:p,type:"line"});else{var m=Ni(Kn(f,h),[u,p]);m.forEach(function(b){p.some(function(S){return yu(S,b)})?v.push({pos:b,line:p,type:"point"}):Bt(g[1]-a)!==0&&v.push({pos:b,line:p,type:"intersection"})})}}),Ut(v,function(p){return p[0]===n}))return!0;var l=0,d={};return v.forEach(function(p){var h=p.pos,g=p.type,m=p.line;if(!(h[0]>n))if(g==="intersection")++l;else{if(g==="line")return;if(g==="point"){var b=Ut(m,function(C){return C[1]!==a}),S=d[h[0]],x=b[1]>a?1:-1;S?S!==x&&++l:d[h[0]]=x}}}),l%2===1}function _e(t,r){var e=t[0],n=t[1],a=r[0],i=r[1],o=a-e,s=i-n;Math.abs(o)<mt&&(o=0),Math.abs(s)<mt&&(s=0);var u=0,f=0,c=0;return o?s?(u=-s/o,f=1,c=-u*e-n):(f=1,c=-n):s&&(u=-1,c=e),[u,f,c]}function Kn(t,r){var e=t[0],n=t[1],a=t[2],i=r[0],o=r[1],s=r[2],u=e===0&&i===0,f=n===0&&o===0,c=[];if(u&&f)return[];if(u){var v=-a/n,l=-s/o;return v!==l?[]:[[-1/0,v],[1/0,v]]}else if(f){var d=-a/e,p=-s/i;return d!==p?[]:[[d,-1/0],[d,1/0]]}else if(e===0){var h=-a/n,g=-(o*h+s)/i;c=[[g,h]]}else if(i===0){var h=-s/o,g=-(n*h+a)/e;c=[[g,h]]}else if(n===0){var g=-a/e,h=-(i*g+s)/o;c=[[g,h]]}else if(o===0){var g=-s/i,h=-(e*g+a)/n;c=[[g,h]]}else{var g=(n*s-o*a)/(o*e-n*i),h=-(e*g+a)/n;c=[[g,h]]}return c.map(function(m){return[m[0],m[1]]})}function Ni(t,r){var e=r.map(function(v){return[0,1].map(function(l){return[Math.min(v[0][l],v[1][l]),Math.max(v[0][l],v[1][l])]})}),n=[];if(t.length===2){var a=t[0],i=a[0],o=a[1];if(Bt(i-t[1][0])){if(!Bt(o-t[1][1])){var f=Math.max.apply(Math,e.map(function(v){return v[0][0]})),c=Math.min.apply(Math,e.map(function(v){return v[0][1]}));if(Bt(f-c)>0)return[];n=[[f,o],[c,o]]}}else{var s=Math.max.apply(Math,e.map(function(v){return v[1][0]})),u=Math.min.apply(Math,e.map(function(v){return v[1][1]}));if(Bt(s-u)>0)return[];n=[[i,s],[i,u]]}}return n.length||(n=t.filter(function(v){var l=v[0],d=v[1];return e.every(function(p){return 0<=Bt(l-p[0][0])&&0<=Bt(p[0][1]-l)&&0<=Bt(d-p[1][0])&&0<=Bt(p[1][1]-d)})})),n.map(function(v){return[Bt(v[0]),Bt(v[1])]})}function gn(t){return _u(t.slice(1),[t[0]]).map(function(r,e){return[t[e],r]})}function Du(t,r){var e=t.slice(),n=r.slice();un(e)===-1&&e.reverse(),un(n)===-1&&n.reverse();var a=gn(e),i=gn(n),o=a.map(function(c){return _e(c[0],c[1])}),s=i.map(function(c){return _e(c[0],c[1])}),u=[];o.forEach(function(c,v){var l=a[v],d=[];s.forEach(function(p,h){var g=Kn(c,p),m=Ni(g,[l,i[h]]);d.push.apply(d,m.map(function(b){return{index1:v,index2:h,pos:b,type:"intersection"}}))}),d.sort(function(p,h){return Nt(l[0],p.pos)-Nt(l[0],h.pos)}),u.push.apply(u,d),hn(l[1],n)&&u.push({index1:v,index2:-1,pos:l[1],type:"inside"})}),i.forEach(function(c,v){if(hn(c[1],e)){var l=!1,d=$t(u,function(p){var h=p.index2;return h===v?(l=!0,!1):!!l});d===-1&&(l=!1,d=$t(u,function(p){var h=p.index1,g=p.index2;return h===-1&&g+1===v?(l=!0,!1):!!l})),d===-1?u.push({index1:-1,index2:v,pos:c[1],type:"inside"}):u.splice(d,0,{index1:-1,index2:v,pos:c[1],type:"inside"})}});var f={};return u.filter(function(c){var v=c.pos,l=v[0]+"x"+v[1];return f[l]?!1:(f[l]=!0,!0)})}function Mu(t,r){var e=Du(t,r);return e.map(function(n){var a=n.pos;return a})}function wu(t,r){var e=Mu(t,r);return Fi(e)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var mn=function(){return mn=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},mn.apply(this,arguments)};function Ru(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),a=0,r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}var Pe=function(){function t(){this._events={}}var r=t.prototype;return r.on=function(e,n){if(Wt(e))for(var a in e)this.on(a,e[a]);else this._addEvent(e,n,{});return this},r.off=function(e,n){if(!e)this._events={};else if(Wt(e))for(var a in e)this.off(a);else if(!n)this._events[e]=[];else{var i=this._events[e];if(i){var o=$t(i,function(s){return s.listener===n});o>-1&&i.splice(o,1)}}return this},r.once=function(e,n){var a=this;return n&&this._addEvent(e,n,{once:!0}),new Promise(function(i){a._addEvent(e,i,{once:!0})})},r.emit=function(e,n){var a=this;n===void 0&&(n={});var i=this._events[e];if(!e||!i)return!0;var o=!1;return n.eventType=e,n.stop=function(){o=!0},n.currentTarget=this,Ru(i).forEach(function(s){s.listener(n),s.once&&a.off(e,s.listener)}),!o},r.trigger=function(e,n){return n===void 0&&(n={}),this.emit(e,n)},r._addEvent=function(e,n,a){var i=this._events;i[e]=i[e]||[];var o=i[e];o.push(mn({listener:n},a))},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bn=function(t,r){return bn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},bn(t,r)};function Ou(t,r){bn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Er=function(){return Er=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Er.apply(this,arguments)};function Tu(t){var r=t.container;return r===document.body?[r.scrollLeft||document.documentElement.scrollLeft,r.scrollTop||document.documentElement.scrollTop]:[r.scrollLeft,r.scrollTop]}function za(t,r){return t.addEventListener("scroll",r),function(){t.removeEventListener("scroll",r)}}function ie(t){if(t){if(Gt(t))return document.querySelector(t)}else return null;if(Fn(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var Pu=function(t){Ou(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n._currentOptions=null,n._lock=!1,n._unregister=null,n._onScroll=function(){var a=n._currentOptions;n._lock||!a||n.emit("scrollDrag",{next:function(i){n.checkScroll({container:a.container,inputEvent:i})}})},n}var e=r.prototype;return e.dragStart=function(n,a){var i=ie(a.container);if(!i){this._flag=!1;return}var o=0,s=0,u=0,f=0;if(i===document.body)u=window.innerWidth,f=window.innerHeight;else{var c=i.getBoundingClientRect();o=c.top,s=c.left,u=c.width,f=c.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:o,left:s,width:u,height:f},this._prevScrollPos=this._getScrollPosition([0,0],a),this._currentOptions=a,this._registerScrollEvent(a)},e.drag=function(n,a){if(clearTimeout(this._timer),!!this._flag){var i=n.clientX,o=n.clientY,s=a.threshold,u=s===void 0?0:s,f=this,c=f._startRect,v=f._startPos;this._currentOptions=a;var l=[0,0];return c.top>o-u?(v[1]>c.top||o<v[1])&&(l[1]=-1):c.top+c.height<o+u&&(v[1]<c.top+c.height||o>v[1])&&(l[1]=1),c.left>i-u?(v[0]>c.left||i<v[0])&&(l[0]=-1):c.left+c.width<i+u&&(v[0]<c.left+c.width||i>v[0])&&(l[0]=1),!l[0]&&!l[1]?!1:this._continueDrag(Er(Er({},a),{direction:l,inputEvent:n,isDrag:!0}))}},e.checkScroll=function(n){var a=this;if(this._isWait)return!1;var i=n.prevScrollPos,o=i===void 0?this._prevScrollPos:i,s=n.direction,u=n.throttleTime,f=u===void 0?0:u,c=n.inputEvent,v=n.isDrag,l=this._getScrollPosition(s||[0,0],n),d=l[0]-o[0],p=l[1]-o[1],h=s||[d?Math.abs(d)/d:0,p?Math.abs(p)/p:0];return this._prevScrollPos=l,this._lock=!1,!d&&!p?!1:(this.emit("move",{offsetX:h[0]?d:0,offsetY:h[1]?p:0,inputEvent:c}),f&&v&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(n)},f)),!0)},e.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},e._getScrollPosition=function(n,a){var i=a.container,o=a.getScrollPosition,s=o===void 0?Tu:o;return s({container:ie(i),direction:n})},e._continueDrag=function(n){var a=this,i,o=n.container,s=n.direction,u=n.throttleTime,f=n.useScroll,c=n.isDrag,v=n.inputEvent;if(!(!this._flag||c&&this._isWait)){var l=Nr(),d=Math.max(u+this._prevTime-l,0);if(d>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(n)},d),!1;this._prevTime=l;var p=this._getScrollPosition(s,n);this._prevScrollPos=p,c&&(this._isWait=!0),f||(this._lock=!0);var h={container:ie(o),direction:s,inputEvent:v};return(i=n.requestScroll)===null||i===void 0||i.call(n,h),this.emit("scroll",h),this._isWait=!1,f||this.checkScroll(Er(Er({},n),{prevScrollPos:p,direction:s,inputEvent:v}))}},e._registerScrollEvent=function(n){this._unregisterScrollEvent();var a=n.checkScrollEvent;if(a){var i=a===!0?za:a,o=ie(n.container);a===!0&&(o===document.body||o===document.documentElement)?this._unregister=za(window,this._onScroll):this._unregister=i(o,this._onScroll)}},e._unregisterScrollEvent=function(){var n;(n=this._unregister)===null||n===void 0||n.call(this),this._unregister=null},r}(Pe);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sn=function(t,r){return Sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},Sn(t,r)};function Bu(t,r){Sn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var gt=function(){return gt=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},gt.apply(this,arguments)};function Iu(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=Math.atan2(n,e);return a>=0?a:a+Math.PI*2}function Ue(t){return Iu([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function Gu(t){return t.touches&&t.touches.length>=2}function oe(t){return t?t.touches?Au(t.touches):[Li(t)]:[]}function zu(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function Aa(t,r,e){var n=e.length,a=Ar(t,n),i=a.clientX,o=a.clientY,s=a.originalClientX,u=a.originalClientY,f=Ar(r,n),c=f.clientX,v=f.clientY,l=Ar(e,n),d=l.clientX,p=l.clientY,h=i-c,g=o-v,m=i-d,b=o-p;return{clientX:s,clientY:u,deltaX:h,deltaY:g,distX:m,distY:b}}function Ke(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Au(t){for(var r=Math.min(t.length,2),e=[],n=0;n<r;++n)e.push(Li(t[n]));return e}function Li(t){return{clientX:t.clientX,clientY:t.clientY}}function Ar(t,r){r===void 0&&(r=t.length);for(var e={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(t.length,r),a=0;a<n;++a){var i=t[a];e.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,e.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,e.clientX+=i.clientX,e.clientY+=i.clientY}return r?{clientX:e.clientX/r,clientY:e.clientY/r,originalClientX:e.originalClientX/r,originalClientY:e.originalClientY/r}:e}var Ze=function(){function t(r){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=r,this.prevClients=r,this.length=r.length}return t.prototype.getAngle=function(r){return r===void 0&&(r=this.prevClients),Ue(r)},t.prototype.getRotation=function(r){return r===void 0&&(r=this.prevClients),Ue(r)-Ue(this.startClients)},t.prototype.getPosition=function(r,e){r===void 0&&(r=this.prevClients);var n=Aa(r||this.prevClients,this.prevClients,this.startClients),a=n.deltaX,i=n.deltaY;return this.movement+=Math.sqrt(a*a+i*i),this.prevClients=r,n},t.prototype.getPositions=function(r){r===void 0&&(r=this.prevClients);for(var e=this.prevClients,n=this.startClients,a=Math.min(this.length,e.length),i=[],o=0;o<a;++o)i[o]=Aa([r[o]],[e[o]],[n[o]]);return i},t.prototype.getMovement=function(r){var e=this.movement;if(!r)return e;var n=Ar(r,this.length),a=Ar(this.prevClients,this.length),i=n.clientX-a.clientX,o=n.clientY-a.clientY;return Math.sqrt(i*i+o*o)+e},t.prototype.getDistance=function(r){return r===void 0&&(r=this.prevClients),Ke(r)},t.prototype.getScale=function(r){return r===void 0&&(r=this.prevClients),Ke(r)/Ke(this.startClients)},t.prototype.move=function(r,e){this.startClients.forEach(function(n){n.clientX-=r,n.clientY-=e}),this.prevClients.forEach(function(n){n.clientX-=r,n.clientY-=e})},t}(),ka=["textarea","input"],ku=function(t){Bu(r,t);function r(e,n){n===void 0&&(n={});var a=t.call(this)||this;a.options={},a.flag=!1,a.pinchFlag=!1,a.data={},a.isDrag=!1,a.isPinch=!1,a.clientStores=[],a.targets=[],a.prevTime=0,a.doubleFlag=!1,a._useMouse=!1,a._useTouch=!1,a._useDrag=!1,a._dragFlag=!1,a._isTrusted=!1,a._isMouseEvent=!1,a._isSecondaryButton=!1,a._preventMouseEvent=!1,a._prevInputEvent=null,a._isDragAPI=!1,a._isIdle=!0,a._preventMouseEventId=0,a._window=window,a.onDragStart=function(l,d){if(d===void 0&&(d=!0),!(!a.flag&&l.cancelable===!1)){var p=l.type.indexOf("drag")>=-1;if(!(a.flag&&p)){a._isDragAPI=!0;var h=a.options,g=h.container,m=h.pinchOutside,b=h.preventWheelClick,S=h.preventRightClick,x=h.preventDefault,C=h.checkInput,E=h.dragFocusedInput,_=h.preventClickEventOnDragStart,R=h.preventClickEventOnDrag,y=h.preventClickEventByCondition,w=a._useTouch,O=!a.flag;if(a._isSecondaryButton=l.which===3||l.button===2,b&&(l.which===2||l.button===1)||S&&(l.which===3||l.button===2))return a.stop(),!1;if(O){var D=a._window.document.activeElement,T=l.target;if(T){var P=T.tagName.toLowerCase(),I=ka.indexOf(P)>-1,G=T.isContentEditable;if(I||G){if(C||!E&&D===T)return!1;if(D&&(D===T||G&&D.isContentEditable&&D.contains(T)))if(E)T.blur();else return!1}else if((x||l.type==="touchstart")&&D){var F=D.tagName.toLowerCase();(D.isContentEditable||ka.indexOf(F)>-1)&&D.blur()}(_||R||y)&&Mt(a._window,"click",a._onClick,!0)}a.clientStores=[new Ze(oe(l))],a._isIdle=!1,a.flag=!0,a.isDrag=!1,a._isTrusted=d,a._dragFlag=!0,a._prevInputEvent=l,a.data={},a.doubleFlag=Nr()-a.prevTime<200,a._isMouseEvent=zu(l),!a._isMouseEvent&&a._preventMouseEvent&&a._allowMouseEvent();var z=a._preventMouseEvent||a.emit("dragStart",gt(gt({data:a.data,datas:a.data,inputEvent:l,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,isTrusted:d,isDouble:a.doubleFlag},a.getCurrentStore().getPosition()),{preventDefault:function(){l.preventDefault()},preventDrag:function(){a._dragFlag=!1}}));z===!1&&a.stop(),a._isMouseEvent&&a.flag&&x&&l.preventDefault()}if(!a.flag)return!1;var A=0;if(O?(a._attchDragEvent(),w&&m&&(A=setTimeout(function(){Mt(g,"touchstart",a.onDragStart,{passive:!1})}))):w&&m&&yt(g,"touchstart",a.onDragStart),a.flag&&Gu(l)){if(clearTimeout(A),O&&l.touches.length!==l.changedTouches.length)return;a.pinchFlag||a.onPinchStart(l)}}}},a.onDrag=function(l,d){if(a.flag){var p=a.options.preventDefault;!a._isMouseEvent&&p&&l.preventDefault(),a._prevInputEvent=l;var h=oe(l),g=a.moveClients(h,l,!1);if(a._dragFlag){if(a.pinchFlag||g.deltaX||g.deltaY){var m=a._preventMouseEvent||a.emit("drag",gt(gt({},g),{isScroll:!!d,inputEvent:l}));if(m===!1){a.stop();return}}a.pinchFlag&&a.onPinch(l,h)}a.getCurrentStore().getPosition(h,!0)}},a.onDragEnd=function(l){if(a.flag){var d=a.options,p=d.pinchOutside,h=d.container,g=d.preventClickEventOnDrag,m=d.preventClickEventOnDragStart,b=d.preventClickEventByCondition,S=a.isDrag;(g||m||b)&&requestAnimationFrame(function(){a._allowClickEvent()}),!b&&!m&&g&&!S&&a._allowClickEvent(),a._useTouch&&p&&yt(h,"touchstart",a.onDragStart),a.pinchFlag&&a.onPinchEnd(l);var x=l!=null&&l.touches?oe(l):[],C=x.length;C===0||!a.options.keepDragging?a.flag=!1:a._addStore(new Ze(x));var E=a._getPosition(),_=Nr(),R=!S&&a.doubleFlag;a._prevInputEvent=null,a.prevTime=S||R?0:_,a.flag||(a._dettachDragEvent(),a._preventMouseEvent||a.emit("dragEnd",gt({data:a.data,datas:a.data,isDouble:R,isDrag:S,isClick:!S,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,inputEvent:l,isTrusted:a._isTrusted},E)),a.clientStores=[],a._isMouseEvent||(a._preventMouseEvent=!0,clearTimeout(a._preventMouseEventId),a._preventMouseEventId=setTimeout(function(){a._preventMouseEvent=!1},200)),a._isIdle=!0)}},a.onBlur=function(){a.onDragEnd()},a._allowClickEvent=function(){yt(a._window,"click",a._onClick,!0)},a._onClick=function(l){a._allowClickEvent(),a._allowMouseEvent();var d=a.options.preventClickEventByCondition;d!=null&&d(l)||(l.stopPropagation(),l.preventDefault())},a._onContextMenu=function(l){var d=a.options;d.preventRightClick?a.onDragEnd(l):l.preventDefault()},a._passCallback=function(){};var i=[].concat(e),o=i[0];a._window=Xs(o)?o:qe(o),a.options=gt({checkInput:!1,container:o&&!("document"in o)?qe(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var s=a.options,u=s.container,f=s.events,c=s.checkWindowBlur;if(a._useDrag=f.indexOf("drag")>-1,a._useTouch=f.indexOf("touch")>-1,a._useMouse=f.indexOf("mouse")>-1,a.targets=i,a._useDrag&&i.forEach(function(l){Mt(l,"dragstart",a.onDragStart)}),a._useMouse&&(i.forEach(function(l){Mt(l,"mousedown",a.onDragStart),Mt(l,"mousemove",a._passCallback)}),Mt(u,"contextmenu",a._onContextMenu)),c&&Mt(qe(),"blur",a.onBlur),a._useTouch){var v={passive:!1};i.forEach(function(l){Mt(l,"touchstart",a.onDragStart,v),Mt(l,"touchmove",a._passCallback,v)})}return a}return r.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},r.prototype.getMovement=function(e){return this.getCurrentStore().getMovement(e)+this.clientStores.slice(1).reduce(function(n,a){return n+a.movement},0)},r.prototype.isDragging=function(){return this.isDrag},r.prototype.isIdle=function(){return this._isIdle},r.prototype.isFlag=function(){return this.flag},r.prototype.isPinchFlag=function(){return this.pinchFlag},r.prototype.isDoubleFlag=function(){return this.doubleFlag},r.prototype.isPinching=function(){return this.isPinch},r.prototype.scrollBy=function(e,n,a,i){i===void 0&&(i=!0),this.flag&&(this.clientStores[0].move(e,n),i&&this.onDrag(a,!0))},r.prototype.move=function(e,n){var a=e[0],i=e[1],o=this.getCurrentStore(),s=o.prevClients;return this.moveClients(s.map(function(u){var f=u.clientX,c=u.clientY;return{clientX:f+a,clientY:c+i,originalClientX:f,originalClientY:c}}),n,!0)},r.prototype.triggerDragStart=function(e){this.onDragStart(e,!1)},r.prototype.setEventData=function(e){var n=this.data;for(var a in e)n[a]=e[a];return this},r.prototype.setEventDatas=function(e){return this.setEventData(e)},r.prototype.getCurrentEvent=function(e){return e===void 0&&(e=this._prevInputEvent),gt(gt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},r.prototype.getEventData=function(){return this.data},r.prototype.getEventDatas=function(){return this.data},r.prototype.unset=function(){var e=this,n=this.targets,a=this.options.container;this.off(),yt(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(i){yt(i,"dragstart",e.onDragStart)}),this._useMouse&&(n.forEach(function(i){yt(i,"mousedown",e.onDragStart)}),yt(a,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(i){yt(i,"touchstart",e.onDragStart)}),yt(a,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},r.prototype.onPinchStart=function(e){var n=this,a=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>a)){var i=new Ze(oe(e));this.pinchFlag=!0,this._addStore(i);var o=this.emit("pinchStart",gt(gt({data:this.data,datas:this.data,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition()),{inputEvent:e,isTrusted:this._isTrusted,preventDefault:function(){e.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},r.prototype.onPinch=function(e,n){if(!(!this.flag||!this.pinchFlag||n.length<2)){var a=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",gt(gt({data:this.data,datas:this.data,movement:this.getMovement(n),angle:a.getAngle(n),rotation:a.getRotation(n),touches:a.getPositions(n),scale:a.getScale(n),distance:a.getDistance(n)},a.getPosition(n)),{inputEvent:e,isTrusted:this._isTrusted}))}},r.prototype.onPinchEnd=function(e){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var a=this.getCurrentStore();this.emit("pinchEnd",gt(gt({data:this.data,datas:this.data,isPinch:n,touches:a.getPositions()},a.getPosition()),{inputEvent:e}))}},r.prototype.getCurrentStore=function(){return this.clientStores[0]},r.prototype.moveClients=function(e,n,a){var i=this._getPosition(e,a),o=this.isDrag;(i.deltaX||i.deltaY)&&(this.isDrag=!0);var s=!1;return!o&&this.isDrag&&(s=!0),gt(gt({data:this.data,datas:this.data},i),{movement:this.getMovement(e),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:s})},r.prototype._addStore=function(e){this.clientStores.splice(0,0,e)},r.prototype._getPosition=function(e,n){var a=this.getCurrentStore(),i=a.getPosition(e,n),o=this.clientStores.slice(1).reduce(function(f,c){var v=c.getPosition();return f.distX+=v.distX,f.distY+=v.distY,f},i),s=o.distX,u=o.distY;return gt(gt({},i),{distX:s,distY:u})},r.prototype._attchDragEvent=function(){var e=this._window,n=this.options.container,a={passive:!1};this._isDragAPI&&(Mt(n,"dragover",this.onDrag,a),Mt(e,"dragend",this.onDragEnd)),this._useMouse&&(Mt(n,"mousemove",this.onDrag),Mt(e,"mouseup",this.onDragEnd)),this._useTouch&&(Mt(n,"touchmove",this.onDrag,a),Mt(e,"touchend",this.onDragEnd,a),Mt(e,"touchcancel",this.onDragEnd,a))},r.prototype._dettachDragEvent=function(){var e=this._window,n=this.options.container;this._isDragAPI&&(yt(n,"dragover",this.onDrag),yt(e,"dragend",this.onDragEnd)),this._useMouse&&(yt(n,"mousemove",this.onDrag),yt(e,"mouseup",this.onDragEnd)),this._useTouch&&(yt(n,"touchstart",this.onDragStart),yt(n,"touchmove",this.onDrag),yt(e,"touchend",this.onDragEnd),yt(e,"touchcancel",this.onDragEnd))},r.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},r}(Pe);function Fu(t){for(var r=5381,e=t.length;e;)r=r*33^t.charCodeAt(--e);return r>>>0}var Nu=Fu;function Lu(t){return Nu(t).toString(36)}function Yu(t){if(t&&t.getRootNode){var r=t.getRootNode();if(r.nodeType===11)return r}}function Wu(t,r,e){return e.original?r:r.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,a){var i=a.trim();return(i?cr(i):[""]).map(function(o){var s=o.trim();return s.indexOf("@")===0?s:s.indexOf(":global")>-1?s.replace(/\:global/g,""):s.indexOf(":host")>-1?"".concat(s.replace(/\:host/g,".".concat(t))):s?".".concat(t," ").concat(s):".".concat(t)}).join(", ")+" {"})}function Xu(t,r,e,n,a){var i=Ws(n),o=i.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),o.setAttribute("data-styled-count","1"),e.nonce&&o.setAttribute("nonce",e.nonce),o.innerHTML=Wu(t,r,e),(a||i.head||i.body).appendChild(o),o}function Hu(t){var r="rCS"+Lu(t);return{className:r,inject:function(e,n){n===void 0&&(n={});var a=Yu(e),i=(a||e.ownerDocument||document).querySelector('style[data-styled-id="'.concat(r,'"]'));if(!i)i=Xu(r,t,n,e,a);else{var o=parseFloat(i.getAttribute("data-styled-count"))||0;i.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var s,u=parseFloat(i.getAttribute("data-styled-count"))||0;u<=1?(i.remove?i.remove():(s=i.parentNode)===null||s===void 0||s.removeChild(i),i=null):i.setAttribute("data-styled-count","".concat(u-1))}}}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var xn=function(t,r){return xn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},xn(t,r)};function Yi(t,r){xn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var En=function(){return En=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},En.apply(this,arguments)};function Vu(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e}var qu=function(t){Yi(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.injectResult=null,n.tag="div",n}var e=r.prototype;return e.render=function(){var n=this.props,a=n.className,i=a===void 0?"":a;n.cspNonce;var o=n.portalContainer,s=Vu(n,["className","cspNonce","portalContainer"]),u=this.injector.className,f=this.tag,c={};return nu.indexOf("simple")>-1&&o&&(c={portalContainer:o}),At(f,En({ref:Xt(this,"element"),"data-styled-id":u,className:i+" "+u},c,s))},e.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},e.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},e.getElement=function(){return this.element},r}(Xn);function Wi(t,r){var e=Hu(r);return function(n){Yi(a,n);function a(){var i=n!==null&&n.apply(this,arguments)||this;return i.injector=e,i.tag=t,i}return a}(qu)}var _n=function(t,r){return _n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},_n(t,r)};function Zr(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");_n(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var M=function(){return M=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},M.apply(this,arguments)};function ju(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e}function $u(t,r,e,n){var a=arguments.length,i=a<3?r:n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(r,e,i):o(r,e))||i);return a>3&&i&&Object.defineProperty(r,e,i),i}function j(t,r,e){if(e||arguments.length===2)for(var n=0,a=r.length,i;n<a;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return t.concat(i||Array.prototype.slice.call(r))}function Jr(t,r){var e;return M({events:{},props:(e={},e[t]=Boolean,e),name:t},r)}function Uu(t,r){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(r,'deg);transform-origin: 16px 16px"></path></svg>')}function Ku(t){var r=Uu(1,t),e=Math.round(t/45)*45%180,n="ns-resize";return e===135?n="nwse-resize":e===45?n="nesw-resize":e===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(r,"') 16 16, ").concat(n,";")}var Ce=uu(),Xi=Ce.browser.webkit,Hi=Xi&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,r=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return r?parseFloat(r[1])<605:!1}(),Zu=Ce.browser.name==="firefox",Ju=parseInt(Ce.browser.webkitVersion,10)>=612||parseInt(Ce.browser.version,10)>=15,Zn="moveable-",Qu=`
{
	position: absolute;
	width: 1px;
	height: 1px;
	left: 0;
	top: 0;
    z-index: 3000;
    --moveable-color: #4af;
    --zoom: 1;
    --zoompx: 1px;
    will-change: transform;
    outline: 1px solid transparent;
}
.control-box {
    z-index: 0;
}
.line, .control {
    position: absolute;
	left: 0;
    top: 0;
    will-change: transform;
}
.control {
	width: 14px;
	height: 14px;
	border-radius: 50%;
	border: 2px solid #fff;
	box-sizing: border-box;
    background: #4af;
    background: var(--moveable-color);
	margin-top: -7px;
    margin-left: -7px;
    border: 2px solid #fff;
    z-index: 10;
}
.padding {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100px;
    height: 100px;
    transform-origin: 0 0;
}
.line {
	width: 1px;
    height: 1px;
    background: #4af;
    background: var(--moveable-color);
	transform-origin: 0px 50%;
}
.line.edge {
    z-index: 1;
    background: transparent;
}
.line.dashed {
    box-sizing: border-box;
    background: transparent;
}
.line.dashed.horizontal {
    border-top: 1px dashed #4af;
    border-top-color: #4af;
    border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
    border-left: 1px dashed #4af;
    border-left-color: #4af;
    border-left-color: var(--moveable-color);
}
.line.vertical {
    transform: translateX(-50%);
}
.line.horizontal {
    transform: translateY(-50%);
}
.line.vertical.bold {
    width: 2px;
}
.line.horizontal.bold {
    height: 2px;
}

.control.origin {
	border-color: #f55;
	background: #fff;
	width: 12px;
	height: 12px;
	margin-top: -6px;
    margin-left: -6px;
	pointer-events: none;
}
`.concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
	`).concat(Ku(t),`
}
`)}).join(`
`),`

.line.direction:before {
    content: "";
    position: absolute;
    width: 100%;
    height: calc(var(--moveable-line-padding, 0) * 1px);
    bottom: 0;
    left: 0;
}
.group {
    z-index: -1;
}
.area {
    position: absolute;
}
.area-pieces {
    position: absolute;
    top: 0;
    left: 0;
    display: none;
}
.area.avoid, .area.pass {
    pointer-events: none;
}
.area.avoid+.area-pieces {
    display: block;
}
.area-piece {
    position: absolute;
}

`).concat(Hi?`:global svg *:before {
	content:"";
	transform-origin: inherit;
}`:"",`
`),tf=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Cn=1e-4,Tt=1e-7,se=1e-9,yn=Math.pow(10,10),Fa=-yn,rf=["n","w","s","e"],Jn=["n","w","s","e","nw","ne","sw","se"],ef={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Qn={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Vi={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},qi=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag"];function Qr(t,r,e,n,a,i){var o,s;i===void 0&&(i="draggable");var u=(s=(o=r.gestos[i])===null||o===void 0?void 0:o.move(e,t.inputEvent))!==null&&s!==void 0?s:{},f=u.originalDatas||u.datas,c=f[i]||(f[i]={});return M(M({},u),{isPinch:!!n,parentEvent:!0,datas:c,originalDatas:t.originalDatas})}var Dr=function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}var r=t.prototype;return r.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var a=n.originalDatas;return this.datas=a,a[this.ableName]||(a[this.ableName]={}),M(M({},this.move(e,n.inputEvent)),{type:"dragstart"})},r.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},r.move=function(e,n){var a,i,o=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],a=e[0],i=e[1],this.isFlag=!0;else{var s=this.isDrag;a=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(o=!0)}return this.prevX=a,this.prevY=i,{type:"drag",clientX:a,clientY:i,inputEvent:n,isFirstDrag:o,isDrag:this.isDrag,distX:a-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function ji(t,r){var e=r.clientX,n=r.clientY,a=r.datas,i=t.state,o=i.moveableClientRect,s=i.rootMatrix,u=i.is3d,f=i.pos1,c=o.left,v=o.top,l=u?4:3,d=H(vr(s,[e-c,n-v],l),f),p=d[0],h=d[1],g=qt({datas:a,distX:p,distY:h}),m=g[0],b=g[1];return[m,b]}function mr(t,r){var e=r.datas,n=t.state,a=n.allMatrix,i=n.beforeMatrix,o=n.is3d,s=n.left,u=n.top,f=n.origin,c=n.offsetMatrix,v=n.targetMatrix,l=n.transformOrigin,d=o?4:3;e.is3d=o,e.matrix=a,e.targetMatrix=v,e.beforeMatrix=i,e.offsetMatrix=c,e.transformOrigin=l,e.inverseMatrix=Ht(a,d),e.inverseBeforeMatrix=Ht(i,d),e.absoluteOrigin=dr(rt([s,u],f),d),e.startDragBeforeDist=Dt(e.inverseBeforeMatrix,e.absoluteOrigin,d),e.startDragDist=Dt(e.inverseMatrix,e.absoluteOrigin,d)}function nf(t){return Cr(t.datas.beforeTransform,[50,50],100,100).direction}function Be(t,r){var e=t.datas,n=t.originalDatas.beforeRenderable,a=e.transformIndex,i=n.nextTransforms,o=i.length,s=n.nextTransformAppendedIndexes,u=0;a===-1?(r==="translate"?u=0:r==="rotate"&&(u=$t(i,function(l){return l.match(/scale\(/g)})),u===-1&&(u=i.length),e.transformIndex=u):Ut(s,function(l){return l.index===a&&l.functionName===r})?u=a:u=a+s.filter(function(l){return l.index<a}).length;var f=Pf(i,u),c=f.targetFunction,v=r==="rotate"?"rotateZ":r;e.beforeFunctionTexts=f.beforeFunctionTexts,e.afterFunctionTexts=f.afterFunctionTexts,e.beforeTransform=f.beforeFunctionMatrix,e.beforeTransform2=f.beforeFunctionMatrix2,e.targetTansform=f.targetFunctionMatrix,e.afterTransform=f.afterFunctionMatrix,e.afterTransform2=f.afterFunctionMatrix2,e.targetAllTransform=f.allFunctionMatrix,c.functionName===v?(e.afterFunctionTexts.splice(0,1),e.isAppendTransform=!1):o>u&&(e.isAppendTransform=!0,n.nextTransformAppendedIndexes=j(j([],s,!0),[{functionName:r,index:u,isAppend:!0}],!1))}function Ie(t,r,e){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?e:r," ").concat(t.afterFunctionTexts.join(" "))}function af(t){var r=t.datas,e=t.distX,n=t.distY,a=Ui({datas:r,distX:e,distY:n}),i=a[0],o=a[1],s=$i(r,du([i,o],4));return Dt(s,dr([0,0,0],4),4)}function $i(t,r,e){var n=t.beforeTransform,a=t.afterTransform,i=t.beforeTransform2,o=t.afterTransform2,s=t.targetAllTransform,u=e?ft(s,r,4):ft(r,s,4),f=ft(Ht(e?i:n,4),u,4),c=ft(f,Ht(e?o:a,4),4);return c}function Ui(t){var r=t.datas,e=t.distX,n=t.distY,a=r.inverseBeforeMatrix,i=r.is3d,o=r.startDragBeforeDist,s=r.absoluteOrigin,u=i?4:3;return H(Dt(a,rt(s,[e,n]),u),o)}function qt(t,r){var e=t.datas,n=t.distX,a=t.distY,i=e.inverseBeforeMatrix,o=e.inverseMatrix,s=e.is3d,u=e.startDragBeforeDist,f=e.startDragDist,c=e.absoluteOrigin,v=s?4:3;return H(Dt(r?i:o,rt(c,[n,a]),v),r?u:f)}function of(t,r){var e=t.datas,n=t.distX,a=t.distY;e.beforeMatrix;var i=e.matrix,o=e.is3d;e.startDragBeforeDist;var s=e.startDragDist,u=e.absoluteOrigin,f=o?4:3;return H(Dt(i,rt(s,[n,a]),f),u)}function sf(t,r,e,n,a,i){return n===void 0&&(n=r),a===void 0&&(a=e),i===void 0&&(i=[0,0]),t?t.map(function(o,s){var u=jr(o),f=u.value,c=u.unit,v=s?a:n,l=s?e:r;if(o==="%"||isNaN(f)){var d=v?i[s]/v:0;return l*d}else if(c!=="%")return f;return l*f/100}):i}function Ki(t){var r=[];return t[1]>=0&&(t[0]>=0&&r.push(3),t[0]<=0&&r.push(2)),t[1]<=0&&(t[0]>=0&&r.push(1),t[0]<=0&&r.push(0)),r}function uf(t,r){return Ki(r).map(function(e){return t[e]})}function pt(t,r){var e=(r[0]+1)/2,n=(r[1]+1)/2,a=[sr(t[0][0],t[1][0],e,1-e),sr(t[0][1],t[1][1],e,1-e)],i=[sr(t[2][0],t[3][0],e,1-e),sr(t[2][1],t[3][1],e,1-e)];return[sr(a[0],i[0],n,1-n),sr(a[1],i[1],n,1-n)]}function ff(t,r,e,n,a,i){var o=ar(r,e,n,a),s=pt(o,i),u=t[0]-s[0],f=t[1]-s[1];return[u,f]}function te(t,r,e,n){return ft(t,ye(r,n,e),n)}function lf(t,r,e){var n=t.transformOrigin,a=t.offsetMatrix,i=t.is3d,o=r.beforeTransform,s=r.afterTransform,u=i?4:3,f=Un([e]);return te(a,Vt(ft(ft(o,f,4),s,4),4,u),n,u)}function cf(t,r){var e=t.transformOrigin,n=t.offsetMatrix,a=t.is3d,i=t.targetMatrix,o=a?4:3;return te(n,ft(i,jn(r,o),o),e,o)}function Ge(t){var r=Or(t);return{setTransform:function(e,n){n===void 0&&(n=-1),r.startTransforms=bt(e)?e:er(e),Dn(t,n)},setTransformIndex:function(e){Dn(t,e)}}}function ze(t,r){var e=Or(t),n=e.startTransforms;Dn(t,$t(n,function(a){return a.indexOf("".concat(r,"("))===0}))}function Dn(t,r){var e=Or(t),n=t.datas;if(n.transformIndex=r,r!==-1){var a=e.startTransforms[r];if(a){var i=ur([a]);n.startValue=i[0].functionValue}}}function ta(t,r){var e=Or(t);e.nextTransforms=er(r)}function Or(t){return t.originalDatas.beforeRenderable}function Zi(t){var r=t.originalDatas.beforeRenderable;return r.nextTransforms}function ue(t){return Zi(t).join(" ")}function fe(t){return Or(t).nextStyle}function Ji(t,r,e,n,a){ta(a,r);var i=Rt.drag(t,Qr(a,t.state,e,n)),o=i?i.transform:r;return M(M({transform:r,drag:i},Ot({transform:o},a)),{afterTransform:o})}function Qi(t,r,e,n,a){var i=t.state,o=i.left,s=i.top,u=t.props.groupable,f=lf(t.state,a,r),c=u?o:0,v=u?s:0,l=ro(t,e,f),d=H(n,l);return H(d,[c,v])}function vf(t,r,e,n,a){var i=Qi(t,"scale(".concat(r.join(", "),")"),e,n,a);return i}function to(t,r,e){return[-1+t[0]/(r/2),-1+t[1]/(e/2)]}function ro(t,r,e){e===void 0&&(e=t.state.allMatrix);var n=t.state,a=n.width,i=n.height,o=n.is3d,s=o?4:3,u=[a/2*(1+r[0]),i/2*(1+r[1])];return Et(e,u,s)}function df(t,r,e){var n=e.fixedDirection,a=e.fixedPosition;return Qi(t,"rotate(".concat(r,"deg)"),n,a,e)}function pf(t,r,e,n,a,i){var o=t.props.groupable,s=t.state,u=s.transformOrigin,f=s.offsetMatrix,c=s.is3d,v=s.width,l=s.height,d=s.left,p=s.top,h=i.fixedDirection,g=i.nextTargetMatrix||s.targetMatrix,m=c?4:3,b=sf(a,r,e,v,l,u),S=o?d:0,x=o?p:0,C=te(f,g,b,m),E=ff(n,C,r,e,m,h);return H(E,[S,x])}function eo(t,r){return pt(It(t.state),r)}function hf(t,r){var e=t.targetGesto,n=t.controlGesto,a;return e!=null&&e.isFlag()&&(a=e.getEventData()[r]),!a&&(n!=null&&n.isFlag())&&(a=n.getEventData()[r]),a||{}}function gf(t,r){return[t[0]*r[0],t[1]*r[1]]}function V(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return bs.apply(void 0,j([Zn],t,!1))}function no(t){t()}function mf(t){return!t||t==="none"?[1,0,0,1,0,0]:Wt(t)?t:Un(t)}function ye(t,r,e){return dn(r,Yr(e,r),t,Yr(e.map(function(n){return-n}),r))}function bf(t,r,e){if(r==="%"){var n=ra(t.ownerSVGElement);return n[e?"width":"height"]/100}return 1}function Sf(t){var r=De(Kt(t,":before"));return r.map(function(e,n){var a=jr(e),i=a.value,o=a.unit;return i*bf(t,o,n===0)})}function De(t){var r=t.transformOrigin;return r?r.split(" "):["0","0"]}function ao(t,r){r===void 0&&(r=Kt(t));var e=r.transform;if(e&&e!=="none")return r.transform;if("transform"in t){var n=t.transform,a=n.baseVal;if(!a)return"";var i=a.length;if(!i)return"";for(var o=[],s=function(f){var c=a[f].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(v){return c[v]}).join(", "),")"))},u=0;u<i;++u)s(u);return o.join(" ")}return""}function Wr(t,r,e,n,a){var i,o,s,u=t&&t.ownerDocument?t.ownerDocument:document,f=u.documentElement||u.body,c=!1,v,l;if(!t||e)v=t;else{var d=(i=t==null?void 0:t.assignedSlot)===null||i===void 0?void 0:i.parentElement,p=t.parentElement;d?(c=!0,l=p,v=d):v=p}for(var h=!1,g=t===r||v===r,m="relative",b=1,S=parseFloat((o=a)===null||o===void 0?void 0:o.zoom)||1,x=a==null?void 0:a.position;v&&v!==f;){r===v&&(g=!0);var C=Kt(v),E=v.tagName.toLowerCase(),_=ao(v,C),R=C.willChange,y=parseFloat(C.zoom)||1;if(m=C.position,n&&y!==1){b=y;break}if(!e&&n&&S!==1&&x&&x!=="absolute"||E==="svg"||m!=="static"||_&&_!=="none"||R==="transform")break;var w=(s=t==null?void 0:t.assignedSlot)===null||s===void 0?void 0:s.parentNode,O=v.parentNode;w&&(c=!0,l=O);var D=w||O;if(D&&D.nodeType===11){v=D.host,h=!0;break}v=D,m="relative"}return{offsetZoom:b,hasSlot:c,parentSlotElement:l,isCustomElement:h,isStatic:m==="static",isEnd:g||!v||v===f,offsetParent:v||f}}function xf(t,r,e){var n,a=t.tagName.toLowerCase(),i=t.offsetLeft,o=t.offsetTop,s=qr(i),u=!s,f,c;return!u&&a!=="svg"?(f=Hi?Sf(t):De(e).map(function(v){return parseFloat(v)}),c=f.slice(),u=!0,n=Cf(t,f,t===r&&r.tagName.toLowerCase()==="g"),i=n[0],o=n[1],f[0]=n[2],f[1]=n[3]):(f=De(e).map(function(v){return parseFloat(v)}),c=f.slice()),{tagName:a,isSVG:s,hasOffset:u,offset:[i||0,o||0],origin:f,targetOrigin:c}}function io(t,r,e){e===void 0&&(e=Kt(t));var n=Kt(document.body),a=n.position;if(!r&&(!a||a==="static"))return[0,0];var i=parseInt(n.marginLeft,10),o=parseInt(n.marginTop,10);return e.position==="absolute"&&((e.top!=="auto"||e.bottom!=="auto")&&(o=0),(e.left!=="auto"||e.right!=="auto")&&(i=0)),[i,o]}function Mn(t){t.forEach(function(r){var e=r.matrix;e&&(r.matrix=Vt(e,3,4))})}function Ef(t){for(var r=t.parentElement,e=!1;r;){var n=Kt(r).transform;if(n&&n!=="none"){e=!0;break}if(r===document.body)break;r=r.parentElement}return{fixedContainer:r||document.body,hasTransform:e}}function Ae(t,r){return r===void 0&&(r=t.length>9),"".concat(r?"matrix3d":"matrix","(").concat(zi(t,!r).join(","),")")}function ra(t){var r=t.clientWidth,e=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:r,clientHeight:e};var n=t.viewBox,a=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||r,height:a.height||e,clientWidth:r,clientHeight:e}}function _f(t,r){var e=ra(t),n=e.width,a=e.height,i=e.clientWidth,o=e.clientHeight,s=i/n,u=o/a,f=t.preserveAspectRatio.baseVal,c=f.align,v=f.meetOrSlice,l=[0,0],d=[s,u],p=[0,0];if(c!==1){var h=(c-2)%3,g=Math.floor((c-2)/3);l[0]=n*h/2,l[1]=a*g/2;var m=v===2?Math.max(u,s):Math.min(s,u);d[0]=m,d[1]=m,p[0]=(i-n)/2*h,p[1]=(o-a)/2*g}var b=jn(d,r);return b[r*(r-1)]=p[0],b[r*(r-1)+1]=p[1],ye(b,r,l)}function Cf(t,r,e){if(!t.getBBox||!e&&t.tagName.toLowerCase()==="g")return[0,0,0,0];var n=t.getBBox(),a=ra(t.ownerSVGElement),i=n.x-a.x,o=n.y-a.y;return[i,o,r[0]-i,r[1]-o]}function Et(t,r,e){return Dt(t,dr(r,e),e)}function ar(t,r,e,n){return[[0,0],[r,0],[0,e],[r,e]].map(function(a){return Et(t,a,n)})}function kt(t){var r=t.map(function(f){return f[0]}),e=t.map(function(f){return f[1]}),n=Math.min.apply(Math,r),a=Math.min.apply(Math,e),i=Math.max.apply(Math,r),o=Math.max.apply(Math,e),s=i-n,u=o-a;return{left:n,top:a,right:i,bottom:o,width:s,height:u}}function Na(t,r,e,n){var a=ar(t,r,e,n);return kt(a)}function yf(t,r,e,n,a){var i,o=t.target,s=t.origin,u=r.matrix,f=so(o),c=f.offsetWidth,v=f.offsetHeight,l=e.getBoundingClientRect(),d=[0,0];e===document.body&&(d=io(o,!0));for(var p=o.getBoundingClientRect(),h=p.left-l.left+e.scrollLeft-(e.clientLeft||0)+d[0],g=p.top-l.top+e.scrollTop-(e.clientTop||0)+d[1],m=p.width,b=p.height,S=dn(n,a,u),x=Na(S,c,v,n),C=x.left,E=x.top,_=x.width,R=x.height,y=Et(S,s,n),w=H(y,[C,E]),O=[h+w[0]*m/_,g+w[1]*b/R],D=[0,0],T=0;++T<10;){var P=Ht(a,n);i=H(Et(P,O,n),Et(P,y,n)),D[0]=i[0],D[1]=i[1];var I=dn(n,a,Yr(D,n),u),G=Na(I,c,v,n),F=G.left,z=G.top,A=F-h,B=z-g;if(Math.abs(A)<2&&Math.abs(B)<2)break;O[0]-=A,O[1]-=B}return D.map(function(k){return Math.round(k)})}function Df(t,r,e){var n=t.length===16,a=n?4:3,i=r.map(function(u){return Et(t,u,a)}),o=e.left,s=e.top;return i.map(function(u){return[u[0]+o,u[1]+s]})}function Cr(t,r,e,n){var a=t.length===16,i=a?4:3,o=ar(t,e,n,i),s=o[0],u=s[0],f=s[1],c=o[1],v=c[0],l=c[1],d=o[2],p=d[0],h=d[1],g=o[3],m=g[0],b=g[1],S=Et(t,r,i),x=S[0],C=S[1],E=Math.min(u,v,p,m),_=Math.min(f,l,h,b),R=Math.max(u,v,p,m),y=Math.max(f,l,h,b);u=u-E||0,v=v-E||0,p=p-E||0,m=m-E||0,f=f-_||0,l=l-_||0,h=h-_||0,b=b-_||0,x=x-E||0,C=C-_||0;var w=un(ar(t,100,100,i));return{left:E,top:_,right:R,bottom:y,origin:[x,C],pos1:[u,f],pos2:[v,l],pos3:[p,h],pos4:[m,b],direction:w}}function Lt(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function oo(t,r){return Lt([r[0]-t[0],r[1]-t[1]])}function Br(t,r,e,n){e===void 0&&(e=1),n===void 0&&(n=ht(t,r));var a=oo(t,r);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(n,"rad) scaleY(").concat(e,")"),width:"".concat(a,"px")}}function ea(t,r){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var a=e.length,i=e.reduce(function(s,u){return s+u[0]},0)/a,o=e.reduce(function(s,u){return s+u[1]},0)/a;return{transform:"translateZ(0px) translate(".concat(i,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(r,")")}}function pr(t,r){var e=t[r];return Wt(e)?M(M({},t),e):t}function so(t,r){r===void 0&&(r=t?Kt(t):null);var e=t&&!qr(t.offsetWidth),n=0,a=0,i=0,o=0,s=0,u=0,f=0,c=0,v=0,l=0,d=0,p=0,h=1/0,g=1/0,m=1/0,b=1/0,S=0,x=0,C=!1;if(t)if(!e&&t.tagName.toLowerCase()!=="svg"){var E=t.getBBox();C=!0,n=E.width,a=E.height,s=n,u=a,f=n,c=a,i=n,o=a}else{var _=t.style,R=r.boxSizing==="border-box",y=parseFloat(r.borderLeftWidth)||0,w=parseFloat(r.borderRightWidth)||0,O=parseFloat(r.borderTopWidth)||0,D=parseFloat(r.borderBottomWidth)||0,T=parseFloat(r.paddingLeft)||0,P=parseFloat(r.paddingRight)||0,I=parseFloat(r.paddingTop)||0,G=parseFloat(r.paddingBottom)||0,F=T+P,z=I+G,A=y+w,B=O+D,k=F+A,$=z+B,U=r.position,q=0,N=0;if("clientLeft"in t){var Y=null;if(U==="absolute"){var K=Wr(t,document.body);Y=K.offsetParent}else Y=t.parentElement;if(Y){var Q=Kt(Y);q=parseFloat(Q.width),N=parseFloat(Q.height)}}v=Math.max(F,lt(r.minWidth,q)||0),l=Math.max(z,lt(r.minHeight,N)||0),h=lt(r.maxWidth,q),g=lt(r.maxHeight,N),isNaN(h)&&(h=1/0),isNaN(g)&&(g=1/0),S=lt(_.width,0)||0,x=lt(_.height,0)||0,s=parseFloat(r.width)||0,u=parseFloat(r.height)||0,f=Math.abs(s-S)<1?on(v,S||s,h):s,c=Math.abs(u-x)<1?on(l,x||u,g):u,n=f,a=c,i=f,o=c,R?(m=h,b=g,d=v,p=l,f=n-k,c=a-$):(m=h+k,b=g+$,d=v+k,p=l+$,n=f+k,a=c+$),i=f+F,o=c+z}return{svg:C,offsetWidth:n,offsetHeight:a,clientWidth:i,clientHeight:o,contentWidth:f,contentHeight:c,inlineCSSWidth:S,inlineCSSHeight:x,cssWidth:s,cssHeight:u,minWidth:v,minHeight:l,maxWidth:h,maxHeight:g,minOffsetWidth:d,minOffsetHeight:p,maxOffsetWidth:m,maxOffsetHeight:b}}function uo(t,r){return ht(r>0?t[0]:t[1],r>0?t[1]:t[0])}function le(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function fo(t,r){var e=t===document.body||t===document.documentElement,n={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return e&&(n.clientHeight=Math.max(r.height,n.clientHeight),n.scrollHeight=Math.max(r.height,n.scrollHeight)),n.overflow=Kt(t).overflow!=="visible",M(M({},r),n)}function Je(t,r,e,n){var a=t.left,i=t.right,o=t.top,s=t.bottom,u=r.top,f=r.left,c={left:f+a,top:u+o,right:f+i,bottom:u+s,width:i-a,height:s-o};return e&&n?fo(e,c):c}function Ir(t,r){var e=0,n=0,a=0,i=0;if(t){var o=t.getBoundingClientRect();e=o.left,n=o.top,a=o.width,i=o.height}var s={left:e,top:n,width:a,height:i,right:e+a,bottom:n+i};return t&&r?fo(t,s):s}function lo(t,r,e,n){var a;if(t)a=t;else if(r)a=[0,0];else{var i=e.target;a=co(i,n)}return a}function co(t,r){if(t){var e=t.getAttribute("data-rotation")||"",n=t.getAttribute("data-direction");if(r.deg=e,!!n){var a=[0,0];return n.indexOf("w")>-1&&(a[0]=-1),n.indexOf("e")>-1&&(a[0]=1),n.indexOf("n")>-1&&(a[1]=-1),n.indexOf("s")>-1&&(a[1]=1),a}}}function na(t,r){return[rt(r,t[0]),rt(r,t[1]),rt(r,t[2]),rt(r,t[3])]}function It(t){var r=t.left,e=t.top,n=t.pos1,a=t.pos2,i=t.pos3,o=t.pos4;return na([n,a,i,o],[r,e])}function Mf(t){return Math.round(t%1===-.5?t-1:t)}function _r(t,r){var e;(e=t[r])===null||e===void 0||e.unset(),t[r]=null}function Ot(t,r){if(r){var e=Or(r);e.nextStyle=M(M({},e.nextStyle),t)}return{style:t,cssText:Rr(t).map(function(n){return"".concat(Se(n,"-"),": ").concat(t[n],";")}).join("")}}function vo(t,r,e){var n=r.afterTransform||r.transform;return M(M({},Ot(M(M(M({},t.style),r.style),{transform:n}),e)),{afterTransform:n,transform:t.transform})}function J(t,r,e,n){var a=r.datas;a.datas||(a.datas={});var i=M(M({},e),{target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,moveable:t,datas:a.datas,isFirstDrag:!!r.isFirstDrag,isTrusted:r.isTrusted!==!1,stopAble:function(){a.isEventStart=!1},stopDrag:function(){var o;(o=r.stop)===null||o===void 0||o.call(r)}});return a.isStartEvent?n||(a.lastEvent=i):a.isStartEvent=!0,i}function zt(t,r,e){var n=r.datas,a="isDrag"in e?e.isDrag:r.isDrag;return n.datas||(n.datas={}),M(M({isDrag:a},e),{moveable:t,target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:r.isDouble,datas:n.datas,isFirstDrag:!!r.isFirstDrag})}function ke(t,r,e){t._emitter.on(r,e)}function L(t,r,e,n){return t.triggerEvent(r,e,n)}function Kt(t,r){return window.getComputedStyle(t,r)}function ce(t,r,e){var n={},a={};return t.filter(function(i){var o=i.name;if(n[o]||!r.some(function(s){return i[s]}))return!1;if(!e&&i.ableGroup){if(a[i.ableGroup])return!1;a[i.ableGroup]=!0}return n[o]=!0,!0})}function wn(t,r){return t===r||t==null&&r==null}function wf(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=t.length-1,n=0;n<e;++n){var a=t[n];if(!qr(a))return a}return t[e]}function po(t,r){var e=[],n=[];return t.forEach(function(a,i){var o=r(a,i,t),s=n.indexOf(o),u=e[s]||[];s===-1&&(n.push(o),e.push(u)),u.push(a)}),e}function Rf(t,r){var e=[],n={};return t.forEach(function(a,i){var o=r(a,i,t),s=n[o];s||(s=[],n[o]=s,e.push(s)),s.push(a)}),e}function ho(t){return t.reduce(function(r,e){return r.concat(e)},[])}function Mr(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.sort(function(e,n){return Math.abs(n)-Math.abs(e)}),t[0]}function vr(t,r,e){return Dt(Ht(t,e),dr(r,e),e)}function Of(t,r){var e,n=t.is3d,a=t.rootMatrix,i=n?4:3;return e=vr(a,[r.distX,r.distY],i),r.distX=e[0],r.distY=e[1],r}function ve(t,r,e,n,a){return H(Et(t,rt(e,r),a),n)}function Ft(t,r,e){return e?"".concat(t/r*100,"%"):"".concat(t,"px")}function Me(t){return Math.abs(t)<=Tt?0:t}function aa(t){return function(r){if(!r.isDragging(t))return"";var e=hf(r,t),n=e.deg;return n?V("view-control-rotation".concat(n)):""}}function ia(t,r){return r===void 0&&(r=[t]),function(e,n){if(n.isRequest)return r.some(function(i){return n.requestAble===i})?n.parentDirection:!1;var a=n.inputEvent.target;return _t(a,V("direction"))&&(!t||_t(a,V(t)))}}function Tf(t){var r={};for(var e in t)r[t[e]]=e;return r}function Pf(t,r){var e=t.slice(0,r<0?void 0:r),n=t.slice(0,r<0?void 0:r+1),a=t[r]||"",i=r<0?[]:t.slice(r),o=r<0?[]:t.slice(r+1),s=ur(e),u=ur(n),f=ur([a]),c=ur(i),v=ur(o),l=xr(s),d=xr(u),p=xr(c),h=xr(v),g=ft(l,p,4);return{transforms:t,beforeFunctionMatrix:l,beforeFunctionMatrix2:d,targetFunctionMatrix:xr(f),afterFunctionMatrix:p,afterFunctionMatrix2:h,allFunctionMatrix:g,beforeFunctions:s,beforeFunctions2:u,targetFunction:f[0],afterFunctions:c,afterFunctions2:v,beforeFunctionTexts:e,beforeFunctionTexts2:n,targetFunctionText:a,afterFunctionTexts:i,afterFunctionTexts2:o}}function Bf(t){return!t||!Wt(t)||t instanceof Element?!1:bt(t)||"length"in t}function hr(t,r){return t?t instanceof Element?t:Gt(t)?r?document.querySelector(t):t:Fn(t)?t():"current"in t?t.current:t:null}function oa(t,r){if(!t)return[];var e=Bf(t)?[].slice.call(t):[t];return e.reduce(function(n,a){return Gt(a)&&r?j(j([],n,!0),[].slice.call(document.querySelectorAll(a)),!0):(bt(a)?n.push(oa(a,r)):n.push(hr(a,r)),n)},[])}function If(t,r,e){var n=ht(t,r)/Math.PI*180;return n=e>=0?n:180-n,n=n>=0?n:360+n,n}function La(t,r){var e=t.rootMatrix,n=t.is3d,a=n?4:3,i=Ht(e,a);return n||(i=Vt(i,3,4)),i[12]=0,i[13]=0,i[14]=0,Su(i,r)}function go(t,r,e,n,a){var i=t[0],o=t[1],s=0,u=0;if(a&&i&&o){var f=ht([0,0],r),c=ht([0,0],n),v=Lt(r),l=Math.cos(f-c)*v;if(!n[0])u=l,s=u*e;else if(!n[1])s=l,u=s/e;else{var d=n[0]*2*i,p=n[1]*2*o,h=Lt([d+r[0],p+r[1]])-Lt([d,p]),g=ht([0,0],[e,1]);s=Math.cos(g)*h,u=Math.sin(g)*h}}else s=n[0]*r[0],u=n[1]*r[1];return[s,u]}function mo(t,r,e,n){var a,i=e.ratio,o=e.startOffsetWidth,s=e.startOffsetHeight,u=0,f=0,c=n.distX,v=n.distY,l=n.parentDistance,d=n.parentDist,p=n.parentScale,h=e.fixedDirection,g=[0,1].map(function(E){return Math.abs(t[E]-h[E])}),m=[0,1].map(function(E){var _=g[E];return _!==0&&(_=2/_),_});if(d)u=d[0],f=d[1],r&&(u?f||(f=u/i):u=f*i);else if(p)u=(p[0]-1)*o,f=(p[1]-1)*s;else if(l){var b=o*g[0],S=s*g[1],x=Lt([b,S]);u=l/x*b*m[0],f=l/x*S*m[1]}else{var C=qt({datas:e,distX:c,distY:v});C=m.map(function(E,_){return C[_]*E}),a=go([o,s],C,i,t,r),u=a[0],f=a[1]}return{distWidth:u,distHeight:f}}function Rn(t,r){if(r){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var e=t.split(" "),n=e[0],a=e[1],i=Rn(n||""),o=Rn(a||""),s=M(M({},i),o),u={x:"50%",y:"50%"};return s.x&&(u.x=s.x),s.y&&(u.y=s.y),s.value&&(s.x&&!s.y&&(u.y=s.value),!s.x&&s.y&&(u.x=s.value)),u}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function Gf(t,r,e){var n=Rn(t,!0),a=n.x,i=n.y;return[lt(a,r)||0,lt(i,e)||0]}function zf(t,r,e){var n=t.map(function(i){return H(i,r)}),a=n.map(function(i){return Kr(i,e)});return{prev:n,next:a,result:a.map(function(i){return rt(i,r)})}}function bo(t,r){return t.length===r.length&&t.every(function(e,n){var a=r[n],i=bt(e),o=bt(a);return i&&o?bo(e,a):!i&&!o?e===a:!1})}var Af=Jr("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,r){var e=r.datas,n=r.targets,a=r.angle,i=r.originalDatas,o=t.props,s=o.pinchable,u=o.ables;if(!s)return!1;var f="onPinch".concat(n?"Group":"","Start"),c="drag".concat(n?"Group":"","ControlStart"),v=(s===!0?t.controlAbles:u.filter(function(h){return s.indexOf(h.name)>-1})).filter(function(h){return h.canPinch&&h[c]}),l=J(t,r,{});n&&(l.targets=n);var d=L(t,f,l);e.isPinch=d!==!1,e.ables=v;var p=e.isPinch;return p?(v.forEach(function(h){if(i[h.name]=i[h.name]||{},!!h[c]){var g=M(M({},r),{datas:i[h.name],parentRotate:a,isPinch:!0});h[c](t,g)}}),t.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},p):!1},pinch:function(t,r){var e=r.datas,n=r.scale,a=r.distance,i=r.originalDatas,o=r.inputEvent,s=r.targets,u=r.angle;if(e.isPinch){var f=a*(1-1/n),c=J(t,r,{});s&&(c.targets=s);var v="onPinch".concat(s?"Group":"");L(t,v,c);var l=e.ables,d="drag".concat(s?"Group":"","Control");return l.forEach(function(p){p[d]&&p[d](t,M(M({},r),{datas:i[p.name],inputEvent:o,parentDistance:f,parentRotate:u,isPinch:!0}))}),c}},pinchEnd:function(t,r){var e=r.datas,n=r.isPinch,a=r.inputEvent,i=r.targets,o=r.originalDatas;if(e.isPinch){var s="onPinch".concat(i?"Group":"","End"),u=zt(t,r,{isDrag:n});i&&(u.targets=i),L(t,s,u);var f=e.ables,c="drag".concat(i?"Group":"","ControlEnd");return f.forEach(function(v){v[c]&&v[c](t,M(M({},r),{isDrag:n,datas:o[v.name],inputEvent:a,isPinch:!0}))}),n}},pinchGroupStart:function(t,r){return this.pinchStart(t,M(M({},r),{targets:t.props.targets}))},pinchGroup:function(t,r){return this.pinch(t,M(M({},r),{targets:t.props.targets}))},pinchGroupEnd:function(t,r){return this.pinchEnd(t,M(M({},r),{targets:t.props.targets}))}});function Yt(t,r,e){var n=e.originalDatas;n.groupable=n.groupable||{};var a=n.groupable;a.childDatas=a.childDatas||[];var i=a.childDatas;return t.moveables.map(function(o,s){return i[s]=i[s]||{},i[s][r]=i[s][r]||{},M(M({},e),{datas:i[s][r],originalDatas:i[s]})})}function Qe(t,r,e,n,a,i,o){var s=!!e.match(/Start$/g),u=!!e.match(/End$/g),f=a.isPinch,c=a.datas,v=Yt(t,r.name,a),l=t.moveables,d=v.map(function(p,h){var g=l[h],m=g.state,b=m.gestos,S=p;if(s)S=new Dr(o).dragStart(n,p);else{if(b[o]||(b[o]=c.childGestos[h]),!b[o])return;S=Qr(p,m,n,f,i,o)}var x=r[e](g,M(M({},S),{parentFlag:!0}));return u&&(b[o]=null),x});return s&&(c.childGestos=l.map(function(p){return p.state.gestos[o]})),d}function jt(t,r,e,n,a,i){a===void 0&&(a=function(c,v){return v});var o=!!e.match(/End$/g),s=Yt(t,r.name,n),u=t.moveables,f=s.map(function(c,v){var l=u[v],d=c;d=a(l,c);var p=r[e](l,M(M({},d),{parentFlag:!0}));return p&&i&&i(l,c,p,v),o&&(l.state.gestos={}),p});return f}var kf=["left","right","center"],Ff=["top","bottom","middle"],ir={start:"left",end:"right",center:"center"},or={start:"top",end:"bottom",center:"middle"};function Tr(t,r){var e=t.props,n=e.snappable,a=e.bounds,i=e.innerBounds,o=e.verticalGuidelines,s=e.horizontalGuidelines,u=e.snapGridWidth,f=e.snapGridHeight,c=t.state,v=c.guidelines,l=c.enableSnap;return!n||!l||r&&n!==!0&&n.indexOf(r)<0?!1:!!(u||f||a||i||v&&v.length||o&&o.length||s&&s.length)}function sa(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function Nf(t,r){var e=sa(t),n={};for(var a in e)a in r&&e[a]&&(n[a]=r[a]);return n}function ua(t,r){var e=Nf(t,r),n=Ff.filter(function(i){return i in e}),a=kf.filter(function(i){return i in e});return{horizontal:n.map(function(i){return e[i]}),vertical:a.map(function(i){return e[i]})}}function Lf(t,r,e){var n=Et(t,[r.clientLeft,r.clientTop],e);return[r.left+n[0],r.top+n[1]]}function Yf(t){var r=t[0],e=t[1],n=e[0]-r[0],a=e[1]-r[1];Math.abs(n)<mt&&(n=0),Math.abs(a)<mt&&(a=0);var i=0,o=0,s=0;return n?a?(i=-a/n,o=1,s=i*r[0]-r[1]):(o=1,s=-r[1]):(i=-1,s=r[0]),[i,o,s].map(function(u){return Z(u,mt)})}function Fe(t,r,e,n){var a=t.props,i=wf(n,a.snapThreshold,5);return So(t.state.guidelines,r,e,i)}function So(t,r,e,n){return{vertical:Wa(t,"vertical",r,n),horizontal:Wa(t,"horizontal",e,n)}}function Wf(t,r,e){var n=e[0],a=e[1],i=r[0],o=r[1],s=H(e,r),u=s[0],f=s[1],c=f>0,v=u>0;u=Me(u),f=Me(f);var l={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(u===0&&f===0)return{vertical:l,horizontal:d};var p=Fe(t,u?[n]:[],f?[a]:[]),h=p.vertical,g=p.horizontal;h.posInfos.filter(function(P){var I=P.pos;return v?I>=i:I<=i}),g.posInfos.filter(function(P){var I=P.pos;return c?I>=o:I<=o}),h.isSnap=h.posInfos.length>0,g.isSnap=g.posInfos.length>0;var m=On(h),b=m.isSnap,S=m.guideline,x=On(g),C=x.isSnap,E=x.guideline,_=C?E.pos[1]:0,R=b?S.pos[0]:0;if(u===0)C&&(d.isSnap=!0,d.pos=E.pos[1],d.offset=a-d.pos);else if(f===0)b&&(l.isSnap=!0,l.pos=R,l.offset=n-R);else{var y=f/u,w=e[1]-y*n,O=0,D=0,T=!1;b?(D=R,O=y*D+w,T=!0):C&&(O=_,D=(O-w)/y,T=!0),T&&(l.isSnap=!0,l.pos=D,l.offset=n-D,d.isSnap=!0,d.pos=O,d.offset=a-O)}return{vertical:l,horizontal:d}}function Ya(t,r,e){var n=ua(t.props.snapDirections,r);return Fe(t,n.vertical,n.horizontal,e)}function On(t){var r=t.isSnap;if(!r)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var e=t.posInfos[0],n=e.guidelineInfos[0],a=n.offset,i=n.dist,o=n.guideline;return{isSnap:r,offset:a,dist:i,pos:e.pos,guideline:o}}function Wa(t,r,e,n){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var a=r==="vertical",i=a?0:1,o=e.map(function(u,f){var c=t.map(function(v){var l=v.pos,d=u-l[i];return{offset:d,dist:Math.abs(d),guideline:v}}).filter(function(v){var l=v.guideline,d=v.dist,p=l.type;return!(p!==r||d>n)}).sort(function(v,l){return v.dist-l.dist});return{pos:u,index:f,guidelineInfos:c}}).filter(function(u){return u.guidelineInfos.length>0}).sort(function(u,f){return u.guidelineInfos[0].dist-f.guidelineInfos[0].dist}),s=o.length>0;return{isSnap:s,index:s?o[0].index:-1,posInfos:o}}function Xf(t,r,e,n){n===void 0&&(n=1);var a=[];if(e[0]&&e[1])a=[e,[-e[0],e[1]],[e[0],-e[1]]].map(function(s){return pt(r,s)});else if(!e[0]&&!e[1])for(var i=[r[0],r[1],r[3],r[2],r[0]],o=0;o<4;++o)a.push(i[o]),a.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);else t.props.keepRatio?a=[[-1,-1],[-1,1],[1,-1],[1,1],e].map(function(s){return pt(r,s)}):(a=uf(r,e),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));return Fe(t,a.map(function(s){return s[0]}),a.map(function(s){return s[1]}),n)}function xo(t,r){var e=Math.abs(t.offset),n=Math.abs(r.offset);return t.isBound&&r.isBound?n-e:t.isBound?-1:r.isBound?1:t.isSnap&&r.isSnap?n-e:t.isSnap?-1:r.isSnap||e<Tt?1:n<Tt?-1:e-n}function we(t,r){return t.slice().sort(function(e,n){var a=e.sign[r],i=n.sign[r],o=e.offset[r],s=n.offset[r];if(a){if(!i)return-1}else return 1;return xo({isBound:e.isBound,isSnap:e.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:s})})[0]}function Hf(t,r,e){var n=[];if(e)Math.abs(r[0])!==1||Math.abs(r[1])!==1?n.push([r,[-1,-1]],[r,[-1,1]],[r,[1,-1]],[r,[1,1]]):n.push([r,[t[0],-t[1]]],[r,[-t[0],t[1]]]),n.push([r,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var a=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(s){var u=[o*a[0],s*a[1]];r[0]===u[0]&&r[1]===u[1]||n.push([r,u])})})}else if(t[0]){var i=Math.abs(r[0])===1?[1]:[1,-1];i.forEach(function(o){n.push([[r[0],-1],[o*t[0],-1]],[[r[0],0],[o*t[0],0]],[[r[0],1],[o*t[0],1]])})}else if(t[1]){var i=Math.abs(r[1])===1?[1]:[1,-1];i.forEach(function(s){n.push([[-1,r[1]],[-1,s*t[1]]],[[0,r[1]],[0,s*t[1]]],[[1,r[1]],[1,s*t[1]]])})}return n}function Eo(t,r){var e=sn([r[0][0],r[1][0]]),n=sn([r[0][1],r[1][1]]);return{vertical:e<=t[0],horizontal:n<=t[1]}}function fa(t,r){var e=r[0],n=r[1],a=n[0]-e[0],i=n[1]-e[1];Math.abs(a)<Tt&&(a=0),Math.abs(i)<Tt&&(i=0);var o,s;if(!a)o=e[0],s=t[0];else if(!i)o=e[1],s=t[1];else{var u=i/a;o=u*(t[0]-e[0])+e[1],s=t[1]}return o-s}function _o(t,r,e,n){return n===void 0&&(n=Tt),t.every(function(a){var i=fa(a,r),o=i<=0;return o===e||Math.abs(i)<=n})}function Xa(t,r,e,n,a){return a===void 0&&(a=0),n&&r-a<=t||!n&&t<=e+a?{isBound:!0,offset:n?r-t:e-t}:{isBound:!1,offset:0}}function Vf(t,r){var e=r.line,n=r.centerSign,a=r.verticalSign,i=r.horizontalSign,o=r.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=s.left,f=s.top,c=s.width,v=s.height,l=[[u,f],[u,f+v]],d=[[u,f],[u+c,f]],p=[[u+c,f],[u+c,f+v]],h=[[u,f+v],[u+c,f+v]];if(_o([[u,f],[u+c,f],[u,f+v],[u+c,f+v]],e,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=rr(e,o,d,a),m=rr(e,o,h,a),b=rr(e,o,l,i),S=rr(e,o,p,i),x=g.isBound&&m.isBound,C=g.isBound||m.isBound,E=b.isBound&&S.isBound,_=b.isBound||S.isBound,R=Mr(g.offset,m.offset),y=Mr(b.offset,S.offset),w=[0,0],O=!1,D=!1;return Math.abs(y)<Math.abs(R)?(w=[R,0],O=C,D=x):(w=[0,y],O=_,D=E),{isAllBound:D,isVerticalBound:C,isHorizontalBound:_,isBound:O,offset:w}}function rr(t,r,e,n,a,i){var o=r[0],s=r[1],u=t[0],f=e[0],c=e[1],v=Me(c[1]-f[1]),l=Me(c[0]-f[0]),d=s,p=o,h=-o/s;if(l){if(!v){if(i&&!d)return{isBound:!1,offset:0};if(p){var S=(f[1]-u[1])/h+u[0];return Xa(S,f[0],c[0],n,a)}else{var m=f[1]-u[1],b=Math.abs(m)<=(a||0);return{isBound:b,offset:b?m:0}}}}else{if(i&&!p)return{isBound:!1,offset:0};if(d){var g=h*(f[0]-u[0])+u[1];return Xa(g,f[1],c[1],n,a)}else{var m=f[0]-u[0],b=Math.abs(m)<=(a||0);return{isBound:b,offset:b?m:0}}}return{isBound:!1,offset:0}}function Co(t,r,e){return r.map(function(n){var a=Vf(t,n),i=a.isBound,o=a.offset,s=a.isVerticalBound,u=a.isHorizontalBound,f=n.multiple,c=qt({datas:e,distX:o[0],distY:o[1]}).map(function(v,l){return v*(f[l]?2/f[l]:0)});return{sign:f,isBound:i,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:c}})}function qf(t,r,e){var n,a=la(t,r,[0,0],!1).map(function(l){return M(M({},l),{multiple:l.multiple.map(function(d){return Math.abs(d)*2})})}),i=Co(t,a,e),o=we(i,0),s=we(i,1),u=0,f=0,c=o.isVerticalBound||s.isVerticalBound,v=o.isHorizontalBound||s.isHorizontalBound;return(c||v)&&(n=of({datas:e,distX:-o.offset[0],distY:-s.offset[1]}),u=n[0],f=n[1]),{vertical:{isBound:c,offset:u},horizontal:{isBound:v,offset:f}}}function jf(t,r){var e=[],n=t[0],a=t[1];return n&&a?e.push([[0,a*2],t,[-n,a]],[[n*2,0],t,[n,-a]]):n?(e.push([[n*2,0],[n,1],[n,-1]]),r&&e.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):a?(e.push([[0,a*2],[1,a],[-1,a]]),r&&e.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):e.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),e}function la(t,r,e,n){var a=t.state,i=a.allMatrix,o=a.is3d,s=ar(i,100,100,o?4:3),u=pt(s,[0,0]);return jf(e,n).map(function(f){var c=f[0],v=f[1],l=f[2],d=[pt(s,v),pt(s,l)],p=Yf(d),h=Eo(u,d),g=h.vertical,m=h.horizontal,b=fa(u,d)<=0;return{multiple:c,centerSign:b,verticalSign:g,horizontalSign:m,lineConstants:p,line:[pt(r,v),pt(r,l)]}})}function Ha(t,r,e,n){var a=n?t.map(function(i){return Kr(i,n)}):t;return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some(function(i){var o=fa(e,i)<=0;return!_o(r,i,o)})}function $f(t){var r=t[0],e=t[1],n=e[0]-r[0],a=e[1]-r[1];if(!n)return Math.abs(r[0]);if(!a)return Math.abs(r[1]);var i=a/n;return Math.abs((-i*r[0]+r[1])/Math.sqrt(Math.pow(i,2)+1))}function Uf(t){var r=t[0],e=t[1],n=e[0]-r[0],a=e[1]-r[1];if(!n)return[r[0],0];if(!a)return[0,r[1]];var i=a/n,o=-i*r[0]+r[1];return[-o/(i+1/i),o/(i*i+1)]}function Kf(t,r,e,n,a){var i=t.props.innerBounds,o=a*Math.PI/180;if(!i)return[];var s=i.left,u=i.top,f=i.width,c=i.height,v=s-n[0],l=s+f-n[0],d=u-n[1],p=u+c-n[1],h=[[v,d],[l,d],[v,p],[l,p]],g=pt(e,[0,0]);if(!Ha(e,h,g,0))return[];var m=[],b=h.map(function(S){return[Lt(S),ht([0,0],S)]});return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach(function(S){var x=ht([0,0],Uf(S)),C=$f(S);m.push.apply(m,b.filter(function(E){var _=E[0];return _&&C<=_}).map(function(E){var _=E[0],R=E[1],y=Math.acos(_?C/_:0),w=R+y,O=R-y;return[o+w-x,o+O-x]}).reduce(function(E,_){return E.push.apply(E,_),E},[]).filter(function(E){return!Ha(r,h,g,E)}).map(function(E){return Z(E*180/Math.PI,Tt)}))}),m}function Zf(t){var r=t.props.innerBounds;if(!r)return{vertical:[],horizontal:[]};var e=t.getRect(),n=e.pos1,a=e.pos2,i=e.pos3,o=e.pos4,s=[n,a,i,o],u=pt(s,[0,0]),f=r.left,c=r.top,v=r.width,l=r.height,d=[[f,c],[f,c+l]],p=[[f,c],[f+v,c]],h=[[f+v,c],[f+v,c+l]],g=[[f,c+l],[f+v,c+l]],m=la(t,s,[0,0],!1),b=[],S=[],x={top:!1,bottom:!1,left:!1,right:!1};return m.forEach(function(C){var E=C.line,_=C.lineConstants,R=Eo(u,E),y=R.horizontal,w=R.vertical,O=rr(E,_,p,w,1,!0),D=rr(E,_,g,w,1,!0),T=rr(E,_,d,y,1,!0),P=rr(E,_,h,y,1,!0);O.isBound&&!x.top&&(b.push(c),x.top=!0),D.isBound&&!x.bottom&&(b.push(c+l),x.bottom=!0),T.isBound&&!x.left&&(S.push(f),x.left=!0),P.isBound&&!x.right&&(S.push(f+v),x.right=!0)}),{horizontal:b,vertical:S}}function ca(t,r,e){var n=t||{},a=n.position,i=a===void 0?"client":a,o=n.left,s=o===void 0?-1/0:o,u=n.top,f=u===void 0?-1/0:u,c=n.right,v=c===void 0?1/0:c,l=n.bottom,d=l===void 0?1/0:l,p={position:i,left:s,top:f,right:v,bottom:d};return{vertical:Va(p,r,!0),horizontal:Va(p,e,!1)}}function Ne(t,r){var e=t.state,n=e.containerClientRect,a=n.clientHeight,i=n.clientWidth,o=n.clientLeft,s=n.clientTop,u=e.snapOffset,f=u.left,c=u.top,v=u.right,l=u.bottom,d=r||t.props.bounds||{},p=d.position||"client",h=p==="css",g=d.left,m=g===void 0?-1/0:g,b=d.top,S=b===void 0?-1/0:b,x=d.right,C=x===void 0?h?-1/0:1/0:x,E=d.bottom,_=E===void 0?h?-1/0:1/0:E;return h&&(C=i+v-f-C,_=a+l-c-_),{left:m+f-o,right:C+f-o,top:S+c-s,bottom:_+c-s}}function Jf(t,r,e){var n=Ne(t),a=n.left,i=n.top,o=n.right,s=n.bottom,u=e[0],f=e[1],c=H(e,r),v=c[0],l=c[1];Math.abs(v)<Tt&&(v=0),Math.abs(l)<Tt&&(l=0);var d=l>0,p=v>0,h={isBound:!1,offset:0,pos:0},g={isBound:!1,offset:0,pos:0};if(v===0&&l===0)return{vertical:h,horizontal:g};if(v===0)d?s<f&&(g.pos=s,g.offset=f-s):i>f&&(g.pos=i,g.offset=f-i);else if(l===0)p?o<u&&(h.pos=o,h.offset=u-o):a>u&&(h.pos=a,h.offset=u-a);else{var m=l/v,b=e[1]-m*u,S=0,x=0,C=!1;p&&o<=u?(S=m*o+b,x=o,C=!0):!p&&u<=a&&(S=m*a+b,x=a,C=!0),C&&(S<i||S>s)&&(C=!1),C||(d&&s<=f?(S=s,x=(S-b)/m,C=!0):!d&&f<=i&&(S=i,x=(S-b)/m,C=!0)),C&&(h.isBound=!0,h.pos=x,h.offset=u-x,g.isBound=!0,g.pos=S,g.offset=f-S)}return{vertical:h,horizontal:g}}function Va(t,r,e){var n=t[e?"left":"top"],a=t[e?"right":"bottom"],i=Math.min.apply(Math,r),o=Math.max.apply(Math,r),s=[];return n+1>i&&s.push({isBound:!0,offset:i-n,pos:n}),a-1<o&&s.push({isBound:!0,offset:o-a,pos:a}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(u,f){return Math.abs(f.offset)-Math.abs(u.offset)})}function qa(t,r,e){var n=e?t.map(function(a){return Kr(a,e)}):t;return n.some(function(a){return a[0]<r.left&&Math.abs(a[0]-r.left)>.1||a[0]>r.right&&Math.abs(a[0]-r.right)>.1||a[1]<r.top&&Math.abs(a[1]-r.top)>.1||a[1]>r.bottom&&Math.abs(a[1]-r.bottom)>.1})}function Qf(t,r,e){var n=Lt(t),a=Math.sqrt(n*n-r*r)||0;return[a,-a].sort(function(i,o){return Math.abs(i-t[e?0:1])-Math.abs(o-t[e?0:1])}).map(function(i){return ht([0,0],e?[i,r]:[r,i])})}function tl(t,r,e,n,a){if(!t.props.bounds)return[];var i=a*Math.PI/180,o=Ne(t),s=o.left,u=o.top,f=o.right,c=o.bottom,v=s-n[0],l=f-n[0],d=u-n[1],p=c-n[1],h={left:v,top:d,right:l,bottom:p};if(!qa(e,h,0))return[];var g=[];return[[v,0],[l,0],[d,1],[p,1]].forEach(function(m){var b=m[0],S=m[1];e.forEach(function(x){var C=ht([0,0],x);g.push.apply(g,Qf(x,b,S).map(function(E){return i+E-C}).filter(function(E){return!qa(r,h,E)}).map(function(E){return Z(E*180/Math.PI,Tt)}))})}),g}function rl(t,r){var e,n=t.direction,a=t.classNames,i=t.size,o=t.pos,s=t.zoom,u=t.key,f=n==="horizontal",c=f?"Y":"X";return r.createElement("div",{key:u,className:a.join(" "),style:(e={},e[f?"width":"height"]="".concat(i),e.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(s,")"),e)})}function va(t,r){return rl(M(M({},t),{classNames:j([V("line","guideline",t.direction)],t.classNames,!0).filter(function(e){return e}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(e){return"".concat(Z(e,.1),"px")})}),r)}function ja(t,r,e,n,a,i,o,s){var u=t.props.zoom;return e.map(function(f,c){var v=f.type,l=f.pos,d=[0,0];return d[o]=n,d[o?0:1]=-a+l,va({key:"".concat(r,"TargetGuideline").concat(c),classNames:[V("target","bold",v)],posValue:d,sizeValue:i,zoom:u,direction:r},s)})}function $a(t,r,e,n,a,i){var o=t.props,s=o.zoom,u=o.isDisplayInnerSnapDigit,f=r==="horizontal"?ir:or,c=a[f.start],v=a[f.end];return e.filter(function(l){var d=l.hide,p=l.elementRect;if(d)return!1;if(u&&p){var h=p.rect;if(h[f.start]<=c&&v<=h[f.end])return!1}return!0}).map(function(l,d){var p=l.pos,h=l.size,g=l.element,m=l.className,b=[-n[0]+p[0],-n[1]+p[1]];return va({key:"".concat(r,"-default-guideline-").concat(d),classNames:g?[V("bold"),m]:[V("normal"),m],direction:r,posValue:b,sizeValue:h,zoom:s},i)})}function Gr(t,r,e,n,a,i,o,s){var u,f=t.props,c=f.snapDigit,v=c===void 0?0:c,l=f.isDisplaySnapDigit,d=l===void 0?!0:l,p=f.snapDistFormat,h=p===void 0?function(C,E){return C}:p,g=f.zoom,m=r==="horizontal"?"X":"Y",b=r==="vertical"?"height":"width",S=Math.abs(a),x=d?parseFloat(S.toFixed(v)):0;return s.createElement("div",{key:"".concat(r,"-").concat(e,"-guideline-").concat(n),className:V("guideline-group",r),style:(u={left:"".concat(i[0],"px"),top:"".concat(i[1],"px")},u[b]="".concat(S,"px"),u)},va({direction:r,classNames:[V(e),o],size:"100%",posValue:[0,0],sizeValue:S,zoom:g},s),s.createElement("div",{className:V("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},x>0?h(x,r):""))}function el(t,r,e,n){var a=t==="vertical"?0:1,i=t==="vertical"?1:0,o=a?ir:or,s=e[o.start],u=e[o.end];return po(r,function(f){return f.pos[a]}).map(function(f){var c=[],v=[],l=[];return f.forEach(function(d){var p,h,g=d.element,m=d.elementRect.rect;if(m[o.end]<s)c.push(d);else if(u<m[o.start])v.push(d);else if(m[o.start]<=s&&u<=m[o.end]&&n){var b=d.pos,S={element:g,rect:M(M({},m),(p={},p[o.end]=m[o.start],p))},x={element:g,rect:M(M({},m),(h={},h[o.start]=m[o.end],h))},C=[0,0],E=[0,0];C[a]=b[a],C[i]=b[i],E[a]=b[a],E[i]=b[i]+d.size,c.push({type:t,pos:C,size:0,elementRect:S}),v.push({type:t,pos:E,size:0,elementRect:x})}}),c.sort(function(d,p){return p.pos[i]-d.pos[i]}),v.sort(function(d,p){return d.pos[i]-p.pos[i]}),{total:f,start:c,end:v,inner:l}})}function nl(t,r,e,n,a){var i=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(s){var u=r.filter(function(g){return g.type===s}),f=s==="vertical"?1:0,c=f?0:1,v=el(s,u,n,i),l=f?or:ir,d=f?ir:or,p=n[l.start],h=n[l.end];v.forEach(function(g){var m=g.total,b=g.start,S=g.end,x=g.inner,C=e[c]+m[0].pos[c]-n[d.start],E=n;b.forEach(function(_){var R=_.elementRect.rect,y=E[l.start]-R[l.end];if(y>0){var w=[0,0];w[f]=e[f]+E[l.start]-p-y,w[c]=C,o.push(Gr(t,s,"dashed",o.length,y,w,_.className,a))}E=R}),E=n,S.forEach(function(_){var R=_.elementRect.rect,y=R[l.start]-E[l.end];if(y>0){var w=[0,0];w[f]=e[f]+E[l.end]-p,w[c]=C,o.push(Gr(t,s,"dashed",o.length,y,w,_.className,a))}E=R}),x.forEach(function(_){var R=_.elementRect.rect,y=p-R[l.start],w=R[l.end]-h,O=[0,0],D=[0,0];O[f]=e[f]-y,O[c]=C,D[f]=e[f]+h-p,D[c]=C,o.push(Gr(t,s,"dashed",o.length,y,O,_.className,a)),o.push(Gr(t,s,"dashed",o.length,w,D,_.className,a))})})}),o}function al(t,r,e,n,a){var i=[];return["horizontal","vertical"].forEach(function(o){var s=r.filter(function(g){return g.type===o}).slice(0,1),u=o==="vertical"?0:1,f=u?0:1,c=u?or:ir,v=u?ir:or,l=n[c.start],d=n[c.end],p=n[v.start],h=n[v.end];s.forEach(function(g){var m=g.gap,b=g.gapRects,S=Math.max.apply(Math,j([p],b.map(function(E){var _=E.rect;return _[v.start]}),!1)),x=Math.min.apply(Math,j([h],b.map(function(E){var _=E.rect;return _[v.end]}),!1)),C=(S+x)/2;S===x||C===(p+h)/2||b.forEach(function(E){var _=E.rect,R=E.className,y=[e[0],e[1]];if(_[c.end]<l)y[u]+=_[c.end]-l;else if(d<_[c.start])y[u]+=_[c.start]-l-m;else return;y[f]+=C-p,i.push(Gr(t,u?"vertical":"horizontal","gap",i.length,m,y,R,a))})})}),i}function il(t,r,e,n){var a=r[0]-t[0],i=r[1]-t[1];if(Math.abs(a)<mt&&(a=0),Math.abs(i)<mt&&(i=0),!a)return n?[0,0]:[0,e];if(!i)return n?[e,0]:[0,0];var o=i/a,s=t[1]-o*t[0];if(n){var u=o*(r[0]+e)+s;return[e,u-r[1]]}else{var f=(r[1]+e-s)/o;return[f-r[0],e]}}function Tn(t,r,e,n,a){var i=il(t,r,e,n);if(!i)return{isOutside:!1,offset:[0,0]};var o=Nt(t,r),s=Nt(i,t),u=Nt(i,r),f=s>o||u>o,c=qt({datas:a,distX:i[0],distY:i[1]}),v=c[0],l=c[1];return{offset:[v,l],isOutside:f}}function Re(t,r){return t.isBound?t.offset:r.isSnap?On(r).offset:0}function ol(t,r,e,n,a){var i=r[0],o=r[1],s=e[0],u=e[1],f=n[0],c=n[1],v=a[0],l=a[1],d=-v,p=-l;if(t&&i&&o){d=0,p=0;var h=[];if(s&&u?h.push([0,l],[v,0]):s?h.push([v,0]):u?h.push([0,l]):f&&c?h.push([0,l],[v,0]):f?h.push([v,0]):c&&h.push([0,l]),h.length){h.sort(function(S,x){return Lt(H([i,o],S))-Lt(H([i,o],x))});var g=h[0];if(g[0]&&Math.abs(i)>mt)d=-g[0],p=o*Math.abs(i+d)/Math.abs(i)-o;else if(g[1]&&Math.abs(o)>mt){var m=o;p=-g[1],d=i*Math.abs(o+p)/Math.abs(m)-i}if(t&&u&&s)if(Math.abs(d)>mt&&Math.abs(d)<Math.abs(v)){var b=Math.abs(v)/Math.abs(d);d*=b,p*=b}else if(Math.abs(p)>mt&&Math.abs(p)<Math.abs(l)){var b=Math.abs(l)/Math.abs(p);d*=b,p*=b}else d=Mr(-v,d),p=Mr(-l,p)}}else d=i||s?-v:0,p=o||u?-l:0;return[d,p]}function sl(t,r,e,n,a,i){if(!Tr(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=na(i.absolutePoses,[r,e]),s=kt(o),u=s.left,f=s.right,c=s.top,v=s.bottom,l={horizontal:o.map(function(P){return P[1]}),vertical:o.map(function(P){return P[0]})},d=sa(t.props.snapDirections),p=ua(d,{left:u,right:f,top:c,bottom:v,center:(u+f)/2,middle:(c+v)/2}),h=Le(t,a,p,l),g=h.vertical,m=h.horizontal,b=qf(t,o,i),S=b.vertical,x=b.horizontal,C=g.isSnap,E=m.isSnap,_=g.isBound||S.isBound,R=m.isBound||x.isBound,y=Mr(g.offset,S.offset),w=Mr(m.offset,x.offset),O=ol(n,[r,e],[_,R],[C,E],[y,w]),D=O[0],T=O[1];return[{isBound:_,isSnap:C,offset:D},{isBound:R,isSnap:E,offset:T}]}function Le(t,r,e,n){n===void 0&&(n=e);var a=ca(Ne(t),n.vertical,n.horizontal),i=a.horizontal,o=a.vertical,s=r?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Fe(t,e.vertical,e.horizontal),u=s.horizontal,f=s.vertical,c=Re(i[0],u),v=Re(o[0],f),l=Math.abs(c),d=Math.abs(v);return{horizontal:{isBound:i[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:l,bounds:i,snap:u},vertical:{isBound:o[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:v,dist:d,bounds:o,snap:f}}}function Ua(t,r,e,n,a){var i=ca(r,e,n),o=i.horizontal,s=i.vertical,u=So(t,e,n,a),f=u.horizontal,c=u.vertical,v=Re(o[0],f),l=Re(s[0],c),d=Math.abs(v),p=Math.abs(l);return{horizontal:{isBound:o[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:v,dist:d,bounds:o,snap:f},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:l,dist:p,bounds:s,snap:c}}}function ul(t,r,e,n){var a=ht(t,r)/Math.PI*180,i=e.vertical,o=i.isBound,s=i.isSnap,u=i.dist,f=e.horizontal,c=f.isBound,v=f.isSnap,l=f.dist,d=a%180,p=d<3||d>177,h=d>87&&d<93;return l<u&&(o||s&&!h&&(!n||!p))?"vertical":c||v&&!p&&(!n||!h)?"horizontal":""}function fl(t,r,e,n,a,i){return e.map(function(o){var s=o[0],u=o[1],f=pt(r,s),c=pt(r,u),v=n?ll(t,f,c,a):Le(t,a,{vertical:[c[0]],horizontal:[c[1]]}),l=v.horizontal,d=l.offset,p=l.isBound,h=l.isSnap,g=v.vertical,m=g.offset,b=g.isBound,S=g.isSnap,x=H(u,s);if(!m&&!d)return{isBound:b||p,isSnap:S||h,sign:x,offset:[0,0]};var C=ul(f,c,v,n);if(!C)return{sign:x,isBound:!1,isSnap:!1,offset:[0,0]};var E=C==="vertical",_=[0,0];return!n&&Math.abs(u[0])===1&&Math.abs(u[1])===1&&s[0]!==u[0]&&s[1]!==u[1]?_=qt({datas:i,distX:-m,distY:-d}):_=Tn(f,c,-(E?m:d),E,i).offset,_=_.map(function(R,y){return R*(x[y]?2/x[y]:0)}),{sign:x,isBound:E?b:p,isSnap:E?S:h,offset:_}})}function Ka(t,r){return t.isBound?t.offset:r.isSnap?r.offset:0}function ll(t,r,e,n){var a=Jf(t,r,e),i=a.horizontal,o=a.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Wf(t,r,e),u=s.horizontal,f=s.vertical,c=Ka(i,u),v=Ka(o,f),l=Math.abs(c),d=Math.abs(v);return{horizontal:{isBound:i.isBound,isSnap:u.isSnap,offset:c,dist:l},vertical:{isBound:o.isBound,isSnap:f.isSnap,offset:v,dist:d}}}function cl(t,r,e,n,a){var i=[-e[0],-e[1]],o=t.state,s=o.width,u=o.height,f=t.props.bounds,c=1/0,v=1/0;if(f){var l=[[e[0],-e[1]],[-e[0],e[1]]],d=f.left,p=d===void 0?-1/0:d,h=f.top,g=h===void 0?-1/0:h,m=f.right,b=m===void 0?1/0:m,S=f.bottom,x=S===void 0?1/0:S;l.forEach(function(C){var E=C[0]!==i[0],_=C[1]!==i[1],R=pt(r,C),y=ht(n,R)*360/Math.PI;if(_){var w=R.slice();(Math.abs(y-360)<2||Math.abs(y-180)<2)&&(w[1]=n[1]);var O=Tn(n,w,(n[1]<R[1]?x:g)-R[1],!1,a),D=O.offset,T=D[1],P=O.isOutside;isNaN(T)||(v=u+(P?1:-1)*Math.abs(T))}if(E){var w=R.slice();(Math.abs(y-90)<2||Math.abs(y-270)<2)&&(w[0]=n[0]);var I=Tn(n,w,(n[0]<R[0]?b:p)-R[0],!0,a),G=I.offset[0],F=I.isOutside;isNaN(G)||(c=s+(F?1:-1)*Math.abs(G))}})}return{maxWidth:c,maxHeight:v}}function Pn(t){var r=t.state,e=r.containerClientRect,n=r.hasFixed,a=e.overflow,i=e.scrollHeight,o=e.scrollWidth,s=e.clientHeight,u=e.clientWidth,f=e.clientLeft,c=e.clientTop,v=t.props,l=v.snapGap,d=l===void 0?!0:l,p=v.verticalGuidelines,h=v.horizontalGuidelines,g=v.snapThreshold,m=g===void 0?5:g,b=v.snapGridWidth,S=b===void 0?0:b,x=v.snapGridHeight,C=x===void 0?0:x,E=v.maxSnapElementGuidelineDistance,_=E===void 0?1/0:E,R=kt(It(t.state)),y=R.top,w=R.left,O=R.bottom,D=R.right,T={top:y,left:w,bottom:O,right:D,center:(w+D)/2,middle:(y+O)/2},P=pl(t),I=j([],P,!0);d&&I.push.apply(I,vl(t,T,m)),I.push.apply(I,dl(S,C,a?o:u,a?i:s,f,c));var G=M({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(n){var F=e.left,z=e.top;G.left+=F,G.top+=z,G.right+=F,G.bottom+=z}return I.push.apply(I,Do(h||!1,p||!1,a?o:u,a?i:s,f,c,G)),I=I.filter(function(A){var B=A.element,k=A.elementRect,$=A.type;if(!B||!k)return!0;var U=k.rect;return yo(T,U,$,_)}),I}function vl(t,r,e){var n=t.props,a=n.maxSnapElementGuidelineDistance,i=a===void 0?1/0:a,o=n.maxSnapElementGapDistance,s=o===void 0?1/0:o,u=t.state.elementRects,f=[];return[["vertical",ir,or],["horizontal",or,ir]].forEach(function(c){var v=c[0],l=c[1],d=c[2],p=r[l.start],h=r[l.end],g=r[l.center],m=r[d.start],b=r[d.end];function S(E){var _=E.rect;return _[l.end]<p+e?p-_[l.end]:h-e<_[l.start]?_[l.start]-h:-1}var x=u.filter(function(E){var _=E.rect;return _[d.start]>b||_[d.end]<m?!1:S(E)>0}).sort(function(E,_){return S(E)-S(_)}),C=[];x.forEach(function(E){x.forEach(function(_){if(E!==_){var R=E.rect,y=_.rect,w=R[d.start],O=R[d.end],D=y[d.start],T=y[d.end];w>T||D>O||C.push([E,_])}})}),C.forEach(function(E){var _=E[0],R=E[1],y=_.rect,w=R.rect,O=y[l.start],D=y[l.end],T=w[l.start],P=w[l.end],I=0,G=0,F=!1,z=!1,A=!1;if(D<=p&&h<=T){if(z=!0,I=(T-D-(h-p))/2,G=D+I+(h-p)/2,Math.abs(G-g)>e)return}else if(D<T&&P<p+e){if(F=!0,I=T-D,G=P+I,Math.abs(G-p)>e)return}else if(D<T&&h-e<O){if(A=!0,I=T-D,G=O-I,Math.abs(G-h)>e)return}else return;I&&yo(r,w,v,i)&&(I>s||f.push({type:v,pos:v==="vertical"?[G,0]:[0,G],element:R.element,size:0,className:R.className,isStart:F,isCenter:z,isEnd:A,gap:I,hide:!0,gapRects:[_,R]}))})}),f}function dl(t,r,e,n,a,i){a===void 0&&(a=0),i===void 0&&(i=0);var o=[];if(r)for(var s=0;s<=n;s+=r)o.push({type:"horizontal",pos:[0,Z(s-i,.1)],size:e,hide:!0});if(t)for(var s=0;s<=e;s+=t)o.push({type:"vertical",pos:[Z(s-a,.1),0],size:n,hide:!0});return o}function yo(t,r,e,n){return e==="horizontal"?Math.abs(t.right-r.left)<=n||Math.abs(t.left-r.right)<=n||t.left<=r.right&&r.left<=t.right:e==="vertical"?Math.abs(t.bottom-r.top)<=n||Math.abs(t.top-r.bottom)<=n||t.top<=r.bottom&&r.top<=t.bottom:!0}function pl(t){var r=t.state,e=t.props.elementGuidelines,n=e===void 0?[]:e;if(!n.length)return r.elementRects=[],[];var a=(r.elementRects||[]).filter(function(l){return!l.refresh}),i=n.map(function(l){return Wt(l)&&"element"in l?M(M({},l),{element:hr(l.element,!0)}):{element:hr(l,!0)}}).filter(function(l){return l.element}),o=Eu(a.map(function(l){return l.element}),i.map(function(l){return l.element})),s=o.maintained,u=o.added,f=[];s.forEach(function(l){var d=l[0],p=l[1];f[p]=a[d]}),hl(t,u.map(function(l){return i[l]})).map(function(l,d){f[u[d]]=l}),r.elementRects=f;var c=sa(t.props.elementSnapDirections),v=[];return f.forEach(function(l){var d=l.element,p=l.top,h=p===void 0?c.top:p,g=l.left,m=g===void 0?c.left:g,b=l.right,S=b===void 0?c.right:b,x=l.bottom,C=x===void 0?c.bottom:x,E=l.center,_=E===void 0?c.center:E,R=l.middle,y=R===void 0?c.middle:R,w=l.className,O=l.rect,D=ua({top:h,right:S,left:m,bottom:C,center:_,middle:y},O),T=D.horizontal,P=D.vertical,I=O.top,G=O.left,F=O.right-G,z=O.bottom-I,A=[F,z];P.forEach(function(B){v.push({type:"vertical",element:d,pos:[Z(B,.1),I],size:z,sizes:A,className:w,elementRect:l})}),T.forEach(function(B){v.push({type:"horizontal",element:d,pos:[G,Z(B,.1)],size:F,sizes:A,className:w,elementRect:l})})}),v}function Do(t,r,e,n,a,i,o){a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var s=[],u=o.left,f=o.top,c=o.bottom,v=o.right,l=e+v-u,d=n+c-f;return t&&t.forEach(function(p){var h=Wt(p)?p:{pos:p};s.push({type:"horizontal",pos:[u,Z(h.pos-i+f,.1)],size:l,className:h.className})}),r&&r.forEach(function(p){var h=Wt(p)?p:{pos:p};s.push({type:"vertical",pos:[Z(h.pos-a+u,.1),f],size:d,className:h.className})}),s}function hl(t,r){if(!r.length)return[];var e=t.state,n=e.containerClientRect,a=e.targetClientRect,i=a.top,o=a.left,s=e.rootMatrix,u=e.is3d,f=u?4:3,c=Lf(s,n,f),v=c[0],l=c[1],d=It(e),p=nr(d),h=p.minX,g=p.minY,m=H([h,g],vr(s,[o-v,i-l],f)).map(function(x){return Mf(x)}),b=m[0],S=m[1];return r.map(function(x){var C=x.element.getBoundingClientRect(),E=C.left-v,_=C.top-l,R=_+C.height,y=E+C.width,w=vr(s,[E,_],f),O=w[0],D=w[1],T=vr(s,[y,R],f),P=T[0],I=T[1];return M(M({},x),{rect:{left:O+b,right:P+b,top:D+S,bottom:I+S,center:(O+P)/2+b,middle:(D+I)/2+S}})})}function de(t){var r=t.state,e=r.container,n=t.props.snapContainer||e;if(r.snapContainer===n&&r.guidelines&&r.guidelines.length)return!1;var a=r.containerClientRect,i={left:0,top:0,bottom:0,right:0};if(e!==n){var o=hr(n,!0);if(o){var s=Ir(o),u=La(r,[s.left-a.left,s.top-a.top]),f=La(r,[s.right-a.right,s.bottom-a.bottom]);i.left=Z(u[0],1e-5),i.top=Z(u[1],1e-5),i.right=Z(f[0],1e-5),i.bottom=Z(f[1],1e-5)}}return r.snapContainer=n,r.snapOffset=i,r.guidelines=Pn(t),r.enableSnap=!0,!0}function Mo(t,r,e,n,a,i){var o=ar(t,r,e,i?4:3),s=pt(o,n);return na(o,H(a,s))}function gl(t,r,e,n,a,i){var o=i.fixedDirection,s=Hf(e,o,n),u=la(t,r,e,n),f=j(j([],fl(t,r,s,n,a,i),!0),Co(t,u,i),!0),c=we(f,0),v=we(f,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:v.isBound,offset:v.offset[1]}}}function ml(t,r,e,n,a,i,o,s,u){var f=pt(r,o),c=Le(t,s,{vertical:[f[0]],horizontal:[f[1]]}),v=c.horizontal.offset,l=c.vertical.offset;if(Z(l,Cn)||Z(v,Cn)){var d=qt({datas:u,distX:-l,distY:-v}),p=d[0],h=d[1],g=Math.min(a||1/0,e+o[0]*p),m=Math.min(i||1/0,n+o[1]*h);return[g-e,m-n]}return[0,0]}function wo(t,r,e,n,a,i,o,s){for(var u=It(t.state),f=t.props.keepRatio,c=0,v=0,l=0;l<2;++l){var d=r(c,v),p=gl(t,d,a,f,o,s),h=p.width,g=p.height,m=h.isBound,b=g.isBound,S=h.offset,x=g.offset;if(l===1&&(m||(S=0),b||(x=0)),l===0&&o&&!m&&!b)return[0,0];if(f){var C=Math.abs(S)*(e?1/e:1),E=Math.abs(x)*(n?1/n:1),_=m&&b?C<E:b||!m&&C<E;_?S=e*x/n:x=n*S/e}c+=S,v+=x}if(a[0]&&a[1]){var R=cl(t,u,a,i,s),y=R.maxWidth,w=R.maxHeight,O=ml(t,r(c,v).map(function(P){return P.map(function(I){return Z(I,Cn)})}),e+c,n+v,y,w,a,o,s),S=O[0],x=O[1];c+=S,v+=x}return[c,v]}function bl(t,r,e){if(!Tr(t,"rotatable"))return{isSnap:!1,rotation:e};var n=r.pos1,a=r.pos2,i=r.pos3,o=r.pos4,s=r.origin,u=e*Math.PI/180,f=[n,a,i,o].map(function(d){return H(d,s)}),c=f.map(function(d){return Kr(d,u)}),v=j(j([],tl(t,f,c,s,e),!0),Kf(t,f,c,s,e),!0);v.sort(function(d,p){return Math.abs(d-e)-Math.abs(p-e)});var l=v.length>0;return{isSnap:l,rotation:l?v[0]:e}}function Sl(t,r,e,n,a,i,o){if(!Tr(t,"resizable"))return[0,0];var s=o.fixedDirection,u=o.nextAllMatrix,f=t.state,c=f.allMatrix,v=f.is3d;return wo(t,function(l,d){return Mo(u||c,r+l,e+d,s,a,v)},r,e,n,a,i,o)}function xl(t,r,e,n,a){if(!Tr(t,"scalable"))return[0,0];var i=a.startOffsetWidth,o=a.startOffsetHeight,s=a.fixedPosition,u=a.fixedDirection,f=a.is3d,c=wo(t,function(v,l){return Mo(cf(a,rt(r,[v/i,l/o])),i,o,u,s,f)},i,o,e,s,n,a);return[c[0]/i,c[1]/o]}function El(t,r){r.absolutePoses=It(t.state)}function Za(t){var r=[];return t.forEach(function(e){e.guidelineInfos.forEach(function(n){var a=n.guideline;r.indexOf(a)>-1||r.push(a)})}),r}function Ja(t,r,e,n,a,i){var o=ca(Ne(t,i),r,e),s=o.vertical,u=o.horizontal;s.forEach(function(l){l.isBound&&n.push({type:"bounds",pos:l.pos})}),u.forEach(function(l){l.isBound&&a.push({type:"bounds",pos:l.pos})});var f=Zf(t),c=f.vertical,v=f.horizontal;c.forEach(function(l){$t(n,function(d){var p=d.type,h=d.pos;return p==="bounds"&&h===l})>=0||n.push({type:"bounds",pos:l})}),v.forEach(function(l){$t(a,function(d){var p=d.type,h=d.pos;return p==="bounds"&&h===l})>=0||a.push({type:"bounds",pos:l})})}var _l=ia("",["resizable","scalable"]),Cl={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,snapRenderThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,maxSnapElementGuidelineDistance:Number,maxSnapElementGapDistance:Number},events:{onSnap:"snap"},css:[`:host {
    --bounds-color: #d66;
}
.guideline {
    pointer-events: none;
    z-index: 2;
}
.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}
.guideline-group {
    position: absolute;
    top: 0;
    left: 0;
}
.guideline-group .size-value {
    position: absolute;
    color: #f55;
    font-size: 12px;
    font-weight: bold;
}
.guideline-group.horizontal .size-value {
    transform-origin: 50% 100%;
    transform: translateX(-50%);
    left: 50%;
    bottom: 5px;
}
.guideline-group.vertical .size-value {
    transform-origin: 0% 50%;
    top: 50%;
    transform: translateY(-50%);
    left: 5px;
}
.guideline.gap {
    background: #f55;
}
.size-value.gap {
    color: #f55;
}
`],render:function(t,r){var e=t.state,n=e.top,a=e.left,i=e.pos1,o=e.pos2,s=e.pos3,u=e.pos4,f=e.snapRenderInfo,c=t.props.snapRenderThreshold,v=c===void 0?1:c;if(!f||!f.render||!Tr(t,""))return[];e.guidelines=Pn(t);var l=Math.min(i[0],o[0],s[0],u[0]),d=Math.min(i[1],o[1],s[1],u[1]),p=f.externalPoses||[],h=It(t.state),g=[],m=[],b=[],S=[],x=[],C=kt(h),E=C.width,_=C.height,R=C.top,y=C.left,w=C.bottom,O=C.right,D={left:y,right:O,top:R,bottom:w,center:(y+O)/2,middle:(R+w)/2},T=p.length>0,P=T?kt(p):{};if(!f.request){if(f.direction&&x.push(Xf(t,h,f.direction,v)),f.snap){var I=kt(h);f.center&&(I.middle=(I.top+I.bottom)/2,I.center=(I.left+I.right)/2),x.push(Ya(t,I,v))}T&&(f.center&&(P.middle=(P.top+P.bottom)/2,P.center=(P.left+P.right)/2),x.push(Ya(t,P,v))),x.forEach(function(A){var B=A.vertical.posInfos,k=A.horizontal.posInfos;g.push.apply(g,B.filter(function($){var U=$.guidelineInfos;return U.some(function(q){var N=q.guideline;return!N.hide})}).map(function($){return{type:"snap",pos:$.pos}})),m.push.apply(m,k.filter(function($){var U=$.guidelineInfos;return U.some(function(q){var N=q.guideline;return!N.hide})}).map(function($){return{type:"snap",pos:$.pos}})),b.push.apply(b,Za(B)),S.push.apply(S,Za(k))})}Ja(t,[y,O],[R,w],g,m),T&&Ja(t,[P.left,P.right],[P.top,P.bottom],g,m,f.externalBounds);var G=j(j([],b,!0),S,!0),F=G.filter(function(A){return A.element&&!A.gapRects}),z=G.filter(function(A){return A.gapRects}).sort(function(A,B){return A.gap-B.gap});return L(t,"onSnap",{guidelines:G.filter(function(A){var B=A.element;return!B}),elements:F,gaps:z},!0),j(j(j(j(j(j([],nl(t,F,[l,d],D,r),!0),al(t,z,[l,d],D,r),!0),$a(t,"horizontal",S,[a,n],D,r),!0),$a(t,"vertical",b,[a,n],D,r),!0),ja(t,"horizontal",m,l,n,E,0,r),!0),ja(t,"vertical",g,d,a,_,1,r),!0)},dragStart:function(t,r){t.state.snapRenderInfo={request:r.isRequest,snap:!0,center:!0},de(t)},drag:function(t){var r=t.state;de(t)||(r.guidelines=Pn(t)),r.snapRenderInfo&&(r.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,r){if(_l(t,r)||In(t,r))return!0;if(!r.isRequest&&r.inputEvent)return _t(r.inputEvent.target,V("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,de(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,r){this.dragStart(t,r)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,de(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var r=t.state;r.enableSnap=!1,r.guidelines=[],r.snapRenderInfo=null,r.elementRects=[]}};function Ro(t,r,e,n){var a=t.getState(),i=a.renderPoses,o=a.rotation,s=a.direction,u=pr(t.props,r).zoom,f=s>0?1:-1,c=o/Math.PI*180,v={},l=t.renderState;l.renderDirectionMap||(l.renderDirectionMap={});var d=l.renderDirectionMap;return e.forEach(function(p){var h=p.dir;v[h]=!0}),e.map(function(p){var h=p.data,g=p.classNames,m=p.dir,b=Qn[m];if(!b||!v[m])return null;d[m]=!0;var S=(Z(c,15)+f*Vi[m]+720)%180,x={};return Rr(h).forEach(function(C){x["data-".concat(C)]=h[C]}),n.createElement("div",M({className:V.apply(void 0,j(["control","direction",m,r],g,!1)),"data-rotation":S,"data-direction":m},x,{key:"direction-".concat(m),style:ea.apply(void 0,j([o,u],b.map(function(C){return i[C]}),!1))}))})}function Oo(t,r,e,n){var a=pr(t.props,e).renderDirections,i=a===void 0?r:a;if(!i)return[];var o=i===!0?Jn:i;return Ro(t,e,o.map(function(s){return{data:{},classNames:[],dir:s}}),n)}function yl(t,r){var e=t.renderState;e.renderDirectionMap||(e.renderDirectionMap={});var n=t.getState(),a=n.renderPoses,i=n.rotation,o=n.direction,s=e.renderDirectionMap,u=t.props.zoom,f=o>0?1:-1,c=i/Math.PI*180;return Rr(s).map(function(v){var l=Qn[v];if(!l)return null;var d=(Z(c,15)+f*Vi[v]+720)%180;return r.createElement("div",{className:V("around-control"),"data-rotation":d,"data-direction":v,key:"direction-around-".concat(v),style:ea.apply(void 0,j([i,u],l.map(function(p){return a[p]}),!1))})})}function Xr(t,r,e,n,a,i){for(var o=[],s=6;s<arguments.length;s++)o[s-6]=arguments[s];var u=ht(e,n),f=r?Z(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(i),className:V.apply(void 0,j(["line","direction",r?"edge":"",r],o,!1)),"data-rotation":f,"data-line-key":i,"data-direction":r,style:Br(e,n,a,u)})}function To(t,r,e,n,a){var i=e===!0?rf:e;return i.map(function(o,s){var u=Qn[o],f=u[0],c=u[1];if(c!=null)return Xr(t,o,n[f],n[c],a,"".concat(r,"Edge").concat(s),r)}).filter(Boolean)}function Po(t){return function(r,e){var n=pr(r.props,t).edge;return n&&(n===!0||n.length)?j(j([],To(e,t,n,r.getState().renderPoses,r.props.zoom),!0),Dl(r,t,e),!0):Bo(r,t,e)}}function Bo(t,r,e){return Oo(t,Jn,r,e)}function Dl(t,r,e){return Oo(t,["nw","ne","sw","se"],r,e)}var Rt={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},requestStyle:function(){return["left","top","right","bottom"]},render:function(t,r){var e=t.props,n=e.throttleDragRotate,a=e.zoom,i=t.getState(),o=i.dragInfo,s=i.beforeOrigin;if(!n||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var f=Lt(u),c=ht(u,[0,0]);return[r.createElement("div",{className:V("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(s[0],"px, ").concat(s[1],"px) rotate(").concat(c,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,r){var e=r.datas,n=r.parentEvent,a=r.parentGesto,i=t.state,o=i.gestos,s=i.style;if(o.draggable)return!1;o.draggable=a||t.targetGesto,e.datas={},e.left=parseFloat(s.left||"")||0,e.top=parseFloat(s.top||"")||0,e.bottom=parseFloat(s.bottom||"")||0,e.right=parseFloat(s.right||"")||0,e.startValue=[0,0],mr(t,r),ze(r,"translate"),El(t,e),e.prevDist=[0,0],e.prevBeforeDist=[0,0],e.isDrag=!1,e.deltaOffset=[0,0];var u=J(t,r,M({set:function(c){e.startValue=c}},Ge(r))),f=n||L(t,"onDragStart",u);return f!==!1?(e.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,e.isPinch=!1),e.isDrag?u:!1},drag:function(t,r){if(r){Be(r,"translate");var e=r.datas,n=r.parentEvent,a=r.parentFlag,i=r.isPinch,o=r.isRequest,s=r.deltaOffset,u=r.distX,f=r.distY,c=e.isDrag,v=e.prevDist,l=e.prevBeforeDist,d=e.startValue;if(c){s&&(u+=s[0],f+=s[1]);var p=t.props,h=p.parentMoveable,g=n?0:p.throttleDrag||0,m=n?0:p.throttleDragRotate||0,b=0,S=!1,x=!1,C=!1,E=!1;if(!n&&m>0&&(u||f)){var _=p.startDragRotate||0,R=Z(_+ht([0,0],[u,f])*180/Math.PI,m)-_,y=f*Math.abs(Math.cos((R-90)/180*Math.PI)),w=u*Math.abs(Math.cos(R/180*Math.PI)),O=Lt([w,y]);b=R*Math.PI/180,u=O*Math.cos(b),f=O*Math.sin(b)}if(!i&&!n&&!a){var D=sl(t,u,f,m,o||s,e),T=D[0],P=D[1];S=T.isSnap,x=T.isBound,C=P.isSnap,E=P.isBound;var I=T.offset,G=P.offset;u+=I,f+=G}var F=rt(Ui({datas:e,distX:u,distY:f}),d),z=rt(af({datas:e,distX:u,distY:f}),d);wa(z,Tt),wa(F,Tt),m||(!S&&!x&&(z[0]=Z(z[0],g),F[0]=Z(F[0],g)),!C&&!E&&(z[1]=Z(z[1],g),F[1]=Z(F[1],g)));var A=H(F,d),B=H(z,d),k=H(B,v),$=H(A,l);e.prevDist=B,e.prevBeforeDist=A,e.passDelta=k,e.passDist=B;var U=e.left+A[0],q=e.top+A[1],N=e.right-A[0],Y=e.bottom-A[1],K=Ie(e,"translate(".concat(z[0],"px, ").concat(z[1],"px)"),"translate(".concat(B[0],"px, ").concat(B[1],"px)"));if(ta(r,K),t.state.dragInfo.dist=n?[0,0]:B,!(!n&&!h&&k.every(function(at){return!at})&&$.some(function(at){return!at}))){var Q=t.state,nt=Q.width,W=Q.height,X=J(t,r,M({transform:K,dist:B,delta:k,translate:z,beforeDist:A,beforeDelta:$,beforeTranslate:F,left:U,top:q,right:N,bottom:Y,width:nt,height:W,isPinch:i},Ot({transform:K},r)));return!n&&L(t,"onDrag",X),X}}}},dragAfter:function(t,r){var e=r.datas,n=e.deltaOffset;return n[0]||n[1]?(e.deltaOffset=[0,0],this.drag(t,M(M({},r),{deltaOffset:n}))):!1},dragEnd:function(t,r){var e=r.parentEvent,n=r.datas;if(t.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var a=zt(t,r,{});return!e&&L(t,"onDragEnd",a),a}},dragGroupStart:function(t,r){var e=r.datas,n=r.clientX,a=r.clientY,i=this.dragStart(t,r);if(!i)return!1;var o=Qe(t,this,"dragStart",[n||0,a||0],r,!1,"draggable"),s=M(M({},i),{targets:t.props.targets,events:o}),u=L(t,"onDragGroupStart",s);return e.isDrag=u!==!1,e.isDrag?i:!1},dragGroup:function(t,r){var e=r.datas;if(e.isDrag){var n=this.drag(t,r),a=r.datas.passDelta,i=Qe(t,this,"drag",a,r,!1,"draggable");if(n){var o=M({targets:t.props.targets,events:i},n);return L(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isDrag){this.dragEnd(t,r);var a=Qe(t,this,"dragEnd",[0,0],r,!1,"draggable");return L(t,"onDragGroupEnd",zt(t,r,{targets:t.props.targets,events:a})),e}},request:function(t){var r={},e=t.getRect(),n=0,a=0;return{isControl:!1,requestStart:function(){return{datas:r}},request:function(i){return"x"in i?n=i.x-e.left:"deltaX"in i&&(n+=i.deltaX),"y"in i?a=i.y-e.top:"deltaY"in i&&(a+=i.deltaY),{datas:r,distX:n,distY:a}},requestEnd:function(){return{datas:r,isDrag:!0}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}},Qa=ia("resizable"),Bn={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean,checkResizableError:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:Po("resizable"),dragControlCondition:Qa,viewClassName:aa("resizable"),dragControlStart:function(t,r){var e,n=r.inputEvent,a=r.isPinch,i=r.isGroup,o=r.parentDirection,s=r.parentGesto,u=r.datas,f=r.parentFixedDirection,c=r.parentEvent,v=lo(o,a,n,u),l=t.state,d=l.target,p=l.width,h=l.height,g=l.gestos;if(!v||!d||g.resizable)return!1;g.resizable=s||t.controlGesto,!a&&mr(t,r),u.datas={},u.direction=v,u.startOffsetWidth=p,u.startOffsetHeight=h,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=l.inlineCSSWidth||l.cssWidth,u.startHeight=l.inlineCSSHeight||l.cssHeight,u.maxSize=[1/0,1/0],i||(u.minSize=[l.minOffsetWidth,l.minOffsetHeight],u.maxSize=[l.maxOffsetWidth,l.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";u.transformOrigin=m&&Gt(m)?m.split(" "):m,u.startOffsetMatrix=l.offsetMatrix,u.startTransformOrigin=l.transformOrigin,u.isWidth=(e=r==null?void 0:r.parentIsWidth)!==null&&e!==void 0?e:!v[0]&&!v[1]||v[0]||!v[1];function b(y){u.ratio=y&&isFinite(y)?y:0}u.startPositions=It(t.state);function S(y){u.fixedDirection=y,u.fixedPosition=pt(u.startPositions,y)}function x(y){var w=t.state,O=w.width,D=w.height;u.fixedPosition=y,u.fixedDirection=to(y,O,D)}function C(y){u.minSize=[lt("".concat(y[0]),0)||0,lt("".concat(y[1]),0)||0]}function E(y){var w=[y[0]||1/0,y[1]||1/0];(!an(w[0])||isFinite(w[0]))&&(w[0]=lt("".concat(w[0]),0)||1/0),(!an(w[1])||isFinite(w[1]))&&(w[1]=lt("".concat(w[1]),0)||1/0),u.maxSize=w}b(p/h),S(f||[-v[0],-v[1]]),u.setFixedDirection=S,u.setFixedPosition=x,u.setMin=C,u.setMax=E;var _=J(t,r,{direction:v,startRatio:u.ratio,set:function(y){var w=y[0],O=y[1];u.startWidth=w,u.startHeight=O},setMin:C,setMax:E,setRatio:b,setFixedDirection:S,setFixedPosition:x,setOrigin:function(y){u.transformOrigin=y},dragStart:Rt.dragStart(t,new Dr().dragStart([0,0],r))}),R=c||L(t,"onResizeStart",_);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,R!==!1&&(u.isResize=!0,t.state.snapRenderInfo={request:r.isRequest,direction:v}),u.isResize?_:!1},dragControl:function(t,r){var e,n=r.datas,a=r.parentFlag,i=r.isPinch,o=r.parentKeepRatio,s=r.dragClient,u=r.parentDist,f=r.isRequest,c=r.isGroup,v=r.parentEvent,l=r.resolveMatrix,d=n.isResize,p=n.transformOrigin,h=n.startWidth,g=n.startHeight,m=n.prevWidth,b=n.prevHeight,S=n.minSize,x=n.maxSize,C=n.ratio,E=n.startOffsetWidth,_=n.startOffsetHeight,R=n.isWidth;if(!d)return;if(l){var y=t.state.is3d,w=n.startOffsetMatrix,O=n.startTransformOrigin,D=y?4:3,T=Un(Zi(r)),P=Math.sqrt(T.length);D!==P&&(T=Vt(T,P,D));var I=te(w,T,O,D),G=ar(I,E,_,D);n.startPositions=G,n.nextTargetMatrix=T,n.nextAllMatrix=I}var F=pr(t.props,"resizable"),z=F.resizeFormat,A=F.throttleResize,B=A===void 0?a?0:1:A,k=F.parentMoveable,$=F.keepRatioFinally,U=n.direction,q=U,N=0,Y=0;!U[0]&&!U[1]&&(q=[1,1]);var K=C&&(o??F.keepRatio)||!1;function Q(){var xt=n.fixedDirection,Ct=mo(q,K,n,r);N=Ct.distWidth,Y=Ct.distHeight;var Jt=q[0]-xt[0]||K?Math.max(E+N,Tt):E,br=q[1]-xt[1]||K?Math.max(_+Y,Tt):_;return K&&E&&_&&(R?br=Jt/C:Jt=br*C),[Jt,br]}var nt=Q(),W=nt[0],X=nt[1];v||(n.setFixedDirection(n.fixedDirection),L(t,"onBeforeResize",J(t,r,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(xt){var Ct;return n.setFixedDirection(xt),Ct=Q(),W=Ct[0],X=Ct[1],[W,X]},setFixedPosition:function(xt){var Ct;return n.setFixedPosition(xt),Ct=Q(),W=Ct[0],X=Ct[1],[W,X]},boundingWidth:W,boundingHeight:X,setSize:function(xt){W=xt[0],X=xt[1]}},!0)));var at=s;s||(!a&&i?at=eo(t,[0,0]):at=n.fixedPosition);var et=[0,0];i||(et=Sl(t,W,X,U,at,f,n)),u&&(!u[0]&&(et[0]=0),!u[1]&&(et[1]=0));function St(){var xt;z&&(xt=z([W,X]),W=xt[0],X=xt[1]),W=Z(W,B),X=Z(X,B)}if(K){q[0]&&q[1]&&et[0]&&et[1]&&(Math.abs(et[0])>Math.abs(et[1])?et[1]=0:et[0]=0);var ut=!et[0]&&!et[1];ut&&St(),q[0]&&!q[1]||et[0]&&!et[1]||ut&&R?(W+=et[0],X=W/C):(!q[0]&&q[1]||!et[0]&&et[1]||ut&&!R)&&(X+=et[1],W=X*C)}else W+=et[0],X+=et[1],W=Math.max(0,W),X=Math.max(0,X);e=Ns([W,X],S,x,K?C:!1),W=e[0],X=e[1],St(),K&&(c||$)&&(R?X=W/C:W=X*C),N=W-E,Y=X-_;var it=[N-m,Y-b];n.prevWidth=N,n.prevHeight=Y;var vt=pf(t,W,X,at,p,n);if(!(!k&&it.every(function(xt){return!xt})&&vt.every(function(xt){return!xt}))){var tt=Rt.drag(t,Qr(r,t.state,vt,!!i,!1,"draggable")),ot=tt.transform,st=h+N,Pt=g+Y,Zt=J(t,r,M({width:st,height:Pt,offsetWidth:Math.round(W),offsetHeight:Math.round(X),startRatio:C,boundingWidth:W,boundingHeight:X,direction:U,dist:[N,Y],delta:it,isPinch:!!i,drag:tt},vo({style:{width:"".concat(st,"px"),height:"".concat(Pt,"px")},transform:ot},tt,r)));return!v&&L(t,"onResize",Zt),Zt}},dragControlAfter:function(t,r){var e=r.datas,n=e.isResize,a=e.startOffsetWidth,i=e.startOffsetHeight,o=e.prevWidth,s=e.prevHeight;if(!(!n||t.props.checkResizableError===!1)){var u=t.state,f=u.width,c=u.height,v=f-(a+o),l=c-(i+s),d=Math.abs(v)>3,p=Math.abs(l)>3;if(d&&(e.startWidth+=v,e.startOffsetWidth+=v,e.prevWidth+=v),p&&(e.startHeight+=l,e.startOffsetHeight+=l,e.prevHeight+=l),d||p)return this.dragControl(t,r)}},dragControlEnd:function(t,r){var e=r.datas,n=r.parentEvent;if(e.isResize){e.isResize=!1;var a=zt(t,r,{});return!n&&L(t,"onResizeEnd",a),a}},dragGroupControlCondition:Qa,dragGroupControlStart:function(t,r){var e=r.datas,n=this.dragControlStart(t,M(M({},r),{isGroup:!0}));if(!n)return!1;var a=Yt(t,"resizable",r);function i(p,h){var g=e.fixedDirection,m=e.fixedPosition,b=h.datas.startPositions||It(p.state),S=pt(b,g),x=Dt(yr(-t.rotation/180*Math.PI,3),[S[0]-m[0],S[1]-m[1],1],3),C=x[0],E=x[1];return h.datas.originalX=C,h.datas.originalY=E,h}var o=e.startOffsetWidth,s=e.startOffsetHeight;function u(){var p=e.minSize;a.forEach(function(h){var g=h.datas,m=g.minSize,b=g.startOffsetWidth,S=g.startOffsetHeight,x=o*(b?m[0]/b:0),C=s*(S?m[1]/S:0);p[0]=Math.max(p[0],x),p[1]=Math.max(p[1],C)})}function f(){var p=e.maxSize;a.forEach(function(h){var g=h.datas,m=g.maxSize,b=g.startOffsetWidth,S=g.startOffsetHeight,x=o*(b?m[0]/b:0),C=s*(S?m[1]/S:0);p[0]=Math.min(p[0],x),p[1]=Math.min(p[1],C)})}var c=jt(t,this,"dragControlStart",r,function(p,h){return i(p,h)});u(),f();var v=function(p){n.setFixedDirection(p),c.forEach(function(h,g){h.setFixedDirection(p),i(h.moveable,a[g])})};e.setFixedDirection=v;var l=M(M({},n),{targets:t.props.targets,events:c.map(function(p){return M(M({},p),{setMin:function(h){p.setMin(h),u()},setMax:function(h){p.setMax(h),f()}})}),setFixedDirection:v,setMin:function(p){n.setMin(p),u()},setMax:function(p){n.setMax(p),f()}}),d=L(t,"onResizeGroupStart",l);return e.isResize=d!==!1,e.isResize?n:!1},dragGroupControl:function(t,r){var e=r.datas;if(e.isResize){var n=pr(t.props,"resizable");ke(t,"onBeforeResize",function(d){L(t,"onBeforeResizeGroup",J(t,r,M(M({},d),{targets:n.targets}),!0))});var a=this.dragControl(t,M(M({},r),{isGroup:!0}));if(a){var i=a.boundingWidth,o=a.boundingHeight,s=a.dist,u=n.keepRatio,f=[i/(i-s[0]),o/(o-s[1])],c=e.fixedPosition,v=jt(t,this,"dragControl",r,function(d,p){var h=Dt(yr(t.rotation/180*Math.PI,3),[p.datas.originalX*f[0],p.datas.originalY*f[1],1],3),g=h[0],m=h[1];return M(M({},p),{parentDist:null,parentScale:f,dragClient:rt(c,[g,m]),parentKeepRatio:u})}),l=M({targets:n.targets,events:v},a);return L(t,"onResizeGroup",l),l}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isResize){this.dragControlEnd(t,r);var a=jt(t,this,"dragControlEnd",r),i=zt(t,r,{targets:t.props.targets,events:a});return L(t,"onResizeGroupEnd",i),e}},request:function(t){var r={},e=0,n=0,a=t.getRect();return{isControl:!0,requestStart:function(i){var o;return{datas:r,parentDirection:i.direction||[1,1],parentIsWidth:(o=i==null?void 0:i.horizontal)!==null&&o!==void 0?o:!0}},request:function(i){return"offsetWidth"in i?e=i.offsetWidth-a.offsetWidth:"deltaWidth"in i&&(e+=i.deltaWidth),"offsetHeight"in i?n=i.offsetHeight-a.offsetHeight:"deltaHeight"in i&&(n+=i.deltaHeight),{datas:r,parentDist:[e,n],parentKeepRatio:i.keepRatio}},requestEnd:function(){return{datas:r,isDrag:!0}}}},unset:function(t){t.state.gestos.resizable=null}};function tn(t,r,e,n,a){var i=t.props.groupable,o=t.state,s=o.is3d?4:3,u=r.origin,f=Et(t.state.rootMatrix,H([u[0],u[1]],i?[0,0]:[o.left,o.top]),s),c=rt([a.left,a.top],f);r.startAbsoluteOrigin=c,r.prevDeg=ht(c,[e,n])/Math.PI*180,r.defaultDeg=r.prevDeg,r.prevSnapDeg=0,r.loop=0,r.startDist=Nt(c,[e,n])}function Ee(t,r,e){var n=e.defaultDeg,a=e.prevDeg,i=a%360,o=Math.floor(a/360);i<0&&(i+=360),i>t&&i>270&&t<90?++o:i<t&&i<90&&t>270&&--o;var s=r*(o*360+t-n);return e.prevDeg=n+s,s}function rn(t,r,e,n){return Ee(ht(n.startAbsoluteOrigin,[t,r])/Math.PI*180,e,n)}function en(t,r,e,n,a,i){var o=t.props.throttleRotate,s=o===void 0?0:o,u=e.prevSnapDeg,f=0,c=!1;if(i){var v=bl(t,r,n);c=v.isSnap,f=a+v.rotation}c||(f=Z(a+n,s));var l=f-a;return e.prevSnapDeg=l,[l-u,l,f]}function Io(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3];if(t==="none")return[];if(bt(t))return t.map(function(h){return Io(h,[n,a,i,o],e)[0]});var s=(t||"top").split("-"),u=s[0],f=s[1],c=[n,a];u==="left"?c=[i,n]:u==="right"?c=[a,o]:u==="bottom"&&(c=[o,i]);var v=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],l=uo(c,e);if(f){var d=f==="top"||f==="left",p=u==="bottom"||u==="left";v=c[d&&!p||!d&&p?0:1]}return[[v,l]]}function In(t,r){if(r.isRequest)return r.requestAble==="rotatable";var e=r.inputEvent.target;if(_t(e,V("rotation-control"))||_t(e,V("around-control"))||_t(e,V("control"))&&_t(e,V("rotatable")))return!0;var n=t.props.rotationTarget;return n?oa(n,!0).some(function(a){return a?e===a||e.contains(a):!1}):!1}var Ml=Jn.map(function(t){var r="",e="",n="center",a="center";return t.indexOf("n")>-1&&(r="top: -20px;",a="bottom"),t.indexOf("s")>-1&&(r="top: 0px;",a="top"),t.indexOf("w")>-1&&(e="left: -20px;",n="right"),t.indexOf("e")>-1&&(e="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(e).concat(r,`
        transform-origin: `).concat(n," ").concat(a,`;
    }`)}).join(`
`),wl=`.rotation {
    position: absolute;
    height: 40px;
    width: 1px;
    transform-origin: 50% 100%;
    height: calc(40px * var(--zoom));
    top: auto;
    left: 0;
    bottom: 100%;
    will-change: transform;
}
.rotation .rotation-line {
    display: block;
    width: 100%;
    height: 100%;
    transform-origin: 50% 50%;
}
.rotation .rotation-control {
    border-color: #4af;
    border-color: var(--moveable-color);
    background:#fff;
    cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
    cursor: alias;
}
.around-control {
    position: absolute;
    will-change: transform;
    width: 20px;
    height: 20px;
    left: -10px;
    top: -10px;
    box-sizing: border-box;
    background: transparent;
    z-index: 8;
    cursor: alias;
    transform-origin: center center;
}
.rotatable.direction.control.move {
    cursor: move;
}
`.concat(Ml,`
`),Rl={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[wl],viewClassName:function(t){return t.isDragging("rotatable")?V("view-rotation-dragging"):""},render:function(t,r){var e=pr(t.props,"rotatable"),n=e.rotatable,a=e.rotationPosition,i=e.zoom,o=e.renderDirections,s=e.rotateAroundControls,u=e.resolveAblesWithRotatable,f=t.getState(),c=f.renderPoses,v=f.direction;if(!n)return null;var l=Io(a,c,v),d=[];if(l.forEach(function(m,b){var S=m[0],x=m[1];d.push(r.createElement("div",{key:"rotation".concat(b),className:V("rotation"),style:{transform:"translate(-50%) translate(".concat(S[0],"px, ").concat(S[1],"px) rotate(").concat(x,"rad)")}},r.createElement("div",{className:V("line rotation-line"),style:{transform:"scaleX(".concat(i,")")}}),r.createElement("div",{className:V("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(i,")")}})))}),o){var p=Rr(u||{}),h={};p.forEach(function(m){u[m].forEach(function(b){h[b]=m})});var g=[];bt(o)&&(g=o.map(function(m){var b=h[m];return{data:b?{resolve:b}:{},classNames:b?["move"]:[],dir:m}})),d.push.apply(d,Ro(t,"rotatable",g,r))}return s&&d.push.apply(d,yl(t,r)),d},dragControlCondition:In,dragControlStart:function(t,r){var e,n,a=r.datas,i=r.clientX,o=r.clientY,s=r.parentRotate,u=r.parentFlag,f=r.isPinch,c=r.isRequest,v=t.state,l=v.target,d=v.left,p=v.top,h=v.direction,g=v.beforeDirection,m=v.targetTransform,b=v.moveableClientRect,S=v.offsetMatrix,x=v.targetMatrix,C=v.allMatrix,E=v.width,_=v.height;if(!c&&!l)return!1;var R=t.getRect();a.rect=R,a.transform=m,a.left=d,a.top=p;var y=function(N){var Y=t.state,K=Y.allMatrix,Q=Y.is3d,nt=Y.width,W=Y.height,X=to(N,nt,W);a.fixedDirection=X,a.fixedPosition=Et(K,N,Q?4:3),k&&k.setFixedPosition(N)},w=function(N){a.fixedDirection=N,a.fixedPosition=ro(t,N),k&&k.setFixedDirection(N)},O=i,D=o;if(c||f||u){var T=s||0;a.beforeInfo={origin:R.beforeOrigin,prevDeg:T,defaultDeg:T,prevSnapDeg:0,startDist:0},a.afterInfo=M(M({},a.beforeInfo),{origin:R.origin}),a.absoluteInfo=M(M({},a.beforeInfo),{origin:R.origin,startValue:T})}else{var P=(n=r.inputEvent)===null||n===void 0?void 0:n.target;if(P){var I=P.getAttribute("data-direction")||"",G=ef[I];if(G){a.isControl=!0,a.isAroundControl=_t(P,V("around-control")),a.controlDirection=G;var F=P.getAttribute("data-resolve");F&&(a.resolveAble=F);var z=Df(v.rootMatrix,v.renderPoses,b);e=pt(z,G),O=e[0],D=e[1]}}a.beforeInfo={origin:R.beforeOrigin},a.afterInfo={origin:R.origin},a.absoluteInfo={origin:R.origin,startValue:R.rotation};var A=y;y=function(N){var Y=v.is3d?4:3,K=rt(Gi(x,Y),N),Q=K[0],nt=K[1],W=Dt(S,dr([Q,nt],Y)),X=Dt(C,dr([N[0],N[1]],Y));A(N);var at=v.posDelta;a.beforeInfo.origin=H(W,at),a.afterInfo.origin=H(X,at),a.absoluteInfo.origin=H(X,at),tn(t,a.beforeInfo,O,D,b),tn(t,a.afterInfo,O,D,b),tn(t,a.absoluteInfo,O,D,b)},w=function(N){var Y=pt([[0,0],[E,0],[0,_],[E,_]],N);y(Y)}}a.startClientX=O,a.startClientY=D,a.direction=h,a.beforeDirection=g,a.startValue=0,a.datas={},ze(r,"rotate");var B=!1,k=!1;if(a.isControl&&a.resolveAble){var $=a.resolveAble;$==="resizable"&&(k=Bn.dragControlStart(t,M(M({},new Dr("resizable").dragStart([0,0],r)),{parentPosition:a.controlPosition,parentFixedPosition:a.fixedPosition})))}k||(B=Rt.dragStart(t,new Dr().dragStart([0,0],r))),y(v.transformOrigin);var U=J(t,r,M(M({set:function(N){a.startValue=N*Math.PI/180},setFixedDirection:w,setFixedPosition:y},Ge(r)),{dragStart:B,resizeStart:k})),q=L(t,"onRotateStart",U);return a.isRotate=q!==!1,v.snapRenderInfo={request:r.isRequest},a.isRotate?U:!1},dragControl:function(t,r){var e,n,a,i=r.datas,o=r.clientDistX,s=r.clientDistY,u=r.parentRotate,f=r.parentFlag,c=r.isPinch,v=r.groupDelta,l=i.beforeDirection,d=i.beforeInfo,p=i.afterInfo,h=i.absoluteInfo,g=i.isRotate,m=i.startValue,b=i.rect,S=i.startClientX,x=i.startClientY;if(g){Be(r,"rotate");var C=nf(r),E=l*C,_=t.props.parentMoveable,R=0,y,w,O=0,D,T,P=0,I,G,F=180/Math.PI*m,z=h.startValue,A=!1,B=S+o,k=x+s;if(!f&&"parentDist"in r){var $=r.parentDist;y=$,D=$,I=$}else c||f?(y=Ee(u,l,d),D=Ee(u,E,p),I=Ee(u,E,h)):(y=rn(B,k,l,d),D=rn(B,k,E,p),I=rn(B,k,E,h),A=!0);if(w=F+y,T=F+D,G=z+I,L(t,"onBeforeRotate",J(t,r,{beforeRotation:w,rotation:T,absoluteRotation:G,setRotation:function(at){D=at-F,y=D,I=D}},!0)),e=en(t,b,d,y,F,A),R=e[0],y=e[1],w=e[2],n=en(t,b,p,D,F,A),O=n[0],D=n[1],T=n[2],a=en(t,b,h,I,z,A),P=a[0],I=a[1],G=a[2],!(!P&&!O&&!R&&!_)){var U=Ie(i,"rotate(".concat(T,"deg)"),"rotate(".concat(D,"deg)")),q=df(t,D,i),N=H(rt(v||[0,0],q),i.prevInverseDist||[0,0]);i.prevInverseDist=q,i.requestValue=null;var Y=Ji(t,U,N,c,r),K=Y,Q=Nt([B,k],h.startAbsoluteOrigin)-h.startDist,nt=void 0;if(i.resolveAble==="resizable"){var W=Bn.dragControl(t,M(M({},Qr(r,t.state,[r.deltaX,r.deltaY],!!c,!1,"resizable")),{resolveMatrix:!0,parentDistance:Q}));W&&(nt=W,K=vo(K,W,r))}var X=J(t,r,M(M({delta:O,dist:D,rotate:T,rotation:T,beforeDist:y,beforeDelta:R,beforeRotate:w,beforeRotation:w,absoluteDist:I,absoluteDelta:P,absoluteRotate:G,absoluteRotation:G,isPinch:!!c,resize:nt},Y),K));return L(t,"onRotate",X),X}}},dragControlEnd:function(t,r){var e=r.datas;if(e.isRotate){e.isRotate=!1;var n=zt(t,r,{});return L(t,"onRotateEnd",n),n}},dragGroupControlCondition:In,dragGroupControlStart:function(t,r){var e=r.datas,n=t.state,a=n.left,i=n.top,o=n.beforeOrigin,s=this.dragControlStart(t,r);if(!s)return!1;s.set(e.beforeDirection*t.rotation);var u=jt(t,this,"dragControlStart",r,function(v,l){var d=v.state,p=d.left,h=d.top,g=d.beforeOrigin,m=rt(H([p,h],[a,i]),H(g,o));return l.datas.startGroupClient=m,l.datas.groupClient=m,M(M({},l),{parentRotate:0})}),f=M(M({},s),{targets:t.props.targets,events:u}),c=L(t,"onRotateGroupStart",f);return e.isRotate=c!==!1,e.isRotate?s:!1},dragGroupControl:function(t,r){var e=r.datas;if(e.isRotate){ke(t,"onBeforeRotate",function(f){L(t,"onBeforeRotateGroup",J(t,r,M(M({},f),{targets:t.props.targets}),!0))});var n=this.dragControl(t,r);if(n){var a=e.beforeDirection,i=n.beforeDist,o=i/180*Math.PI,s=jt(t,this,"dragControl",r,function(f,c){var v=c.datas.startGroupClient,l=c.datas.groupClient,d=l[0],p=l[1],h=Kr(v,o*a),g=h[0],m=h[1],b=[g-d,m-p];return c.datas.groupClient=[g,m],M(M({},c),{parentRotate:i,groupDelta:b})});t.rotation=a*n.beforeRotation;var u=M({targets:t.props.targets,events:s,set:function(f){t.rotation=f},setGroupRotation:function(f){t.rotation=f}},n);return L(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isRotate){this.dragControlEnd(t,r);var a=jt(t,this,"dragControlEnd",r),i=zt(t,r,{targets:t.props.targets,events:a});return L(t,"onRotateGroupEnd",i),e}},request:function(t){var r={},e=0,n=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:r}},request:function(a){return"deltaRotate"in a?e+=a.deltaRotate:"rotate"in a&&(e=a.rotate-n),{datas:r,parentDist:e}},requestEnd:function(){return{datas:r,isDrag:!0}}}}},ti=ia("scalable"),Ol={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:Po("scalable"),dragControlCondition:ti,viewClassName:aa("scalable"),dragControlStart:function(t,r){var e=r.datas,n=r.isPinch,a=r.inputEvent,i=r.parentDirection,o=lo(i,n,a,e),s=t.state,u=s.width,f=s.height,c=s.targetTransform,v=s.target,l=s.pos1,d=s.pos2,p=s.pos4;if(!o||!v)return!1;n||mr(t,r),e.datas={},e.transform=c,e.prevDist=[1,1],e.direction=o,e.startOffsetWidth=u,e.startOffsetHeight=f,e.startValue=[1,1];var h=Nt(l,d),g=Nt(d,p),m=!o[0]&&!o[1]||o[0]||!o[1];e.scaleWidth=h,e.scaleHeight=g,e.scaleXRatio=h/u,e.scaleYRatio=g/f,ze(r,"scale"),e.isWidth=m;function b(E){e.ratio=E&&isFinite(E)?E:0}e.startPositions=It(t.state);function S(E){e.fixedDirection=E,e.fixedPosition=pt(e.startPositions,E)}e.setFixedDirection=S,b(Nt(l,d)/Nt(d,p)),S([-o[0],-o[1]]);var x=J(t,r,M(M({direction:o,set:function(E){e.startValue=E},setRatio:b,setFixedDirection:S},Ge(r)),{dragStart:Rt.dragStart(t,new Dr().dragStart([0,0],r))})),C=L(t,"onScaleStart",x);return e.startFixedDirection=e.fixedDirection,C!==!1&&(e.isScale=!0,t.state.snapRenderInfo={request:r.isRequest,direction:o}),e.isScale?x:!1},dragControl:function(t,r){Be(r,"scale");var e=r.datas,n=r.parentKeepRatio,a=r.parentFlag,i=r.isPinch,o=r.dragClient,s=r.isRequest,u=e.prevDist,f=e.direction,c=e.startOffsetWidth,v=e.startOffsetHeight,l=e.isScale,d=e.startValue,p=e.isWidth,h=e.ratio;if(!l)return!1;var g=t.props,m=g.throttleScale,b=g.parentMoveable,S=f;!f[0]&&!f[1]&&(S=[1,1]);var x=h&&(n??g.keepRatio)||!1,C=t.state;function E(){var k=mo(S,x,e,r),$=k.distWidth,U=k.distHeight,q=c?(c+$)/c:1,N=v?(v+U)/v:1;return q=S[0]||x?q*d[0]:d[0],N=S[1]||x?N*d[1]:d[1],q===0&&(q=(u[0]>0?1:-1)*se),N===0&&(N=(u[1]>0?1:-1)*se),[q,N]}var _=E();if(!i&&t.props.groupable){var R=C.snapRenderInfo||{},y=R.direction;bt(y)&&(y[0]||y[1])&&(C.snapRenderInfo={direction:f,request:r.isRequest})}L(t,"onBeforeScale",J(t,r,{scale:_,setFixedDirection:function(k){return e.setFixedDirection(k),_=E(),_},startFixedDirection:e.startFixedDirection,setScale:function(k){_=k}},!0));var w=[_[0]/d[0],_[1]/d[1]],O=o,D=[0,0];if(o||(!a&&i?O=eo(t,[0,0]):O=e.fixedPosition),i||(D=xl(t,w,f,s,e)),x){S[0]&&S[1]&&D[0]&&D[1]&&(Math.abs(D[0]*c)>Math.abs(D[1]*v)?D[1]=0:D[0]=0);var T=!D[0]&&!D[1];if(T&&(p?w[0]=Z(w[0]*d[0],m)/d[0]:w[1]=Z(w[1]*d[1],m)/d[1]),S[0]&&!S[1]||D[0]&&!D[1]||T&&p){w[0]+=D[0];var P=c*w[0]*d[0]/h;w[1]=P/v/d[1]}else if(!S[0]&&S[1]||!D[0]&&D[1]||T&&!p){w[1]+=D[1];var I=v*w[1]*d[1]*h;w[0]=I/c/d[0]}}else w[0]+=D[0],w[1]+=D[1],D[0]||(w[0]=Z(w[0]*d[0],m)/d[0]),D[1]||(w[1]=Z(w[1]*d[1],m)/d[1]);w[0]===0&&(w[0]=(u[0]>0?1:-1)*se),w[1]===0&&(w[1]=(u[1]>0?1:-1)*se);var G=[w[0]/u[0],w[1]/u[1]];_=gf(w,d);var F=vf(t,w,e.fixedDirection,O,e),z=H(F,e.prevInverseDist||[0,0]);if(e.prevDist=w,e.prevInverseDist=F,_[0]===u[0]&&_[1]===u[1]&&z.every(function(k){return!k})&&!b)return!1;var A=Ie(e,"scale(".concat(_.join(", "),")"),"scale(".concat(w.join(", "),")")),B=J(t,r,M({offsetWidth:c,offsetHeight:v,direction:f,scale:_,dist:w,delta:G,isPinch:!!i},Ji(t,A,z,i,r)));return L(t,"onScale",B),B},dragControlEnd:function(t,r){var e=r.datas;if(!e.isScale)return!1;e.isScale=!1;var n=zt(t,r,{});return L(t,"onScaleEnd",n),n},dragGroupControlCondition:ti,dragGroupControlStart:function(t,r){var e=r.datas,n=this.dragControlStart(t,r);if(!n)return!1;var a=Yt(t,"resizable",r);function i(c,v){var l=e.fixedDirection,d=e.fixedPosition,p=v.datas.startPositions||It(c.state),h=pt(p,l),g=Dt(yr(-t.rotation/180*Math.PI,3),[h[0]-d[0],h[1]-d[1],1],3),m=g[0],b=g[1];return v.datas.originalX=m,v.datas.originalY=b,v}e.moveableScale=t.scale;var o=jt(t,this,"dragControlStart",r,function(c,v){return i(c,v)}),s=function(c){n.setFixedDirection(c),o.forEach(function(v,l){v.setFixedDirection(c),i(v.moveable,a[l])})};e.setFixedDirection=s;var u=M(M({},n),{targets:t.props.targets,events:o,setFixedDirection:s}),f=L(t,"onScaleGroupStart",u);return e.isScale=f!==!1,e.isScale?u:!1},dragGroupControl:function(t,r){var e=r.datas;if(e.isScale){ke(t,"onBeforeScale",function(v){L(t,"onBeforeScaleGroup",J(t,r,M(M({},v),{targets:t.props.targets}),!0))});var n=this.dragControl(t,r);if(n){var a=e.moveableScale;t.scale=[n.scale[0]*a[0],n.scale[1]*a[1]];var i=t.props.keepRatio,o=n.dist,s=n.scale,u=e.fixedPosition,f=jt(t,this,"dragControl",r,function(v,l){var d=Dt(yr(t.rotation/180*Math.PI,3),[l.datas.originalX*o[0],l.datas.originalY*o[1],1],3),p=d[0],h=d[1];return M(M({},l),{parentDist:null,parentScale:s,parentKeepRatio:i,dragClient:rt(u,[p,h])})}),c=M({targets:t.props.targets,events:f},n);return L(t,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isScale){this.dragControlEnd(t,r);var a=jt(t,this,"dragControlEnd",r),i=zt(t,r,{targets:t.props.targets,events:a});return L(t,"onScaleGroupEnd",i),e}},request:function(){var t={},r=0,e=0;return{isControl:!0,requestStart:function(n){return{datas:t,parentDirection:n.direction||[1,1]}},request:function(n){return r+=n.deltaWidth,e+=n.deltaHeight,{datas:t,parentDist:[r,e],parentKeepRatio:n.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Qt(t,r){return t.map(function(e,n){return sr(e,r[n],1,2)})}function ri(t,r,e){var n=ht(t,r),a=ht(t,e),i=a-n;return i>=0?i:i+2*Math.PI}function Tl(t,r){var e=ri(t[0],t[1],t[2]),n=ri(r[0],r[1],r[2]),a=Math.PI;return!(e>=a&&n<=a||e<=a&&n>=a)}var Pl={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},viewClassName:aa("warpable"),render:function(t,r){var e=t.props,n=e.resizable,a=e.scalable,i=e.warpable,o=e.zoom;if(n||a||!i)return[];var s=t.state,u=s.pos1,f=s.pos2,c=s.pos3,v=s.pos4,l=Qt(u,f),d=Qt(f,u),p=Qt(u,c),h=Qt(c,u),g=Qt(c,v),m=Qt(v,c),b=Qt(f,v),S=Qt(v,f);return j([r.createElement("div",{className:V("line"),key:"middeLine1",style:Br(l,g,o)}),r.createElement("div",{className:V("line"),key:"middeLine2",style:Br(d,m,o)}),r.createElement("div",{className:V("line"),key:"middeLine3",style:Br(p,b,o)}),r.createElement("div",{className:V("line"),key:"middeLine4",style:Br(h,S,o)})],Bo(t,"warpable",r),!0)},dragControlCondition:function(t,r){if(r.isRequest)return!1;var e=r.inputEvent.target;return _t(e,V("direction"))&&_t(e,V("warpable"))},dragControlStart:function(t,r){var e=r.datas,n=r.inputEvent,a=t.props.target,i=n.target,o=co(i,e);if(!o||!a)return!1;var s=t.state,u=s.transformOrigin,f=s.is3d,c=s.targetTransform,v=s.targetMatrix,l=s.width,d=s.height,p=s.left,h=s.top;e.datas={},e.targetTransform=c,e.warpTargetMatrix=f?v:Vt(v,3,4),e.targetInverseMatrix=Ii(Ht(e.warpTargetMatrix,4),3,4),e.direction=o,e.left=p,e.top=h,e.poses=[[0,0],[l,0],[0,d],[l,d]].map(function(b){return H(b,u)}),e.nextPoses=e.poses.map(function(b){var S=b[0],x=b[1];return Dt(e.warpTargetMatrix,[S,x,0,1],4)}),e.startValue=dt(4),e.prevMatrix=dt(4),e.absolutePoses=It(s),e.posIndexes=Ki(o),mr(t,r),ze(r,"matrix3d"),s.snapRenderInfo={request:r.isRequest,direction:o};var g=J(t,r,M({set:function(b){e.startValue=b}},Ge(r))),m=L(t,"onWarpStart",g);return m!==!1&&(e.isWarp=!0),e.isWarp},dragControl:function(t,r){var e=r.datas,n=r.isRequest,a=r.distX,i=r.distY,o=e.targetInverseMatrix,s=e.prevMatrix,u=e.isWarp,f=e.startValue,c=e.poses,v=e.posIndexes,l=e.absolutePoses;if(!u)return!1;if(Be(r,"matrix3d"),Tr(t,"warpable")){var d=v.map(function(y){return l[y]});d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var p=Le(t,n,{horizontal:d.map(function(y){return y[1]+i}),vertical:d.map(function(y){return y[0]+a})}),h=p.horizontal,g=p.vertical;i-=h.offset,a-=g.offset}var m=qt({datas:e,distX:a,distY:i},!0),b=e.nextPoses.slice();if(v.forEach(function(y){b[y]=rt(b[y],m)}),!tf.every(function(y){return Tl(y.map(function(w){return c[w]}),y.map(function(w){return b[w]}))}))return!1;var S=$n(c[0],c[2],c[1],c[3],b[0],b[2],b[1],b[3]);if(!S.length)return!1;var x=ft(o,S,4),C=$i(e,x,!0),E=ft(Ht(s,4),C,4);e.prevMatrix=C;var _=ft(f,C,4),R=Ie(e,"matrix3d(".concat(_.join(", "),")"),"matrix3d(".concat(C.join(", "),")"));return ta(r,R),L(t,"onWarp",J(t,r,M({delta:E,matrix:_,dist:C,multiply:ft,transform:R},Ot({transform:R},r)))),!0},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return e.isWarp?(e.isWarp=!1,L(t,"onWarpEnd",zt(t,r,{})),n):!1}},Bl=V("area-pieces"),pe=V("area-piece"),Go=V("avoid"),Il=V("view-dragging");function nn(t){var r=t.areaElement;if(r){var e=t.state,n=e.width,a=e.height;xi(r,Go),r.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(a,"px")}}function ei(t){return t.createElement("div",{key:"area_pieces",className:Bl},t.createElement("div",{className:pe}),t.createElement("div",{className:pe}),t.createElement("div",{className:pe}),t.createElement("div",{className:pe}))}var zo={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,r){var e=t.props,n=e.target,a=e.dragArea,i=e.groupable,o=e.passDragArea,s=t.getState(),u=s.width,f=s.height,c=s.renderPoses,v=o?V("area","pass"):V("area");if(i)return[r.createElement("div",{key:"area",ref:Xt(t,"areaElement"),className:v}),ei(r)];if(!n||!a)return[];var l=$n([0,0],[u,0],[0,f],[u,f],c[0],c[1],c[2],c[3]),d=l.length?Ae(l,!0):"none";return[r.createElement("div",{key:"area",ref:Xt(t,"areaElement"),className:v,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(f,"px"),transformOrigin:"0 0",transform:d}}),ei(r)]},dragStart:function(t,r){var e=r.datas,n=r.clientX,a=r.clientY,i=r.inputEvent;if(!i)return!1;e.isDragArea=!1;var o=t.areaElement,s=t.state,u=s.moveableClientRect,f=s.renderPoses,c=s.rootMatrix,v=s.is3d,l=u.left,d=u.top,p=kt(f),h=p.left,g=p.top,m=p.width,b=p.height,S=v?4:3,x=vr(c,[n-l,a-d],S),C=x[0],E=x[1];C-=h,E-=g;var _=[{left:h,top:g,width:m,height:E-10},{left:h,top:g,width:C-10,height:b},{left:h,top:g+E+10,width:m,height:b-E-10},{left:h+C+10,top:g,width:m-C-10,height:b}],R=[].slice.call(o.nextElementSibling.children);_.forEach(function(y,w){R[w].style.cssText="left: ".concat(y.left,"px;top: ").concat(y.top,"px; width: ").concat(y.width,"px; height: ").concat(y.height,"px;")}),Si(o,Go),s.disableNativeEvent=!0},drag:function(t,r){var e=r.datas,n=r.inputEvent;if(this.enableNativeEvent(t),!n)return!1;e.isDragArea||(e.isDragArea=!0,nn(t))},dragEnd:function(t,r){this.enableNativeEvent(t);var e=r.inputEvent,n=r.datas;if(!e)return!1;n.isDragArea||nn(t)},dragGroupStart:function(t,r){return this.dragStart(t,r)},dragGroup:function(t,r){return this.drag(t,r)},dragGroupEnd:function(t,r){return this.dragEnd(t,r)},unset:function(t){nn(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var r=t.state;r.disableNativeEvent&&bi(function(){r.disableNativeEvent=!1})}},Gl=Jr("origin",{render:function(t,r){var e=t.props.zoom,n=t.getState(),a=n.beforeOrigin,i=n.rotation;return[r.createElement("div",{className:V("control","origin"),style:ea(i,e,a),key:"beforeOrigin"})]}});function zl(t){var r=t.scrollContainer;return[r.scrollLeft,r.scrollTop]}var Al={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,scrollThrottleTime:Number,getScrollPosition:Function,scrollOptions:Object},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,r){var e=t.props,n=e.scrollContainer,a=n===void 0?t.getContainer():n,i=e.scrollOptions,o=new Pu,s=hr(a,!0);r.datas.dragScroll=o,t.state.dragScroll=o;var u=r.isControl?"controlGesto":"targetGesto",f=r.targets;o.on("scroll",function(c){var v=c.container,l=c.direction,d=J(t,r,{scrollContainer:v,direction:l}),p=f?"onScrollGroup":"onScroll";f&&(d.targets=f),L(t,p,d)}).on("move",function(c){var v=c.offsetX,l=c.offsetY,d=c.inputEvent;t[u].scrollBy(v,l,d.inputEvent,!0)}).on("scrollDrag",function(c){var v=c.next;v(t[u].getCurrentEvent())}),o.dragStart(r,M({container:s},i))},checkScroll:function(t,r){var e=r.datas.dragScroll;if(e){var n=t.props,a=n.scrollContainer,i=a===void 0?t.getContainer():a,o=n.scrollThreshold,s=o===void 0?0:o,u=n.scrollThrottleTime,f=u===void 0?0:u,c=n.getScrollPosition,v=c===void 0?zl:c,l=n.scrollOptions;return e.drag(r,M({container:i,threshold:s,throttleTime:f,getScrollPosition:function(d){return v({scrollContainer:d.container,direction:d.direction})}},l)),!0}},drag:function(t,r){return this.checkScroll(t,r)},dragEnd:function(t,r){r.datas.dragScroll.dragEnd(),r.datas.dragScroll=null},dragControlStart:function(t,r){return this.dragStart(t,M(M({},r),{isControl:!0}))},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupStart:function(t,r){return this.dragStart(t,M(M({},r),{targets:t.props.targets}))},dragGroup:function(t,r){return this.drag(t,M(M({},r),{targets:t.props.targets}))},dragGroupEnd:function(t,r){return this.dragEnd(t,M(M({},r),{targets:t.props.targets}))},dragGroupControlStart:function(t,r){return this.dragStart(t,M(M({},r),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,r){return this.drag(t,M(M({},r),{targets:t.props.targets}))},dragGroupControEnd:function(t,r){return this.dragEnd(t,M(M({},r),{targets:t.props.targets}))},unset:function(t){var r,e=t.state;(r=e.dragScroll)===null||r===void 0||r.dragEnd(),e.dragScroll=null}},Ao={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function,stopPropagation:Boolean,preventClickEventOnDrag:Boolean,preventClickDefault:Boolean,viewContainer:Object,persistData:Object,useAccuratePosition:Boolean,firstRenderState:Object,linePadding:Boolean},events:{onChangeTargets:"changeTargets"}},kl=Jr("padding",{render:function(t,r){var e=t.props;if(e.dragArea)return[];var n=e.padding||{},a=n.left,i=a===void 0?0:a,o=n.top,s=o===void 0?0:o,u=n.right,f=u===void 0?0:u,c=n.bottom,v=c===void 0?0:c,l=t.getState(),d=l.renderPoses,p=l.pos1,h=l.pos2,g=l.pos3,m=l.pos4,b=[p,h,g,m],S=[];return i>0&&S.push([0,2]),s>0&&S.push([0,1]),f>0&&S.push([1,3]),v>0&&S.push([2,3]),S.map(function(x,C){var E=x[0],_=x[1],R=b[E],y=b[_],w=d[E],O=d[_],D=$n([0,0],[100,0],[0,100],[100,100],R,y,w,O);if(D.length)return r.createElement("div",{key:"padding".concat(C),className:V("padding"),style:{transform:Ae(D,!0)}})})}}),ni=["nw","ne","se","sw"];function he(t,r){var e=t[0]+t[1],n=e>r?r/e:1;return t[0]*=n,t[1]=r-t[1]*n,t}var Fl=[1,2,5,6],Nl=[0,3,4,7],fr=[1,-1,-1,1],lr=[1,1,-1,-1];function da(t,r,e,n,a,i,o,s){a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=e),s===void 0&&(s=n);var u=[],f=!1,c=t.filter(function(l){return!l.virtual}),v=c.map(function(l){var d=l.horizontal,p=l.vertical,h=l.pos;if(p&&!f&&(f=!0,u.push("/")),f){var g=Math.max(0,p===1?h[1]-i:s-h[1]);return u.push(Ft(g,n,r)),g}else{var g=Math.max(0,d===1?h[0]-a:o-h[0]);return u.push(Ft(g,e,r)),g}});return{radiusPoses:c,styles:u,raws:v}}function ko(t){for(var r=[0,0],e=[0,0],n=t.length,a=0;a<n;++a){var i=t[a];i.sub&&(i.horizontal&&(r[1]===0&&(r[0]=a),r[1]=a-r[0]+1,e[0]=a+1),i.vertical&&(e[1]===0&&(e[0]=a),e[1]=a-e[0]+1))}return{horizontalRange:r,verticalRange:e}}function Fo(t,r,e,n,a,i,o){var s,u,f,c;i===void 0&&(i=[0,0]),o===void 0&&(o=!1);var v=t.indexOf("/"),l=(v>-1?t.slice(0,v):t).length,d=t.slice(0,l),p=t.slice(l+1),h=d.length,g=p.length,m=g>0,b=d[0],S=b===void 0?"0px":b,x=d[1],C=x===void 0?S:x,E=d[2],_=E===void 0?S:E,R=d[3],y=R===void 0?C:R,w=p[0],O=w===void 0?S:w,D=p[1],T=D===void 0?m?O:C:D,P=p[2],I=P===void 0?m?O:_:P,G=p[3],F=G===void 0?m?T:y:G,z=[S,C,_,y].map(function(q){return lt(q,r)}),A=[O,T,I,F].map(function(q){return lt(q,e)}),B=z.slice(),k=A.slice();s=he([B[0],B[1]],r),B[0]=s[0],B[1]=s[1],u=he([B[3],B[2]],r),B[3]=u[0],B[2]=u[1],f=he([k[0],k[3]],e),k[0]=f[0],k[3]=f[1],c=he([k[1],k[2]],e),k[1]=c[0],k[2]=c[1];var $=o?B:B.slice(0,Math.max(i[0],h)),U=o?k:k.slice(0,Math.max(i[1],g));return j(j([],$.map(function(q,N){var Y=ni[N];return{virtual:N>=h,horizontal:fr[N],vertical:0,pos:[n+q,a+(lr[N]===-1?e:0)],sub:!0,raw:z[N],direction:Y}}),!0),U.map(function(q,N){var Y=ni[N];return{virtual:N>=g,horizontal:0,vertical:lr[N],pos:[n+(fr[N]===-1?r:0),a+q],sub:!0,raw:A[N],direction:Y}}),!0)}function Ll(t,r,e,n,a){a===void 0&&(a=r.length);var i=ko(t.slice(n)),o=i.horizontalRange,s=i.verticalRange,u=e-n,f=0;if(u===0)f=a;else if(u>0&&u<o[1])f=o[1]-u;else if(u>=s[0])f=s[0]+s[1]-u;else return;t.splice(e,f),r.splice(e,f)}function Yl(t,r,e,n,a,i,o,s,u,f,c){f===void 0&&(f=0),c===void 0&&(c=0);var v=ko(t.slice(e)),l=v.horizontalRange,d=v.verticalRange;if(n>-1)for(var p=fr[n]===1?i-f:s-i,h=l[1];h<=n;++h){var g=lr[h]===1?c:u,m=0;if(n===h?m=i:h===0?m=f+p:fr[h]===-1&&(m=s-(r[e][0]-f)),t.splice(e+h,0,{horizontal:fr[h],vertical:0,pos:[m,g]}),r.splice(e+h,0,[m,g]),h===0)break}else if(a>-1){var b=lr[a]===1?o-c:u-o;if(l[1]===0&&d[1]===0){var S=[f+b,c];t.push({horizontal:fr[0],vertical:0,pos:S}),r.push(S)}for(var x=d[0],h=d[1];h<=a;++h){var m=fr[h]===1?f:s,g=0;if(a===h?g=o:h===0?g=c+b:lr[h]===1?g=r[e+x][1]:lr[h]===-1&&(g=u-(r[e+x][1]-c)),t.push({horizontal:0,vertical:lr[h],pos:[m,g]}),r.push([m,g]),h===0)break}}}function Wl(t,r){r===void 0&&(r=t.map(function(a){return a.raw}));var e=t.map(function(a,i){return a.horizontal?r[i]:null}).filter(function(a){return a!=null}),n=t.map(function(a,i){return a.vertical?r[i]:null}).filter(function(a){return a!=null});return{horizontals:e,verticals:n}}var Xl=[[0,-1,"n"],[1,0,"e"]],Hl=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function pa(t,r,e){var n=t.props.clipRelative,a=t.state,i=a.width,o=a.height,s=r,u=s.type,f=s.poses,c=u==="rect",v=u==="circle";if(u==="polygon")return e.map(function(E){return"".concat(Ft(E[0],i,n)," ").concat(Ft(E[1],o,n))});if(c||u==="inset"){var l=e[1][1],d=e[3][0],p=e[7][0],h=e[5][1];if(c)return[l,d,h,p].map(function(E){return"".concat(E,"px")});var g=[l,i-d,o-h,p].map(function(E,_){return Ft(E,_%2?i:o,n)});if(e.length>8){var m=H(e[4],e[0]),b=m[0],S=m[1];g.push.apply(g,j(["round"],da(f.slice(8).map(function(E,_){return M(M({},E),{pos:e[_]})}),n,b,S,p,l,d,h).styles,!1))}return g}else if(v||u==="ellipse"){var x=e[0],C=Ft(Math.abs(e[1][1]-x[1]),v?Math.sqrt((i*i+o*o)/2):o,n),g=v?[C]:[Ft(Math.abs(e[2][0]-x[0]),i,n),C];return g.push("at",Ft(x[0],i,n),Ft(x[1],o,n)),g}}function Oe(t,r,e,n){var a=[n,(n+r)/2,r],i=[t,(t+e)/2,e];return Hl.map(function(o){var s=o[0],u=o[1],f=o[2],c=a[s+1],v=i[u+1];return{vertical:Math.abs(u),horizontal:Math.abs(s),direction:f,pos:[c,v]}})}function No(t){var r=[1/0,-1/0],e=[1/0,-1/0];return t.forEach(function(n){var a=n.pos;r[0]=Math.min(r[0],a[0]),r[1]=Math.max(r[1],a[0]),e[0]=Math.min(e[0],a[1]),e[1]=Math.max(e[1],a[1])}),[Math.abs(r[1]-r[0]),Math.abs(e[1]-e[0])]}function ai(t,r,e,n,a){var i,o,s,u,f,c,v;if(t){var l=a;if(!l){var d=getComputedStyle(t),p=d.clipPath;l=p!=="none"?p:d.clip}if(!((!l||l==="none"||l==="auto")&&(l=n,!l))){var h=mi(l),g=h.prefix,m=g===void 0?l:g,b=h.value,S=b===void 0?"":b,x=m==="circle",C=" ";if(m==="polygon"){var E=cr(S||"0% 0%, 100% 0%, 100% 100%, 0% 100%");C=",";var _=E.map(function(tt){var ot=tt.split(" "),st=ot[0],Pt=ot[1];return{vertical:1,horizontal:1,pos:[lt(st,r),lt(Pt,e)]}}),R=nr(_.map(function(tt){return tt.pos}));return{type:m,clipText:l,poses:_,splitter:C,left:R.minX,right:R.maxX,top:R.minY,bottom:R.maxY}}else if(x||m==="ellipse"){var y="",w="",O=0,D=0,E=er(S);if(x){var T="";i=E[0],T=i===void 0?"50%":i,o=E[2],y=o===void 0?"50%":o,s=E[3],w=s===void 0?"50%":s,O=lt(T,Math.sqrt((r*r+e*e)/2)),D=O}else{var P="",I="";u=E[0],P=u===void 0?"50%":u,f=E[1],I=f===void 0?"50%":f,c=E[3],y=c===void 0?"50%":c,v=E[4],w=v===void 0?"50%":v,O=lt(P,r),D=lt(I,e)}var G=[lt(y,r),lt(w,e)],_=j([{vertical:1,horizontal:1,pos:G,direction:"nesw"}],Xl.slice(0,x?1:2).map(function(st){return{vertical:Math.abs(st[1]),horizontal:st[0],direction:st[2],sub:!0,pos:[G[0]+st[0]*O,G[1]+st[1]*D]}}),!0);return{type:m,clipText:l,radiusX:O,radiusY:D,left:G[0]-O,top:G[1]-D,right:G[0]+O,bottom:G[1]+D,poses:_,splitter:C}}else if(m==="inset"){var E=er(S||"0 0 0 0"),F=E.indexOf("round"),z=(F>-1?E.slice(0,F):E).length,A=E.slice(z+1),B=E.slice(0,z),k=B[0],$=B[1],U=$===void 0?k:$,q=B[2],N=q===void 0?k:q,Y=B[3],K=Y===void 0?U:Y,Q=[k,N].map(function(st){return lt(st,e)}),nt=Q[0],W=Q[1],X=[K,U].map(function(st){return lt(st,r)}),at=X[0],et=X[1],St=r-et,ut=e-W,it=Fo(A,St-at,ut-nt,at,nt),_=j(j([],Oe(nt,St,ut,at),!0),it,!0);return{type:"inset",clipText:l,poses:_,top:nt,left:at,right:St,bottom:ut,radius:A,splitter:C}}else if(m==="rect"){var E=cr(S||"0px, ".concat(r,"px, ").concat(e,"px, 0px"));C=",";var vt=E.map(function(Ct){var Jt=jr(Ct).value;return Jt}),nt=vt[0],et=vt[1],W=vt[2],at=vt[3],_=Oe(nt,et,W,at);return{type:"rect",clipText:l,poses:_,top:nt,right:et,bottom:W,left:at,values:E,splitter:C}}}}}function Vl(t,r,e,n,a){var i=t[r],o=i.direction,s=i.sub,u=t.map(function(){return[0,0]}),f=o?o.split(""):[];if(n&&r<8){var c=f.filter(function(T){return T==="w"||T==="e"}),v=f.filter(function(T){return T==="n"||T==="s"}),l=c[0],d=v[0];u[r]=e;var p=No(t),h=p[0],g=p[1],m=h&&g?h/g:0;if(m&&a){var b=(r+4)%8,S=t[b].pos,x=[0,0];o.indexOf("w")>-1?x[0]=-1:o.indexOf("e")>-1&&(x[0]=1),o.indexOf("n")>-1?x[1]=-1:o.indexOf("s")>-1&&(x[1]=1);var C=go([h,g],e,m,x,!0),E=h+C[0],_=g+C[1],R=S[1],y=S[1],w=S[0],O=S[0];x[0]===-1?w=O-E:x[0]===1?O=w+E:(w=w-E/2,O=O+E/2),x[1]===-1?R=y-_:(x[1]===1||(R=y-_/2),y=R+_);var D=Oe(R,O,y,w);t.forEach(function(T,P){u[P][0]=D[P].pos[0]-T.pos[0],u[P][1]=D[P].pos[1]-T.pos[1]})}else t.forEach(function(T,P){var I=T.direction;I&&(I.indexOf(l)>-1&&(u[P][0]=e[0]),I.indexOf(d)>-1&&(u[P][1]=e[1]))}),l&&(u[1][0]=e[0]/2,u[5][0]=e[0]/2),d&&(u[3][1]=e[1]/2,u[7][1]=e[1]/2)}else o&&!s?f.forEach(function(T){var P=T==="n"||T==="s";t.forEach(function(I,G){var F=I.direction,z=I.horizontal,A=I.vertical;!F||F.indexOf(T)===-1||(u[G]=[P||!z?0:e[0],!P||!A?0:e[1]])})}):u[r]=e;return u}function ql(t,r){var e=ji(t,r),n=e[0],a=e[1],i=r.datas,o=i.clipPath,s=i.clipIndex,u=o,f=u.type,c=u.poses,v=u.splitter,l=c.map(function(b){return b.pos});if(f==="polygon")l.splice(s,0,[n,a]);else if(f==="inset"){var d=Fl.indexOf(s),p=Nl.indexOf(s),h=c.length;if(Yl(c,l,8,d,p,n,a,l[4][0],l[4][1],l[0][0],l[0][1]),h===c.length)return}else return;var g=pa(t,o,l),m="".concat(f,"(").concat(g.join(v),")");L(t,"onClip",J(t,r,M({clipEventType:"added",clipType:f,poses:l,clipStyles:g,clipStyle:m,distX:0,distY:0},Ot({clipPath:m},r))))}function jl(t,r){var e=r.datas,n=e.clipPath,a=e.clipIndex,i=n,o=i.type,s=i.poses,u=i.splitter,f=s.map(function(d){return d.pos}),c=f.length;if(o==="polygon")s.splice(a,1),f.splice(a,1);else if(o==="inset"){if(a<8||(Ll(s,f,a,8,c),c===s.length))return}else return;var v=pa(t,n,f),l="".concat(o,"(").concat(v.join(u),")");L(t,"onClip",J(t,r,M({clipEventType:"removed",clipType:o,poses:f,clipStyles:v,clipStyle:l,distX:0,distY:0},Ot({clipPath:l},r))))}var $l={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[`.control.clip-control {
    background: #6d6;
    cursor: pointer;
}
.control.clip-control.clip-radius {
    background: #d66;
}
.line.clip-line {
    background: #6e6;
    cursor: move;
    z-index: 1;
}
.clip-area {
    position: absolute;
    top: 0;
    left: 0;
}
.clip-ellipse {
    position: absolute;
    cursor: move;
    border: 1px solid #6d6;
    border: var(--zoompx) solid #6d6;
    border-radius: 50%;
    transform-origin: 0px 0px;
}`,`:host {
    --bounds-color: #d66;
}`,`.guideline {
    pointer-events: none;
    z-index: 2;
}`,`.line.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}`],render:function(t,r){var e=t.props,n=e.customClipPath,a=e.defaultClipPath,i=e.clipArea,o=e.zoom,s=e.groupable,u=t.getState(),f=u.target,c=u.width,v=u.height,l=u.allMatrix,d=u.is3d,p=u.left,h=u.top,g=u.pos1,m=u.pos2,b=u.pos3,S=u.pos4,x=u.clipPathState,C=u.snapBoundInfos,E=u.rotation;if(!f||s)return[];var _=ai(f,c,v,a||"inset",x||n);if(!_)return[];var R=d?4:3,y=_.type,w=_.poses,O=w.map(function(ut){var it=Et(l,ut.pos,R);return[it[0]-p,it[1]-h]}),D=[],T=[],P=y==="rect",I=y==="inset",G=y==="polygon";if(P||I||G){var F=I?O.slice(0,8):O;T=F.map(function(ut,it){var vt=it===0?F[F.length-1]:F[it-1],tt=ht(vt,ut),ot=oo(vt,ut);return r.createElement("div",{key:"clipLine".concat(it),className:V("line","clip-line","snap-control"),"data-clip-index":it,style:{width:"".concat(ot,"px"),transform:"translate(".concat(vt[0],"px, ").concat(vt[1],"px) rotate(").concat(tt,"rad) scaleY(").concat(o,")")}})})}if(D=O.map(function(ut,it){return r.createElement("div",{key:"clipControl".concat(it),className:V("control","clip-control","snap-control"),"data-clip-index":it,style:{transform:"translate(".concat(ut[0],"px, ").concat(ut[1],"px) rotate(").concat(E,"rad) scale(").concat(o,")")}})}),I&&D.push.apply(D,O.slice(8).map(function(ut,it){return r.createElement("div",{key:"clipRadiusControl".concat(it),className:V("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+it,style:{transform:"translate(".concat(ut[0],"px, ").concat(ut[1],"px) rotate(").concat(E,"rad) scale(").concat(o,")")}})})),y==="circle"||y==="ellipse"){var z=_.left,A=_.top,B=_.radiusX,k=_.radiusY,$=H(Et(l,[z,A],R),Et(l,[0,0],R)),U=$[0],q=$[1],N="none";if(!i){for(var Y=Math.max(10,B/5,k/5),K=[],Q=0;Q<=Y;++Q){var nt=Math.PI*2/Y*Q;K.push([B+(B-o)*Math.cos(nt),k+(k-o)*Math.sin(nt)])}K.push([B,-2]),K.push([-2,-2]),K.push([-2,k*2+2]),K.push([B*2+2,k*2+2]),K.push([B*2+2,-2]),K.push([B,-2]),N="polygon(".concat(K.map(function(ut){return"".concat(ut[0],"px ").concat(ut[1],"px")}).join(", "),")")}D.push(r.createElement("div",{key:"clipEllipse",className:V("clip-ellipse","snap-control"),style:{width:"".concat(B*2,"px"),height:"".concat(k*2,"px"),clipPath:N,transform:"translate(".concat(-p+U,"px, ").concat(-h+q,"px) ").concat(Ae(l))}}))}if(i){var W=kt(j([g,m,b,S],O,!0)),X=W.width,at=W.height,et=W.left,St=W.top;if(G||P||I){var K=I?O.slice(0,8):O;D.push(r.createElement("div",{key:"clipArea",className:V("clip-area","snap-control"),style:{width:"".concat(X,"px"),height:"".concat(at,"px"),transform:"translate(".concat(et,"px, ").concat(St,"px)"),clipPath:"polygon(".concat(K.map(function(it){return"".concat(it[0]-et,"px ").concat(it[1]-St,"px")}).join(", "),")")}}))}}return C&&["vertical","horizontal"].forEach(function(ut){var it=C[ut],vt=ut==="horizontal";it.isSnap&&T.push.apply(T,it.snap.posInfos.map(function(tt,ot){var st=tt.pos,Pt=H(Et(l,vt?[0,st]:[st,0],R),[p,h]),Zt=H(Et(l,vt?[c,st]:[st,v],R),[p,h]);return Xr(r,"",Pt,Zt,o,"clip".concat(ut,"snap").concat(ot),"guideline")})),it.isBound&&T.push.apply(T,it.bounds.map(function(tt,ot){var st=tt.pos,Pt=H(Et(l,vt?[0,st]:[st,0],R),[p,h]),Zt=H(Et(l,vt?[c,st]:[st,v],R),[p,h]);return Xr(r,"",Pt,Zt,o,"clip".concat(ut,"bounds").concat(ot),"guideline","bounds","bold")}))}),j(j([],D,!0),T,!0)},dragControlCondition:function(t,r){return r.inputEvent&&(r.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,r){var e=t.props,n=e.dragWithClip,a=n===void 0?!0:n;return a?!1:this.dragControlStart(t,r)},drag:function(t,r){return this.dragControl(t,M(M({},r),{isDragTarget:!0}))},dragEnd:function(t,r){return this.dragControlEnd(t,r)},dragControlStart:function(t,r){var e=t.state,n=t.props,a=n.defaultClipPath,i=n.customClipPath,o=e.target,s=e.width,u=e.height,f=r.inputEvent?r.inputEvent.target:null,c=f&&f.getAttribute("class")||"",v=r.datas,l=ai(o,s,u,a||"inset",i);if(!l)return!1;var d=l.clipText,p=l.type,h=l.poses,g=L(t,"onClipStart",J(t,r,{clipType:p,clipStyle:d,poses:h.map(function(m){return m.pos})}));return g===!1?(v.isClipStart=!1,!1):(v.isControl=c&&c.indexOf("clip-control")>-1,v.isLine=c.indexOf("clip-line")>-1,v.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,v.clipIndex=f?parseInt(f.getAttribute("data-clip-index"),10):-1,v.clipPath=l,v.isClipStart=!0,e.clipPathState=d,mr(t,r),!0)},dragControl:function(t,r){var e,n,a=r.datas,i=r.originalDatas,o=r.isDragTarget;if(!a.isClipStart)return!1;var s=a,u=s.isControl,f=s.isLine,c=s.isArea,v=s.clipIndex,l=s.clipPath;if(!l)return!1;var d=pr(t.props,"clippable"),p=d.keepRatio,h=0,g=0,m=i.draggable,b=qt(r);o&&m?(e=m.prevBeforeDist,h=e[0],g=e[1]):(h=b[0],g=b[1]);var S=[h,g],x=t.state,C=x.width,E=x.height,_=!c&&!u&&!f,R=l.type,y=l.poses,w=l.splitter,O=y.map(function(ct){return ct.pos});_&&(h=-h,g=-g);var D=!u||y[v].direction==="nesw",T=R==="inset"||R==="rect",P=y.map(function(){return[0,0]});if(u&&!D){var I=y[v],G=I.horizontal,F=I.vertical,z=[h*Math.abs(G),g*Math.abs(F)];P=Vl(y,v,z,T,p)}else D&&(P=O.map(function(){return[h,g]}));var A=O.map(function(ct,wt){return rt(ct,P[wt])}),B=j([],A,!0);x.snapBoundInfos=null;var k=l.type==="circle",$=l.type==="ellipse";if(k||$){var U=kt(A),q=Math.abs(U.bottom-U.top),N=Math.abs($?U.right-U.left:q),Y=A[0][1]+q,K=A[0][0]-N,Q=A[0][0]+N;k&&(B.push([Q,U.bottom]),P.push([1,0])),B.push([U.left,Y]),P.push([0,1]),B.push([K,U.bottom]),P.push([1,0])}var nt=Do((d.clipHorizontalGuidelines||[]).map(function(ct){return lt("".concat(ct),E)}),(d.clipVerticalGuidelines||[]).map(function(ct){return lt("".concat(ct),C)}),C,E),W=[],X=[];if(k||$)W=[B[4][0],B[2][0]],X=[B[1][1],B[3][1]];else if(T){var at=[B[0],B[2],B[4],B[6]],et=[P[0],P[2],P[4],P[6]];W=at.filter(function(ct,wt){return et[wt][0]}).map(function(ct){return ct[0]}),X=at.filter(function(ct,wt){return et[wt][1]}).map(function(ct){return ct[1]})}else W=B.filter(function(ct,wt){return P[wt][0]}).map(function(ct){return ct[0]}),X=B.filter(function(ct,wt){return P[wt][1]}).map(function(ct){return ct[1]});var St=[0,0],ut=Ua(nt,d.clipTargetBounds&&{left:0,top:0,right:C,bottom:E},W,X,5),it=ut.horizontal,vt=ut.vertical,tt=it.offset,ot=vt.offset;if(it.isBound&&(St[1]+=tt),vt.isBound&&(St[0]+=ot),($||k)&&P[0][0]===0&&P[0][1]===0){var U=kt(A),st=U.bottom-U.top,Pt=$?U.right-U.left:st,Zt=vt.isBound?Math.abs(ot):vt.snapIndex===0?-ot:ot,xt=it.isBound?Math.abs(tt):it.snapIndex===0?-tt:tt;Pt-=Zt,st-=xt,k&&(st=xo(vt,it)>0?st:Pt,Pt=st);var Ct=B[0];B[1][1]=Ct[1]-st,B[2][0]=Ct[0]+Pt,B[3][1]=Ct[1]+st,B[4][0]=Ct[0]-Pt}else if(T&&p&&u){var Jt=No(y),br=Jt[0],xa=Jt[1],Ea=br&&xa?br/xa:0,Jo=y[v],re=Jo.direction||"",Ye=B[1][1],Y=B[5][1],K=B[7][0],Q=B[3][0];tt<=ot?tt=ot/Ea:ot=tt*Ea,re.indexOf("w")>-1?K-=ot:re.indexOf("e")>-1?Q-=ot:(K+=ot/2,Q-=ot/2),re.indexOf("n")>-1?Ye-=tt:re.indexOf("s")>-1?Y-=tt:(Ye+=tt/2,Y-=tt/2);var Qo=Oe(Ye,Q,Y,K);B.forEach(function(ya,ns){var He;He=Qo[ns].pos,ya[0]=He[0],ya[1]=He[1]})}else B.forEach(function(ct,wt){var Ca=P[wt];Ca[0]&&(ct[0]-=ot),Ca[1]&&(ct[1]-=tt)});var _a=pa(t,l,A),We="".concat(R,"(").concat(_a.join(w),")");if(x.clipPathState=We,k||$)W=[B[4][0],B[2][0]],X=[B[1][1],B[3][1]];else if(T){var at=[B[0],B[2],B[4],B[6]];W=at.map(function(wt){return wt[0]}),X=at.map(function(wt){return wt[1]})}else W=B.map(function(ct){return ct[0]}),X=B.map(function(ct){return ct[1]});if(x.snapBoundInfos=Ua(nt,d.clipTargetBounds&&{left:0,top:0,right:C,bottom:E},W,X,1),m){var ts=x.is3d,rs=x.allMatrix,es=ts?4:3,Xe=St;o&&(Xe=[S[0]+St[0]-b[0],S[1]+St[1]-b[1]]),m.deltaOffset=ft(rs,[Xe[0],Xe[1],0,0],es)}return L(t,"onClip",J(t,r,M({clipEventType:"changed",clipType:R,poses:A,clipStyle:We,clipStyles:_a,distX:h,distY:g},Ot((n={},n[R==="rect"?"clip":"clipPath"]=We,n),r)))),!0},dragControlEnd:function(t,r){this.unset(t);var e=r.isDrag,n=r.datas,a=r.isDouble,i=n.isLine,o=n.isClipStart,s=n.isControl;return o?(L(t,"onClipEnd",zt(t,r,{})),a&&(s?jl(t,r):i&&ql(t,r)),a||e):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Ul={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[`:host[data-able-origindraggable] .control.origin {
    pointer-events: auto;
}`],dragControlCondition:function(t,r){return r.isRequest?r.requestAble==="originDraggable":_t(r.inputEvent.target,V("origin"))},dragControlStart:function(t,r){var e=r.datas;mr(t,r);var n=J(t,r,{dragStart:Rt.dragStart(t,new Dr().dragStart([0,0],r))}),a=L(t,"onDragOriginStart",n);return e.startOrigin=t.state.transformOrigin,e.startTargetOrigin=t.state.targetOrigin,e.prevOrigin=[0,0],e.isDragOrigin=!0,a===!1?(e.isDragOrigin=!1,!1):n},dragControl:function(t,r){var e=r.datas,n=r.isPinch,a=r.isRequest;if(!e.isDragOrigin)return!1;var i=qt(r),o=i[0],s=i[1],u=t.state,f=u.width,c=u.height,v=u.offsetMatrix,l=u.targetMatrix,d=u.is3d,p=t.props.originRelative,h=p===void 0?!0:p,g=d?4:3,m=[o,s];if(a){var b=r.distOrigin;(b[0]||b[1])&&(m=b)}var S=rt(e.startOrigin,m),x=rt(e.startTargetOrigin,m),C=H(m,e.prevOrigin),E=te(v,l,S,g),_=t.getRect(),R=kt(ar(E,f,c,g)),y=[_.left-R.left,_.top-R.top];e.prevOrigin=m;var w=[Ft(x[0],f,h),Ft(x[1],c,h)].join(" "),O=Rt.drag(t,Qr(r,t.state,y,!!n)),D=J(t,r,M(M({width:f,height:c,origin:S,dist:m,delta:C,transformOrigin:w,drag:O},Ot({transformOrigin:w,transform:O.transform},r)),{afterTransform:O.transform}));return L(t,"onDragOrigin",D),D},dragControlEnd:function(t,r){var e=r.datas;return e.isDragOrigin?(L(t,"onDragOriginEnd",zt(t,r,{})),!0):!1},dragGroupControlCondition:function(t,r){return this.dragControlCondition(t,r)},dragGroupControlStart:function(t,r){var e=this.dragControlStart(t,r);return!!e},dragGroupControl:function(t,r){var e=this.dragControl(t,r);return e?(t.transformOrigin=e.transformOrigin,!0):!1},request:function(t){var r={},e=t.getRect(),n=0,a=0,i=e.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:r}},request:function(s){return"deltaOrigin"in s?(o[0]+=s.deltaOrigin[0],o[1]+=s.deltaOrigin[1]):"origin"in s?(o[0]=s.origin[0]-i[0],o[1]=s.origin[1]-i[1]):("x"in s?n=s.x-e.left:"deltaX"in s&&(n+=s.deltaX),"y"in s?a=s.y-e.top:"deltaY"in s&&(a+=s.deltaY)),{datas:r,distX:n,distY:a,distOrigin:o}},requestEnd:function(){return{datas:r,isDrag:!0}}}}};function Kl(t,r,e,n){var a=t.filter(function(u){var f=u.virtual,c=u.horizontal;return c&&!f}).length,i=t.filter(function(u){var f=u.virtual,c=u.vertical;return c&&!f}).length,o=-1;if(r===0&&(a===0?o=0:a===1&&(o=1)),r===2&&(a<=2?o=2:a<=3&&(o=3)),r===3&&(i===0?o=4:i<4&&(o=7)),r===1&&(i<=1?o=5:i<=2&&(o=6)),!(o===-1||!t[o].virtual)){var s=t[o];Zl(t,o),o<4?s.pos[0]=e:s.pos[1]=n}}function Zl(t,r){r<4?t.slice(0,r+1).forEach(function(e){e.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,r+1).forEach(function(e){e.virtual=!1}))}function Jl(t,r){r<4?t.slice(r,4).forEach(function(e){e.virtual=!0}):t.slice(r).forEach(function(e){e.virtual=!0})}function ii(t,r,e,n,a){n===void 0&&(n=[0,0]);var i=[];return!t||t==="0px"?i=[]:i=er(t),Fo(i,r,e,0,0,n,a)}function oi(t,r,e,n,a){var i=t.state,o=i.width,s=i.height,u=da(a,t.props.roundRelative,o,s),f=u.raws,c=u.styles,v=u.radiusPoses,l=Wl(v,f),d=l.horizontals,p=l.verticals,h=c.join(" ");i.borderRadiusState=h;var g=J(t,r,M({horizontals:d,verticals:p,borderRadius:h,width:o,height:s,delta:n,dist:e},Ot({borderRadius:h},r)));return L(t,"onRound",g),g}function si(t){var r=t.getState().style,e=r.borderRadius||"";if(!e&&t.props.groupable){var n=t.getTargets()[0];n&&(e=getComputedStyle(n).borderRadius,r.borderRadius=e)}return e}var Ql={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean,roundPadding:Number,isDisplayShadowRoundControls:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd",onRoundGroupStart:"roundGroupStart",onRoundGroup:"roundGroup",onRoundGroupEnd:"roundGroupEnd"},css:[`.control.border-radius {
    background: #d66;
    cursor: pointer;
    z-index: 3;
}`,`.control.border-radius.vertical {
    background: #d6d;
    z-index: 2;
}`,`.control.border-radius.virtual {
    opacity: 0.5;
    z-index: 1;
}`,`:host.round-line-clickable .line.direction {
    cursor: pointer;
}`],className:function(t){var r=t.props.roundClickable;return r===!0||r==="line"?V("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},render:function(t,r){var e=t.getState(),n=e.target,a=e.width,i=e.height,o=e.allMatrix,s=e.is3d,u=e.left,f=e.top,c=e.borderRadiusState,v=t.props,l=v.minRoundControls,d=l===void 0?[0,0]:l,p=v.maxRoundControls,h=p===void 0?[4,4]:p,g=v.zoom,m=v.roundPadding,b=m===void 0?0:m,S=v.isDisplayShadowRoundControls,x=v.groupable;if(!n)return null;var C=c||si(t),E=s?4:3,_=ii(C,a,i,d,!0);if(!_)return null;var R=0,y=0,w=x?[0,0]:[u,f];return _.map(function(O,D){var T=O.horizontal,P=O.vertical,I=O.direction||"",G=j([],O.pos,!0);y+=Math.abs(T),R+=Math.abs(P),T&&I.indexOf("n")>-1&&(G[1]-=b),P&&I.indexOf("w")>-1&&(G[0]-=b),T&&I.indexOf("s")>-1&&(G[1]+=b),P&&I.indexOf("e")>-1&&(G[0]+=b);var F=H(Et(o,G,E),w),z=O.vertical?R<=h[1]&&(S||!O.virtual):y<=h[0]&&(S||!O.virtual);return r.createElement("div",{key:"borderRadiusControl".concat(D),className:V("control","border-radius",O.vertical?"vertical":"",O.virtual?"virtual":""),"data-radius-index":D,style:{display:z?"block":"none",transform:"translate(".concat(F[0],"px, ").concat(F[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(t,r){if(!r.inputEvent||r.isRequest)return!1;var e=r.inputEvent.target.getAttribute("class")||"";return e.indexOf("border-radius")>-1||e.indexOf("moveable-line")>-1&&e.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,r){return this.dragControlCondition(t,r)},dragControlStart:function(t,r){var e=r.inputEvent,n=r.datas,a=e.target,i=a.getAttribute("class")||"",o=i.indexOf("border-radius")>-1,s=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,u=o?parseInt(a.getAttribute("data-radius-index"),10):-1,f=-1;if(s){var c=a.getAttribute("data-line-key")||"";c&&(f=parseInt(c.replace(/render-line-/g,""),10),isNaN(f)&&(f=-1))}if(!o&&!s)return!1;var v=J(t,r,{}),l=L(t,"onRoundStart",v);if(l===!1)return!1;n.lineIndex=f,n.controlIndex=u,n.isControl=o,n.isLine=s,mr(t,r);var d=t.props,p=d.roundRelative,h=d.minRoundControls,g=h===void 0?[0,0]:h,m=t.state,b=m.width,S=m.height;n.isRound=!0,n.prevDist=[0,0];var x=si(t),C=ii(x||"",b,S,g,!0)||[];return n.controlPoses=C,m.borderRadiusState=da(C,p,b,S).styles.join(" "),v},dragControl:function(t,r){var e=r.datas,n=e.controlPoses;if(!e.isRound||!e.isControl||!n.length)return!1;var a=e.controlIndex,i=qt(r),o=i[0],s=i[1],u=[o,s],f=H(u,e.prevDist),c=t.props.maxRoundControls,v=c===void 0?[4,4]:c,l=t.state,d=l.width,p=l.height,h=n[a],g=h.vertical,m=h.horizontal,b=n.map(function(x){var C=x.horizontal,E=x.vertical,_=[C*m*u[0],E*g*u[1]];if(C){if(v[0]===1)return _;if(v[0]<4&&C!==m)return _}else{if(v[1]===0)return _[1]=E*m*u[0]/d*p,_;if(g){if(v[1]===1)return _;if(v[1]<4&&E!==g)return _}}return[0,0]});b[a]=u;var S=n.map(function(x,C){return M(M({},x),{pos:rt(x.pos,b[C])})});return a<4?S.slice(0,a+1).forEach(function(x){x.virtual=!1}):S.slice(4,a+1).forEach(function(x){x.virtual=!1}),e.prevDist=[o,s],oi(t,r,u,f,S)},dragControlEnd:function(t,r){var e=t.state;e.borderRadiusState="";var n=r.datas,a=r.isDouble;if(!n.isRound)return!1;var i=n.isControl,o=n.controlIndex,s=n.isLine,u=n.lineIndex,f=n.controlPoses,c=f.filter(function(m){var b=m.virtual;return b}).length,v=t.props.roundClickable,l=v===void 0?!0:v;if(a&&l){if(i&&(l===!0||l==="control"))Jl(f,o);else if(s&&(l===!0||l==="line")){var d=ji(t,r),p=d[0],h=d[1];Kl(f,u,p,h)}c!==f.filter(function(m){var b=m.virtual;return b}).length&&oi(t,r,[0,0],[0,0],f)}var g=zt(t,r,{});return L(t,"onRoundEnd",g),e.borderRadiusState="",g},dragGroupControlStart:function(t,r){var e=this.dragControlStart(t,r);if(!e)return!1;var n=t.moveables,a=t.props.targets,i=Yt(t,"roundable",r),o=M({targets:t.props.targets,events:i.map(function(s,u){return M(M({},s),{target:a[u],moveable:n[u],currentTarget:n[u]})})},e);return L(t,"onRoundGroupStart",o),e},dragGroupControl:function(t,r){var e=this.dragControl(t,r);if(!e)return!1;var n=t.moveables,a=t.props.targets,i=Yt(t,"roundable",r),o=M({targets:t.props.targets,events:i.map(function(s,u){return M(M(M({},s),{target:a[u],moveable:n[u],currentTarget:n[u]}),Ot({borderRadius:e.borderRadius},s))})},e);return L(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,r){var e=t.moveables,n=t.props.targets,a=Yt(t,"roundable",r);ke(t,"onRound",function(s){var u=M({targets:t.props.targets,events:a.map(function(f,c){return M(M(M({},f),{target:n[c],moveable:e[c],currentTarget:e[c]}),Ot({borderRadius:s.borderRadius},f))})},s);L(t,"onRoundGroup",u)});var i=this.dragControlEnd(t,r);if(!i)return!1;var o=M({targets:t.props.targets,events:a.map(function(s,u){var f;return M(M({},s),{target:n[u],moveable:e[u],currentTarget:e[u],lastEvent:(f=s.datas)===null||f===void 0?void 0:f.lastEvent})})},i);return L(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};function tc(t,r){var e=r?4:3,n=dt(e),a="matrix".concat(r?"3d":"","(").concat(n.join(","),")");return t===a||t==="matrix(1,0,0,1,0,0)"}var Lo={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,r){var e=t.state,n=e.is3d,a=e.target,i=e.targetMatrix,o=a==null?void 0:a.style.transform,s=n?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(zi(i,!0),")"),u=!o||o==="none"?s:o;r.datas.startTransforms=tc(u,n)?[]:er(u)},resetStyle:function(t){var r=t.datas;r.nextStyle={},r.nextTransforms=t.datas.startTransforms,r.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,r){return J(t,r,{setTransform:function(e){r.datas.startTransforms=bt(e)?e:er(e)},isPinch:!!r.isPinch})},fillDragParams:function(t,r){return J(t,r,{isPinch:!!r.isPinch})},dragStart:function(t,r){this.setTransform(t,r),this.resetStyle(r),L(t,"onBeforeRenderStart",this.fillDragStartParams(t,r))},drag:function(t,r){this.resetStyle(r),L(t,"onBeforeRender",J(t,r,{isPinch:!!r.isPinch}))},dragEnd:function(t,r){L(t,"onBeforeRenderEnd",J(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag}))},dragGroupStart:function(t,r){var e=this;this.dragStart(t,r);var n=Yt(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.setTransform(u,o),e.resetStyle(o),e.fillDragStartParams(u,o)});L(t,"onBeforeRenderGroupStart",J(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,setTransform:function(){},events:i}))},dragGroup:function(t,r){var e=this;this.drag(t,r);var n=Yt(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.resetStyle(o),e.fillDragParams(u,o)});L(t,"onBeforeRenderGroup",J(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,events:i}))},dragGroupEnd:function(t,r){this.dragEnd(t,r),L(t,"onBeforeRenderGroupEnd",J(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag,targets:t.props.targets}))},dragControlStart:function(t,r){return this.dragStart(t,r)},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupControlStart:function(t,r){return this.dragGroupStart(t,r)},dragGroupControl:function(t,r){return this.dragGroup(t,r)},dragGroupControlEnd:function(t,r){return this.dragGroupEnd(t,r)}},Yo={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,r){L(t,"onRenderStart",J(t,r,{isPinch:!!r.isPinch}))},drag:function(t,r){L(t,"onRender",this.fillDragParams(t,r))},dragAfter:function(t,r){if(r.resultCount)return this.drag(t,r)},dragEnd:function(t,r){L(t,"onRenderEnd",this.fillDragEndParams(t,r))},dragGroupStart:function(t,r){L(t,"onRenderGroupStart",J(t,r,{isPinch:!!r.isPinch,targets:t.props.targets}))},dragGroup:function(t,r){var e=this,n=Yt(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.fillDragParams(u,o)});L(t,"onRenderGroup",J(t,r,M(M({isPinch:!!r.isPinch,targets:t.props.targets,transform:ue(r)},Ot(fe(r))),{events:i})))},dragGroupEnd:function(t,r){var e=this,n=Yt(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.fillDragEndParams(u,o)});L(t,"onRenderGroupEnd",J(t,r,M({isPinch:!!r.isPinch,isDrag:r.isDrag,targets:t.props.targets,events:i,transform:ue(r)},Ot(fe(r)))))},dragControlStart:function(t,r){return this.dragStart(t,r)},dragControl:function(t,r){return this.drag(t,r)},dragControlAfter:function(t,r){return this.dragAfter(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupControlStart:function(t,r){return this.dragGroupStart(t,r)},dragGroupControl:function(t,r){return this.dragGroup(t,r)},dragGroupControlEnd:function(t,r){return this.dragGroupEnd(t,r)},fillDragParams:function(t,r){return J(t,r,M({isPinch:!!r.isPinch,transform:ue(r)},Ot(fe(r))))},fillDragEndParams:function(t,r){return J(t,r,M({isPinch:!!r.isPinch,isDrag:r.isDrag,transform:ue(r)},Ot(fe(r))))}};function kr(t,r,e,n,a,i,o){var s=a==="Start",u=t.state.target,f=i.isRequest;if(!u||s&&n.indexOf("Control")>-1&&!f&&t.areaElement===i.inputEvent.target)return!1;var c="".concat(e).concat(n).concat(a),v="".concat(e).concat(n,"Condition"),l=a==="End",d=a==="After",p=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());p&&t.updateRect(a,!0,!1),i.clientDistX=i.distX,i.clientDistY=i.distY,a===""&&!f&&Of(t.state,i);var h=j([],t[r],!0);if(f){var g=i.requestAble;h.some(function(D){return D.name===g})||h.push.apply(h,t.props.ables.filter(function(D){return D.name===g}))}if(!h.length||h.every(function(D){return D.dragRelation}))return!1;var m=j(j([Lo],h,!0),[Yo],!1).filter(function(D){return D[c]}),b=i.datas;p&&m.forEach(function(D){D.unset&&D.unset(t)});var S=i.inputEvent,x;l&&S&&(x=document.elementFromPoint(i.clientX,i.clientY)||S.target);var C=0,E=!1,_=function(){var D;E=!0,(D=i.stop)===null||D===void 0||D.call(i)},R=m.filter(function(D){var T=D.name,P=b[T]||(b[T]={});if(s&&(P.isEventStart=!D[v]||D[v](t,i)),P.isEventStart){var I=D[c](t,M(M({},i),{stop:_,resultCount:C,datas:P,originalDatas:b,inputTarget:x}));return t._emitter.off(),s&&I===!1&&(P.isEventStart=!1),C+=I||P.isEventStart?1:0,I}return!1}),y=R.length,w=!1;if(E&&(w=!0),!w&&s&&m.length&&!y&&(w=m.filter(function(D){var T=D.name,P=b[T];return P.isEventStart?D.dragRelation!=="strong":!1}).length),(l||w)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(D){D.state.gestos={}}),m.forEach(function(D){D.unset&&D.unset(t)})),s&&!w&&!f&&y&&(i==null||i.preventDefault()),t.isUnmounted||w)return!1;if(!s&&y&&!o||l){var O=t.props.flushSync||no;O(function(){t.updateRect(l?a:"",!0,!1),t.forceUpdate()})}return!s&&!l&&!d&&y&&!o&&kr(t,r,e,n,a+"After",i),!0}function Gn(t){return function(r){var e=t.props.dragTarget,n=r.inputEvent.target,a=t.areaElement;return e&&(n===e||e.contains(n))||n===a||!t.isMoveableElement(n)&&!t.controlBox.getElement().contains(n)||_t(n,"moveable-area")||_t(n,"moveable-padding")||_t(n,"moveable-edgeDraggable")}}function Wo(t,r,e){var n=t.controlBox.getElement(),a=[],i=t.props.dragTarget;return a.push(n),(!t.props.dragArea||i)&&a.push(r),ha(t,a,"targetAbles",e,{dragStart:Gn(t),pinchStart:Gn(t)})}function ha(t,r,e,n,a){a===void 0&&(a={});var i=e==="targetAbles",o=t.props,s=o.pinchOutside,u=o.pinchThreshold,f=o.preventClickEventOnDrag,c=o.preventClickDefault,v=o.checkInput,l={preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:u,pinchOutside:s,preventClickEventOnDrag:i?f:!1,preventClickEventOnDragStart:i?c:!1,preventClickEventByCondition:i?null:function(h){return t.controlBox.getElement().contains(h.target)},checkInput:i?v:!1},d=new ku(r,l),p=n==="Control";return["drag","pinch"].forEach(function(h){["Start","","End"].forEach(function(g){d.on("".concat(h).concat(g),function(m){var b,S=m.eventType;if(a[S]&&!a[S](m)){m.stop();return}var x=kr(t,e,h,n,g,m);x?(t.props.stopPropagation||g==="Start"&&p)&&((b=m==null?void 0:m.inputEvent)===null||b===void 0||b.stopPropagation()):m.stop()})})}),d}var rc=function(){function t(e,n,a){var i=this;this.target=e,this.moveable=n,this.eventName=a,this.ables=[],this._onEvent=function(o){var s=i.eventName,u=i.moveable;u.state.disableNativeEvent||i.ables.forEach(function(f){f[s](u,{inputEvent:o})})},e.addEventListener(a.toLowerCase(),this._onEvent)}var r=t.prototype;return r.setAbles=function(e){this.ables=e},r.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function ec(t){if(t&&t.getRootNode){var r=t.getRootNode();if(r.nodeType===11)return r}}function ui(t,r,e){for(var n=t,a=[],i=document.documentElement||document.body,o=!e&&t===r||t===i,s=o,u=!1,f=3,c,v,l,d=!1,p=Wr(r,r,!0).offsetParent,h=1;n&&!s;){s=o;var g=getComputedStyle(n),m=g.position,b=ao(n,g),S=pu(mf(b)),x=m==="fixed",C={hasTransform:!1,fixedContainer:null};x&&(d=!0,C=Ef(n),p=C.fixedContainer);var E=S.length;!u&&E===16&&(u=!0,f=4,Mn(a),l&&(l=Vt(l,3,4))),u&&E===9&&(S=Vt(S,3,4));var _=xf(n,t,g),R=_.tagName,y=_.hasOffset,w=_.isSVG,O=_.origin,D=_.targetOrigin,T=_.offset,P=T[0],I=T[1];R==="svg"&&l&&(a.push({type:"target",target:n,matrix:_f(n,f)}),a.push({type:"offset",target:n,matrix:dt(f)}));var G=void 0,F=!1,z=!1,A=parseFloat(g.zoom)||1;if(x)G=C.fixedContainer,F=!0;else{var B=Wr(n,r,!1,!0,g),k=B.offsetZoom;if(G=B.offsetParent,F=B.isEnd,z=B.isStatic,h*=k,k!==1&&z)P-=G.offsetLeft,I-=G.offsetTop;else if(Zu){var $=B.parentSlotElement;if($){for(var U=G,q=0,N=0;U&&ec(U);)q+=U.offsetLeft,N+=U.offsetTop,U=U.offsetParent;P-=q,I-=N}}}Xi&&!Ju&&y&&!w&&z&&(m==="relative"||m==="static")&&(P-=G.offsetLeft,I-=G.offsetTop,o=o||F);var Y=0,K=0,Q=0,nt=0;if(x)y&&C.hasTransform&&(Q=G.clientLeft,nt=G.clientTop);else if(y&&p!==G&&(Y=G.clientLeft,K=G.clientTop),y&&G===i){var W=io(n,!1,g);P+=W[0],I+=W[1]}if(a.push({type:"target",target:n,matrix:ye(S,f,O)}),y){var X=n===t,at=X?0:n.scrollLeft,et=X?0:n.scrollTop;a.push({type:"offset",target:n,matrix:Yr([P-at+Y-Q,I-et+K-nt],f)})}else a.push({type:"offset",target:n,origin:O});if(A!==1&&a.push({type:"zoom",target:n,matrix:ye(jn([A,A],f),f,[0,0])}),l||(l=S),c||(c=O),v||(v=D),s||x)break;n=G,o=F,(!e||n===i)&&(s=o)}return l||(l=dt(f)),c||(c=[0,0]),v||(v=[0,0]),{zoom:h,offsetContainer:p,matrixes:a,targetMatrix:l,transformOrigin:c,targetOrigin:v,is3d:u,hasFixed:d}}function nc(t,r,e,n){var a;e===void 0&&(e=r);var i=ui(t,r),o=i.matrixes,s=i.is3d,u=i.targetMatrix,f=i.transformOrigin,c=i.targetOrigin,v=i.offsetContainer,l=i.hasFixed,d=i.zoom,p=ui(v,e,!0),h=p.matrixes,g=p.is3d,m=p.offsetContainer,b=p.zoom,S=n,x=4,C=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,E=u,_=dt(x),R=dt(x),y=dt(x),w=dt(x),O=o.length;h.reverse(),o.reverse(),!s&&S&&(E=Vt(E,3,4),Mn(o)),!g&&S&&Mn(h),h.forEach(function(z){R=ft(R,z.matrix,x)});var D=e||document.body,T=((a=h[0])===null||a===void 0?void 0:a.target)||Wr(D,D,!0).offsetParent,P=h.slice(1).reduce(function(z,A){return ft(z,A.matrix,x)},dt(x));o.forEach(function(z,A){if(O-2===A&&(y=_.slice()),O-1===A&&(w=_.slice()),!z.matrix){var B=o[A+1],k=yf(z,B,T,x,ft(P,_,x));z.matrix=Yr(k,x)}_=ft(_,z.matrix,x)});var I=!C&&s;E||(E=dt(I?4:3));var G=Ae(C&&E.length===16?Vt(E,4,3):E,I),F=R;return R=Ii(R,x,x),{hasZoom:d!==1||b!==1,hasFixed:l,rootMatrix:R,originalRootMatrix:F,beforeMatrix:y,offsetMatrix:w,allMatrix:_,targetMatrix:E,targetTransform:G,transformOrigin:f,targetOrigin:c,is3d:S,offsetContainer:v,offsetRootContainer:m}}function ac(t,r,e,n){e===void 0&&(e=r);var a=0,i=0,o=0,s={},u=so(t);if(t&&(a=u.offsetWidth,i=u.offsetHeight),t){var f=nc(t,r,e,n),c=Cr(f.allMatrix,f.transformOrigin,a,i);s=M(M({},f),c);var v=Cr(f.allMatrix,[50,50],100,100);o=uo([v.pos1,v.pos2],v.direction)}var l=4;return M(M(M({hasZoom:!1,width:a,height:i,rotation:o},u),{originalRootMatrix:dt(l),rootMatrix:dt(l),beforeMatrix:dt(l),offsetMatrix:dt(l),allMatrix:dt(l),targetMatrix:dt(l),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),s)}function zn(t,r,e,n,a,i){i===void 0&&(i=[]);var o=1,s=[0,0],u=le(),f=le(),c=le(),v=le(),l=[0,0],d={},p=ac(r,e,a,!0);if(r){var h=getComputedStyle(r);i.forEach(function(D){d[D]=h[D]});var g=p.is3d?4:3,m=Cr(p.offsetMatrix,rt(p.transformOrigin,Gi(p.targetMatrix,g)),p.width,p.height);o=m.direction,s=rt(m.origin,[m.left-p.left,m.top-p.top]),v=Ir(p.offsetRootContainer);var b=Wr(n,n,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var S=Cr(ft(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),x=Cr(p.originalRootMatrix,De(getComputedStyle(b)).map(function(D){return parseFloat(D)}),b.offsetWidth,b.offsetHeight);if(u=Je(S,v),c=Je(x,v,b,!0),t){var C=S.left,E=S.top;f=Je({left:C,top:E,bottom:E,right:E},v)}}else{u=Ir(r),c=Ir(b,!0),t&&(f=Ir(t));var _=c.left,R=c.top,y=c.clientLeft,w=c.clientTop,O=[u.left-_,u.top-R];l=H(vr(p.rootMatrix,O,4),[y+p.left,w+p.top])}}return M({targetClientRect:u,containerClientRect:c,moveableClientRect:f,rootContainerClientRect:v,beforeDirection:o,beforeOrigin:s,originalBeforeOrigin:s,target:r,style:d,offsetDelta:l},p)}function fi(t){var r=t.pos1,e=t.pos2,n=t.pos3,a=t.pos4;if(!r||!e||!n||!a)return null;var i=nr([r,e,n,a]),o=[i.minX,i.minY],s=H(t.origin,o);return r=H(r,o),e=H(e,o),n=H(n,o),a=H(a,o),M(M({},t),{left:t.left,top:t.top,posDelta:o,pos1:r,pos2:e,pos3:n,pos4:a,origin:s,beforeOrigin:s,isPersisted:!0})}var wr=function(t){Zr(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=M({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},zn(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new Pe,n._prevTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._observer=null,n._observerId=0,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n.checkUpdateRect=function(){if(!n.isDragging()){var a=n.props.parentMoveable;if(a){a.checkUpdateRect();return}Fs(n._observerId),n._observerId=bi(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(a){a.stopPropagation(),a.preventDefault()},n}var e=r.prototype;return e.render=function(){var n=this.props,a=this.getState(),i=n.parentPosition,o=n.className,s=n.target,u=n.zoom,f=n.cspNonce,c=n.translateZ,v=n.cssStyled,l=n.portalContainer,d=n.groupable,p=n.linePadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var h=i||[0,0],g=h[0],m=h[1],b=a.left,S=a.top,x=a.target,C=a.direction,E=a.hasFixed,_=a.offsetDelta,R=n.targets,y=this.isDragging(),w={};this.getEnabledAbles().forEach(function(G){w["data-able-".concat(G.name.toLowerCase())]=!0});var O=this._getAbleClassName(),D=R&&R.length&&(x||d)||s||!this._hasFirstTarget&&this.state.isPersisted,T=this.controlBox||this.props.firstRenderState||this.props.persistData,P=[b-g,S-m];!d&&n.useAccuratePosition&&(P[0]+=_[0],P[1]+=_[1]);var I={position:E?"fixed":"absolute",display:D?"block":"none",visibility:T?"visible":"hidden",transform:"translate3d(".concat(P[0],"px, ").concat(P[1],"px, ").concat(c,")"),"--zoom":u,"--zoompx":"".concat(u,"px")};return p&&(I["--moveable-line-padding"]=p),At(v,M({cspNonce:f,ref:Xt(this,"controlBox"),className:"".concat(V("control-box",C===-1?"reverse":"",y?"dragging":"")," ").concat(O," ").concat(o)},w,{onClick:this._onPreventClick,portalContainer:l,style:I}),this.renderAbles(),this._renderLines())},e.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1,this.controlBox.getElement();var n=this.props,a=n.parentMoveable,i=n.container,o=n.wrapperMoveable;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!a&&!o&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(n)},e.componentWillUnmount=function(){this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off();var n=this._viewContainer;n&&this._changeAbleViewClassNames([]),_r(this,"targetGesto"),_r(this,"controlGesto");var a=this.events;for(var i in a){var o=a[i];o&&o.destroy()}},e.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.getAble=function(n){var a=this.props.ables||[];return Ut(a,function(i){return i.name===n})},e.getContainer=function(){var n=this.props,a=n.parentMoveable,i=n.wrapperMoveable,o=n.container;return o||i&&i.getContainer()||a&&a.getContainer()||this.controlBox.getElement().parentElement},e.isMoveableElement=function(n){var a;return n&&(((a=n.getAttribute)===null||a===void 0?void 0:a.call(n,"class"))||"").indexOf(Zn)>-1},e.dragStart=function(n){var a=this.targetGesto,i=this.controlGesto;return a&&Gn(this)({inputEvent:n})?a.isFlag()||a.triggerDragStart(n):i&&this.isMoveableElement(n.target)&&(i.isFlag()||i.triggerDragStart(n)),this},e.hitTest=function(n){var a=this.state,i=a.target,o=a.pos1,s=a.pos2,u=a.pos3,f=a.pos4,c=a.targetClientRect;if(!i)return 0;var v;if(n instanceof Element){var l=n.getBoundingClientRect();v={left:l.left,top:l.top,width:l.width,height:l.height}}else v=M({width:0,height:0},n);var d=v.left,p=v.top,h=v.width,g=v.height,m=Ga([o,s,f,u],c),b=wu(m,[[d,p],[d+h,p],[d+h,p+g],[d,p+g]]),S=Fi(m);return!b||!S?0:Math.min(100,b/S*100)},e.isInside=function(n,a){var i=this.state,o=i.target,s=i.pos1,u=i.pos2,f=i.pos3,c=i.pos4,v=i.targetClientRect;return o?hn([n,a],Ga([s,u,c,f],v)):!1},e.updateRect=function(n,a,i){i===void 0&&(i=!0);var o=this.props,s=o.parentMoveable,u=this.state,f=u.target||this.props.target,c=this.getContainer(),v=s?s._rootContainer:this._rootContainer,l=zn(this.controlBox&&this.controlBox.getElement(),f,c,c,v||c,this._getRequestStyles());if(!f&&this._hasFirstTarget&&o.persistData){var d=fi(o.persistData);for(var p in d)l[p]=d[p]}this.updateState(l,s?!1:i)},e.isDragging=function(n){var a,i,o=this.targetGesto,s=this.controlGesto;if(o!=null&&o.isFlag()){if(!n)return!0;var u=o.getEventData();return!!(!((a=u[n])===null||a===void 0)&&a.isEventStart)}if(s!=null&&s.isFlag()){if(!n)return!0;var u=s.getEventData();return!!(!((i=u[n])===null||i===void 0)&&i.isEventStart)}return!1},e.updateTarget=function(n){this.updateRect(n,!0)},e.getRect=function(){var n=this.state,a=It(this.state),i=a[0],o=a[1],s=a[2],u=a[3],f=kt(a),c=n.width,v=n.height,l=f.width,d=f.height,p=f.left,h=f.top,g=[n.left,n.top],m=rt(g,n.origin),b=rt(g,n.beforeOrigin),S=n.transformOrigin;return{width:l,height:d,left:p,top:h,pos1:i,pos2:o,pos3:s,pos4:u,offsetWidth:c,offsetHeight:v,beforeOrigin:b,origin:m,transformOrigin:S,rotation:this.getRotation()}},e.getManager=function(){return this},e.stopDrag=function(n){var a,i;(!n||n==="target")&&((a=this.targetGesto)===null||a===void 0||a.stop()),(!n||n==="control")&&((i=this.controlGesto)===null||i===void 0||i.stop())},e.getRotation=function(){var n=this.state,a=n.pos1,i=n.pos2,o=n.direction;return If(a,i,o)},e.request=function(n,a,i){a===void 0&&(a={});var o=this.props,s=o.ables,u=o.groupable,f=s.filter(function(g){return g.name===n})[0];if(this.isDragging()||!f||!f.request)return{request:function(){return this},requestEnd:function(){return this}};var c=this,v=f.request(this),l=i||a.isInstant,d=v.isControl?"controlAbles":"targetAbles",p="".concat(u?"Group":"").concat(v.isControl?"Control":""),h={request:function(g){return kr(c,d,"drag",p,"",M(M({},v.request(g)),{requestAble:n,isRequest:!0}),l),this},requestEnd:function(){return kr(c,d,"drag",p,"End",M(M({},v.requestEnd()),{requestAble:n,isRequest:!0}),l),this}};return kr(c,d,"drag",p,"Start",M(M({},v.requestStart(a)),{requestAble:n,isRequest:!0}),l),l?h.request(a).requestEnd():h},e.destroy=function(){this.componentWillUnmount()},e.updateRenderPoses=function(){var n=this.getState(),a=this.props,i=n.originalBeforeOrigin,o=n.transformOrigin,s=n.allMatrix,u=n.is3d,f=n.pos1,c=n.pos2,v=n.pos3,l=n.pos4,d=n.left,p=n.top,h=n.isPersisted,g=a.padding||{},m=g.left,b=m===void 0?0:m,S=g.top,x=S===void 0?0:S,C=g.bottom,E=C===void 0?0:C,_=g.right,R=_===void 0?0:_,y=u?4:3,w=[];h?w=o:this.controlBox&&a.groupable?w=i:w=rt(i,[d,p]),n.renderPoses=[rt(f,ve(s,[-b,-x],o,w,y)),rt(c,ve(s,[R,-x],o,w,y)),rt(v,ve(s,[-b,E],o,w,y)),rt(l,ve(s,[R,E],o,w,y))]},e.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,a=n.target,i=n.container,o=n.parentMoveable,s=this.state,u=s.target,f=s.container;if(!(!u&&!a)){this.updateAbles();var c=!wn(u,a),v=c||!wn(f,i);if(v){var l=i||this.controlBox;l&&this.unsetAbles(),this.updateState({target:a,container:i}),!o&&l&&this.updateRect("End",!1,!1),this._isPropTargetChanged=c}}},e.waitToChangeTarget=function(){return new Promise(function(){})},e.triggerEvent=function(n,a){this._emitter.trigger(n,a);var i=this.props[n];return i&&i(a)},e.useCSS=function(n,a){var i=this.props.customStyledMap,o=n+a;return i[o]||(i[o]=Wi(n,a)),i[o]},e.getState=function(){var n,a=this.props;(a.target||!((n=a.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,o=a.persistData,s=a.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&o){var u=fi(o);if(u)return this.updateState(u,!1),this.state}return this.state.isPersisted=!1,this.state},e.updateSelectors=function(){},e.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(a){a.unset&&a.unset(n)})},e.updateAbles=function(n,a){n===void 0&&(n=this.props.ables),a===void 0&&(a="");var i=this.props,o=i.triggerAblesSimultaneously,s=this.getEnabledAbles(n),u="drag".concat(a,"Start"),f="pinch".concat(a,"Start"),c="drag".concat(a,"ControlStart"),v=ce(s,[u,f],o),l=ce(s,[c],o);this.enabledAbles=s,this.targetAbles=v,this.controlAbles=l},e.updateState=function(n,a){if(a){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var o in n)i[o]=n[o]}},e.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var a=this.props;return n.filter(function(i){return i&&(i.always&&a[i.name]!==!1||a[i.name])})},e.renderAbles=function(){var n=this,a=this.props,i=a.triggerAblesSimultaneously,o={createElement:At};return this.renderState={},Rf(ho(ce(this.getEnabledAbles(),["render"],i).map(function(s){var u=s.render;return u(n,o)||[]})).filter(function(s){return s}),function(s){var u=s.key;return u}).map(function(s){return s[0]})},e.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(a,i){var o,s,u=(s=(o=i.requestStyle)===null||o===void 0?void 0:o.call(i))!==null&&s!==void 0?s:[];return j(j([],a,!0),u,!0)},[]);return n},e._updateObserver=function(n){var a,i=this.props,o=i.target;if(!window.ResizeObserver||!o||!i.useResizeObserver){(a=this._observer)===null||a===void 0||a.disconnect();return}if(!(n.target===o&&this._observer)){var s=new ResizeObserver(this.checkUpdateRect);s.observe(o,{box:"border-box"}),this._observer=s}},e._updateEvents=function(){var n=this.controlBox.getElement(),a=this.targetAbles.length,i=this.controlAbles.length,o=this.props,s=o.dragTarget||o.target,u=!a&&this.targetGesto||this._isTargetChanged(!0);u&&(_r(this,"targetGesto"),this.updateState({gesto:null})),i||_r(this,"controlGesto"),s&&a&&!this.targetGesto&&(this.targetGesto=Wo(this,s,"")),!this.controlGesto&&i&&(this.controlGesto=ha(this,n,"controlAbles","Control"))},e._updateTargets=function(){var n=this.props;this._prevTarget=n.dragTarget||n.target,this._prevDragArea=n.dragArea},e._renderLines=function(){var n=this.props,a=n,i=a.zoom,o=a.hideDefaultLines,s=a.hideChildMoveableDefaultLines,u=a.parentMoveable;if(o||u&&s)return[];var f=this.getState().renderPoses,c={createElement:At};return[[0,1],[1,3],[3,2],[2,0]].map(function(v,l){var d=v[0],p=v[1];return Xr(c,"",f[d],f[p],i,"render-line-".concat(l))})},e._isTargetChanged=function(n){var a=this.props,i=a.dragTarget||a.target,o=this._prevTarget,s=this._prevDragArea,u=a.dragArea,f=!u&&o!==i,c=(n||u)&&s!==u;return f||c},e._updateNativeEvents=function(){var n=this,a=this.props,i=a.dragArea?this.areaElement:this.state.target,o=this.events,s=Rr(o);if(this._isTargetChanged())for(var u in o){var f=o[u];f&&f.destroy(),o[u]=null}if(i){var c=this.enabledAbles;s.forEach(function(v){var l=ce(c,[v]),d=l.length>0,p=o[v];if(!d){p&&(p.destroy(),o[v]=null);return}p||(p=new rc(i,n,v),o[v]=p),p.setAbles(l)})}},e._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=hr(n,!0))},e._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=hr(n,!0));var a=this._viewContainer;a&&this._changeAbleViewClassNames(j(j([],this._getAbleViewClassNames(),!0),[this.isDragging()?Il:""],!1))},e._changeAbleViewClassNames=function(n){var a=this._viewContainer,i=po(n.filter(Boolean),function(c){return c}).map(function(c){var v=c[0];return v}),o=this._viewClassNames,s=Vr(o,i),u=s.removed,f=s.added;u.forEach(function(c){xi(a,o[c])}),f.forEach(function(c){Si(a,i[c])}),this._viewClassNames=i},e._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(a){var i;return((i=a.viewClassName)===null||i===void 0?void 0:i.call(a,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e._getAbleClassName=function(n){var a=this;n===void 0&&(n="");var i=this.getEnabledAbles(),o=this.targetGesto,s=this.controlGesto,u=o!=null&&o.isFlag()?o.getEventData():{},f=s!=null&&s.isFlag()?s.getEventData():{};return i.map(function(c){var v,l,d,p=c.name,h=((v=c.className)===null||v===void 0?void 0:v.call(c,a))||"";return(!((l=u[p])===null||l===void 0)&&l.isEventStart||!((d=f[p])===null||d===void 0)&&d.isEventStart)&&(h+=" ".concat(V("".concat(p).concat(n,"-dragging")))),h.trim()}).filter(Boolean).join(" ")},r.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,portalContainer:null,useResizeObserver:!1,linePadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:no,firstRenderState:null,persistData:null,viewContainer:null,useAccuratePosition:!1},r}(Hn),ga={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,groupableProps:Object,targetGroups:Object,hideChildMoveableDefaultLines:Boolean},events:{},render:function(t,r){var e,n=t.props,a=n.targets||[];t.moveables=[];var i=t.getState(),o=i.left,s=i.top,u=i.isPersisted,f=[o,s],c=n.zoom||1,v=t.renderGroupRects,l=((e=n.persistData)===null||e===void 0?void 0:e.children)||[];return u?a=l.map(function(){return null}):l=[],j(j([],a.map(function(d,p){return r.createElement(wr,{key:"moveable"+p,ref:pi(t,"moveables",p),target:d,origin:!1,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:f,persistData:l[p],zoom:c})}),!0),ho(v.map(function(d,p){var h=d.pos1,g=d.pos2,m=d.pos3,b=d.pos4,S=[h,g,m,b];return[[0,1],[1,3],[3,2],[2,0]].map(function(x,C){var E=x[0],_=x[1];return Xr(r,"",H(S[E],f),H(S[_],f),c,"group-rect-".concat(p,"-").concat(C))})})),!0)}},ic=Jr("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,r){r.datas.inputTarget=r.inputEvent&&r.inputEvent.target},dragEnd:function(t,r){var e=t.props.target,n=r.inputEvent,a=r.inputTarget,i=t.isMoveableElement(a),o=!i&&t.controlBox.getElement().contains(a);if(!(!n||!a||r.isDrag||t.isMoveableElement(a)||o)){var s=e.contains(a);L(t,"onClick",J(t,r,{isDouble:r.isDouble,inputTarget:a,isTarget:e===a,moveableTarget:t.props.target,containsTarget:s}))}},dragGroupEnd:function(t,r){var e=r.inputEvent,n=r.inputTarget;if(!(!e||!n||r.isDrag||t.isMoveableElement(n)||r.datas.inputTarget===n)){var a=t.props.targets,i=a.indexOf(n),o=i>-1,s=!1;i===-1&&(i=$t(a,function(u){return u.contains(n)}),s=i>-1),L(t,"onClickGroup",J(t,r,{isDouble:r.isDouble,targets:a,inputTarget:n,targetIndex:i,isTarget:o,containsTarget:s,moveableTarget:a[i]}))}},dragControlEnd:function(t,r){this.dragEnd(t,r)},dragGroupControlEnd:function(t,r){this.dragEnd(t,r)}});function Sr(t){var r=t.originalDatas.draggable;return r||(t.originalDatas.draggable={},r=t.originalDatas.draggable),M(M({},t),{datas:r})}var oc=Jr("edgeDraggable",{css:[`.edge.edgeDraggable.line {
    cursor: move;
}`],render:function(t,r){var e=t.props,n=e.edgeDraggable;return n?To(r,"edgeDraggable",n,t.getState().renderPoses,e.zoom):[]},dragCondition:function(t,r){var e,n=t.props,a=(e=r.inputEvent)===null||e===void 0?void 0:e.target;return!n.edgeDraggable||!a?!1:!n.draggable&&_t(a,V("direction"))&&_t(a,V("edge"))&&_t(a,V("edgeDraggable"))},dragStart:function(t,r){return Rt.dragStart(t,Sr(r))},drag:function(t,r){return Rt.drag(t,Sr(r))},dragEnd:function(t,r){return Rt.dragEnd(t,Sr(r))},dragGroupCondition:function(t,r){var e,n=t.props,a=(e=r.inputEvent)===null||e===void 0?void 0:e.target;return!n.edgeDraggable||!a?!1:!n.draggable&&_t(a,V("direction"))&&_t(a,V("line"))},dragGroupStart:function(t,r){return Rt.dragGroupStart(t,Sr(r))},dragGroup:function(t,r){return Rt.dragGroup(t,Sr(r))},dragGroupEnd:function(t,r){return Rt.dragGroupEnd(t,Sr(r))},unset:function(t){return Rt.unset(t)}}),Xo={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},ma=[Lo,Ao,Cl,Af,Rt,oc,Bn,Ol,Pl,Rl,Al,kl,Gl,Ul,$l,Ql,ga,Xo,ic,zo,Yo],sc=ma.reduce(function(t,r){return M(M({},t),"events"in r?r.events:{})},{}),uc=ma.reduce(function(t,r){return M(M({},t),r.props)},{}),fc=Tf(sc),lc=Object.keys(fc),cc=Object.keys(uc);function li(t,r){var e=t[0],n=t[1],a=t[2];return(e*r[0]+n*r[1]+a)/Math.sqrt(e*e+n*n)}function ge(t,r){var e=t[0],n=t[1];return-e*r[0]-n*r[1]}function ci(t,r){return Math.max.apply(Math,t.map(function(e){var n=e[0],a=e[1],i=e[2],o=e[3];return Math.max(n[r],a[r],i[r],o[r])}))}function vi(t,r){return Math.min.apply(Math,t.map(function(e){var n=e[0],a=e[1],i=e[2],o=e[3];return Math.min(n[r],a[r],i[r],o[r])}))}function vc(t,r){var e,n=[0,0],a=[0,0],i=[0,0],o=[0,0],s=0,u=0;if(!t.length)return{pos1:n,pos2:a,pos3:i,pos4:o,minX:0,minY:0,maxX:0,maxY:0,width:s,height:u,rotation:r};var f=Z(r,Tt);if(f%90){var c=f/180*Math.PI,v=Math.tan(c),l=-1/v,d=[yn,Fa],p=[[0,0],[0,0]],h=[yn,Fa],g=[[0,0],[0,0]];t.forEach(function(A){A.forEach(function(B){var k=li([-v,1,0],B),$=li([-l,1,0],B);d[0]>k&&(p[0]=B,d[0]=k),d[1]<k&&(p[1]=B,d[1]=k),h[0]>$&&(g[0]=B,h[0]=$),h[1]<$&&(g[1]=B,h[1]=$)})});var m=p[0],b=p[1],S=g[0],x=g[1],C=[-v,1,ge([-v,1],m)],E=[-v,1,ge([-v,1],b)],_=[-l,1,ge([-l,1],S)],R=[-l,1,ge([-l,1],x)];e=[[C,_],[C,R],[E,_],[E,R]].map(function(A){var B=A[0],k=A[1];return Kn(B,k)[0]}),n=e[0],a=e[1],i=e[2],o=e[3],s=h[1]-h[0],u=d[1]-d[0]}else{var y=vi(t,0),w=vi(t,1),O=ci(t,0),D=ci(t,1);if(n=[y,w],a=[O,w],i=[y,D],o=[O,D],s=O-y,u=D-w,f%180){var T=[i,n,o,a];n=T[0],a=T[1],i=T[2],o=T[3],s=D-w,u=O-y}}if(f%360>180){var T=[o,i,a,n];n=T[0],a=T[1],i=T[2],o=T[3]}var P=nr([n,a,i,o]),I=P.minX,G=P.minY,F=P.maxX,z=P.maxY;return{pos1:n,pos2:a,pos3:i,pos4:o,width:s,height:u,minX:I,minY:G,maxX:F,maxY:z,rotation:r}}function Ho(t,r){var e=r.map(function(n){if(bt(n)){var a=Ho(t,n),i=a.length;return i>1?a:i===1?a[0]:null}else{var o=Ut(t,function(s){var u=s.manager;return u.props.target===n});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return e.length===1&&bt(e[0])?e[0]:e}var dc=function(t){Zr(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new ki,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}var e=r.prototype;return e.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.getTargets=function(){return this.props.targets},e.updateRect=function(n,a,i){var o;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;this.moveables.forEach(function(Q){Q.updateRect(n,!1,!1)});var u=this.props,f=this.moveables,c=s.target||u.target,v=f.map(function(Q){return{finded:!1,manager:Q}}),l=this.props.targetGroups||[],d=Ho(v,l);d.push.apply(d,v.filter(function(Q){var nt=Q.finded;return!nt}).map(function(Q){var nt=Q.manager;return nt}));var p=[],h=!a||n!==""&&u.updateGroup,g=u.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(o=this.props.persistData)===null||o===void 0?void 0:o.rotation;m!=null&&(g=m)}function b(Q,nt,W){var X=Q.map(function(tt){if(bt(tt)){var ot=b(tt,nt),st=[ot.pos1,ot.pos2,ot.pos3,ot.pos4];return p.push(ot),{poses:st,rotation:ot.rotation}}else return{poses:It(tt.state),rotation:tt.getRotation()}}),at=X.map(function(tt){var ot=tt.rotation;return ot}),et=0,St=at[0],ut=at.every(function(tt){return Math.abs(St-tt)<.1});h?et=ut?St:g:et=!W&&ut?St:nt;var it=X.map(function(tt){var ot=tt.poses;return ot}),vt=vc(it,et);return vt}var S=b(d,this.rotation,!0);h&&(this.rotation=S.rotation,this.transformOrigin=u.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=l,this.renderGroupRects=p;var x=this.transformOrigin,C=this.rotation,E=this.scale,_=S.width,R=S.height,y=S.minX,w=S.minY,O=zf([[0,0],[_,0],[0,R],[_,R]],Gf(x,_,R),this.rotation/180*Math.PI),D=nr(O.result),T=D.minX,P=D.minY,I=" rotate(".concat(C,"deg)")+" scale(".concat(E[0]>=0?1:-1,", ").concat(E[1]>=0?1:-1,")"),G="translate(".concat(-T,"px, ").concat(-P,"px)").concat(I);this.controlBox.getElement().style.transform="translate3d(".concat(y,"px, ").concat(w,"px, ").concat(this.props.translateZ||0,")"),c.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(x,";")+"width:".concat(_,"px;height:").concat(R,"px;")+"transform: ".concat(G),s.width=_,s.height=R;var F=this.getContainer(),z=zn(this.controlBox.getElement(),c,this.controlBox.getElement(),this.getContainer(),this._rootContainer||F,[]),A=[z.left,z.top],B=It(z),k=B[0],$=B[1],U=B[2],q=B[3],N=nr([k,$,U,q]),Y=[N.minX,N.minY],K=E[0]*E[1]>0?1:-1;z.pos1=H(k,Y),z.pos2=H($,Y),z.pos3=H(U,Y),z.pos4=H(q,Y),z.left=y-z.left+Y[0],z.top=w-z.top+Y[1],z.origin=H(rt(A,z.origin),Y),z.beforeOrigin=H(rt(A,z.beforeOrigin),Y),z.originalBeforeOrigin=rt(A,z.originalBeforeOrigin),z.transformOrigin=H(rt(A,z.transformOrigin),Y),c.style.transform="translate(".concat(-T-Y[0],"px, ").concat(-P-Y[1],"px)")+I,this.updateState(M(M({},z),{posDelta:Y,direction:K,beforeDirection:K}),i)},e.getRect=function(){return M(M({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.triggerEvent=function(n,a,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,a);this._emitter.trigger(n,a)},e.updateAbles=function(){t.prototype.updateAbles.call(this,j(j([],this.props.ables,!0),[ga],!1),"Group")},e._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},e._updateEvents=function(){var n=this.state,a=this.props,i=this._prevTarget,o=a.dragTarget||this.areaElement;i!==o&&(_r(this,"targetGesto"),_r(this,"controlGesto"),n.target=null),n.target||(n.target=this.areaElement,this.controlBox.getElement().style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=Wo(this,o,"Group")),this.controlGesto||(this.controlGesto=ha(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var s=!wn(n.container,a.container);s&&(n.container=a.container);var u=a.targets,f=this.differ.update(u),c=f.added,v=f.changed,l=f.removed,d=c.length||l.length;(s||d||this.transformOrigin!==(a.defaultGroupOrigin||"50% 50%")||v.length||u.length&&!bo(this._targetGroups,a.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!d},e._updateObserver=function(){},r.defaultProps=M(M({},wr.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),r}(wr),pc=function(t){Zr(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}var e=r.prototype;return e.render=function(){var n=this,a,i=this.props,o=i.cspNonce,s=i.cssStyled,u=i.persistData,f=i.targets||[],c=f.length,v=this.isUnmounted||!c,l=(a=u==null?void 0:u.children)!==null&&a!==void 0?a:[];return v&&!c&&l.length?f=l.map(function(){return null}):v||(l=[]),At(s,{cspNonce:o,ref:Xt(this,"controlBox"),className:V("control-box")},f.map(function(d,p){return At(wr,M({key:"moveable"+p,ref:pi(n,"moveables",p)},n.props,{target:d,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:l[p]}))}))},e.componentDidUpdate=function(){},e.getTargets=function(){return this.props.targets},e.updateRect=function(n,a,i){i===void 0&&(i=!0),this.moveables.forEach(function(o){o.updateRect(n,a,i)})},e.getRect=function(){return M(M({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},e.dragStart=function(){return this},e.hitTest=function(){return 0},e.isInside=function(){return!1},e.isDragging=function(){return!1},e.updateRenderPoses=function(){},e.checkUpdate=function(){},e.triggerEvent=function(){},e.updateAbles=function(){},e._updateEvents=function(){},e._updateObserver=function(){},r}(wr);function Vo(t,r){var e=[];return t.forEach(function(n){if(n){if(Gt(n)){r[n]&&e.push.apply(e,r[n]);return}bt(n)?e.push.apply(e,Vo(n,r)):e.push(n)}}),e}function qo(t,r){var e=[];return t.forEach(function(n){if(n){if(Gt(n)){r[n]&&e.push.apply(e,r[n]);return}bt(n)?e.push(qo(n,r)):e.push(n)}}),e}function jo(t,r){return t.length!==r.length||t.some(function(e,n){var a=r[n];return!e&&!a?!1:e!=a?bt(e)&&bt(a)?jo(e,a):!0:!1})}var hc=function(t){Zr(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new ki,n._elementTargets=[],n._onChangeTargets=null,n}var e=r.prototype;return r.makeStyled=function(){var n={},a=this.getTotalAbles();a.forEach(function(o){var s=o.css;s&&s.forEach(function(u){n[u]=!0})});var i=Rr(n).join(`
`);this.defaultStyled=Wi("div",Ss(Zn,Qu+i))},r.getTotalAbles=function(){return j([Ao,ga,Xo,zo],this.defaultAbles,!0)},e.render=function(){var n,a=this.constructor;a.defaultStyled||a.makeStyled();var i=this.props,o=i.ables,s=i.props,u=ju(i,["ables","props"]),f=this._updateRefs(!0),c=Vo(f,this.selectorMap),v=c.length>1,l=a.getTotalAbles(),d=j(j([],l,!0),o||[],!0),p=M(M(M({},u),s||{}),{ables:d,cssStyled:a.defaultStyled,customStyledMap:a.customStyledMap});this._elementTargets=c;var h=null,g=this.moveable,m=u.persistData;if(m!=null&&m.children&&(v=!0),v){if(u.individualGroupable)return At(pc,M({key:"individual-group",ref:Xt(this,"moveable")},p,{target:null,targets:c}));var b=qo(f,this.selectorMap);if(g&&!g.props.groupable&&!g.props.individualGroupable){var S=g.props.target;S&&c.indexOf(S)>-1&&(h=M({},g.state))}return At(dc,M({key:"group",ref:Xt(this,"moveable")},p,(n=u.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:c,targetGroups:b,firstRenderState:h}))}else{var x=c[0];if(g&&(g.props.groupable||g.props.individualGroupable)){var C=g.moveables||[],E=Ut(C,function(_){return _.props.target===x});E&&(h=M({},E.state))}return At(wr,M({key:"single",ref:Xt(this,"moveable")},p,{target:x,firstRenderState:h}))}},e.componentDidMount=function(){this._checkChangeTargets(),this._updateRefs()},e.componentDidUpdate=function(){this._checkChangeTargets()},e.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.getTargets=function(){var n,a;return(a=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&a!==void 0?a:[]},e.updateSelectors=function(){this.selectorMap={},this._updateRefs()},e.waitToChangeTarget=function(){var n=this,a;return this._onChangeTargets=function(){n._onChangeTargets=null,a()},new Promise(function(i){a=i})},e.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.getManager=function(){return this.moveable},e._updateRefs=function(n){var a=this.refTargets,i=oa(this.props.target||this.props.targets),o=typeof document<"u",s=jo(a,i),u=this.selectorMap,f={};return this.refTargets.forEach(function c(v){if(Gt(v)){var l=u[v];l?f[v]=u[v]:o&&(s=!0,f[v]=[].slice.call(document.querySelectorAll(v)))}else bt(v)&&v.forEach(c)}),this.refTargets=i,this.selectorMap=f,!n&&s&&this.forceUpdate(),i},e._checkChangeTargets=function(){var n,a,i,o=this._differ.update(this._elementTargets),s=o.added,u=o.removed,f=s.length||u.length;f&&((a=(n=this.props).onChangeTargets)===null||a===void 0||a.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this)),this._updateRefs()},r.defaultAbles=[],r.customStyledMap={},r.defaultStyled=null,$u([xs(qi)],r.prototype,"moveable",void 0),r}(Hn),gc=function(t){Zr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.defaultAbles=ma,r}(hc),mc=gc;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var An=function(t,r){return An=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},An(t,r)};function ba(t,r){An(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Hr=function(){return Hr=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Hr.apply(this,arguments)};function bc(t,r,e,n){var a=arguments.length,i=a<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(r,e,i):o(r,e))||i);return a>3&&i&&Object.defineProperty(r,e,i),i}var Sc=function(t){ba(r,t);function r(n){var a=t.call(this,n)||this;return a.state={},a.state=a.props,a}var e=r.prototype;return e.render=function(){return eu(At(mc,Hr({ref:Xt(this,"moveable")},this.state)),this.state.parentElement)},r}(Xn),Te=cc,$o=qi,Uo=lc,xc=function(t){ba(r,t);function r(n,a){a===void 0&&(a={});var i=t.call(this)||this;i.tempElement=document.createElement("div");var o=Hr({},a),s={};Uo.forEach(function(f){s[ks("on ".concat(f))]=function(c){return i.trigger(f,c)}}),Ba(At(Sc,Hr({ref:Xt(i,"innerMoveable"),parentElement:n},o,s)),i.tempElement);var u=o.target;return bt(u)&&u.length>1&&i.updateRect(),i}var e=r.prototype;return e.setState=function(n,a){this.innerMoveable.setState(n,a)},e.forceUpdate=function(n){this.innerMoveable.forceUpdate(n)},e.dragStart=function(n){var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(n)},e.destroy=function(){Ba(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},e.getMoveable=function(){return this.innerMoveable.moveable},r=bc([Da($o,function(n,a){n[a]||(n[a]=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=this.getMoveable();if(!(!s||!s[a]))return s[a].apply(s,i)})}),Da(Te,function(n,a){Object.defineProperty(n,a,{get:function(){return this.getMoveable().props[a]},set:function(i){var o;this.setState((o={},o[a]=i,o))},enumerable:!0,configurable:!0})})],r),r}(Pe),Ec=function(t){ba(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r}(xc),Fr=function(){return Fr=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Fr.apply(this,arguments)},Ko={};$o.forEach(function(t){Ko[t]=function(){for(var r,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(r=this.$_moveable)[t].apply(r,e)}});var Zo={};Te.forEach(function(t){Zo[t]=function(r){this.$_moveable[t]=r}});var Sa=di({name:"moveable",methods:Ko,props:Te,watch:Zo,mounted:function(){var t=this,r={},e=this.$props;Te.forEach(function(o){var s=e[o];qr(s)||(r[o]=e[o])});var n=this.$refs,a=n.moveableElement,i=new Ec(a,Fr(Fr({},r),{portalContainer:a}));Uo.forEach(function(o){i.on(o,function(s){t.$emit(o,Fr({},s))})}),this.$_moveable=i},beforeUnmount:function(){this.$_moveable.destroy()}});const _c={ref:"moveableElement"};function Cc(t,r,e,n,a,i){return me(),be("div",_c,null,512)}Sa.render=Cc;Sa.__file="src/Moveable.vue";const yc=["data-eleId","data-lineIndex","data-itemIndex","onClick","onMousedown"],wc=di({__name:"PlayerMoveable",props:{canvasSize:{type:Object,default(){return{width:0,height:0}}}},setup(t){const r=as(),e=is(),n=Ve(),a=Ve(),i=Ve(),o=os(()=>{if(r.playerHeight===0&&r.playerWidth===0)return[];const l=[];return e.trackList.forEach(({list:d,type:p},h)=>{if(p==="audio")return;const g=d.findIndex((b,S)=>!!(r.playStartFrame>=b.start&&r.playStartFrame<=b.end&&b.draw)),m=d[g];m&&l.unshift({lineIndex:h,itemIndex:g,id:m.id,scale:m.scale/100,x:m.centerX,y:m.centerY,w:m.width,h:m.height,left:r.playerWidth/2-m.width/2,top:r.playerHeight/2-m.height/2})}),a.value&&a.value.updateRect(),l}),s=ss({target:i,className:"cc-move",container:n.value,...ms});function u(l){console.log(" ~ selectItem ~ Element Id:",l),r.isPause=!0,e.selectTrackById(l)}function f(l){const{target:d,transform:p,translate:h}=l,{lineindex:g,itemindex:m}=d.dataset,[b,S]=h,x=e.trackList[g].list[m];x.centerX=b,x.centerY=S,d.style.transform=p}function c(l){const{target:d,scale:p,transform:h}=l,{lineindex:g,itemindex:m}=d.dataset,b=Math.max(Math.round(p[0]*100),1),S=e.trackList[g].list[m];S.scale=b,d.style.transform=h}function v(l,d){l.stopPropagation(),r.isPause=!0,e.selectTrackById(d),i.value=l.currentTarget,gs(()=>{a.value.dragStart(l)})}return us([e.selectTrackItem,o],()=>{if(n.value&&e.selectTrackItem.line!==-1&&e.selectTrackItem.index!==-1){const l=e.trackList[e.selectTrackItem.line].list[e.selectTrackItem.index];l&&o.value.find(d=>d.id===l.id)?i.value=n.value.querySelector(`.move-target[data-eleid='${l.id}']`):i.value=null}else i.value=null},{immediate:!0,flush:"post"}),(l,d)=>(me(),be("div",{ref_key:"moveContainer",ref:n,class:"absolute left-0 right-0 top-0 bottom-0 m-auto"},[(me(!0),be(fs,null,ls(o.value,(p,h)=>(me(),be("div",{key:p.id,"data-eleId":p.id,"data-lineIndex":p.lineIndex,"data-itemIndex":p.itemIndex,style:ps({zIndex:h,top:`${p.top}px`,left:`${p.left}px`,width:`${p.w}px`,height:`${p.h}px`,transform:`translate(${p.x}px, ${p.y}px) scale(${p.scale})`}),class:"move-target absolute",onClick:hs(g=>u(p.id),["stop"]),onMousedown:g=>v(g,p.id)},null,44,yc))),128)),cs(ds(Sa),vs({ref_key:"moveable",ref:a},s,{onDrag:f,onScale:c}),null,16)],512))}});export{wc as _};
