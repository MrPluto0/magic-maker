var yo=e=>{throw TypeError(e)};var Vu=(e,t,r)=>t.has(e)||yo("Cannot "+r);var xo=(e,t,r)=>t.has(e)?yo("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r);var Ue=(e,t,r)=>(Vu(e,t,"access private method"),r);import{b as Ye,d as wt,bb as Wu,t as xi,bi as Wr,e as tt,u as be,H as it,an as je,I as Tt,v as _o,bq as ze,W as Kn,a as lt,o as L,f as Y,s as A,n as rt,g as w,j as gt,k as ke,V as Hu,bT as Xu,bY as Yu,bQ as Bn,bw as rr,cg as Lr,bS as ju,cz as So,D as Rs,N as Uu,K as le,L as _e,bI as qu,b9 as Ku,ch as Qr,bJ as Zu,bH as Ju,a2 as sr,b8 as Fn,at as vr,Z as Ps,A as Ct,B as q,ao as ee,R as Gn,y as O,i as ht,M as tn,a6 as Hr,a3 as Pt,x as pt,bv as yr,E as Wt,bV as Qu,aO as Ge,ba as _i,bZ as Si,$ as La,w as Ci,cA as tc,cB as Is,bU as ec,cC as Os,bO as Bs,h as Ut,C as wr,cl as wi,J as As,F as $a,cD as qt,ac as Fe,cE as rc,bl as nc,ad as ac,cF as ic,bP as Co,cG as wo,cH as oc,cI as sc,bE as lc,cJ as uc,ck as Eo,b_ as dr,cK as cc,c0 as fc,ca as Vt,cL as Kt,aq as en,a4 as ge,cM as de,cN as dc,cO as pc,cP as vc,ah as rn,cQ as Er,aP as zs,aQ as Ls,cR as ko,cS as hc,cT as gc,cU as mc,cV as bc,cW as yc,cX as xc,cY as _c,bD as Sc,au as $s,cZ as Cc,c_ as Ei,c$ as wc,d0 as Fs,d1 as Gs,d2 as ki,d3 as Ec,P as kc,ae as Fa,al as Dc,a1 as Ns,ag as Mc,d4 as Tc}from"./index-tyqlcWpJ.js";import{a as Zn,E as nn,d as Rc,b as Do,_ as Vs,h as se,c as Mo}from"./hotkeys.esm-Cm9y6V0e.js";import{g as Di,C as Pc,i as Ic,d as Oc,c as Jn,_ as Bc}from"./ResourceList.vue_vue_type_script_setup_true_lang-DpGQDJxr.js";import{E as Ac}from"./el-empty-DUHY4HoL.js";const zc=Ye({color:{type:wt(Object),required:!0},vertical:{type:Boolean,default:!1}});let ya=!1;function Xr(e,t){if(!Wu)return;const r=function(i){var o;(o=t.drag)==null||o.call(t,i)},n=function(i){var o;document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",n),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",n),document.onselectstart=null,document.ondragstart=null,ya=!1,(o=t.end)==null||o.call(t,i)},a=function(i){var o;ya||(i.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",r),document.addEventListener("mouseup",n),document.addEventListener("touchmove",r),document.addEventListener("touchend",n),ya=!0,(o=t.start)==null||o.call(t,i))};e.addEventListener("mousedown",a),e.addEventListener("touchstart",a,{passive:!1})}const Lc=e=>{const t=Kn(),{t:r}=xi(),n=Wr(),a=Wr(),i=tt(()=>e.color.get("alpha")),o=tt(()=>r("el.colorpicker.alphaLabel"));function s(c){var d;c.target!==n.value&&l(c),(d=n.value)==null||d.focus()}function l(c){if(!a.value||!n.value)return;const p=t.vnode.el.getBoundingClientRect(),{clientX:v,clientY:h}=Di(c);if(e.vertical){let g=h-p.top;g=Math.max(n.value.offsetHeight/2,g),g=Math.min(g,p.height-n.value.offsetHeight/2),e.color.set("alpha",Math.round((g-n.value.offsetHeight/2)/(p.height-n.value.offsetHeight)*100))}else{let g=v-p.left;g=Math.max(n.value.offsetWidth/2,g),g=Math.min(g,p.width-n.value.offsetWidth/2),e.color.set("alpha",Math.round((g-n.value.offsetWidth/2)/(p.width-n.value.offsetWidth)*100))}}function u(c){const{code:d,shiftKey:p}=c,v=p?10:1;switch(d){case ze.left:case ze.down:c.preventDefault(),c.stopPropagation(),f(-v);break;case ze.right:case ze.up:c.preventDefault(),c.stopPropagation(),f(v);break}}function f(c){let d=i.value+c;d=d<0?0:d>100?100:d,e.color.set("alpha",d)}return{thumb:n,bar:a,alpha:i,alphaLabel:o,handleDrag:l,handleClick:s,handleKeydown:u}},$c=(e,{bar:t,thumb:r,handleDrag:n})=>{const a=Kn(),i=be("color-alpha-slider"),o=it(0),s=it(0),l=it();function u(){if(!r.value||e.vertical)return 0;const y=a.vnode.el,b=e.color.get("alpha");return y?Math.round(b*(y.offsetWidth-r.value.offsetWidth/2)/100):0}function f(){if(!r.value)return 0;const y=a.vnode.el;if(!e.vertical)return 0;const b=e.color.get("alpha");return y?Math.round(b*(y.offsetHeight-r.value.offsetHeight/2)/100):0}function c(){if(e.color&&e.color.value){const{r:y,g:b,b:x}=e.color.toRgb();return`linear-gradient(to right, rgba(${y}, ${b}, ${x}, 0) 0%, rgba(${y}, ${b}, ${x}, 1) 100%)`}return""}function d(){o.value=u(),s.value=f(),l.value=c()}je(()=>{if(!t.value||!r.value)return;const y={drag:b=>{n(b)},end:b=>{n(b)}};Xr(t.value,y),Xr(r.value,y),d()}),Tt(()=>e.color.get("alpha"),()=>d()),Tt(()=>e.color.value,()=>d());const p=tt(()=>[i.b(),i.is("vertical",e.vertical)]),v=tt(()=>i.e("bar")),h=tt(()=>i.e("thumb")),g=tt(()=>({background:l.value})),m=tt(()=>({left:_o(o.value),top:_o(s.value)}));return{rootKls:p,barKls:v,barStyle:g,thumbKls:h,thumbStyle:m,update:d}},Fc="ElColorAlphaSlider",Gc=lt({name:Fc}),Nc=lt({...Gc,props:zc,setup(e,{expose:t}){const r=e,{alpha:n,alphaLabel:a,bar:i,thumb:o,handleDrag:s,handleClick:l,handleKeydown:u}=Lc(r),{rootKls:f,barKls:c,barStyle:d,thumbKls:p,thumbStyle:v,update:h}=$c(r,{bar:i,thumb:o,handleDrag:s});return t({update:h,bar:i,thumb:o}),(g,m)=>(L(),Y("div",{class:rt(w(f))},[A("div",{ref_key:"bar",ref:i,class:rt(w(c)),style:gt(w(d)),onClick:w(l)},null,14,["onClick"]),A("div",{ref_key:"thumb",ref:o,class:rt(w(p)),style:gt(w(v)),"aria-label":w(a),"aria-valuenow":w(n),"aria-orientation":g.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:w(u)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var Vc=ke(Nc,[["__file","alpha-slider.vue"]]);const Wc=lt({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const t=be("color-hue-slider"),r=Kn(),n=it(),a=it(),i=it(0),o=it(0),s=tt(()=>e.color.get("hue"));Tt(()=>s.value,()=>{d()});function l(p){p.target!==n.value&&u(p)}function u(p){if(!a.value||!n.value)return;const h=r.vnode.el.getBoundingClientRect(),{clientX:g,clientY:m}=Di(p);let y;if(e.vertical){let b=m-h.top;b=Math.min(b,h.height-n.value.offsetHeight/2),b=Math.max(n.value.offsetHeight/2,b),y=Math.round((b-n.value.offsetHeight/2)/(h.height-n.value.offsetHeight)*360)}else{let b=g-h.left;b=Math.min(b,h.width-n.value.offsetWidth/2),b=Math.max(n.value.offsetWidth/2,b),y=Math.round((b-n.value.offsetWidth/2)/(h.width-n.value.offsetWidth)*360)}e.color.set("hue",y)}function f(){if(!n.value)return 0;const p=r.vnode.el;if(e.vertical)return 0;const v=e.color.get("hue");return p?Math.round(v*(p.offsetWidth-n.value.offsetWidth/2)/360):0}function c(){if(!n.value)return 0;const p=r.vnode.el;if(!e.vertical)return 0;const v=e.color.get("hue");return p?Math.round(v*(p.offsetHeight-n.value.offsetHeight/2)/360):0}function d(){i.value=f(),o.value=c()}return je(()=>{if(!a.value||!n.value)return;const p={drag:v=>{u(v)},end:v=>{u(v)}};Xr(a.value,p),Xr(n.value,p),d()}),{bar:a,thumb:n,thumbLeft:i,thumbTop:o,hueValue:s,handleClick:l,update:d,ns:t}}});function Hc(e,t,r,n,a,i){return L(),Y("div",{class:rt([e.ns.b(),e.ns.is("vertical",e.vertical)])},[A("div",{ref:"bar",class:rt(e.ns.e("bar")),onClick:e.handleClick},null,10,["onClick"]),A("div",{ref:"thumb",class:rt(e.ns.e("thumb")),style:gt({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var Xc=ke(Wc,[["render",Hc],["__file","hue-slider.vue"]]);const Yc=Ye({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Hu,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:Xu.teleported,predefine:{type:wt(Array)},validateEvent:{type:Boolean,default:!0},...Yu(["ariaLabel"])}),jc={[Bn]:e=>rr(e)||Lr(e),[ju]:e=>rr(e)||Lr(e),activeChange:e=>rr(e)||Lr(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},Ws=Symbol("colorPickerContextKey"),To=function(e,t,r){return[e,t*r/((e=(2-t)*r)<1?e:2-e)||0,e/2]},Uc=function(e){return rr(e)&&e.includes(".")&&Number.parseFloat(e)===1},qc=function(e){return rr(e)&&e.includes("%")},mr=function(e,t){Uc(e)&&(e="100%");const r=qc(e);return e=Math.min(t,Math.max(0,Number.parseFloat(`${e}`))),r&&(e=Number.parseInt(`${e*t}`,10)/100),Math.abs(e-t)<1e-6?1:e%t/Number.parseFloat(t)},Ro={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},An=e=>{e=Math.min(Math.round(e),255);const t=Math.floor(e/16),r=e%16;return`${Ro[t]||t}${Ro[r]||r}`},Po=function({r:e,g:t,b:r}){return Number.isNaN(+e)||Number.isNaN(+t)||Number.isNaN(+r)?"":`#${An(e)}${An(t)}${An(r)}`},xa={A:10,B:11,C:12,D:13,E:14,F:15},qe=function(e){return e.length===2?(xa[e[0].toUpperCase()]||+e[0])*16+(xa[e[1].toUpperCase()]||+e[1]):xa[e[1].toUpperCase()]||+e[1]},Kc=function(e,t,r){t=t/100,r=r/100;let n=t;const a=Math.max(r,.01);r*=2,t*=r<=1?r:2-r,n*=a<=1?a:2-a;const i=(r+t)/2,o=r===0?2*n/(a+n):2*t/(r+t);return{h:e,s:o*100,v:i*100}},Io=(e,t,r)=>{e=mr(e,255),t=mr(t,255),r=mr(r,255);const n=Math.max(e,t,r),a=Math.min(e,t,r);let i;const o=n,s=n-a,l=n===0?0:s/n;if(n===a)i=0;else{switch(n){case e:{i=(t-r)/s+(t<r?6:0);break}case t:{i=(r-e)/s+2;break}case r:{i=(e-t)/s+4;break}}i/=6}return{h:i*360,s:l*100,v:o*100}},Pr=function(e,t,r){e=mr(e,360)*6,t=mr(t,100),r=mr(r,100);const n=Math.floor(e),a=e-n,i=r*(1-t),o=r*(1-a*t),s=r*(1-(1-a)*t),l=n%6,u=[r,o,i,i,s,r][l],f=[s,r,r,o,i,i][l],c=[i,i,s,r,r,o][l];return{r:Math.round(u*255),g:Math.round(f*255),b:Math.round(c*255)}};class $r{constructor(t={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const r in t)So(t,r)&&(this[r]=t[r]);t.value?this.fromString(t.value):this.doOnChange()}set(t,r){if(arguments.length===1&&typeof t=="object"){for(const n in t)So(t,n)&&this.set(n,t[n]);return}this[`_${t}`]=r,this.doOnChange()}get(t){return t==="alpha"?Math.floor(this[`_${t}`]):this[`_${t}`]}toRgb(){return Pr(this._hue,this._saturation,this._value)}fromString(t){if(!t){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const r=(n,a,i)=>{this._hue=Math.max(0,Math.min(360,n)),this._saturation=Math.max(0,Math.min(100,a)),this._value=Math.max(0,Math.min(100,i)),this.doOnChange()};if(t.includes("hsl")){const n=t.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(a=>a!=="").map((a,i)=>i>2?Number.parseFloat(a):Number.parseInt(a,10));if(n.length===4?this._alpha=Number.parseFloat(n[3])*100:n.length===3&&(this._alpha=100),n.length>=3){const{h:a,s:i,v:o}=Kc(n[0],n[1],n[2]);r(a,i,o)}}else if(t.includes("hsv")){const n=t.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(a=>a!=="").map((a,i)=>i>2?Number.parseFloat(a):Number.parseInt(a,10));n.length===4?this._alpha=Number.parseFloat(n[3])*100:n.length===3&&(this._alpha=100),n.length>=3&&r(n[0],n[1],n[2])}else if(t.includes("rgb")){const n=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(a=>a!=="").map((a,i)=>i>2?Number.parseFloat(a):Number.parseInt(a,10));if(n.length===4?this._alpha=Number.parseFloat(n[3])*100:n.length===3&&(this._alpha=100),n.length>=3){const{h:a,s:i,v:o}=Io(n[0],n[1],n[2]);r(a,i,o)}}else if(t.includes("#")){const n=t.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(n))return;let a,i,o;n.length===3?(a=qe(n[0]+n[0]),i=qe(n[1]+n[1]),o=qe(n[2]+n[2])):(n.length===6||n.length===8)&&(a=qe(n.slice(0,2)),i=qe(n.slice(2,4)),o=qe(n.slice(4,6))),n.length===8?this._alpha=qe(n.slice(6))/255*100:(n.length===3||n.length===6)&&(this._alpha=100);const{h:s,s:l,v:u}=Io(a,i,o);r(s,l,u)}}compare(t){return Math.abs(t._hue-this._hue)<2&&Math.abs(t._saturation-this._saturation)<1&&Math.abs(t._value-this._value)<1&&Math.abs(t._alpha-this._alpha)<1}doOnChange(){const{_hue:t,_saturation:r,_value:n,_alpha:a,format:i}=this;if(this.enableAlpha)switch(i){case"hsl":{const o=To(t,r/100,n/100);this.value=`hsla(${t}, ${Math.round(o[1]*100)}%, ${Math.round(o[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${t}, ${Math.round(r)}%, ${Math.round(n)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${Po(Pr(t,r,n))}${An(a*255/100)}`;break}default:{const{r:o,g:s,b:l}=Pr(t,r,n);this.value=`rgba(${o}, ${s}, ${l}, ${this.get("alpha")/100})`}}else switch(i){case"hsl":{const o=To(t,r/100,n/100);this.value=`hsl(${t}, ${Math.round(o[1]*100)}%, ${Math.round(o[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${t}, ${Math.round(r)}%, ${Math.round(n)}%)`;break}case"rgb":{const{r:o,g:s,b:l}=Pr(t,r,n);this.value=`rgb(${o}, ${s}, ${l})`;break}default:this.value=Po(Pr(t,r,n))}}}const Zc=lt({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(e){const t=be("color-predefine"),{currentColor:r}=Rs(Ws),n=it(i(e.colors,e.color));Tt(()=>r.value,o=>{const s=new $r;s.fromString(o),n.value.forEach(l=>{l.selected=s.compare(l)})}),Uu(()=>{n.value=i(e.colors,e.color)});function a(o){e.color.fromString(e.colors[o])}function i(o,s){return o.map(l=>{const u=new $r;return u.enableAlpha=e.enableAlpha,u.format="rgba",u.fromString(l),u.selected=u.value===s.value,u})}return{rgbaColors:n,handleSelect:a,ns:t}}});function Jc(e,t,r,n,a,i){return L(),Y("div",{class:rt(e.ns.b())},[A("div",{class:rt(e.ns.e("colors"))},[(L(!0),Y(le,null,_e(e.rgbaColors,(o,s)=>(L(),Y("div",{key:e.colors[s],class:rt([e.ns.e("color-selector"),e.ns.is("alpha",o._alpha<100),{selected:o.selected}]),onClick:l=>e.handleSelect(s)},[A("div",{style:gt({backgroundColor:o.value})},null,4)],10,["onClick"]))),128))],2)],2)}var Qc=ke(Zc,[["render",Jc],["__file","predefine.vue"]]);const tf=lt({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const t=be("color-svpanel"),r=Kn(),n=it(0),a=it(0),i=it("hsl(0, 100%, 50%)"),o=tt(()=>{const u=e.color.get("hue"),f=e.color.get("value");return{hue:u,value:f}});function s(){const u=e.color.get("saturation"),f=e.color.get("value"),c=r.vnode.el,{clientWidth:d,clientHeight:p}=c;a.value=u*d/100,n.value=(100-f)*p/100,i.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function l(u){const c=r.vnode.el.getBoundingClientRect(),{clientX:d,clientY:p}=Di(u);let v=d-c.left,h=p-c.top;v=Math.max(0,v),v=Math.min(v,c.width),h=Math.max(0,h),h=Math.min(h,c.height),a.value=v,n.value=h,e.color.set({saturation:v/c.width*100,value:100-h/c.height*100})}return Tt(()=>o.value,()=>{s()}),je(()=>{Xr(r.vnode.el,{drag:u=>{l(u)},end:u=>{l(u)}}),s()}),{cursorTop:n,cursorLeft:a,background:i,colorValue:o,handleDrag:l,update:s,ns:t}}});function ef(e,t,r,n,a,i){return L(),Y("div",{class:rt(e.ns.b()),style:gt({backgroundColor:e.background})},[A("div",{class:rt(e.ns.e("white"))},null,2),A("div",{class:rt(e.ns.e("black"))},null,2),A("div",{class:rt(e.ns.e("cursor")),style:gt({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},[A("div")],6)],6)}var rf=ke(tf,[["render",ef],["__file","sv-panel.vue"]]);const nf=lt({name:"ElColorPicker"}),af=lt({...nf,props:Yc,emits:jc,setup(e,{expose:t,emit:r}){const n=e,{t:a}=xi(),i=be("color"),{formItem:o}=qu(),s=Ku(),l=Qr(),{inputId:u,isLabeledByFormItem:f}=Zu(n,{formItemContext:o}),c=it(),d=it(),p=it(),v=it(),h=it(),g=it(),{isFocused:m,handleFocus:y,handleBlur:b}=Ju(h,{beforeFocus(){return l.value},beforeBlur(U){var J;return(J=v.value)==null?void 0:J.isFocusInsideContent(U)},afterBlur(){B(!1),H()}});let x=!0;const _=sr(new $r({enableAlpha:n.showAlpha,format:n.colorFormat||"",value:n.modelValue})),S=it(!1),C=it(!1),M=it(""),k=tt(()=>!n.modelValue&&!C.value?"transparent":I(_,n.showAlpha)),E=tt(()=>!n.modelValue&&!C.value?"":_.value),R=tt(()=>f.value?void 0:n.ariaLabel||a("el.colorpicker.defaultLabel")),D=tt(()=>f.value?o==null?void 0:o.labelId:void 0),P=tt(()=>[i.b("picker"),i.is("disabled",l.value),i.bm("picker",s.value),i.is("focused",m.value)]);function I(U,J){if(!(U instanceof $r))throw new TypeError("color should be instance of _color Class");const{r:Q,g:ct,b:dt}=U.toRgb();return J?`rgba(${Q}, ${ct}, ${dt}, ${U.get("alpha")/100})`:`rgb(${Q}, ${ct}, ${dt})`}function B(U){S.value=U}const V=Fn(B,100,{leading:!0});function K(){l.value||B(!0)}function X(){V(!1),H()}function H(){vr(()=>{n.modelValue?_.fromString(n.modelValue):(_.value="",vr(()=>{C.value=!1}))})}function z(){l.value||V(!S.value)}function j(){_.fromString(M.value)}function G(){const U=_.value;r(Bn,U),r("change",U),n.validateEvent&&(o==null||o.validate("change").catch(J=>La())),V(!1),vr(()=>{const J=new $r({enableAlpha:n.showAlpha,format:n.colorFormat||"",value:n.modelValue});_.compare(J)||H()})}function $(){V(!1),r(Bn,null),r("change",null),n.modelValue!==null&&n.validateEvent&&(o==null||o.validate("change").catch(U=>La())),H()}function N(){S.value&&(X(),m.value&&Z())}function F(U){U.preventDefault(),U.stopPropagation(),B(!1),H()}function W(U){switch(U.code){case ze.enter:case ze.numpadEnter:case ze.space:U.preventDefault(),U.stopPropagation(),K(),g.value.focus();break;case ze.esc:F(U);break}}function Z(){h.value.focus()}function nt(){h.value.blur()}return je(()=>{n.modelValue&&(M.value=E.value)}),Tt(()=>n.modelValue,U=>{U?U&&U!==_.value&&(x=!1,_.fromString(U)):C.value=!1}),Tt(()=>[n.colorFormat,n.showAlpha],()=>{_.enableAlpha=n.showAlpha,_.format=n.colorFormat||_.format,_.doOnChange(),r(Bn,_.value)}),Tt(()=>E.value,U=>{M.value=U,x&&r("activeChange",U),x=!0}),Tt(()=>_.value,()=>{!n.modelValue&&!C.value&&(C.value=!0)}),Tt(()=>S.value,()=>{vr(()=>{var U,J,Q;(U=c.value)==null||U.update(),(J=d.value)==null||J.update(),(Q=p.value)==null||Q.update()})}),Ps(Ws,{currentColor:E}),t({color:_,show:K,hide:X,focus:Z,blur:nt}),(U,J)=>(L(),Ct(w(Si),{ref_key:"popper",ref:v,visible:S.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[w(i).be("picker","panel"),w(i).b("dropdown"),U.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:U.teleported,transition:`${w(i).namespace.value}-zoom-in-top`,persistent:"",onHide:Q=>B(!1)},{content:q(()=>[ee((L(),Y("div",{onKeydown:Gn(F,["esc"])},[A("div",{class:rt(w(i).be("dropdown","main-wrapper"))},[O(Xc,{ref_key:"hue",ref:c,class:"hue-slider",color:w(_),vertical:""},null,8,["color"]),O(rf,{ref_key:"sv",ref:d,color:w(_)},null,8,["color"])],2),U.showAlpha?(L(),Ct(Vc,{key:0,ref_key:"alpha",ref:p,color:w(_)},null,8,["color"])):ht("v-if",!0),U.predefine?(L(),Ct(Qc,{key:1,ref:"predefine","enable-alpha":U.showAlpha,color:w(_),colors:U.predefine},null,8,["enable-alpha","color","colors"])):ht("v-if",!0),A("div",{class:rt(w(i).be("dropdown","btns"))},[A("span",{class:rt(w(i).be("dropdown","value"))},[O(w(tn),{ref_key:"inputRef",ref:g,modelValue:M.value,"onUpdate:modelValue":Q=>M.value=Q,"validate-event":!1,size:"small",onKeyup:Gn(j,["enter"]),onBlur:j},null,8,["modelValue","onUpdate:modelValue","onKeyup"])],2),O(w(Hr),{class:rt(w(i).be("dropdown","link-btn")),text:"",size:"small",onClick:$},{default:q(()=>[Pt(pt(w(a)("el.colorpicker.clear")),1)]),_:1},8,["class"]),O(w(Hr),{plain:"",size:"small",class:rt(w(i).be("dropdown","btn")),onClick:G},{default:q(()=>[Pt(pt(w(a)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[w(Pc),N]])]),default:q(()=>[A("div",yr({id:w(u),ref_key:"triggerRef",ref:h},U.$attrs,{class:w(P),role:"button","aria-label":w(R),"aria-labelledby":w(D),"aria-description":w(a)("el.colorpicker.description",{color:U.modelValue||""}),"aria-disabled":w(l),tabindex:w(l)?-1:U.tabindex,onKeydown:W,onFocus:w(y),onBlur:w(b)}),[w(l)?(L(),Y("div",{key:0,class:rt(w(i).be("picker","mask"))},null,2)):ht("v-if",!0),A("div",{class:rt(w(i).be("picker","trigger")),onClick:z},[A("span",{class:rt([w(i).be("picker","color"),w(i).is("alpha",U.showAlpha)])},[A("span",{class:rt(w(i).be("picker","color-inner")),style:gt({backgroundColor:w(k)})},[ee(O(w(Wt),{class:rt([w(i).be("picker","icon"),w(i).is("icon-arrow-down")])},{default:q(()=>[O(w(Qu))]),_:1},8,["class"]),[[Ge,U.modelValue||C.value]]),ee(O(w(Wt),{class:rt([w(i).be("picker","empty"),w(i).is("icon-close")])},{default:q(()=>[O(w(_i))]),_:1},8,["class"]),[[Ge,!U.modelValue&&!C.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}});var of=ke(af,[["__file","color-picker.vue"]]);const sf=Ci(of),lf=Ye({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:wt(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:wt([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:wt(Function),default:e=>`${e}%`}}),uf=lt({name:"ElProgress"}),cf=lt({...uf,props:lf,setup(e){const t=e,r={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},n=be("progress"),a=tt(()=>{const b={width:`${t.percentage}%`,animationDuration:`${t.duration}s`},x=y(t.percentage);return x.includes("gradient")?b.background=x:b.backgroundColor=x,b}),i=tt(()=>(t.strokeWidth/t.width*100).toFixed(1)),o=tt(()=>["circle","dashboard"].includes(t.type)?Number.parseInt(`${50-Number.parseFloat(i.value)/2}`,10):0),s=tt(()=>{const b=o.value,x=t.type==="dashboard";return`
          M 50 50
          m 0 ${x?"":"-"}${b}
          a ${b} ${b} 0 1 1 0 ${x?"-":""}${b*2}
          a ${b} ${b} 0 1 1 0 ${x?"":"-"}${b*2}
          `}),l=tt(()=>2*Math.PI*o.value),u=tt(()=>t.type==="dashboard"?.75:1),f=tt(()=>`${-1*l.value*(1-u.value)/2}px`),c=tt(()=>({strokeDasharray:`${l.value*u.value}px, ${l.value}px`,strokeDashoffset:f.value})),d=tt(()=>({strokeDasharray:`${l.value*u.value*(t.percentage/100)}px, ${l.value}px`,strokeDashoffset:f.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),p=tt(()=>{let b;return t.color?b=y(t.percentage):b=r[t.status]||r.default,b}),v=tt(()=>t.status==="warning"?tc:t.type==="line"?t.status==="success"?Is:ec:t.status==="success"?Os:_i),h=tt(()=>t.type==="line"?12+t.strokeWidth*.4:t.width*.111111+2),g=tt(()=>t.format(t.percentage));function m(b){const x=100/b.length;return b.map((S,C)=>rr(S)?{color:S,percentage:(C+1)*x}:S).sort((S,C)=>S.percentage-C.percentage)}const y=b=>{var x;const{color:_}=t;if(Bs(_))return _(b);if(rr(_))return _;{const S=m(_);for(const C of S)if(C.percentage>b)return C.color;return(x=S[S.length-1])==null?void 0:x.color}};return(b,x)=>(L(),Y("div",{class:rt([w(n).b(),w(n).m(b.type),w(n).is(b.status),{[w(n).m("without-text")]:!b.showText,[w(n).m("text-inside")]:b.textInside}]),role:"progressbar","aria-valuenow":b.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[b.type==="line"?(L(),Y("div",{key:0,class:rt(w(n).b("bar"))},[A("div",{class:rt(w(n).be("bar","outer")),style:gt({height:`${b.strokeWidth}px`})},[A("div",{class:rt([w(n).be("bar","inner"),{[w(n).bem("bar","inner","indeterminate")]:b.indeterminate},{[w(n).bem("bar","inner","striped")]:b.striped},{[w(n).bem("bar","inner","striped-flow")]:b.stripedFlow}]),style:gt(w(a))},[(b.showText||b.$slots.default)&&b.textInside?(L(),Y("div",{key:0,class:rt(w(n).be("bar","innerText"))},[Ut(b.$slots,"default",{percentage:b.percentage},()=>[A("span",null,pt(w(g)),1)])],2)):ht("v-if",!0)],6)],6)],2)):(L(),Y("div",{key:1,class:rt(w(n).b("circle")),style:gt({height:`${b.width}px`,width:`${b.width}px`})},[(L(),Y("svg",{viewBox:"0 0 100 100"},[A("path",{class:rt(w(n).be("circle","track")),d:w(s),stroke:`var(${w(n).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":b.strokeLinecap,"stroke-width":w(i),fill:"none",style:gt(w(c))},null,14,["d","stroke","stroke-linecap","stroke-width"]),A("path",{class:rt(w(n).be("circle","path")),d:w(s),stroke:w(p),fill:"none",opacity:b.percentage?1:0,"stroke-linecap":b.strokeLinecap,"stroke-width":w(i),style:gt(w(d))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(b.showText||b.$slots.default)&&!b.textInside?(L(),Y("div",{key:2,class:rt(w(n).e("text")),style:gt({fontSize:`${w(h)}px`})},[Ut(b.$slots,"default",{percentage:b.percentage},()=>[b.status?(L(),Ct(w(Wt),{key:1},{default:q(()=>[(L(),Ct(wr(w(v))))]),_:1})):(L(),Y("span",{key:0},pt(w(g)),1))])],6)):ht("v-if",!0)],10,["aria-valuenow"]))}});var ff=ke(cf,[["__file","progress.vue"]]);const df=Ci(ff),Hs=Symbol("uploadContextKey"),pf="ElUpload";class vf extends Error{constructor(t,r,n,a){super(t),this.name="UploadAjaxError",this.status=r,this.method=n,this.url=a}}function Oo(e,t,r){let n;return r.response?n=`${r.response.error||r.response}`:r.responseText?n=`${r.responseText}`:n=`fail to ${t.method} ${e} ${r.status}`,new vf(n,r.status,t.method,e)}function hf(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}const gf=e=>{typeof XMLHttpRequest>"u"&&wi(pf,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,r=e.action;t.upload&&t.upload.addEventListener("progress",i=>{const o=i;o.percent=i.total>0?i.loaded/i.total*100:0,e.onProgress(o)});const n=new FormData;if(e.data)for(const[i,o]of Object.entries(e.data))As(o)&&o.length?n.append(i,...o):n.append(i,o);n.append(e.filename,e.file,e.file.name),t.addEventListener("error",()=>{e.onError(Oo(r,e,t))}),t.addEventListener("load",()=>{if(t.status<200||t.status>=300)return e.onError(Oo(r,e,t));e.onSuccess(hf(t))}),t.open(e.method,r,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const a=e.headers||{};if(a instanceof Headers)a.forEach((i,o)=>t.setRequestHeader(o,i));else for(const[i,o]of Object.entries(a))Lr(o)||t.setRequestHeader(i,String(o));return t.send(n),t},Xs=["text","picture","picture-card"];let mf=1;const Ga=()=>Date.now()+mf++,Ys=Ye({action:{type:String,default:"#"},headers:{type:wt(Object)},method:{type:String,default:"post"},data:{type:wt([Object,Function,Promise]),default:()=>$a({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:wt(Array),default:()=>$a([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Xs,default:"text"},httpRequest:{type:wt(Function),default:gf},disabled:Boolean,limit:Number}),bf=Ye({...Ys,beforeUpload:{type:wt(Function),default:qt},beforeRemove:{type:wt(Function)},onRemove:{type:wt(Function),default:qt},onChange:{type:wt(Function),default:qt},onPreview:{type:wt(Function),default:qt},onSuccess:{type:wt(Function),default:qt},onProgress:{type:wt(Function),default:qt},onError:{type:wt(Function),default:qt},onExceed:{type:wt(Function),default:qt},crossorigin:{type:wt(String)}}),yf=Ye({files:{type:wt(Array),default:()=>$a([])},disabled:{type:Boolean,default:!1},handlePreview:{type:wt(Function),default:qt},listType:{type:String,values:Xs,default:"text"},crossorigin:{type:wt(String)}}),xf={remove:e=>!!e},_f=lt({name:"ElUploadList"}),Sf=lt({..._f,props:yf,emits:xf,setup(e,{emit:t}){const r=e,{t:n}=xi(),a=be("upload"),i=be("icon"),o=be("list"),s=Qr(),l=it(!1),u=tt(()=>[a.b("list"),a.bm("list",r.listType),a.is("disabled",r.disabled)]),f=c=>{t("remove",c)};return(c,d)=>(L(),Ct(ic,{tag:"ul",class:rt(w(u)),name:w(o).b()},{default:q(()=>[(L(!0),Y(le,null,_e(c.files,(p,v)=>(L(),Y("li",{key:p.uid||p.name,class:rt([w(a).be("list","item"),w(a).is(p.status),{focusing:l.value}]),tabindex:"0",onKeydown:Gn(h=>!w(s)&&f(p),["delete"]),onFocus:h=>l.value=!0,onBlur:h=>l.value=!1,onClick:h=>l.value=!1},[Ut(c.$slots,"default",{file:p,index:v},()=>[c.listType==="picture"||p.status!=="uploading"&&c.listType==="picture-card"?(L(),Y("img",{key:0,class:rt(w(a).be("list","item-thumbnail")),src:p.url,crossorigin:c.crossorigin,alt:""},null,10,["src","crossorigin"])):ht("v-if",!0),p.status==="uploading"||c.listType!=="picture-card"?(L(),Y("div",{key:1,class:rt(w(a).be("list","item-info"))},[A("a",{class:rt(w(a).be("list","item-name")),onClick:Fe(h=>c.handlePreview(p),["prevent"])},[O(w(Wt),{class:rt(w(i).m("document"))},{default:q(()=>[O(w(rc))]),_:1},8,["class"]),A("span",{class:rt(w(a).be("list","item-file-name")),title:p.name},pt(p.name),11,["title"])],10,["onClick"]),p.status==="uploading"?(L(),Ct(w(df),{key:0,type:c.listType==="picture-card"?"circle":"line","stroke-width":c.listType==="picture-card"?6:2,percentage:Number(p.percentage),style:gt(c.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):ht("v-if",!0)],2)):ht("v-if",!0),A("label",{class:rt(w(a).be("list","item-status-label"))},[c.listType==="text"?(L(),Ct(w(Wt),{key:0,class:rt([w(i).m("upload-success"),w(i).m("circle-check")])},{default:q(()=>[O(w(Is))]),_:1},8,["class"])):["picture-card","picture"].includes(c.listType)?(L(),Ct(w(Wt),{key:1,class:rt([w(i).m("upload-success"),w(i).m("check")])},{default:q(()=>[O(w(Os))]),_:1},8,["class"])):ht("v-if",!0)],2),w(s)?ht("v-if",!0):(L(),Ct(w(Wt),{key:2,class:rt(w(i).m("close")),onClick:h=>f(p)},{default:q(()=>[O(w(_i))]),_:2},1032,["class","onClick"])),ht(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),ht(" This is a bug which needs to be fixed "),ht(" TODO: Fix the incorrect navigation interaction "),w(s)?ht("v-if",!0):(L(),Y("i",{key:3,class:rt(w(i).m("close-tip"))},pt(w(n)("el.upload.deleteTip")),3)),c.listType==="picture-card"?(L(),Y("span",{key:4,class:rt(w(a).be("list","item-actions"))},[A("span",{class:rt(w(a).be("list","item-preview")),onClick:h=>c.handlePreview(p)},[O(w(Wt),{class:rt(w(i).m("zoom-in"))},{default:q(()=>[O(w(nc))]),_:1},8,["class"])],10,["onClick"]),w(s)?ht("v-if",!0):(L(),Y("span",{key:0,class:rt(w(a).be("list","item-delete")),onClick:h=>f(p)},[O(w(Wt),{class:rt(w(i).m("delete"))},{default:q(()=>[O(w(ac))]),_:1},8,["class"])],10,["onClick"]))],2)):ht("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),Ut(c.$slots,"append")]),_:3},8,["class","name"]))}});var Bo=ke(Sf,[["__file","upload-list.vue"]]);const Cf=Ye({disabled:{type:Boolean,default:!1}}),wf={file:e=>As(e)},js="ElUploadDrag",Ef=lt({name:js}),kf=lt({...Ef,props:Cf,emits:wf,setup(e,{emit:t}){Rs(Hs)||wi(js,"usage: <el-upload><el-upload-dragger /></el-upload>");const n=be("upload"),a=it(!1),i=Qr(),o=l=>{if(i.value)return;a.value=!1,l.stopPropagation();const u=Array.from(l.dataTransfer.files);t("file",u)},s=()=>{i.value||(a.value=!0)};return(l,u)=>(L(),Y("div",{class:rt([w(n).b("dragger"),w(n).is("dragover",a.value)]),onDrop:Fe(o,["prevent"]),onDragover:Fe(s,["prevent"]),onDragleave:Fe(f=>a.value=!1,["prevent"])},[Ut(l.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var Df=ke(kf,[["__file","upload-dragger.vue"]]);const Mf=Ye({...Ys,beforeUpload:{type:wt(Function),default:qt},onRemove:{type:wt(Function),default:qt},onStart:{type:wt(Function),default:qt},onSuccess:{type:wt(Function),default:qt},onProgress:{type:wt(Function),default:qt},onError:{type:wt(Function),default:qt},onExceed:{type:wt(Function),default:qt}}),Tf=lt({name:"ElUploadContent",inheritAttrs:!1}),Rf=lt({...Tf,props:Mf,setup(e,{expose:t}){const r=e,n=be("upload"),a=Qr(),i=Wr({}),o=Wr(),s=h=>{if(h.length===0)return;const{autoUpload:g,limit:m,fileList:y,multiple:b,onStart:x,onExceed:_}=r;if(m&&y.length+h.length>m){_(h,y);return}b||(h=h.slice(0,1));for(const S of h){const C=S;C.uid=Ga(),x(C),g&&l(C)}},l=async h=>{if(o.value.value="",!r.beforeUpload)return f(h);let g,m={};try{const b=r.data,x=r.beforeUpload(h);m=Co(r.data)?wo(r.data):r.data,g=await x,Co(r.data)&&Ic(b,m)&&(m=wo(r.data))}catch{g=!1}if(g===!1){r.onRemove(h);return}let y=h;g instanceof Blob&&(g instanceof File?y=g:y=new File([g],h.name,{type:h.type})),f(Object.assign(y,{uid:h.uid}),m)},u=async(h,g)=>Bs(h)?h(g):h,f=async(h,g)=>{const{headers:m,data:y,method:b,withCredentials:x,name:_,action:S,onProgress:C,onSuccess:M,onError:k,httpRequest:E}=r;try{g=await u(g??y,h)}catch{r.onRemove(h);return}const{uid:R}=h,D={headers:m||{},withCredentials:x,file:h,data:g,method:b,filename:_,action:S,onProgress:I=>{C(I,h)},onSuccess:I=>{M(I,h),delete i.value[R]},onError:I=>{k(I,h),delete i.value[R]}},P=E(D);i.value[R]=P,P instanceof Promise&&P.then(D.onSuccess,D.onError)},c=h=>{const g=h.target.files;g&&s(Array.from(g))},d=()=>{a.value||(o.value.value="",o.value.click())},p=()=>{d()};return t({abort:h=>{oc(i.value).filter(h?([m])=>String(h.uid)===m:()=>!0).forEach(([m,y])=>{y instanceof XMLHttpRequest&&y.abort(),delete i.value[m]})},upload:l}),(h,g)=>(L(),Y("div",{class:rt([w(n).b(),w(n).m(h.listType),w(n).is("drag",h.drag),w(n).is("disabled",w(a))]),tabindex:w(a)?"-1":"0",onClick:d,onKeydown:Gn(Fe(p,["self"]),["enter","space"])},[h.drag?(L(),Ct(Df,{key:0,disabled:w(a),onFile:s},{default:q(()=>[Ut(h.$slots,"default")]),_:3},8,["disabled"])):Ut(h.$slots,"default",{key:1}),A("input",{ref_key:"inputRef",ref:o,class:rt(w(n).e("input")),name:h.name,disabled:w(a),multiple:h.multiple,accept:h.accept,type:"file",onChange:c,onClick:Fe(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var Ao=ke(Rf,[["__file","upload-content.vue"]]);const zo="ElUpload",Lo=e=>{var t;(t=e.url)!=null&&t.startsWith("blob:")&&URL.revokeObjectURL(e.url)},Pf=(e,t)=>{const r=sc(e,"fileList",void 0,{passive:!0}),n=p=>r.value.find(v=>v.uid===p.uid);function a(p){var v;(v=t.value)==null||v.abort(p)}function i(p=["ready","uploading","success","fail"]){r.value=r.value.filter(v=>!p.includes(v.status))}function o(p){r.value=r.value.filter(v=>v!==p)}const s=(p,v)=>{const h=n(v);h&&(console.error(p),h.status="fail",o(h),e.onError(p,h,r.value),e.onChange(h,r.value))},l=(p,v)=>{const h=n(v);h&&(e.onProgress(p,h,r.value),h.status="uploading",h.percentage=Math.round(p.percent))},u=(p,v)=>{const h=n(v);h&&(h.status="success",h.response=p,e.onSuccess(p,h,r.value),e.onChange(h,r.value))},f=p=>{Lr(p.uid)&&(p.uid=Ga());const v={name:p.name,percentage:0,status:"ready",size:p.size,raw:p,uid:p.uid};if(e.listType==="picture-card"||e.listType==="picture")try{v.url=URL.createObjectURL(p)}catch(h){La(zo,h.message),e.onError(h,v,r.value)}r.value=[...r.value,v],e.onChange(v,r.value)},c=async p=>{const v=p instanceof File?n(p):p;v||wi(zo,"file to be removed not found");const h=g=>{a(g),o(g),e.onRemove(g,r.value),Lo(g)};e.beforeRemove?await e.beforeRemove(v,r.value)!==!1&&h(v):h(v)};function d(){r.value.filter(({status:p})=>p==="ready").forEach(({raw:p})=>{var v;return p&&((v=t.value)==null?void 0:v.upload(p))})}return Tt(()=>e.listType,p=>{p!=="picture-card"&&p!=="picture"||(r.value=r.value.map(v=>{const{raw:h,url:g}=v;if(!g&&h)try{v.url=URL.createObjectURL(h)}catch(m){e.onError(m,v,r.value)}return v}))}),Tt(r,p=>{for(const v of p)v.uid||(v.uid=Ga()),v.status||(v.status="success")},{immediate:!0,deep:!0}),{uploadFiles:r,abort:a,clearFiles:i,handleError:s,handleProgress:l,handleStart:f,handleSuccess:u,handleRemove:c,submit:d,revokeFileObjectURL:Lo}},If=lt({name:"ElUpload"}),Of=lt({...If,props:bf,setup(e,{expose:t}){const r=e,n=Qr(),a=Wr(),{abort:i,submit:o,clearFiles:s,uploadFiles:l,handleStart:u,handleError:f,handleRemove:c,handleSuccess:d,handleProgress:p,revokeFileObjectURL:v}=Pf(r,a),h=tt(()=>r.listType==="picture-card"),g=tt(()=>({...r,fileList:l.value,onStart:u,onProgress:p,onSuccess:d,onError:f,onRemove:c}));return lc(()=>{l.value.forEach(v)}),Ps(Hs,{accept:uc(r,"accept")}),t({abort:i,submit:o,clearFiles:s,handleStart:u,handleRemove:c}),(m,y)=>(L(),Y("div",null,[w(h)&&m.showFileList?(L(),Ct(Bo,{key:0,disabled:w(n),"list-type":m.listType,files:w(l),crossorigin:m.crossorigin,"handle-preview":m.onPreview,onRemove:w(c)},Eo({append:q(()=>[O(Ao,yr({ref_key:"uploadRef",ref:a},w(g)),{default:q(()=>[m.$slots.trigger?Ut(m.$slots,"trigger",{key:0}):ht("v-if",!0),!m.$slots.trigger&&m.$slots.default?Ut(m.$slots,"default",{key:1}):ht("v-if",!0)]),_:3},16)]),_:2},[m.$slots.file?{name:"default",fn:q(({file:b,index:x})=>[Ut(m.$slots,"file",{file:b,index:x})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):ht("v-if",!0),!w(h)||w(h)&&!m.showFileList?(L(),Ct(Ao,yr({key:1,ref_key:"uploadRef",ref:a},w(g)),{default:q(()=>[m.$slots.trigger?Ut(m.$slots,"trigger",{key:0}):ht("v-if",!0),!m.$slots.trigger&&m.$slots.default?Ut(m.$slots,"default",{key:1}):ht("v-if",!0)]),_:3},16)):ht("v-if",!0),m.$slots.trigger?Ut(m.$slots,"default",{key:2}):ht("v-if",!0),Ut(m.$slots,"tip"),!w(h)&&m.showFileList?(L(),Ct(Bo,{key:3,disabled:w(n),"list-type":m.listType,files:w(l),crossorigin:m.crossorigin,"handle-preview":m.onPreview,onRemove:w(c)},Eo({_:2},[m.$slots.file?{name:"default",fn:q(({file:b,index:x})=>[Ut(m.$slots,"file",{file:b,index:x})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):ht("v-if",!0)]))}});var Bf=ke(Of,[["__file","upload.vue"]]);const Af=Ci(Bf),zf={class:"flex flex-1 gap-3 items-center"},Lf={class:"font-semibold flex-shrink-0"},vt=lt({__name:"AttrCol",props:{name:{},nowrap:{type:Boolean}},setup(e){return(t,r)=>(L(),Y("div",zf,[A("div",Lf,pt(t.name),1),A("div",{class:rt(["flex-1 overflow-hidden font-thin",{"overflow-ellipsis whitespace-nowrap":t.nowrap}])},[Ut(t.$slots,"default")],2)]))}}),$f=["rgba(0,0,0,0)","#000","#fff","#fafafa","#f5f5f5","#EBEBEB","#D9D9D9","#BFBFBF","#8C8C8C","#595959","#262626","#1E2026","#292C34","#31353E","#3A3F49","#4C525D","#7A808B","#AAAFBB","#C7CBD5","#EDEEF2","#3f3ddf","#3875FF","#21B0FF","#1CD2C8","#F6BD15","#FF9846","#E96452","#896AFF","#5E7092","#213474"],Ff="";function kr(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}const Dr=function(e,t){const{componentPrefix:r=Ff}=t||{};e.component(`${r}${this.name}`,this)},_a={};var an={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle(){return{"background-image":`url(${Nf(this.white,this.grey,this.size)})`}}}};function Gf(e,t,r){if(typeof document>"u")return null;const n=document.createElement("canvas");n.width=n.height=r*2;const a=n.getContext("2d");return a?(a.fillStyle=e,a.fillRect(0,0,n.width,n.height),a.fillStyle=t,a.fillRect(0,0,r,r),a.translate(r,r),a.fillRect(0,0,r,r),n.toDataURL()):null}function Nf(e,t,r){const n=`${e},${t},${r}`;if(_a[n])return _a[n];const a=Gf(e,t,r);return _a[n]=a,a}function Vf(e,t,r,n,a,i){return L(),Y("div",{class:"vc-checkerboard",style:gt(i.bgStyle)},null,4)}var Wf=".vc-checkerboard{background-size:contain;bottom:0;left:0;position:absolute;right:0;top:0}";kr(Wf);an.render=Vf;an.__file="src/components/checkboard/checkboard.vue";an.install=Dr;var Qn={name:"Alpha",components:{Checkboard:an},props:{value:Object,onChange:Function},computed:{colors(){return this.value},gradientColor(){const{rgba:e}=this.colors,t=[e.r,e.g,e.b].join(",");return`linear-gradient(to right, rgba(${t}, 0) 0%, rgba(${t}, 1) 100%)`}},methods:{handleChange(e,t){!t&&e.preventDefault();const{container:r}=this.$refs;if(!r)return;const n=r.clientWidth,a=r.getBoundingClientRect().left+window.pageXOffset,o=(e.pageX||(e.touches?e.touches[0].pageX:0))-a;let s;o<0?s=0:o>n?s=1:s=Math.round(o*100/n)/100,this.colors.a!==s&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:s,source:"rgba"})},handleMouseDown(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const Hf={class:"vc-alpha"},Xf={class:"vc-alpha-checkboard-wrap"},Yf=A("div",{class:"vc-alpha-picker"},null,-1),jf=[Yf];function Uf(e,t,r,n,a,i){const o=dr("Checkboard");return L(),Y("div",Hf,[A("div",Xf,[O(o)]),A("div",{class:"vc-alpha-gradient",style:gt({background:i.gradientColor})},null,4),A("div",{ref:"container",class:"vc-alpha-container",onMousedown:t[0]||(t[0]=(...s)=>i.handleMouseDown&&i.handleMouseDown(...s)),onTouchmove:t[1]||(t[1]=(...s)=>i.handleChange&&i.handleChange(...s)),onTouchstart:t[2]||(t[2]=(...s)=>i.handleChange&&i.handleChange(...s))},[A("div",{class:"vc-alpha-pointer",style:gt({left:`${i.colors.a*100}%`})},jf,4)],544)])}var qf=".vc-alpha,.vc-alpha-checkboard-wrap{bottom:0;left:0;position:absolute;right:0;top:0}.vc-alpha-checkboard-wrap{overflow:hidden}.vc-alpha-gradient{bottom:0;left:0;position:absolute;right:0;top:0}.vc-alpha-container{cursor:pointer;height:100%;margin:0 3px;position:relative;z-index:2}.vc-alpha-pointer{position:absolute;z-index:2}.vc-alpha-picker{background:#fff;border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);cursor:pointer;height:8px;margin-top:1px;transform:translateX(-2px);width:4px}";kr(qf);Qn.render=Uf;Qn.__file="src/components/alpha/alpha.vue";Qn.install=Dr;function Ae(...e){return new cc(...e)}function Sa(e,t){const r=e&&e.a;let n;e&&e.hsl?n=Ae(e.hsl):e&&e.hex&&e.hex.length>0?n=Ae(e.hex):e&&e.hsv?n=Ae(e.hsv):e&&e.rgba?n=Ae(e.rgba):e&&e.rgb?n=Ae(e.rgb):n=Ae(e),n&&(n._a===void 0||n._a===null)&&n.setAlpha(r||n.getAlpha());const a=n.toHsl(),i=n.toHsv();return a.s===0&&(i.h=a.h=e.h||e.hsl&&e.hsl.h||t||0),i.v<.0164&&(i.h=e.h||e.hsv&&e.hsv.h||0,i.s=e.s||e.hsv&&e.hsv.s||0),a.l<.01&&(a.h=e.h||e.hsl&&e.hsl.h||0,a.s=e.s||e.hsl&&e.hsl.s||0),{hsl:a,hex:n.toHexString().toUpperCase(),hex8:n.toHex8String().toUpperCase(),rgba:n.toRgb(),hsv:i,oldHue:e.h||t||a.h,source:e.source,a:n.getAlpha()}}var Kf={model:{prop:"modelValue",event:"update:modelValue"},props:["modelValue"],data(){return{val:Sa(this.modelValue)}},computed:{colors:{get(){return this.val},set(e){this.val=e,this.$emit("update:modelValue",e)}}},watch:{modelValue(e){this.val=Sa(e)}},methods:{colorChange(e,t){this.oldHue=this.colors.hsl.h,this.colors=Sa(e,t||this.oldHue)},isValidHex(e){return Ae(e).isValid},simpleCheckForValidColor(e){const t=["r","g","b","a","h","s","l","v"];let r=0,n=0;for(let a=0;a<t.length;a++){const i=t[a];e[i]&&(r++,isNaN(e[i])||n++)}if(r===n)return e},paletteUpperCase(e){return e.map(t=>t.toUpperCase())},isTransparent(e){return Ae(e).getAlpha()===0}}},ta={name:"EditableInput",props:{label:String,labelText:String,desc:String,value:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get(){return this.value},set(e){if(this.max!==void 0&&+e>this.max)this.$refs.input.value=this.max;else return e}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(e){this.handleChange(e.target.value)},handleChange(e){const t={};t[this.label]=e,t.hex===void 0&&t["#"]===void 0?this.$emit("change",t):e.length>5&&this.$emit("change",t)},handleKeyDown(e){let{val:t}=this;const r=Number(t);if(r){const n=this.arrowOffset||1;e.keyCode===38&&(t=r+n,this.handleChange(t),e.preventDefault()),e.keyCode===40&&(t=r-n,this.handleChange(t),e.preventDefault())}}}};const Zf={class:"vc-editable-input"},Jf=["aria-labelledby"],Qf=["id","for"],td={class:"vc-input__desc"};function ed(e,t,r,n,a,i){return L(),Y("div",Zf,[ee(A("input",{ref:"input","onUpdate:modelValue":t[0]||(t[0]=o=>i.val=o),"aria-labelledby":i.labelId,class:"vc-input__input",onKeydown:t[1]||(t[1]=(...o)=>i.handleKeyDown&&i.handleKeyDown(...o)),onInput:t[2]||(t[2]=(...o)=>i.update&&i.update(...o))},null,40,Jf),[[fc,i.val]]),A("span",{id:i.labelId,for:r.label,class:"vc-input__label"},pt(i.labelSpanText),9,Qf),A("span",td,pt(r.desc),1)])}var rd=".vc-editable-input{position:relative}.vc-input__input{border:0;outline:none;padding:0}.vc-input__label{text-transform:capitalize}";kr(rd);ta.render=ed;ta.__file="src/components/editable-input/editable-input.vue";ta.install=Dr;function Ca(e,t,r){return t<r?e<t?t:e>r?r:e:e<r?r:e>t?t:e}var ea={name:"Saturation",props:{value:Object},computed:{colors(){return this.value},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return`${-(this.colors.hsv.v*100)+1+100}%`},pointerLeft(){return`${this.colors.hsv.s*100}%`}},methods:{handleChange(e,t){!t&&e.preventDefault();const{container:r}=this.$refs;if(!r)return;const n=r.clientWidth,a=r.clientHeight,i=r.getBoundingClientRect().left+window.pageXOffset,o=r.getBoundingClientRect().top+window.pageYOffset,s=e.pageX||(e.touches?e.touches[0].pageX:0),l=e.pageY||(e.touches?e.touches[0].pageY:0),u=Ca(s-i,0,n),f=Ca(l-o,0,a),c=u/n,d=Ca(-(f/a)+1,0,1);this.onChange({h:this.colors.hsv.h,s:c,v:d,a:this.colors.hsv.a,source:"hsva"})},onChange(e){this.$emit("change",e)},handleMouseDown(e){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(e){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const nd=A("div",{class:"vc-saturation--white"},null,-1),ad=A("div",{class:"vc-saturation--black"},null,-1),id=A("div",{class:"vc-saturation-circle"},null,-1),od=[id];function sd(e,t,r,n,a,i){return L(),Y("div",{ref:"container",class:"vc-saturation",style:gt({background:i.bgColor}),onMousedown:t[0]||(t[0]=(...o)=>i.handleMouseDown&&i.handleMouseDown(...o)),onTouchmove:t[1]||(t[1]=(...o)=>i.handleChange&&i.handleChange(...o)),onTouchstart:t[2]||(t[2]=(...o)=>i.handleChange&&i.handleChange(...o))},[nd,ad,A("div",{class:"vc-saturation-pointer",style:gt({top:i.pointerTop,left:i.pointerLeft})},od,4)],36)}var ld=".vc-saturation,.vc-saturation--black,.vc-saturation--white{bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0}.vc-saturation--white{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.vc-saturation--black{background:linear-gradient(0deg,#000,transparent)}.vc-saturation-pointer{cursor:pointer;position:absolute}.vc-saturation-circle{border-radius:50%;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);cursor:head;height:4px;transform:translate(-2px,-2px);width:4px}";kr(ld);ea.render=sd;ea.__file="src/components/saturation/saturation.vue";ea.install=Dr;var ra={name:"Hue",props:{value:Object,direction:{type:String,default:"horizontal"}},data(){return{oldHue:0,pullDirection:""}},computed:{colors(){return this.value},directionClass(){return{"vc-hue--horizontal":this.direction==="horizontal","vc-hue--vertical":this.direction==="vertical"}},pointerTop(){return this.direction==="vertical"?this.colors.hsl.h===0&&this.pullDirection==="right"?0:`${-(this.colors.hsl.h*100/360)+100}%`:0},pointerLeft(){return this.direction==="vertical"?0:this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":`${this.colors.hsl.h*100/360}%`}},watch:{value:{handler(e,t){const{h:r}=e.hsl;r!==0&&r-this.oldHue>0&&(this.pullDirection="right"),r!==0&&r-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=r},deep:!0,immediate:!0}},methods:{handleChange(e,t){!t&&e.preventDefault();const{container:r}=this.$refs;if(!r)return;const n=r.clientWidth,a=r.clientHeight,i=r.getBoundingClientRect().left+window.pageXOffset,o=r.getBoundingClientRect().top+window.pageYOffset,s=e.pageX||(e.touches?e.touches[0].pageX:0),l=e.pageY||(e.touches?e.touches[0].pageY:0),u=s-i,f=l-o;let c,d;this.direction==="vertical"?(f<0?c=360:f>a?c=0:(d=-(f*100/a)+100,c=360*d/100),this.colors.hsl.h!==c&&this.$emit("change",{h:c,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(u<0?c=0:u>n?c=360:(d=u*100/n,c=360*d/100),this.colors.hsl.h!==c&&this.$emit("change",{h:c,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(e){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const ud=["aria-valuenow"],cd=A("div",{class:"vc-hue-picker"},null,-1),fd=[cd];function dd(e,t,r,n,a,i){return L(),Y("div",{class:rt(["vc-hue",[i.directionClass]])},[A("div",{ref:"container",class:"vc-hue-container",role:"slider","aria-valuenow":i.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360",onMousedown:t[0]||(t[0]=(...o)=>i.handleMouseDown&&i.handleMouseDown(...o)),onTouchmove:t[1]||(t[1]=(...o)=>i.handleChange&&i.handleChange(...o)),onTouchstart:t[2]||(t[2]=(...o)=>i.handleChange&&i.handleChange(...o))},[A("div",{class:"vc-hue-pointer",style:gt({top:i.pointerTop,left:i.pointerLeft}),role:"presentation"},fd,4)],40,ud)],2)}var pd=".vc-hue{border-radius:2px;bottom:0;left:0;position:absolute;right:0;top:0}.vc-hue--horizontal{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue--vertical{background:linear-gradient(0deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue-container{cursor:pointer;height:100%;margin:0 2px;position:relative}.vc-hue-pointer{position:absolute;z-index:2}.vc-hue-picker{background:#fff;border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);cursor:pointer;height:8px;margin-top:1px;transform:translateX(-2px);width:4px}";kr(pd);ra.render=dd;ra.__file="src/components/hue/hue.vue";ra.install=Dr;const vd=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];var na={name:"Sketch",components:{Saturation:ea,Hue:ra,Alpha:Qn,EdIn:ta,Checkboard:an},mixins:[Kf],props:{presetColors:{type:Array,default(){return vd}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex(){let e;return this.colors.a<1?e=this.colors.hex8:e=this.colors.hex,e.replace("#","")},activeColor(){const{rgba:e}=this.colors;return`rgba(${[e.r,e.g,e.b,e.a].join(",")})`}},methods:{handlePreset(e){this.colorChange(e)},childChange(e){this.colorChange(e)},inputChange(e){e&&(e.hex?this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"}):(e.r||e.g||e.b||e.a)&&this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}))}}};const hd={class:"vc-sketch-saturation-wrap"},gd={class:"vc-sketch-controls"},md={class:"vc-sketch-sliders"},bd={class:"vc-sketch-hue-wrap"},yd={key:0,class:"vc-sketch-alpha-wrap"},xd={class:"vc-sketch-color-wrap"},_d=["aria-label"],Sd={key:0,class:"vc-sketch-field"},Cd={class:"vc-sketch-field--double"},wd={class:"vc-sketch-field--single"},Ed={class:"vc-sketch-field--single"},kd={class:"vc-sketch-field--single"},Dd={key:0,class:"vc-sketch-field--single"},Md={class:"vc-sketch-presets",role:"group","aria-label":"A color preset, pick one to set as current color"},Td=["aria-label","onClick"],Rd=["aria-label","onClick"];function Pd(e,t,r,n,a,i){const o=dr("Saturation"),s=dr("Hue"),l=dr("Alpha"),u=dr("Checkboard"),f=dr("EdIn");return L(),Y("div",{role:"application","aria-label":"Sketch color picker",class:rt(["vc-sketch",[r.disableAlpha?"vc-sketch__disable-alpha":""]])},[A("div",hd,[O(o,{value:e.colors,onChange:i.childChange},null,8,["value","onChange"])]),A("div",gd,[A("div",md,[A("div",bd,[O(s,{value:e.colors,onChange:i.childChange},null,8,["value","onChange"])]),r.disableAlpha?ht("v-if",!0):(L(),Y("div",yd,[O(l,{value:e.colors,onChange:i.childChange},null,8,["value","onChange"])]))]),A("div",xd,[A("div",{"aria-label":`Current color is ${i.activeColor}`,class:"vc-sketch-active-color",style:gt({background:i.activeColor})},null,12,_d),O(u)])]),r.disableFields?ht("v-if",!0):(L(),Y("div",Sd,[ht(" rgba "),A("div",Cd,[O(f,{label:"hex",value:i.hex,onChange:i.inputChange},null,8,["value","onChange"])]),A("div",wd,[O(f,{label:"r",value:e.colors.rgba.r,onChange:i.inputChange},null,8,["value","onChange"])]),A("div",Ed,[O(f,{label:"g",value:e.colors.rgba.g,onChange:i.inputChange},null,8,["value","onChange"])]),A("div",kd,[O(f,{label:"b",value:e.colors.rgba.b,onChange:i.inputChange},null,8,["value","onChange"])]),r.disableAlpha?ht("v-if",!0):(L(),Y("div",Dd,[O(f,{label:"a",value:e.colors.a,"arrow-offset":.01,max:1,onChange:i.inputChange},null,8,["value","arrow-offset","onChange"])]))])),A("div",Md,[(L(!0),Y(le,null,_e(r.presetColors,c=>(L(),Y(le,null,[e.isTransparent(c)?(L(),Y("div",{key:c,"aria-label":`Color:${c}`,class:"vc-sketch-presets-color",onClick:d=>i.handlePreset(c)},[O(u)],8,Rd)):(L(),Y("div",{key:`!${c}`,class:"vc-sketch-presets-color","aria-label":`Color:${c}`,style:gt({background:c}),onClick:d=>i.handlePreset(c)},null,12,Td))],64))),256))])],2)}var Id=".vc-sketch{background:#fff;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.15),0 8px 16px rgba(0,0,0,.15);box-sizing:initial;padding:10px 10px 0;position:relative;width:200px}.vc-sketch-saturation-wrap{overflow:hidden;padding-bottom:75%;position:relative;width:100%}.vc-sketch-controls{display:flex}.vc-sketch-sliders{flex:1;padding:4px 0}.vc-sketch-sliders .vc-alpha-gradient,.vc-sketch-sliders .vc-hue{border-radius:2px}.vc-sketch-alpha-wrap,.vc-sketch-hue-wrap{height:10px;position:relative}.vc-sketch-alpha-wrap{margin-top:4px;overflow:hidden}.vc-sketch-color-wrap{border-radius:3px;height:24px;margin-left:4px;margin-top:4px;position:relative;width:24px}.vc-sketch-active-color{border-radius:2px;bottom:0;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15),inset 0 0 4px rgba(0,0,0,.25);left:0;position:absolute;right:0;top:0;z-index:2}.vc-sketch-color-wrap .vc-checkerboard{background-size:auto}.vc-sketch-field{display:flex;padding-top:4px}.vc-sketch-field .vc-input__input{border:none;box-shadow:inset 0 0 0 1px #ccc;font-size:10px;padding:4px 0 3px 10%;width:90%}.vc-sketch-field .vc-input__label{color:#222;display:block;font-size:11px;padding-bottom:4px;padding-top:3px;text-align:center;text-transform:capitalize}.vc-sketch-field--single{flex:1;padding-left:6px}.vc-sketch-field--double{flex:2}.vc-sketch-presets{border-top:1px solid #eee;margin-left:-10px;margin-right:-10px;padding-left:10px;padding-top:10px}.vc-sketch-presets-color{cursor:pointer;display:inline-block;height:16px;margin:0 10px 10px 0;overflow:hidden;position:relative;vertical-align:top;width:16px}.vc-sketch-presets-color,.vc-sketch-presets-color .vc-checkerboard{border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15)}.vc-sketch__disable-alpha .vc-sketch-color-wrap{height:10px}";kr(Id);na.render=Pd;na.__file="src/components/sketch/sketch.vue";na.install=Dr;const Od={class:"flex flex-row items-center cursor-pointer"},Bd={class:"not-italic"},wa=lt({__name:"ColorPicker",props:{modelValue:{type:String,default(){return""}}},emits:{"update:modelValue":e=>e!==null},setup(e,{emit:t}){const r=t;function n(a){a.rgba.a===0?r("update:modelValue",""):r("update:modelValue",a.hex)}return(a,i)=>{const o=Oc;return L(),Ct(o,{placement:"bottom",width:220,trigger:"click"},{reference:q(()=>[A("div",Od,[A("span",{class:"w-6 h-4 block mr-1 border border-gray-500",style:gt({backgroundColor:e.modelValue})},null,4),A("span",Bd,pt(e.modelValue),1)])]),default:q(()=>[O(w(na),{"model-value":e.modelValue,"onUpdate:modelValue":n,"preset-colors":w($f)},null,8,["model-value","preset-colors"])]),_:1})}}}),Ad={class:"text-[12px] leading-5 flex flex-col gap-5"},zd={class:"flex"},Ld={class:"w-full grid grid-cols-2 gap-4"},$d={class:"flex flex-1 gap-2 items-center"},Fd={class:"flex flex-1 gap-2 items-center"},Gd={class:"flex items-center gap-2"},Nd={class:"flex-shrink-0"},Vd={class:"flex gap-4"},Wd={class:"flex gap-4"},Hd=lt({__name:"TextAttr",setup(e){const t=it(!1),r=Vt(),n=tt(()=>r.selectResource);return(a,i)=>{const o=Jn,s=Zn,l=nn,u=tn,f=en;return ee((L(),Y("div",Ad,[A("div",zd,[O(vt,{name:"时长"},{default:q(()=>[Pt(pt(((w(n).end-w(n).start)/w(Kt)).toFixed(2))+" s ",1)]),_:1}),O(vt,{name:"类型"},{default:q(()=>[O(o,{size:"small"},{default:q(()=>[Pt(pt(w(n).type),1)]),_:1})]),_:1})]),O(vt,{name:"位置"},{default:q(()=>[A("div",Ld,[A("div",$d,[i[8]||(i[8]=A("span",null,"X",-1)),O(s,{class:"flex-1",controlsPosition:"right",modelValue:w(n).centerX,"onUpdate:modelValue":i[0]||(i[0]=c=>w(n).centerX=c)},null,8,["modelValue"])]),A("div",Fd,[i[9]||(i[9]=A("span",null,"Y",-1)),O(s,{controlsPosition:"right",modelValue:w(n).centerY,"onUpdate:modelValue":i[1]||(i[1]=c=>w(n).centerY=c)},null,8,["modelValue"])])])]),_:1}),O(vt,{name:"缩放"},{default:q(()=>[A("div",Gd,[O(l,{min:1,max:200,step:1,modelValue:w(n).scale,"onUpdate:modelValue":i[2]||(i[2]=c=>w(n).scale=c)},null,8,["modelValue"]),A("div",Nd,pt(w(n).scale)+" %",1)])]),_:1}),O(vt,{name:"内容"},{default:q(()=>[O(u,{modelValue:w(n).text,"onUpdate:modelValue":i[3]||(i[3]=c=>w(n).text=c),type:"textarea",autosize:{minRows:1,maxRows:6},resize:"none"},null,8,["modelValue"])]),_:1}),A("div",Vd,[O(vt,{name:"字号"},{default:q(()=>[O(s,{class:"w-[90%]",controlsPosition:"right",modelValue:w(n).fontSize,"onUpdate:modelValue":i[4]||(i[4]=c=>w(n).fontSize=c)},null,8,["modelValue"])]),_:1}),O(vt,{name:"背景"},{default:q(()=>[O(wa,{modelValue:w(n).textBackgroundColor,"onUpdate:modelValue":i[5]||(i[5]=c=>w(n).textBackgroundColor=c)},null,8,["modelValue"])]),_:1})]),A("div",Wd,[O(vt,{name:"字体颜色"},{default:q(()=>[O(wa,{modelValue:w(n).fill,"onUpdate:modelValue":i[6]||(i[6]=c=>w(n).fill=c)},null,8,["modelValue"])]),_:1}),O(vt,{name:"描边颜色"},{default:q(()=>[O(wa,{modelValue:w(n).stroke,"onUpdate:modelValue":i[7]||(i[7]=c=>w(n).stroke=c)},null,8,["modelValue"])]),_:1})])])),[[f,w(t)]])}}}),Xd={class:"text-[12px] leading-5 flex flex-col gap-5"},Yd={key:0,class:"flex"},jd={key:1,class:"flex"},Ud={class:"w-full grid grid-cols-2 gap-4"},qd={class:"flex flex-1 gap-2 items-center"},Kd={class:"flex flex-1 gap-2 items-center"},Zd={class:"flex items-center gap-2"},Jd={class:"flex-shrink-0"},Qd=lt({__name:"VideoAttr",setup(e){const t=Vt(),r=tt(()=>t.selectResource),n=async()=>{if(!r.value){ge.error("缺少重新生成所需的提示词");return}try{r.value.loading=!0,ge.info("重新生成功能需要后端支持")}catch(a){console.error("重新生成失败:",a),ge.error("重新生成失败")}finally{r.value.loading=!1}};return(a,i)=>{var d,p,v,h;const o=Jn,s=Zn,l=nn,u=tn,f=Hr,c=en;return ee((L(),Y("div",Xd,[O(vt,{name:"名称",nowrap:""},{default:q(()=>[Pt(pt(w(r).name),1)]),_:1}),w(r)?(L(),Y("div",Yd,[O(vt,{name:"初始时间"},{default:q(()=>[Pt(pt(w(r).duration.toFixed(2))+" s ",1)]),_:1}),O(vt,{name:"当前时间"},{default:q(()=>[Pt(pt(((w(r).end-w(r).start)/w(Kt)).toFixed(2))+" s ",1)]),_:1})])):ht("",!0),a.resource?(L(),Y("div",jd,[O(vt,{name:"类型"},{default:q(()=>[O(o,{size:"small"},{default:q(()=>[Pt(pt(w(r).type),1)]),_:1})]),_:1}),O(vt,{name:"分辨率"},{default:q(()=>[Pt(pt(a.resource.width)+" × "+pt(a.resource.height),1)]),_:1})])):ht("",!0),O(vt,{name:"位置"},{default:q(()=>[A("div",Ud,[A("div",qd,[i[4]||(i[4]=A("span",null,"X",-1)),O(s,{class:"flex-1",controlsPosition:"right",modelValue:w(r).centerX,"onUpdate:modelValue":i[0]||(i[0]=g=>w(r).centerX=g)},null,8,["modelValue"])]),A("div",Kd,[i[5]||(i[5]=A("span",null,"Y",-1)),O(s,{controlsPosition:"right",modelValue:w(r).centerY,"onUpdate:modelValue":i[1]||(i[1]=g=>w(r).centerY=g)},null,8,["modelValue"])])])]),_:1}),O(vt,{name:"缩放"},{default:q(()=>[A("div",Zd,[O(l,{min:1,max:200,step:1,modelValue:w(r).scale,"onUpdate:modelValue":i[2]||(i[2]=g=>w(r).scale=g)},null,8,["modelValue"]),A("div",Jd,pt(w(r).scale)+" %",1)])]),_:1}),((p=(d=a.resource)==null?void 0:d.meta)==null?void 0:p.prompt)!==void 0?(L(),Ct(vt,{key:2,name:"描述"},{default:q(()=>[O(u,{modelValue:a.resource.meta.prompt,"onUpdate:modelValue":i[3]||(i[3]=g=>a.resource.meta.prompt=g),type:"textarea",autosize:{minRows:1,maxRows:6},resize:"none"},null,8,["modelValue"])]),_:1})):ht("",!0),((h=(v=a.resource)==null?void 0:v.meta)==null?void 0:h.model)!=="upload"?(L(),Ct(vt,{key:3,name:"操作"},{default:q(()=>[O(f,{type:"primary",onClick:n},{default:q(()=>i[6]||(i[6]=[Pt("重新生成")])),_:1})]),_:1})):ht("",!0)])),[[c,w(r).loading]])}}}),tp={class:"text-[12px] leading-5 flex flex-col gap-5"},ep={class:"flex"},rp={class:"w-full grid grid-cols-2 gap-4"},np={class:"flex flex-1 gap-2 items-center"},ap={class:"flex flex-1 gap-2 items-center"},ip={class:"flex items-center gap-2"},op={class:"flex-shrink-0"},sp=lt({__name:"ImageAttr",setup(e){const t=Vt(),r=tt(()=>t.selectResource),n=()=>{ge.info("前端模式下暂不支持重新生成功能")},a=()=>{ge.info("前端模式下暂不支持图片生成视频功能")};return(i,o)=>{const s=Jn,l=Zn,u=nn,f=tn,c=Hr,d=en;return ee((L(),Y("div",tp,[O(vt,{name:"名称",nowrap:""},{default:q(()=>[Pt(pt(w(r).name),1)]),_:1}),O(vt,{name:"时长"},{default:q(()=>[Pt(pt(((w(r).end-w(r).start)/w(Kt)).toFixed(2))+" s ",1)]),_:1}),A("div",ep,[O(vt,{name:"类型"},{default:q(()=>[O(s,{size:"small"},{default:q(()=>[Pt(pt(w(r).type),1)]),_:1})]),_:1}),O(vt,{name:"分辨率"},{default:q(()=>[Pt(pt(w(r).width)+" × "+pt(w(r).height),1)]),_:1})]),O(vt,{name:"位置"},{default:q(()=>[A("div",rp,[A("div",np,[o[4]||(o[4]=A("span",null,"X",-1)),O(l,{class:"flex-1",controlsPosition:"right",modelValue:w(r).centerX,"onUpdate:modelValue":o[0]||(o[0]=p=>w(r).centerX=p)},null,8,["modelValue"])]),A("div",ap,[o[5]||(o[5]=A("span",null,"Y",-1)),O(l,{controlsPosition:"right",modelValue:w(r).centerY,"onUpdate:modelValue":o[1]||(o[1]=p=>w(r).centerY=p)},null,8,["modelValue"])])])]),_:1}),O(vt,{name:"缩放"},{default:q(()=>[A("div",ip,[O(u,{min:1,max:200,step:1,modelValue:w(r).scale,"onUpdate:modelValue":o[2]||(o[2]=p=>w(r).scale=p)},null,8,["modelValue"]),A("div",op,pt(w(r).scale)+" %",1)])]),_:1}),O(vt,{name:"描述"},{default:q(()=>[O(f,{modelValue:w(r).name,"onUpdate:modelValue":o[3]||(o[3]=p=>w(r).name=p),type:"textarea",autosize:{minRows:1,maxRows:6},resize:"none"},null,8,["modelValue"])]),_:1}),O(vt,{name:"操作"},{default:q(()=>[O(c,{type:"primary",onClick:n},{default:q(()=>o[6]||(o[6]=[Pt("重新生成")])),_:1}),O(c,{type:"primary",onClick:a},{default:q(()=>o[7]||(o[7]=[Pt("图生视频")])),_:1})]),_:1})])),[[d,w(r).loading]])}}}),lp={class:"text-[12px] leading-5 flex flex-col gap-5"},up={class:"flex"},cp={class:"flex items-center gap-4"},fp={class:"flex-shrink-0"},dp={class:"flex"},pp={class:"flex"},vp={class:"flex"},hp=lt({__name:"AudioAttr",setup(e){const t=de(),r=Vt(),n=tt(()=>r.selectResource),a=()=>{ge.info("前端模式下暂不支持重新生成功能")};return Tt(()=>n.value.volume,Fn(()=>{t.isPause=!0,dc.updateVolume(n.value,n.value.volume)},100)),Tt(()=>n.value.subtitle,Fn(async()=>{t.isPause=!0,await pc.decode(n.value)},100),{deep:!0}),(i,o)=>{const s=Jn,l=nn,u=vc,f=Zn,c=sf,d=tn,p=Hr,v=en;return ee((L(),Y("div",lp,[O(vt,{name:"名称",nowrap:""},{default:q(()=>[Pt(pt(w(n).name),1)]),_:1}),A("div",up,[O(vt,{name:"初始时间"},{default:q(()=>[Pt(pt((w(n).frameCount/w(Kt)).toFixed(2))+" s ",1)]),_:1}),O(vt,{name:"当前时间"},{default:q(()=>[Pt(pt(((w(n).end-w(n).start)/w(Kt)).toFixed(2))+" s ",1)]),_:1})]),O(vt,{name:"类型"},{default:q(()=>[O(s,{size:"small"},{default:q(()=>[Pt(pt(w(n).type),1)]),_:1})]),_:1}),O(vt,{name:"音量"},{default:q(()=>[A("div",cp,[O(l,{min:0,max:1,step:.1,modelValue:w(n).volume,"onUpdate:modelValue":o[0]||(o[0]=h=>w(n).volume=h)},null,8,["modelValue"]),A("div",fp,pt(w(n).volume),1)])]),_:1}),A("div",dp,[O(vt,{name:"静音"},{default:q(()=>[O(u,{modelValue:w(n).mute,"onUpdate:modelValue":o[1]||(o[1]=h=>w(n).mute=h)},null,8,["modelValue"])]),_:1}),O(vt,{name:"字幕"},{default:q(()=>[O(u,{modelValue:w(n).drawSub,"onUpdate:modelValue":o[2]||(o[2]=h=>w(n).drawSub=h)},null,8,["modelValue"])]),_:1})]),w(n).drawSub?(L(),Y(le,{key:0},[A("div",pp,[O(vt,{name:"字号"},{default:q(()=>[O(f,{modelValue:w(n).subtitle.fontSize,"onUpdate:modelValue":o[3]||(o[3]=h=>w(n).subtitle.fontSize=h),class:"input-number",min:12,max:100,size:"small"},null,8,["modelValue"])]),_:1}),O(vt,{name:"字体颜色"},{default:q(()=>[O(c,{modelValue:w(n).subtitle.fontColor,"onUpdate:modelValue":o[4]||(o[4]=h=>w(n).subtitle.fontColor=h),size:"small"},null,8,["modelValue"])]),_:1})]),A("div",vp,[O(vt,{name:"描边大小"},{default:q(()=>[O(f,{modelValue:w(n).subtitle.strokeSize,"onUpdate:modelValue":o[5]||(o[5]=h=>w(n).subtitle.strokeSize=h),class:"input-number",min:0,max:20,size:"small"},null,8,["modelValue"])]),_:1}),O(vt,{name:"描边颜色"},{default:q(()=>[O(c,{modelValue:w(n).subtitle.strokeColor,"onUpdate:modelValue":o[6]||(o[6]=h=>w(n).subtitle.strokeColor=h),size:"small"},null,8,["modelValue"])]),_:1})]),O(vt,{name:"底部边距"},{default:q(()=>[O(f,{modelValue:w(n).subtitle.bottomOffset,"onUpdate:modelValue":o[7]||(o[7]=h=>w(n).subtitle.bottomOffset=h),class:"input-number",min:0,max:200,size:"small"},null,8,["modelValue"])]),_:1})],64)):ht("",!0),O(vt,{name:"提示词"},{default:q(()=>[O(d,{modelValue:w(n).name,"onUpdate:modelValue":o[8]||(o[8]=h=>w(n).name=h),type:"textarea",autosize:{minRows:1,maxRows:6},resize:"none"},null,8,["modelValue"])]),_:1}),O(vt,{name:"操作"},{default:q(()=>[O(p,{type:"primary",onClick:a},{default:q(()=>o[9]||(o[9]=[Pt("重新生成")])),_:1})]),_:1})])),[[v,w(n).loading]])}}}),gp=rn(hp,[["__scopeId","data-v-6b479a41"]]),mp={key:0,class:"w-full h-full flex flex-col justify-center items-center"},bp={key:1,class:"absolute top-0 left-3 right-2 bottom-0 pr-2 overflow-auto"},yp=lt({__name:"AttributeContainer",setup(e){const t=Er(),r=Vt(),n=tt(()=>({width:`${t.attrWidth}px`})),a={},i=Object.assign({});for(const s in i){const l=s.match(new RegExp("(?<=\\/)(\\w+)(?=\\.ts)"))||[];a[l[0]]=i[s].Options}tt(()=>{const s=r.selectResource&&a[r.selectResource.type];return s?s.attributes:[]});const o=tt(()=>r.selectResource);return(s,l)=>{const u=Ac,f=Hd,c=zs,d=Ls;return L(),Y("div",{class:"select-none relative pl-2 dark:bg-night bg-gray-100",style:gt(w(n))},[w(o)?(L(),Y("div",bp,[O(d,null,{default:q(()=>[O(c,{label:"基本信息"},{default:q(()=>[w(o).type==="video"?(L(),Ct(Qd,{key:0})):w(o).type==="image"?(L(),Ct(sp,{key:1})):w(o).type==="audio"?(L(),Ct(gp,{key:2})):w(o).type==="text"?(L(),Ct(f,{key:3})):ht("",!0)]),_:1})]),_:1})])):(L(),Y("div",mp,[O(u,{description:"点击轨道进行编辑"})]))],4)}}});function xp(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(n){return n.split(" ").map(function(a){return a?""+e+a:""}).join(" ")}).join(" ")}function _p(e,t){return t.replace(/([^}{]*){/gm,function(r,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+e+"$1")+"{"})}function Ce(e,t){return function(r){r&&(e[t]=r)}}function Us(e,t,r){return function(n){n&&(e[t][r]=n)}}function $o(e,t){return function(r){var n=r.prototype;e.forEach(function(a){t(n,a)})}}function Sp(e,t){return t===void 0&&(t={}),function(r,n){e.forEach(function(a){var i=t[a]||a;i in r||(r[i]=function(){for(var o,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var u=(o=this[n])[a].apply(o,s);return u===this[n]?this:u})})}}var Cp=function(){function e(){this.keys=[],this.values=[]}var t=e.prototype;return t.get=function(r){return this.values[this.keys.indexOf(r)]},t.set=function(r,n){var a=this.keys,i=this.values,o=a.indexOf(r),s=o===-1?a.length:o;a[s]=r,i[s]=n},e}(),wp=function(){function e(){this.object={}}var t=e.prototype;return t.get=function(r){return this.object[r]},t.set=function(r,n){this.object[r]=n},e}(),Ep=typeof Map=="function",kp=function(){function e(){}var t=e.prototype;return t.connect=function(r,n){this.prev=r,this.next=n,r&&(r.next=this),n&&(n.prev=this)},t.disconnect=function(){var r=this.prev,n=this.next;r&&(r.next=n),n&&(n.prev=r)},t.getIndex=function(){for(var r=this,n=-1;r;)r=r.prev,++n;return n},e}();function Dp(e,t){var r=[],n=[];return e.forEach(function(a){var i=a[0],o=a[1],s=new kp;r[i]=s,n[o]=s}),r.forEach(function(a,i){a.connect(r[i-1])}),e.filter(function(a,i){return!t[i]}).map(function(a,i){var o=a[0],s=a[1];if(o===s)return[0,0];var l=r[o],u=n[s-1],f=l.getIndex();l.disconnect(),u?l.connect(u,u.next):l.connect(void 0,r[0]);var c=l.getIndex();return[f,c]})}var Mp=function(){function e(r,n,a,i,o,s,l,u){this.prevList=r,this.list=n,this.added=a,this.removed=i,this.changed=o,this.maintained=s,this.changedBeforeAdded=l,this.fixed=u}var t=e.prototype;return Object.defineProperty(t,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),t.caculateOrdered=function(){var r=Dp(this.changedBeforeAdded,this.fixed),n=this.changed,a=[];this.cacheOrdered=r.filter(function(i,o){var s=i[0],l=i[1],u=n[o],f=u[0],c=u[1];if(s!==l)return a.push([f,c]),!0}),this.cachePureChanged=a},e}();function on(e,t,r){var n=Ep?Map:r?wp:Cp,a=r||function(y){return y},i=[],o=[],s=[],l=e.map(a),u=t.map(a),f=new n,c=new n,d=[],p=[],v={},h=[],g=0,m=0;return l.forEach(function(y,b){f.set(y,b)}),u.forEach(function(y,b){c.set(y,b)}),l.forEach(function(y,b){var x=c.get(y);typeof x>"u"?(++m,o.push(b)):v[x]=m}),u.forEach(function(y,b){var x=f.get(y);typeof x>"u"?(i.push(b),++g):(s.push([x,b]),m=v[b]||0,d.push([x-m,b-g]),p.push(b===x),x!==b&&h.push([x,b]))}),o.reverse(),new Mp(e,t,i,o,h,s,d,p)}var Tp=function(){function e(r,n){r===void 0&&(r=[]),this.findKeyCallback=n,this.list=[].slice.call(r)}var t=e.prototype;return t.update=function(r){var n=[].slice.call(r),a=on(this.list,n,this.findKeyCallback);return this.list=n,a},e}(),Rp="function",Pp="object",Ip="string",Op="number",Mi="undefined",qs=typeof window!==Mi,Bp=typeof document!==Mi&&document,Ap=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],zt=1e-7,bn={cm:function(e){return e*96/2.54},mm:function(e){return e*96/254},in:function(e){return e*96},pt:function(e){return e*96/72},pc:function(e){return e*96/6},"%":function(e,t){return e*t/100},vw:function(e,t){return t===void 0&&(t=window.innerWidth),e/100*t},vh:function(e,t){return t===void 0&&(t=window.innerHeight),e/100*t},vmax:function(e,t){return t===void 0&&(t=Math.max(window.innerWidth,window.innerHeight)),e/100*t},vmin:function(e,t){return t===void 0&&(t=Math.min(window.innerWidth,window.innerHeight)),e/100*t}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function zp(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}function Ke(e,t,r,n){return(e*n+t*r)/(r+n)}function sn(e){return typeof e===Mi}function Se(e){return e&&typeof e===Pp}function Lt(e){return Array.isArray(e)}function ue(e){return typeof e===Ip}function Na(e){return typeof e===Op}function Ti(e){return typeof e===Rp}function Lp(e,t){var r=e===""||e==" ",n=t===""||t==" ";return n&&r||e===t}function Ks(e,t,r,n,a){var i=Ri(e,t,r);return i?r:$p(e,t,r+1,n,a)}function Ri(e,t,r){if(!e.ignore)return null;var n=t.slice(Math.max(r-3,0),r+3).join("");return new RegExp(e.ignore).exec(n)}function $p(e,t,r,n,a){for(var i=function(u){var f=t[u].trim();if(f===e.close&&!Ri(e,t,u))return{value:u};var c=u,d=Re(a,function(p){var v=p.open;return v===f});if(d&&(c=Ks(d,t,u,n,a)),c===-1)return o=u,"break";u=c,o=u},o,s=r;s<n;++s){var l=i(s);if(s=o,typeof l=="object")return l.value;if(l==="break")break}return-1}function Pi(e,t){var r=ue(t)?{separator:t}:t,n=r.separator,a=n===void 0?",":n,i=r.isSeparateFirst,o=r.isSeparateOnlyOpenClose,s=r.isSeparateOpenClose,l=s===void 0?o:s,u=r.openCloseCharacters,f=u===void 0?Ap:u,c=f.map(function(C){var M=C.open,k=C.close;return M===k?M:M+"|"+k}).join("|"),d="(\\s*"+a+"\\s*|"+c+"|\\s+)",p=new RegExp(d,"g"),v=e.split(p).filter(function(C){return C&&C!=="undefined"}),h=v.length,g=[],m=[];function y(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var b=function(C){var M=v[C].trim(),k=C,E=Re(f,function(P){var I=P.open;return I===M}),R=Re(f,function(P){var I=P.close;return I===M});if(E){if(k=Ks(E,v,C,h,f),k!==-1&&l)return y()&&i||(g.push(v.slice(C,k+1).join("")),C=k,i)?(x=C,"break"):(x=C,"continue")}else if(R&&!Ri(R,v,C)){var D=zp(f);return D.splice(f.indexOf(R),1),{value:Pi(e,{separator:a,isSeparateFirst:i,isSeparateOnlyOpenClose:o,isSeparateOpenClose:l,openCloseCharacters:D})}}else if(Lp(M,a)&&!o)return y(),i?(x=C,"break"):(x=C,"continue");k===-1&&(k=h-1),m.push(v.slice(C,k+1).join("")),C=k,x=C},x,_=0;_<h;++_){var S=b(_);if(_=x,typeof S=="object")return S.value;if(S==="break")break}return m.length&&g.push(m.join("")),g}function Ne(e){return Pi(e,"")}function er(e){return Pi(e,",")}function Zs(e){var t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(e);return!t||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]}}function ln(e){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);if(!t)return{prefix:"",unit:"",value:NaN};var r=t[1],n=t[2],a=t[3];return{prefix:r,unit:a,value:parseFloat(n)}}function Fp(e){return e.replace(/[\s-_]+([^\s-_])/g,function(t,r){return r.toUpperCase()})}function zn(e,t){return e.replace(/([a-z])([A-Z])/g,function(r,n,a){return""+n+t+a.toLowerCase()})}function Yr(){return Date.now?Date.now():new Date().getTime()}function Te(e,t,r){r===void 0&&(r=-1);for(var n=e.length,a=0;a<n;++a)if(t(e[a],a,e))return a;return r}function Re(e,t,r){var n=Te(e,t);return n>-1?e[n]:r}var Js=function(){var e=Yr(),t=qs&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(r){var n=Yr(),a=setTimeout(function(){r(n-e)},1e3/60);return a}}(),Gp=function(){var e=qs&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return e?e.bind(window):function(t){clearTimeout(t)}}();function Mr(e){return Object.keys(e)}function kt(e,t){var r=ln(e),n=r.value,a=r.unit;if(Se(t)){var i=t[a];if(i){if(Ti(i))return i(n);if(bn[a])return bn[a](n,i)}}else if(a==="%")return n*t/100;return bn[a]?bn[a](n):n}function Va(e,t,r){return Math.max(t,Math.min(e,r))}function Fo(e,t,r,n){return n===void 0&&(n=e[0]/e[1]),[[ut(t[0],zt),ut(t[0]/n,zt)],[ut(t[1]*n,zt),ut(t[1],zt)]].filter(function(a){return a.every(function(i,o){var s=t[o],l=ut(s,zt);return r?i<=s||i<=l:i>=s||i>=l})})[0]||e}function Np(e,t,r,n){if(!n)return e.map(function(p,v){return Va(p,t[v],r[v])});var a=e[0],i=e[1],o=n===!0?a/i:n,s=Fo(e,t,!1,o),l=s[0],u=s[1],f=Fo(e,r,!0,o),c=f[0],d=f[1];return a<l||i<u?(a=l,i=u):(a>c||i>d)&&(a=c,i=d),[a,i]}function Vp(e){for(var t=e.length,r=0,n=t-1;n>=0;--n)r+=e[n];return r}function Wa(e){for(var t=e.length,r=0,n=t-1;n>=0;--n)r+=e[n];return t?r/t:0}function Ot(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=Math.atan2(n,r);return a>=0?a:a+Math.PI*2}function Wp(e){return[0,1].map(function(t){return Wa(e.map(function(r){return r[t]}))})}function Ha(e){var t=Wp(e),r=Ot(t,e[0]),n=Ot(t,e[1]);return r<n&&n-r<Math.PI||r>n&&n-r<-Math.PI?1:-1}function me(e,t){return Math.sqrt(Math.pow((t?t[0]:0)-e[0],2)+Math.pow((t?t[1]:0)-e[1],2))}function ut(e,t){if(!t)return e;var r=1/t;return Math.round(e/t)/r}function Go(e,t){return e.forEach(function(r,n){e[n]=ut(e[n],t)}),e}function Gt(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function Qs(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function tl(e,t){if(e.classList)e.classList.remove(t);else{var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}}function jt(e,t,r,n){e.addEventListener(t,r,n)}function Xt(e,t,r,n){e.removeEventListener(t,r,n)}function Hp(e){return(e==null?void 0:e.ownerDocument)||Bp}function Ea(e){var t;return((t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView)||window}function Xp(e){return e&&"postMessage"in e&&"blur"in e&&"self"in e}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Xa=function(e,t){return Xa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a])},Xa(e,t)};function lr(e,t){Xa(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Le=function(){return Le=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Le.apply(this,arguments)};function el(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function Yp(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}function Ya(e,t){if(e===t)return!1;for(var r in e)if(!(r in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function Ii(e,t){var r=Object.keys(e),n=Object.keys(t),a=on(r,n,function(l){return l}),i={},o={},s={};return a.added.forEach(function(l){var u=n[l];i[u]=t[u]}),a.removed.forEach(function(l){var u=r[l];o[u]=e[u]}),a.maintained.forEach(function(l){var u=l[0],f=r[u],c=[e[f],t[f]];e[f]!==t[f]&&(s[f]=c)}),{added:i,removed:o,changed:s}}function rl(e){e.forEach(function(t){t()})}function No(e){var t=0;return e.map(function(r){return r==null?"$compat"+ ++t:""+r})}function Vo(e,t,r,n){if(ue(e)||Na(e))return new Kp("text_"+e,t,r,n,null,{});var a=typeof e.type=="string"?Zp:e.type.prototype.render?Qp:Jp;return new a(e.type,t,r,n,e.ref,e.props)}function nl(e){var t=[];return e.forEach(function(r){t=t.concat(Lt(r)?nl(r):r)}),t}function Wo(e){var t=e.className,r=el(e,["className"]);return t!=null&&(r.class=t),delete r.style,delete r.children,r}function ka(e,t){if(!t)return e;for(var r in t)sn(e[r])&&(e[r]=t[r]);return e}function pe(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var a=t||{},i=a.key,o=a.ref,s=el(a,["key","ref"]);return{type:e,key:i,ref:o,props:Le(Le({},s),{children:nl(r).filter(function(l){return l!=null&&l!==!1})})}}var un=function(){function e(r,n,a,i,o,s){s===void 0&&(s={}),this.type=r,this.key=n,this.index=a,this.container=i,this.ref=o,this.props=s,this._providers=[]}var t=e.prototype;return t._should=function(r,n){return!0},t._update=function(r,n,a,i){if(this.base&&!ue(n)&&!i&&!this._should(n.props,a))return!1;this.original=n,this._setState(a);var o=this.props;return ue(n)||(this.props=n.props,this.ref=n.ref),this._render(r,this.base?o:{},a),!0},t._mounted=function(){var r=this.ref;r&&r(this.base)},t._setState=function(r){},t._updated=function(){var r=this.ref;r&&r(this.base)},t._destroy=function(){var r=this.ref;r&&r(null)},e}();function jp(e,t,r){var n=Ii(e,t),a=n.added,i=n.removed,o=n.changed;for(var s in a)r.setAttribute(s,a[s]);for(var s in o)r.setAttribute(s,o[s][1]);for(var s in i)r.removeAttribute(s)}function Up(e,t,r){var n=Ii(e,t),a=n.added,i=n.removed,o=n.changed;for(var s in i)r.removeEventListener(s);for(var s in a)r.addEventListener(s,a[s]);for(var s in o)r.removeEventListener(s),r.addEventListener(s,o[s][1]);for(var s in i)r.removeEventListener(s)}function qp(e,t,r){var n=r.style,a=Ii(e,t),i=a.added,o=a.removed,s=a.changed;for(var l in i){var u=zn(l,"-");n.setProperty?n.setProperty(u,i[l]):n[u]=i[l]}for(var l in s){var u=zn(l,"-");n.setProperty?n.setProperty(u,s[l][1]):n[u]=s[l][1]}for(var l in o){var u=zn(l,"-");n.removeProperty?n.removeProperty(u):n[u]=""}}function Ho(e){var t={},r={};for(var n in e)n.indexOf("on")===0?r[n.replace("on","").toLowerCase()]=e[n]:t[n]=e[n];return{attributes:t,events:r}}var Kp=function(e){lr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}var r=t.prototype;return r._render=function(n){var a=this,i=!this.base;return i&&(this.base=document.createTextNode(this.type.replace("text_",""))),n.push(function(){i?a._mounted():a._updated()}),!0},r._unmount=function(){this.base.parentNode.removeChild(this.base)},t}(un),Zp=function(e){lr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.events={},n._isSVG=!1,n}var r=t.prototype;return r.addEventListener=function(n,a){var i=this.events;i[n]=function(o){o.nativeEvent=o,a(o)},this.base.addEventListener(n,i[n])},r.removeEventListener=function(n){var a=this.events;this.base.removeEventListener(n,a[n]),delete a[n]},r._should=function(n){return Ya(this.props,n)},r._render=function(n,a){var i=this,o=!this.base;if(o){var s=this._hasSVG();this._isSVG=s;var l=this.props.portalContainer;if(!l){var u=this.type;s?l=document.createElementNS("http://www.w3.org/2000/svg",u):l=document.createElement(u)}this.base=l}cn(this,this._providers,this.props.children,n,null);var f=this.base,c=Ho(a),d=c.attributes,p=c.events,v=Ho(this.props),h=v.attributes,g=v.events;return jp(Wo(d),Wo(h),f),Up(p,g,this),qp(a.style||{},this.props.style||{},f),n.push(function(){o?i._mounted():i._updated()}),!0},r._unmount=function(){var n=this.events,a=this.base;for(var i in n)a.removeEventListener(i,n[i]);this._providers.forEach(function(o){o._unmount()}),this.events={},this.props.portalContainer||a.parentNode.removeChild(a)},r._hasSVG=function(){if(this._isSVG||this.type==="svg")return!0;var n=Oi(this.container);return n&&"ownerSVGElement"in n},t}(un);function Oi(e){if(!e)return null;var t=e.base;return t instanceof Node?t:Oi(e.container)}function jr(e){if(!e)return null;if(e instanceof Node)return e;var t=e.$_provider._providers;return t.length?jr(t[0].base):null}var Jp=function(e){lr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}var r=t.prototype;return r._render=function(n){var a=this.type(this.props);return cn(this,this._providers,a?[a]:[],n),!0},r._unmount=function(){this._providers.forEach(function(n){n._unmount()})},t}(un),al=function(e){lr(t,e);function t(n){var a=e.call(this,"container","container",0,null)||this;return a.base=n,a}var r=t.prototype;return r._render=function(){return!0},r._unmount=function(){},t}(un),Qp=function(e){lr(t,e);function t(n,a,i,o,s,l){return l===void 0&&(l={}),e.call(this,n,a,i,o,s,ka(l,n.defaultProps))||this}var r=t.prototype;return r._should=function(n,a){return this.base.shouldComponentUpdate(ka(n,this.type.defaultProps),a||this.base.state)},r._render=function(n,a){var i=this;this.props=ka(this.props,this.type.defaultProps);var o=!this.base;o?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var s=this.base,l=s.state,u=s.render();u&&u.props&&!u.props.children.length&&(u.props.children=this.props.children),cn(this,this._providers,u?[u]:[],n),n.push(function(){o?(i._mounted(),s.componentDidMount()):(i._updated(),s.componentDidUpdate(a,l))})},r._setState=function(n){var a=this.base;!a||!n||(a.state=n)},r._unmount=function(){this._providers.forEach(function(n){n._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},t}(un),Bi=function(){function e(r){r===void 0&&(r={}),this.props=r,this.state={},this.$_timer=0,this.$_state={}}var t=e.prototype;return t.shouldComponentUpdate=function(r,n){return!0},t.render=function(){return null},t.setState=function(r,n,a){var i=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=Le(Le({},this.$_state),r),a?this.$_setState(n,a):this.$_timer=setTimeout(function(){i.$_timer=0,i.$_setState(n,a)})},t.forceUpdate=function(r){this.setState({},r,!0)},t.componentDidMount=function(){},t.componentDidUpdate=function(r,n){},t.componentWillUnmount=function(){},t.$_setState=function(r,n){var a=[],i=this.$_provider,o=cn(i.container,[i],[i.original],a,Le(Le({},this.state),this.$_state),n);o&&(r&&a.push(r),rl(a))},e}(),Ai=function(e){lr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}var r=t.prototype;return r.shouldComponentUpdate=function(n,a){return Ya(this.props,n)||Ya(this.state,a)},t}(Bi),tv=function(e){lr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}var r=t.prototype;return r.componentDidMount=function(){var n=this.props,a=n.element,i=n.container;this._portalProvider=new al(i),Ln(a,i,this._portalProvider)},r.componentDidUpdate=function(){var n=this.props,a=n.element,i=n.container;Ln(a,i,this._portalProvider)},r.componentWillUnmount=function(){var n=this.props.container;Ln(null,n,this._portalProvider),this._portalProvider=null},t}(Ai);function ev(e,t,r){var n=[];cn(e,e._providers,t,n,r),rl(n)}function rv(e,t){for(var r=e._providers,n=r.length,a=t.index+1;a<n;++a){var i=jr(r[a].base);if(i)return i}return null}function nv(e,t,r){var n=r.map(function(l){return ue(l)?null:l.key}),a=No(t.map(function(l){return l.key})),i=No(n),o=on(a,i,function(l){return l});o.removed.forEach(function(l){t.splice(l,1)[0]._unmount()}),o.ordered.forEach(function(l){var u=l[0],f=l[1],c=t.splice(u,1)[0];t.splice(f,0,c);var d=jr(c.base),p=jr(t[f+1]&&t[f+1].base);d&&d.parentNode.insertBefore(d,p)}),o.added.forEach(function(l){t.splice(l,0,Vo(r[l],n[l],l,e))});var s=o.maintained.filter(function(l){l[0];var u=l[1],f=r[u],c=t[u],d=ue(f)?"text_"+f:f.type;return d!==c.type?(c._unmount(),t.splice(u,1,Vo(f,n[u],u,e)),!0):(c.index=u,!1)});return Yp(o.added,s.map(function(l){l[0];var u=l[1];return u}))}function cn(e,t,r,n,a,i){var o=nv(e,t,r),s=t.filter(function(u,f){return u._update(n,r[f],a,i)}),l=Oi(e);return l&&o.reverse().forEach(function(u){var f=t[u],c=jr(f.base);if(c&&l!==c&&!c.parentNode){var d=rv(e,f);l.insertBefore(c,d)}}),s.length>0}function Ln(e,t,r){r===void 0&&(r=t.__REACT_COMPAT__);var n=!!r;return r||(r=new al(t)),ev(r,e?[e]:[]),n||(t.__REACT_COMPAT__=r),r}function Xo(e,t,r){var n=t.__REACT_COMPAT__;e&&!n&&(t.innerHTML=""),Ln(e,t,n)}function av(e,t){return pe(tv,{element:e,container:t})}var iv="simple-1.1.0";function zi(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n],n))return!0;return!1}function il(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n],n))return e[n];return null}function ol(e){var t=e;if(typeof t>"u"){if(typeof navigator>"u"||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function Li(e,t){try{return new RegExp(e,"g").exec(t)}catch{return null}}function ov(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var e=navigator.userAgentData,t=e.brands||e.uaList;return!!(t&&t.length)}function sv(e,t){var r=Li("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))",t);return r?r[3]:""}function ja(e){return e.replace(/_/g,".")}function Or(e,t){var r=null,n="-1";return zi(e,function(a){var i=Li("("+a.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",t);return!i||a.brand?!1:(r=a,n=i[3]||"-1",a.versionAlias?n=a.versionAlias:a.versionTest&&(n=sv(a.versionTest.toLowerCase(),t)||n),n=ja(n),!0)}),{preset:r,version:n}}function yn(e,t){var r={brand:"",version:"-1"};return zi(e,function(n){var a=sl(t,n);return a?(r.brand=n.id,r.version=n.versionAlias||a.version,r.version!=="-1"):!1}),r}function sl(e,t){return il(e,function(r){var n=r.brand;return Li(""+t.test,n.toLowerCase())})}var ll=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],ul=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Ua=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],cl=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],fl=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function dl(e){return!!Or(cl,e).preset}function lv(e){var t=ol(e),r=!!/mobi/g.exec(t),n={name:"unknown",version:"-1",majorVersion:-1,webview:dl(t),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},a={name:"unknown",version:"-1",majorVersion:-1},i=Or(ll,t),o=i.preset,s=i.version,l=Or(fl,t),u=l.preset,f=l.version,c=Or(ul,t);if(n.chromium=!!c.preset,n.chromiumVersion=c.version,!n.chromium){var d=Or(Ua,t);n.webkit=!!d.preset,n.webkitVersion=d.version}return u&&(a.name=u.id,a.version=f,a.majorVersion=parseInt(f,10)),o&&(n.name=o.id,n.version=s,n.webview&&a.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:a,isMobile:r,isHints:!1}}function uv(e){var t=navigator.userAgentData,r=(t.uaList||t.brands).slice(),n=t.mobile||!1,a=r[0],i=(t.platform||navigator.platform).toLowerCase(),o={name:a.brand,version:a.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!yn(cl,r).brand||dl(ol())},s={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&zi(Ua,function(d){return sl(r,d)});var l=yn(ul,r);if(o.chromium=!!l.brand,o.chromiumVersion=l.version||"-1",!o.chromium){var u=yn(Ua,r);o.webkit=!!u.brand,o.webkitVersion=u.version||"-1"}var f=il(fl,function(d){return new RegExp(""+d.test,"g").exec(i)});s.name=f?f.id:"";{var c=yn(ll,r);o.name=c.brand||o.name,o.version=c.brand&&e?e.uaFullVersion:c.version}return o.webkit&&(s.name=n?"ios":"mac"),s.name==="ios"&&o.webview&&(o.version="-1"),s.version=ja(s.version),o.version=ja(o.version),s.majorVersion=parseInt(s.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:s,isMobile:n,isHints:!0}}function cv(e){return ov()?uv():lv(e)}function fv(e,t,r,n,a,i){for(var o=0;o<a;++o){var s=r+o*a,l=n+o*a;e[s]+=e[l]*i,t[s]+=t[l]*i}}function dv(e,t,r,n,a){for(var i=0;i<a;++i){var o=r+i*a,s=n+i*a,l=e[o],u=t[o];e[o]=e[s],e[s]=l,t[o]=t[s],t[s]=u}}function pv(e,t,r,n,a){for(var i=0;i<n;++i){var o=r+i*n;e[o]/=a,t[o]/=a}}function pl(e,t,r){for(var n=e.slice(),a=0;a<r;++a)n[a*r+t-1]=0,n[(t-1)*r+a]=0;return n[(t-1)*(r+1)]=1,n}function we(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=e.slice(),n=Rt(t),a=0;a<t;++a){var i=t*a+a;if(!ut(r[i],zt)){for(var o=a+1;o<t;++o)if(r[t*a+o]){dv(r,n,a,o,t);break}}if(!ut(r[i],zt))return[];pv(r,n,a,t,r[i]);for(var o=0;o<t;++o){var s=o,l=o+a*t,u=r[l];!ut(u,zt)||a===o||fv(r,n,s,a,t,-u)}}return n}function vv(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],n=0;n<t;++n)for(var a=0;a<t;++a)r[a*t+n]=e[t*n+a];return r}function vl(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],n=e[t*t-1],a=0;a<t-1;++a)r[a]=e[t*(t-1)+a]/n;return r[t-1]=0,r}function hv(e,t){for(var r=Rt(t),n=0;n<t-1;++n)r[t*(t-1)+n]=e[n]||0;return r}function ar(e,t){for(var r=e.slice(),n=e.length;n<t-1;++n)r[n]=0;return r[t-1]=1,r}function Ee(e,t,r){if(t===void 0&&(t=Math.sqrt(e.length)),t===r)return e;for(var n=Rt(r),a=Math.min(t,r),i=0;i<a-1;++i){for(var o=0;o<a-1;++o)n[i*r+o]=e[i*t+o];n[(i+1)*r-1]=e[(i+1)*t-1],n[(r-1)*r+i]=e[(t-1)*t+i]}return n[r*r-1]=e[t*t-1],n}function qa(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Rt(e);return t.forEach(function(a){n=Et(n,a,e)}),n}function Et(e,t,r){r===void 0&&(r=Math.sqrt(e.length));var n=[],a=e.length/r,i=t.length/a;if(a){if(!i)return e}else return t;for(var o=0;o<r;++o)for(var s=0;s<i;++s){n[s*r+o]=0;for(var l=0;l<a;++l)n[s*r+o]+=e[l*r+o]*t[s*a+l]}return n}function bt(e,t){for(var r=Math.min(e.length,t.length),n=e.slice(),a=0;a<r;++a)n[a]=n[a]+t[a];return n}function at(e,t){for(var r=Math.min(e.length,t.length),n=e.slice(),a=0;a<r;++a)n[a]=n[a]-t[a];return n}function gv(e,t){return t===void 0&&(t=e.length===6),t?[e[0],e[1],0,e[2],e[3],0,e[4],e[5],1]:e}function hl(e,t){return t===void 0&&(t=e.length===9),t?[e[0],e[1],e[3],e[4],e[6],e[7]]:e}function Yt(e,t,r){r===void 0&&(r=t.length);var n=Et(e,t,r),a=n[r-1];return n.map(function(i){return i/a})}function mv(e,t){return Et(e,[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1],4)}function bv(e,t){return Et(e,[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1],4)}function yv(e,t){return Et(e,xr(t,4))}function xn(e,t){var r=t[0],n=r===void 0?1:r,a=t[1],i=a===void 0?1:a,o=t[2],s=o===void 0?1:o;return Et(e,[n,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1],4)}function fn(e,t){return Yt(xr(t,3),ar(e,3))}function Da(e,t){var r=t[0],n=r===void 0?0:r,a=t[1],i=a===void 0?0:a,o=t[2],s=o===void 0?0:o;return Et(e,[1,0,0,0,0,1,0,0,0,0,1,0,n,i,s,1],4)}function Yo(e,t){return Et(e,t,4)}function xr(e,t){var r=Math.cos(e),n=Math.sin(e),a=Rt(t);return a[0]=r,a[1]=n,a[t]=-n,a[t+1]=r,a}function Rt(e){for(var t=e*e,r=[],n=0;n<t;++n)r[n]=n%(e+1)?0:1;return r}function $i(e,t){for(var r=Rt(t),n=Math.min(e.length,t-1),a=0;a<n;++a)r[(t+1)*a]=e[a];return r}function Ur(e,t){for(var r=Rt(t),n=Math.min(e.length,t-1),a=0;a<n;++a)r[t*(t-1)+a]=e[a];return r}function Fi(e,t,r,n,a,i,o,s){var l=e[0],u=e[1],f=t[0],c=t[1],d=r[0],p=r[1],v=n[0],h=n[1],g=a[0],m=a[1],y=i[0],b=i[1],x=o[0],_=o[1],S=s[0],C=s[1],M=[l,0,f,0,d,0,v,0,u,0,c,0,p,0,h,0,1,0,1,0,1,0,1,0,0,l,0,f,0,d,0,v,0,u,0,c,0,p,0,h,0,1,0,1,0,1,0,1,-g*l,-m*l,-y*f,-b*f,-x*d,-_*d,-S*v,-C*v,-g*u,-m*u,-y*c,-b*c,-x*p,-_*p,-S*h,-C*h],k=we(M,8);if(!k.length)return[];var E=Et(k,[g,m,y,b,x,_,S,C],8);return E[8]=1,Ee(vv(E),3,4)}var Fr=function(){return Fr=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Fr.apply(this,arguments)};function xv(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Gi(e,t){return t===void 0&&(t=0),pr(Ze(e,t))}function _v(e,t){var r=Yt(e,[t[0],t[1]||0,t[2]||0,1],4),n=r[3]||1;return[r[0]/n,r[1]/n,r[2]/n]}function pr(e){var t=xv();return e.forEach(function(r){var n=r.matrixFunction,a=r.functionValue;n&&(t=n(t,a))}),t}function Ze(e,t){t===void 0&&(t=0);var r=Lt(e)?e:Ne(e);return r.map(function(n){var a=Zs(n),i=a.prefix,o=a.value,s=null,l=i,u="";if(i==="translate"||i==="translateX"||i==="translate3d"){var f=Se(t)?Fr(Fr({},t),{"o%":t["%"]}):{"%":t,"o%":t},c=er(o).map(function(P,I){return I===0&&"x%"in f?f["%"]=t["x%"]:I===1&&"y%"in f?f["%"]=t["y%"]:f["%"]=t["o%"],kt(P,f)}),d=c[0],p=c[1],v=p===void 0?0:p,h=c[2],g=h===void 0?0:h;s=Da,u=[d,v,g]}else if(i==="translateY"){var m=Se(t)?Fr({"%":t["y%"]},t):{"%":t},v=kt(o,m);s=Da,u=[0,v,0]}else if(i==="translateZ"){var g=parseFloat(o);s=Da,u=[0,0,g]}else if(i==="scale"||i==="scale3d"){var y=er(o).map(function(P){return parseFloat(P)}),b=y[0],x=y[1],_=x===void 0?b:x,S=y[2],C=S===void 0?1:S;s=xn,u=[b,_,C]}else if(i==="scaleX"){var b=parseFloat(o);s=xn,u=[b,1,1]}else if(i==="scaleY"){var _=parseFloat(o);s=xn,u=[1,_,1]}else if(i==="scaleZ"){var C=parseFloat(o);s=xn,u=[1,1,C]}else if(i==="rotate"||i==="rotateZ"||i==="rotateX"||i==="rotateY"){var M=ln(o),k=M.unit,E=M.value,R=k==="rad"?E:E*Math.PI/180;i==="rotate"||i==="rotateZ"?(l="rotateZ",s=yv):i==="rotateX"?s=mv:i==="rotateY"&&(s=bv),u=R}else if(i==="matrix3d")s=Yo,u=er(o).map(function(P){return parseFloat(P)});else if(i==="matrix"){var D=er(o).map(function(P){return parseFloat(P)});s=Yo,u=[D[0],D[1],0,0,D[2],D[3],0,0,0,0,1,0,D[4],D[5],0,1]}else l="";return{name:i,functionName:l,value:o,matrixFunction:s,functionValue:u}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ka=function(e,t){return Ka=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a])},Ka(e,t)};function Sv(e,t){Ka(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var gl=typeof Map=="function"?void 0:function(){var e=0;return function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++e)}}(),ml=function(e){Sv(t,e);function t(r){return r===void 0&&(r=[]),e.call(this,r,gl)||this}return t}(Tp);function Cv(e,t){return on(e,t,gl)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function wv(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}function ae(e){return ut(e,zt)}function Ev(e,t){return e.every(function(r,n){return ae(r-t[n])===0})}function kv(e,t){return!ae(e[0]-t[0])&&!ae(e[1]-t[1])}function bl(e){return e.length<3?0:Math.abs(Vp(e.map(function(t,r){var n=e[r+1]||e[0];return t[0]*n[1]-n[0]*t[1]})))/2}function jo(e,t){var r=t.width,n=t.height,a=t.left,i=t.top,o=Ve(e),s=o.minX,l=o.minY,u=o.maxX,f=o.maxY,c=r/(u-s),d=n/(f-l);return e.map(function(p){return[a+(p[0]-s)*c,i+(p[1]-l)*d]})}function Ve(e){var t=e.map(function(n){return n[0]}),r=e.map(function(n){return n[1]});return{minX:Math.min.apply(Math,t),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,t),maxY:Math.max.apply(Math,r)}}function Za(e,t,r){var n=e[0],a=e[1],i=Ve(t),o=i.minX,s=i.maxX,l=[[o,a],[s,a]],u=Nn(l[0],l[1]),f=Ja(t),c=[];if(f.forEach(function(v){var h=Nn(v[0],v[1]),g=v[0];if(Ev(u,h))c.push({pos:e,line:v,type:"line"});else{var m=yl(Ni(u,h),[l,v]);m.forEach(function(y){v.some(function(b){return kv(b,y)})?c.push({pos:y,line:v,type:"point"}):ae(g[1]-a)!==0&&c.push({pos:y,line:v,type:"intersection"})})}}),Re(c,function(v){return v[0]===n}))return!0;var d=0,p={};return c.forEach(function(v){var h=v.pos,g=v.type,m=v.line;if(!(h[0]>n))if(g==="intersection")++d;else{if(g==="line")return;if(g==="point"){var y=Re(m,function(_){return _[1]!==a}),b=p[h[0]],x=y[1]>a?1:-1;b?b!==x&&++d:p[h[0]]=x}}}),d%2===1}function Nn(e,t){var r=e[0],n=e[1],a=t[0],i=t[1],o=a-r,s=i-n;Math.abs(o)<zt&&(o=0),Math.abs(s)<zt&&(s=0);var l=0,u=0,f=0;return o?s?(l=-s/o,u=1,f=-l*r-n):(u=1,f=-n):s&&(l=-1,f=r),[l,u,f]}function Ni(e,t){var r=e[0],n=e[1],a=e[2],i=t[0],o=t[1],s=t[2],l=r===0&&i===0,u=n===0&&o===0,f=[];if(l&&u)return[];if(l){var c=-a/n,d=-s/o;return c!==d?[]:[[-1/0,c],[1/0,c]]}else if(u){var p=-a/r,v=-s/i;return p!==v?[]:[[p,-1/0],[p,1/0]]}else if(r===0){var h=-a/n,g=-(o*h+s)/i;f=[[g,h]]}else if(i===0){var h=-s/o,g=-(n*h+a)/r;f=[[g,h]]}else if(n===0){var g=-a/r,h=-(i*g+s)/o;f=[[g,h]]}else if(o===0){var g=-s/i,h=-(r*g+a)/n;f=[[g,h]]}else{var g=(n*s-o*a)/(o*r-n*i),h=-(r*g+a)/n;f=[[g,h]]}return f.map(function(m){return[m[0],m[1]]})}function yl(e,t){var r=t.map(function(c){return[0,1].map(function(d){return[Math.min(c[0][d],c[1][d]),Math.max(c[0][d],c[1][d])]})}),n=[];if(e.length===2){var a=e[0],i=a[0],o=a[1];if(ae(i-e[1][0])){if(!ae(o-e[1][1])){var u=Math.max.apply(Math,r.map(function(c){return c[0][0]})),f=Math.min.apply(Math,r.map(function(c){return c[0][1]}));if(ae(u-f)>0)return[];n=[[u,o],[f,o]]}}else{var s=Math.max.apply(Math,r.map(function(c){return c[1][0]})),l=Math.min.apply(Math,r.map(function(c){return c[1][1]}));if(ae(s-l)>0)return[];n=[[i,s],[i,l]]}}return n.length||(n=e.filter(function(c){var d=c[0],p=c[1];return r.every(function(v){return 0<=ae(d-v[0][0])&&0<=ae(v[0][1]-d)&&0<=ae(p-v[1][0])&&0<=ae(v[1][1]-p)})})),n.map(function(c){return[ae(c[0]),ae(c[1])]})}function Ja(e){return wv(e.slice(1),[e[0]]).map(function(t,r){return[e[r],t]})}function Dv(e,t){var r=e.slice(),n=t.slice();Ha(r)===-1&&r.reverse(),Ha(n)===-1&&n.reverse();var a=Ja(r),i=Ja(n),o=a.map(function(f){return Nn(f[0],f[1])}),s=i.map(function(f){return Nn(f[0],f[1])}),l=[];o.forEach(function(f,c){var d=a[c],p=[];s.forEach(function(v,h){var g=Ni(f,v),m=yl(g,[d,i[h]]);p.push.apply(p,m.map(function(y){return{index1:c,index2:h,pos:y,type:"intersection"}}))}),p.sort(function(v,h){return me(d[0],v.pos)-me(d[0],h.pos)}),l.push.apply(l,p),Za(d[1],n)&&l.push({index1:c,index2:-1,pos:d[1],type:"inside"})}),i.forEach(function(f,c){if(Za(f[1],r)){var d=!1,p=Te(l,function(v){var h=v.index2;return h===c?(d=!0,!1):!!d});p===-1&&(d=!1,p=Te(l,function(v){var h=v.index1,g=v.index2;return h===-1&&g+1===c?(d=!0,!1):!!d})),p===-1?l.push({index1:-1,index2:c,pos:f[1],type:"inside"}):l.splice(p,0,{index1:-1,index2:c,pos:f[1],type:"inside"})}});var u={};return l.filter(function(f){var c=f.pos,d=c[0]+"x"+c[1];return u[d]?!1:(u[d]=!0,!0)})}function Mv(e,t){var r=Dv(e,t);return r.map(function(n){var a=n.pos;return a})}function Tv(e,t){var r=Mv(e,t);return bl(r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Qa=function(){return Qa=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Qa.apply(this,arguments)};function Rv(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}var aa=function(){function e(){this._events={}}var t=e.prototype;return t.on=function(r,n){if(Se(r))for(var a in r)this.on(a,r[a]);else this._addEvent(r,n,{});return this},t.off=function(r,n){if(!r)this._events={};else if(Se(r))for(var a in r)this.off(a);else if(!n)this._events[r]=[];else{var i=this._events[r];if(i){var o=Te(i,function(s){return s.listener===n});o>-1&&i.splice(o,1)}}return this},t.once=function(r,n){var a=this;return n&&this._addEvent(r,n,{once:!0}),new Promise(function(i){a._addEvent(r,i,{once:!0})})},t.emit=function(r,n){var a=this;n===void 0&&(n={});var i=this._events[r];if(!r||!i)return!0;var o=!1;return n.eventType=r,n.stop=function(){o=!0},n.currentTarget=this,Rv(i).forEach(function(s){s.listener(n),s.once&&a.off(r,s.listener)}),!o},t.trigger=function(r,n){return n===void 0&&(n={}),this.emit(r,n)},t._addEvent=function(r,n,a){var i=this._events;i[r]=i[r]||[];var o=i[r];o.push(Qa({listener:n},a))},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ti=function(e,t){return ti=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a])},ti(e,t)};function Pv(e,t){ti(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var hr=function(){return hr=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},hr.apply(this,arguments)};function Iv(e){var t=e.container;return t===document.body?[t.scrollLeft||document.documentElement.scrollLeft,t.scrollTop||document.documentElement.scrollTop]:[t.scrollLeft,t.scrollTop]}function Uo(e,t){return e.addEventListener("scroll",t),function(){e.removeEventListener("scroll",t)}}function _n(e){if(e){if(ue(e))return document.querySelector(e)}else return null;if(Ti(e))return e();if(e instanceof Element)return e;if("current"in e)return e.current;if("value"in e)return e.value}var Ov=function(e){Pv(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n._currentOptions=null,n._lock=!1,n._unregister=null,n._onScroll=function(){var a=n._currentOptions;n._lock||!a||n.emit("scrollDrag",{next:function(i){n.checkScroll({container:a.container,inputEvent:i})}})},n}var r=t.prototype;return r.dragStart=function(n,a){var i=_n(a.container);if(!i){this._flag=!1;return}var o=0,s=0,l=0,u=0;if(i===document.body)l=window.innerWidth,u=window.innerHeight;else{var f=i.getBoundingClientRect();o=f.top,s=f.left,l=f.width,u=f.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:o,left:s,width:l,height:u},this._prevScrollPos=this._getScrollPosition([0,0],a),this._currentOptions=a,this._registerScrollEvent(a)},r.drag=function(n,a){if(clearTimeout(this._timer),!!this._flag){var i=n.clientX,o=n.clientY,s=a.threshold,l=s===void 0?0:s,u=this,f=u._startRect,c=u._startPos;this._currentOptions=a;var d=[0,0];return f.top>o-l?(c[1]>f.top||o<c[1])&&(d[1]=-1):f.top+f.height<o+l&&(c[1]<f.top+f.height||o>c[1])&&(d[1]=1),f.left>i-l?(c[0]>f.left||i<c[0])&&(d[0]=-1):f.left+f.width<i+l&&(c[0]<f.left+f.width||i>c[0])&&(d[0]=1),!d[0]&&!d[1]?!1:this._continueDrag(hr(hr({},a),{direction:d,inputEvent:n,isDrag:!0}))}},r.checkScroll=function(n){var a=this;if(this._isWait)return!1;var i=n.prevScrollPos,o=i===void 0?this._prevScrollPos:i,s=n.direction,l=n.throttleTime,u=l===void 0?0:l,f=n.inputEvent,c=n.isDrag,d=this._getScrollPosition(s||[0,0],n),p=d[0]-o[0],v=d[1]-o[1],h=s||[p?Math.abs(p)/p:0,v?Math.abs(v)/v:0];return this._prevScrollPos=d,this._lock=!1,!p&&!v?!1:(this.emit("move",{offsetX:h[0]?p:0,offsetY:h[1]?v:0,inputEvent:f}),u&&c&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(n)},u)),!0)},r.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},r._getScrollPosition=function(n,a){var i=a.container,o=a.getScrollPosition,s=o===void 0?Iv:o;return s({container:_n(i),direction:n})},r._continueDrag=function(n){var a=this,i,o=n.container,s=n.direction,l=n.throttleTime,u=n.useScroll,f=n.isDrag,c=n.inputEvent;if(!(!this._flag||f&&this._isWait)){var d=Yr(),p=Math.max(l+this._prevTime-d,0);if(p>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(n)},p),!1;this._prevTime=d;var v=this._getScrollPosition(s,n);this._prevScrollPos=v,f&&(this._isWait=!0),u||(this._lock=!0);var h={container:_n(o),direction:s,inputEvent:c};return(i=n.requestScroll)===null||i===void 0||i.call(n,h),this.emit("scroll",h),this._isWait=!1,u||this.checkScroll(hr(hr({},n),{prevScrollPos:v,direction:s,inputEvent:c}))}},r._registerScrollEvent=function(n){this._unregisterScrollEvent();var a=n.checkScrollEvent;if(a){var i=a===!0?Uo:a,o=_n(n.container);a===!0&&(o===document.body||o===document.documentElement)?this._unregister=Uo(window,this._onScroll):this._unregister=i(o,this._onScroll)}},r._unregisterScrollEvent=function(){var n;(n=this._unregister)===null||n===void 0||n.call(this),this._unregister=null},t}(aa);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ei=function(e,t){return ei=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a])},ei(e,t)};function Bv(e,t){ei(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var At=function(){return At=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},At.apply(this,arguments)};function Av(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=Math.atan2(n,r);return a>=0?a:a+Math.PI*2}function Ma(e){return Av([e[0].clientX,e[0].clientY],[e[1].clientX,e[1].clientY])/Math.PI*180}function zv(e){return e.touches&&e.touches.length>=2}function Sn(e){return e?e.touches?$v(e.touches):[xl(e)]:[]}function Lv(e){return e&&(e.type.indexOf("mouse")>-1||"button"in e)}function qo(e,t,r){var n=r.length,a=Gr(e,n),i=a.clientX,o=a.clientY,s=a.originalClientX,l=a.originalClientY,u=Gr(t,n),f=u.clientX,c=u.clientY,d=Gr(r,n),p=d.clientX,v=d.clientY,h=i-f,g=o-c,m=i-p,y=o-v;return{clientX:s,clientY:l,deltaX:h,deltaY:g,distX:m,distY:y}}function Ta(e){return Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2))}function $v(e){for(var t=Math.min(e.length,2),r=[],n=0;n<t;++n)r.push(xl(e[n]));return r}function xl(e){return{clientX:e.clientX,clientY:e.clientY}}function Gr(e,t){t===void 0&&(t=e.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(e.length,t),a=0;a<n;++a){var i=e[a];r.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,r.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,r.clientX+=i.clientX,r.clientY+=i.clientY}return t?{clientX:r.clientX/t,clientY:r.clientY/t,originalClientX:r.originalClientX/t,originalClientY:r.originalClientY/t}:r}var Ra=function(){function e(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return e.prototype.getAngle=function(t){return t===void 0&&(t=this.prevClients),Ma(t)},e.prototype.getRotation=function(t){return t===void 0&&(t=this.prevClients),Ma(t)-Ma(this.startClients)},e.prototype.getPosition=function(t,r){t===void 0&&(t=this.prevClients);var n=qo(t||this.prevClients,this.prevClients,this.startClients),a=n.deltaX,i=n.deltaY;return this.movement+=Math.sqrt(a*a+i*i),this.prevClients=t,n},e.prototype.getPositions=function(t){t===void 0&&(t=this.prevClients);for(var r=this.prevClients,n=this.startClients,a=Math.min(this.length,r.length),i=[],o=0;o<a;++o)i[o]=qo([t[o]],[r[o]],[n[o]]);return i},e.prototype.getMovement=function(t){var r=this.movement;if(!t)return r;var n=Gr(t,this.length),a=Gr(this.prevClients,this.length),i=n.clientX-a.clientX,o=n.clientY-a.clientY;return Math.sqrt(i*i+o*o)+r},e.prototype.getDistance=function(t){return t===void 0&&(t=this.prevClients),Ta(t)},e.prototype.getScale=function(t){return t===void 0&&(t=this.prevClients),Ta(t)/Ta(this.startClients)},e.prototype.move=function(t,r){this.startClients.forEach(function(n){n.clientX-=t,n.clientY-=r}),this.prevClients.forEach(function(n){n.clientX-=t,n.clientY-=r})},e}(),Ko=["textarea","input"],Fv=function(e){Bv(t,e);function t(r,n){n===void 0&&(n={});var a=e.call(this)||this;a.options={},a.flag=!1,a.pinchFlag=!1,a.data={},a.isDrag=!1,a.isPinch=!1,a.clientStores=[],a.targets=[],a.prevTime=0,a.doubleFlag=!1,a._useMouse=!1,a._useTouch=!1,a._useDrag=!1,a._dragFlag=!1,a._isTrusted=!1,a._isMouseEvent=!1,a._isSecondaryButton=!1,a._preventMouseEvent=!1,a._prevInputEvent=null,a._isDragAPI=!1,a._isIdle=!0,a._preventMouseEventId=0,a._window=window,a.onDragStart=function(d,p){if(p===void 0&&(p=!0),!(!a.flag&&d.cancelable===!1)){var v=d.type.indexOf("drag")>=-1;if(!(a.flag&&v)){a._isDragAPI=!0;var h=a.options,g=h.container,m=h.pinchOutside,y=h.preventWheelClick,b=h.preventRightClick,x=h.preventDefault,_=h.checkInput,S=h.dragFocusedInput,C=h.preventClickEventOnDragStart,M=h.preventClickEventOnDrag,k=h.preventClickEventByCondition,E=a._useTouch,R=!a.flag;if(a._isSecondaryButton=d.which===3||d.button===2,y&&(d.which===2||d.button===1)||b&&(d.which===3||d.button===2))return a.stop(),!1;if(R){var D=a._window.document.activeElement,P=d.target;if(P){var I=P.tagName.toLowerCase(),B=Ko.indexOf(I)>-1,V=P.isContentEditable;if(B||V){if(_||!S&&D===P)return!1;if(D&&(D===P||V&&D.isContentEditable&&D.contains(P)))if(S)P.blur();else return!1}else if((x||d.type==="touchstart")&&D){var K=D.tagName.toLowerCase();(D.isContentEditable||Ko.indexOf(K)>-1)&&D.blur()}(C||M||k)&&jt(a._window,"click",a._onClick,!0)}a.clientStores=[new Ra(Sn(d))],a._isIdle=!1,a.flag=!0,a.isDrag=!1,a._isTrusted=p,a._dragFlag=!0,a._prevInputEvent=d,a.data={},a.doubleFlag=Yr()-a.prevTime<200,a._isMouseEvent=Lv(d),!a._isMouseEvent&&a._preventMouseEvent&&a._allowMouseEvent();var X=a._preventMouseEvent||a.emit("dragStart",At(At({data:a.data,datas:a.data,inputEvent:d,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,isTrusted:p,isDouble:a.doubleFlag},a.getCurrentStore().getPosition()),{preventDefault:function(){d.preventDefault()},preventDrag:function(){a._dragFlag=!1}}));X===!1&&a.stop(),a._isMouseEvent&&a.flag&&x&&d.preventDefault()}if(!a.flag)return!1;var H=0;if(R?(a._attchDragEvent(),E&&m&&(H=setTimeout(function(){jt(g,"touchstart",a.onDragStart,{passive:!1})}))):E&&m&&Xt(g,"touchstart",a.onDragStart),a.flag&&zv(d)){if(clearTimeout(H),R&&d.touches.length!==d.changedTouches.length)return;a.pinchFlag||a.onPinchStart(d)}}}},a.onDrag=function(d,p){if(a.flag){var v=a.options.preventDefault;!a._isMouseEvent&&v&&d.preventDefault(),a._prevInputEvent=d;var h=Sn(d),g=a.moveClients(h,d,!1);if(a._dragFlag){if(a.pinchFlag||g.deltaX||g.deltaY){var m=a._preventMouseEvent||a.emit("drag",At(At({},g),{isScroll:!!p,inputEvent:d}));if(m===!1){a.stop();return}}a.pinchFlag&&a.onPinch(d,h)}a.getCurrentStore().getPosition(h,!0)}},a.onDragEnd=function(d){if(a.flag){var p=a.options,v=p.pinchOutside,h=p.container,g=p.preventClickEventOnDrag,m=p.preventClickEventOnDragStart,y=p.preventClickEventByCondition,b=a.isDrag;(g||m||y)&&requestAnimationFrame(function(){a._allowClickEvent()}),!y&&!m&&g&&!b&&a._allowClickEvent(),a._useTouch&&v&&Xt(h,"touchstart",a.onDragStart),a.pinchFlag&&a.onPinchEnd(d);var x=d!=null&&d.touches?Sn(d):[],_=x.length;_===0||!a.options.keepDragging?a.flag=!1:a._addStore(new Ra(x));var S=a._getPosition(),C=Yr(),M=!b&&a.doubleFlag;a._prevInputEvent=null,a.prevTime=b||M?0:C,a.flag||(a._dettachDragEvent(),a._preventMouseEvent||a.emit("dragEnd",At({data:a.data,datas:a.data,isDouble:M,isDrag:b,isClick:!b,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,inputEvent:d,isTrusted:a._isTrusted},S)),a.clientStores=[],a._isMouseEvent||(a._preventMouseEvent=!0,clearTimeout(a._preventMouseEventId),a._preventMouseEventId=setTimeout(function(){a._preventMouseEvent=!1},200)),a._isIdle=!0)}},a.onBlur=function(){a.onDragEnd()},a._allowClickEvent=function(){Xt(a._window,"click",a._onClick,!0)},a._onClick=function(d){a._allowClickEvent(),a._allowMouseEvent();var p=a.options.preventClickEventByCondition;p!=null&&p(d)||(d.stopPropagation(),d.preventDefault())},a._onContextMenu=function(d){var p=a.options;p.preventRightClick?a.onDragEnd(d):d.preventDefault()},a._passCallback=function(){};var i=[].concat(r),o=i[0];a._window=Xp(o)?o:Ea(o),a.options=At({checkInput:!1,container:o&&!("document"in o)?Ea(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var s=a.options,l=s.container,u=s.events,f=s.checkWindowBlur;if(a._useDrag=u.indexOf("drag")>-1,a._useTouch=u.indexOf("touch")>-1,a._useMouse=u.indexOf("mouse")>-1,a.targets=i,a._useDrag&&i.forEach(function(d){jt(d,"dragstart",a.onDragStart)}),a._useMouse&&(i.forEach(function(d){jt(d,"mousedown",a.onDragStart),jt(d,"mousemove",a._passCallback)}),jt(l,"contextmenu",a._onContextMenu)),f&&jt(Ea(),"blur",a.onBlur),a._useTouch){var c={passive:!1};i.forEach(function(d){jt(d,"touchstart",a.onDragStart,c),jt(d,"touchmove",a._passCallback,c)})}return a}return t.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},t.prototype.getMovement=function(r){return this.getCurrentStore().getMovement(r)+this.clientStores.slice(1).reduce(function(n,a){return n+a.movement},0)},t.prototype.isDragging=function(){return this.isDrag},t.prototype.isIdle=function(){return this._isIdle},t.prototype.isFlag=function(){return this.flag},t.prototype.isPinchFlag=function(){return this.pinchFlag},t.prototype.isDoubleFlag=function(){return this.doubleFlag},t.prototype.isPinching=function(){return this.isPinch},t.prototype.scrollBy=function(r,n,a,i){i===void 0&&(i=!0),this.flag&&(this.clientStores[0].move(r,n),i&&this.onDrag(a,!0))},t.prototype.move=function(r,n){var a=r[0],i=r[1],o=this.getCurrentStore(),s=o.prevClients;return this.moveClients(s.map(function(l){var u=l.clientX,f=l.clientY;return{clientX:u+a,clientY:f+i,originalClientX:u,originalClientY:f}}),n,!0)},t.prototype.triggerDragStart=function(r){this.onDragStart(r,!1)},t.prototype.setEventData=function(r){var n=this.data;for(var a in r)n[a]=r[a];return this},t.prototype.setEventDatas=function(r){return this.setEventData(r)},t.prototype.getCurrentEvent=function(r){return r===void 0&&(r=this._prevInputEvent),At(At({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},t.prototype.getEventData=function(){return this.data},t.prototype.getEventDatas=function(){return this.data},t.prototype.unset=function(){var r=this,n=this.targets,a=this.options.container;this.off(),Xt(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(i){Xt(i,"dragstart",r.onDragStart)}),this._useMouse&&(n.forEach(function(i){Xt(i,"mousedown",r.onDragStart)}),Xt(a,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(i){Xt(i,"touchstart",r.onDragStart)}),Xt(a,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},t.prototype.onPinchStart=function(r){var n=this,a=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>a)){var i=new Ra(Sn(r));this.pinchFlag=!0,this._addStore(i);var o=this.emit("pinchStart",At(At({data:this.data,datas:this.data,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition()),{inputEvent:r,isTrusted:this._isTrusted,preventDefault:function(){r.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},t.prototype.onPinch=function(r,n){if(!(!this.flag||!this.pinchFlag||n.length<2)){var a=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",At(At({data:this.data,datas:this.data,movement:this.getMovement(n),angle:a.getAngle(n),rotation:a.getRotation(n),touches:a.getPositions(n),scale:a.getScale(n),distance:a.getDistance(n)},a.getPosition(n)),{inputEvent:r,isTrusted:this._isTrusted}))}},t.prototype.onPinchEnd=function(r){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var a=this.getCurrentStore();this.emit("pinchEnd",At(At({data:this.data,datas:this.data,isPinch:n,touches:a.getPositions()},a.getPosition()),{inputEvent:r}))}},t.prototype.getCurrentStore=function(){return this.clientStores[0]},t.prototype.moveClients=function(r,n,a){var i=this._getPosition(r,a),o=this.isDrag;(i.deltaX||i.deltaY)&&(this.isDrag=!0);var s=!1;return!o&&this.isDrag&&(s=!0),At(At({data:this.data,datas:this.data},i),{movement:this.getMovement(r),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:s})},t.prototype._addStore=function(r){this.clientStores.splice(0,0,r)},t.prototype._getPosition=function(r,n){var a=this.getCurrentStore(),i=a.getPosition(r,n),o=this.clientStores.slice(1).reduce(function(u,f){var c=f.getPosition();return u.distX+=c.distX,u.distY+=c.distY,u},i),s=o.distX,l=o.distY;return At(At({},i),{distX:s,distY:l})},t.prototype._attchDragEvent=function(){var r=this._window,n=this.options.container,a={passive:!1};this._isDragAPI&&(jt(n,"dragover",this.onDrag,a),jt(r,"dragend",this.onDragEnd)),this._useMouse&&(jt(n,"mousemove",this.onDrag),jt(r,"mouseup",this.onDragEnd)),this._useTouch&&(jt(n,"touchmove",this.onDrag,a),jt(r,"touchend",this.onDragEnd,a),jt(r,"touchcancel",this.onDragEnd,a))},t.prototype._dettachDragEvent=function(){var r=this._window,n=this.options.container;this._isDragAPI&&(Xt(n,"dragover",this.onDrag),Xt(r,"dragend",this.onDragEnd)),this._useMouse&&(Xt(n,"mousemove",this.onDrag),Xt(r,"mouseup",this.onDragEnd)),this._useTouch&&(Xt(n,"touchstart",this.onDragStart),Xt(n,"touchmove",this.onDrag),Xt(r,"touchend",this.onDragEnd),Xt(r,"touchcancel",this.onDragEnd))},t.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},t}(aa);function Gv(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}var Nv=Gv;function Vv(e){return Nv(e).toString(36)}function Wv(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function Hv(e,t,r){return r.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,a){var i=a.trim();return(i?er(i):[""]).map(function(o){var s=o.trim();return s.indexOf("@")===0?s:s.indexOf(":global")>-1?s.replace(/\:global/g,""):s.indexOf(":host")>-1?"".concat(s.replace(/\:host/g,".".concat(e))):s?".".concat(e," ").concat(s):".".concat(e)}).join(", ")+" {"})}function Xv(e,t,r,n,a){var i=Hp(n),o=i.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",e),o.setAttribute("data-styled-count","1"),r.nonce&&o.setAttribute("nonce",r.nonce),o.innerHTML=Hv(e,t,r),(a||i.head||i.body).appendChild(o),o}function Yv(e){var t="rCS"+Vv(e);return{className:t,inject:function(r,n){n===void 0&&(n={});var a=Wv(r),i=(a||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(t,'"]'));if(!i)i=Xv(t,e,n,r,a);else{var o=parseFloat(i.getAttribute("data-styled-count"))||0;i.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var s,l=parseFloat(i.getAttribute("data-styled-count"))||0;l<=1?(i.remove?i.remove():(s=i.parentNode)===null||s===void 0||s.removeChild(i),i=null):i.setAttribute("data-styled-count","".concat(l-1))}}}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ri=function(e,t){return ri=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a])},ri(e,t)};function _l(e,t){ri(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ni=function(){return ni=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ni.apply(this,arguments)};function jv(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}var Uv=function(e){_l(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.injectResult=null,n.tag="div",n}var r=t.prototype;return r.render=function(){var n=this.props,a=n.className,i=a===void 0?"":a;n.cspNonce;var o=n.portalContainer,s=jv(n,["className","cspNonce","portalContainer"]),l=this.injector.className,u=this.tag,f={};return iv.indexOf("simple")>-1&&o&&(f={portalContainer:o}),pe(u,ni({ref:Ce(this,"element"),"data-styled-id":l,className:i+" "+l},f,s))},r.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},r.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},r.getElement=function(){return this.element},t}(Bi);function Sl(e,t){var r=Yv(t);return function(n){_l(a,n);function a(){var i=n!==null&&n.apply(this,arguments)||this;return i.injector=r,i.tag=e,i}return a}(Uv)}var ai=function(e,t){return ai=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},ai(e,t)};function dn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ai(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var T=function(){return T=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},T.apply(this,arguments)};function qv(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function Kv(e,t,r,n){var a=arguments.length,i=a<3?t:n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function st(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function pn(e,t){var r;return T({events:{},props:(r={},r[e]=Boolean,r),name:e},t)}function Zv(e,t){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*e,'px" height="').concat(32*e,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(t,'deg);transform-origin: 16px 16px"></path></svg>')}function Jv(e){var t=Zv(1,e),r=Math.round(e/45)*45%180,n="ns-resize";return r===135?n="nwse-resize":r===45?n="nesw-resize":r===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(t,"') 16 16, ").concat(n,";")}var Vn=cv(),Cl=Vn.browser.webkit,wl=Cl&&function(){var e=typeof window>"u"?{userAgent:""}:window.navigator,t=/applewebkit\/([^\s]+)/g.exec(e.userAgent.toLowerCase());return t?parseFloat(t[1])<605:!1}(),Qv=Vn.browser.name==="firefox",th=parseInt(Vn.browser.webkitVersion,10)>=612||parseInt(Vn.browser.version,10)>=15,Vi="moveable-",eh=`
{
	position: absolute;
	width: 1px;
	height: 1px;
	left: 0;
	top: 0;
    z-index: 3000;
    --moveable-color: #4af;
    --zoom: 1;
    --zoompx: 1px;
    will-change: transform;
    outline: 1px solid transparent;
}
.control-box {
    z-index: 0;
}
.line, .control {
    position: absolute;
	left: 0;
    top: 0;
    will-change: transform;
}
.control {
	width: 14px;
	height: 14px;
	border-radius: 50%;
	border: 2px solid #fff;
	box-sizing: border-box;
    background: #4af;
    background: var(--moveable-color);
	margin-top: -7px;
    margin-left: -7px;
    border: 2px solid #fff;
    z-index: 10;
}
.padding {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100px;
    height: 100px;
    transform-origin: 0 0;
}
.line {
	width: 1px;
    height: 1px;
    background: #4af;
    background: var(--moveable-color);
	transform-origin: 0px 50%;
}
.line.edge {
    z-index: 1;
    background: transparent;
}
.line.dashed {
    box-sizing: border-box;
    background: transparent;
}
.line.dashed.horizontal {
    border-top: 1px dashed #4af;
    border-top-color: #4af;
    border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
    border-left: 1px dashed #4af;
    border-left-color: #4af;
    border-left-color: var(--moveable-color);
}
.line.vertical {
    transform: translateX(-50%);
}
.line.horizontal {
    transform: translateY(-50%);
}
.line.vertical.bold {
    width: 2px;
}
.line.horizontal.bold {
    height: 2px;
}

.control.origin {
	border-color: #f55;
	background: #fff;
	width: 12px;
	height: 12px;
	margin-top: -6px;
    margin-left: -6px;
	pointer-events: none;
}
`.concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(e){return`
.direction[data-rotation="`.concat(e,'"], :global .view-control-rotation').concat(e,` {
	`).concat(Jv(e),`
}
`)}).join(`
`),`

.line.direction:before {
    content: "";
    position: absolute;
    width: 100%;
    height: calc(var(--moveable-line-padding, 0) * 1px);
    bottom: 0;
    left: 0;
}
.group {
    z-index: -1;
}
.area {
    position: absolute;
}
.area-pieces {
    position: absolute;
    top: 0;
    left: 0;
    display: none;
}
.area.avoid, .area.pass {
    pointer-events: none;
}
.area.avoid+.area-pieces {
    display: block;
}
.area-piece {
    position: absolute;
}

`).concat(wl?`:global svg *:before {
	content:"";
	transform-origin: inherit;
}`:"",`
`),rh=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],ii=1e-4,re=1e-7,Cn=1e-9,oi=Math.pow(10,10),Zo=-oi,nh=["n","w","s","e"],Wi=["n","w","s","e","nw","ne","sw","se"],ah={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Hi={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},El={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},kl=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag"];function vn(e,t,r,n,a,i){var o,s;i===void 0&&(i="draggable");var l=(s=(o=t.gestos[i])===null||o===void 0?void 0:o.move(r,e.inputEvent))!==null&&s!==void 0?s:{},u=l.originalDatas||l.datas,f=u[i]||(u[i]={});return T(T({},l),{isPinch:!!n,parentEvent:!0,datas:f,originalDatas:e.originalDatas})}var _r=function(){function e(r){var n;r===void 0&&(r="draggable"),this.ableName=r,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[r]={},n)}var t=e.prototype;return t.dragStart=function(r,n){this.isDrag=!1,this.isFlag=!1;var a=n.originalDatas;return this.datas=a,a[this.ableName]||(a[this.ableName]={}),T(T({},this.move(r,n.inputEvent)),{type:"dragstart"})},t.drag=function(r,n){return this.move([r[0]-this.prevX,r[1]-this.prevY],n)},t.move=function(r,n){var a,i,o=!1;if(!this.isFlag)this.prevX=r[0],this.prevY=r[1],this.startX=r[0],this.startY=r[1],a=r[0],i=r[1],this.isFlag=!0;else{var s=this.isDrag;a=this.prevX+r[0],i=this.prevY+r[1],(r[0]||r[1])&&(this.isDrag=!0),!s&&this.isDrag&&(o=!0)}return this.prevX=a,this.prevY=i,{type:"drag",clientX:a,clientY:i,inputEvent:n,isFirstDrag:o,isDrag:this.isDrag,distX:a-this.startX,distY:i-this.startY,deltaX:r[0],deltaY:r[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},e}();function Dl(e,t){var r=t.clientX,n=t.clientY,a=t.datas,i=e.state,o=i.moveableClientRect,s=i.rootMatrix,l=i.is3d,u=i.pos1,f=o.left,c=o.top,d=l?4:3,p=at(nr(s,[r-f,n-c],d),u),v=p[0],h=p[1],g=De({datas:a,distX:v,distY:h}),m=g[0],y=g[1];return[m,y]}function ur(e,t){var r=t.datas,n=e.state,a=n.allMatrix,i=n.beforeMatrix,o=n.is3d,s=n.left,l=n.top,u=n.origin,f=n.offsetMatrix,c=n.targetMatrix,d=n.transformOrigin,p=o?4:3;r.is3d=o,r.matrix=a,r.targetMatrix=c,r.beforeMatrix=i,r.offsetMatrix=f,r.transformOrigin=d,r.inverseMatrix=we(a,p),r.inverseBeforeMatrix=we(i,p),r.absoluteOrigin=ar(bt([s,l],u),p),r.startDragBeforeDist=Yt(r.inverseBeforeMatrix,r.absoluteOrigin,p),r.startDragDist=Yt(r.inverseMatrix,r.absoluteOrigin,p)}function ih(e){return br(e.datas.beforeTransform,[50,50],100,100).direction}function ia(e,t){var r=e.datas,n=e.originalDatas.beforeRenderable,a=r.transformIndex,i=n.nextTransforms,o=i.length,s=n.nextTransformAppendedIndexes,l=0;a===-1?(t==="translate"?l=0:t==="rotate"&&(l=Te(i,function(d){return d.match(/scale\(/g)})),l===-1&&(l=i.length),r.transformIndex=l):Re(s,function(d){return d.index===a&&d.functionName===t})?l=a:l=a+s.filter(function(d){return d.index<a}).length;var u=Ih(i,l),f=u.targetFunction,c=t==="rotate"?"rotateZ":t;r.beforeFunctionTexts=u.beforeFunctionTexts,r.afterFunctionTexts=u.afterFunctionTexts,r.beforeTransform=u.beforeFunctionMatrix,r.beforeTransform2=u.beforeFunctionMatrix2,r.targetTansform=u.targetFunctionMatrix,r.afterTransform=u.afterFunctionMatrix,r.afterTransform2=u.afterFunctionMatrix2,r.targetAllTransform=u.allFunctionMatrix,f.functionName===c?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):o>l&&(r.isAppendTransform=!0,n.nextTransformAppendedIndexes=st(st([],s,!0),[{functionName:t,index:l,isAppend:!0}],!1))}function oa(e,t,r){return"".concat(e.beforeFunctionTexts.join(" ")," ").concat(e.isAppendTransform?r:t," ").concat(e.afterFunctionTexts.join(" "))}function oh(e){var t=e.datas,r=e.distX,n=e.distY,a=Tl({datas:t,distX:r,distY:n}),i=a[0],o=a[1],s=Ml(t,hv([i,o],4));return Yt(s,ar([0,0,0],4),4)}function Ml(e,t,r){var n=e.beforeTransform,a=e.afterTransform,i=e.beforeTransform2,o=e.afterTransform2,s=e.targetAllTransform,l=r?Et(s,t,4):Et(t,s,4),u=Et(we(r?i:n,4),l,4),f=Et(u,we(r?o:a,4),4);return f}function Tl(e){var t=e.datas,r=e.distX,n=e.distY,a=t.inverseBeforeMatrix,i=t.is3d,o=t.startDragBeforeDist,s=t.absoluteOrigin,l=i?4:3;return at(Yt(a,bt(s,[r,n]),l),o)}function De(e,t){var r=e.datas,n=e.distX,a=e.distY,i=r.inverseBeforeMatrix,o=r.inverseMatrix,s=r.is3d,l=r.startDragBeforeDist,u=r.startDragDist,f=r.absoluteOrigin,c=s?4:3;return at(Yt(t?i:o,bt(f,[n,a]),c),t?l:u)}function sh(e,t){var r=e.datas,n=e.distX,a=e.distY;r.beforeMatrix;var i=r.matrix,o=r.is3d;r.startDragBeforeDist;var s=r.startDragDist,l=r.absoluteOrigin,u=o?4:3;return at(Yt(i,bt(s,[n,a]),u),l)}function lh(e,t,r,n,a,i){return n===void 0&&(n=t),a===void 0&&(a=r),i===void 0&&(i=[0,0]),e?e.map(function(o,s){var l=ln(o),u=l.value,f=l.unit,c=s?a:n,d=s?r:t;if(o==="%"||isNaN(u)){var p=c?i[s]/c:0;return d*p}else if(f!=="%")return u;return d*u/100}):i}function Rl(e){var t=[];return e[1]>=0&&(e[0]>=0&&t.push(3),e[0]<=0&&t.push(2)),e[1]<=0&&(e[0]>=0&&t.push(1),e[0]<=0&&t.push(0)),t}function uh(e,t){return Rl(t).map(function(r){return e[r]})}function It(e,t){var r=(t[0]+1)/2,n=(t[1]+1)/2,a=[Ke(e[0][0],e[1][0],r,1-r),Ke(e[0][1],e[1][1],r,1-r)],i=[Ke(e[2][0],e[3][0],r,1-r),Ke(e[2][1],e[3][1],r,1-r)];return[Ke(a[0],i[0],n,1-n),Ke(a[1],i[1],n,1-n)]}function ch(e,t,r,n,a,i){var o=We(t,r,n,a),s=It(o,i),l=e[0]-s[0],u=e[1]-s[1];return[l,u]}function hn(e,t,r,n){return Et(e,Wn(t,n,r),n)}function fh(e,t,r){var n=e.transformOrigin,a=e.offsetMatrix,i=e.is3d,o=t.beforeTransform,s=t.afterTransform,l=i?4:3,u=Gi([r]);return hn(a,Ee(Et(Et(o,u,4),s,4),4,l),n,l)}function dh(e,t){var r=e.transformOrigin,n=e.offsetMatrix,a=e.is3d,i=e.targetMatrix,o=a?4:3;return hn(n,Et(i,$i(t,o),o),r,o)}function sa(e){var t=Tr(e);return{setTransform:function(r,n){n===void 0&&(n=-1),t.startTransforms=Lt(r)?r:Ne(r),si(e,n)},setTransformIndex:function(r){si(e,r)}}}function la(e,t){var r=Tr(e),n=r.startTransforms;si(e,Te(n,function(a){return a.indexOf("".concat(t,"("))===0}))}function si(e,t){var r=Tr(e),n=e.datas;if(n.transformIndex=t,t!==-1){var a=r.startTransforms[t];if(a){var i=Ze([a]);n.startValue=i[0].functionValue}}}function Xi(e,t){var r=Tr(e);r.nextTransforms=Ne(t)}function Tr(e){return e.originalDatas.beforeRenderable}function Pl(e){var t=e.originalDatas.beforeRenderable;return t.nextTransforms}function wn(e){return Pl(e).join(" ")}function En(e){return Tr(e).nextStyle}function Il(e,t,r,n,a){Xi(a,t);var i=Qt.drag(e,vn(a,e.state,r,n)),o=i?i.transform:t;return T(T({transform:t,drag:i},te({transform:o},a)),{afterTransform:o})}function Ol(e,t,r,n,a){var i=e.state,o=i.left,s=i.top,l=e.props.groupable,u=fh(e.state,a,t),f=l?o:0,c=l?s:0,d=Al(e,r,u),p=at(n,d);return at(p,[f,c])}function ph(e,t,r,n,a){var i=Ol(e,"scale(".concat(t.join(", "),")"),r,n,a);return i}function Bl(e,t,r){return[-1+e[0]/(t/2),-1+e[1]/(r/2)]}function Al(e,t,r){r===void 0&&(r=e.state.allMatrix);var n=e.state,a=n.width,i=n.height,o=n.is3d,s=o?4:3,l=[a/2*(1+t[0]),i/2*(1+t[1])];return Ft(r,l,s)}function vh(e,t,r){var n=r.fixedDirection,a=r.fixedPosition;return Ol(e,"rotate(".concat(t,"deg)"),n,a,r)}function hh(e,t,r,n,a,i){var o=e.props.groupable,s=e.state,l=s.transformOrigin,u=s.offsetMatrix,f=s.is3d,c=s.width,d=s.height,p=s.left,v=s.top,h=i.fixedDirection,g=i.nextTargetMatrix||s.targetMatrix,m=f?4:3,y=lh(a,t,r,c,d,l),b=o?p:0,x=o?v:0,_=hn(u,g,y,m),S=ch(n,_,t,r,m,h);return at(S,[b,x])}function zl(e,t){return It(ie(e.state),t)}function gh(e,t){var r=e.targetGesto,n=e.controlGesto,a;return r!=null&&r.isFlag()&&(a=r.getEventData()[t]),!a&&(n!=null&&n.isFlag())&&(a=n.getEventData()[t]),a||{}}function mh(e,t){return[e[0]*t[0],e[1]*t[1]]}function ot(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return xp.apply(void 0,st([Vi],e,!1))}function Ll(e){e()}function bh(e){return!e||e==="none"?[1,0,0,1,0,0]:Se(e)?e:Gi(e)}function Wn(e,t,r){return qa(t,Ur(r,t),e,Ur(r.map(function(n){return-n}),t))}function yh(e,t,r){if(t==="%"){var n=Yi(e.ownerSVGElement);return n[r?"width":"height"]/100}return 1}function xh(e){var t=Hn(Pe(e,":before"));return t.map(function(r,n){var a=ln(r),i=a.value,o=a.unit;return i*yh(e,o,n===0)})}function Hn(e){var t=e.transformOrigin;return t?t.split(" "):["0","0"]}function $l(e,t){t===void 0&&(t=Pe(e));var r=t.transform;if(r&&r!=="none")return t.transform;if("transform"in e){var n=e.transform,a=n.baseVal;if(!a)return"";var i=a.length;if(!i)return"";for(var o=[],s=function(u){var f=a[u].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(c){return f[c]}).join(", "),")"))},l=0;l<i;++l)s(l);return o.join(" ")}return""}function qr(e,t,r,n,a){var i,o,s,l=e&&e.ownerDocument?e.ownerDocument:document,u=l.documentElement||l.body,f=!1,c,d;if(!e||r)c=e;else{var p=(i=e==null?void 0:e.assignedSlot)===null||i===void 0?void 0:i.parentElement,v=e.parentElement;p?(f=!0,d=v,c=p):c=v}for(var h=!1,g=e===t||c===t,m="relative",y=1,b=parseFloat((o=a)===null||o===void 0?void 0:o.zoom)||1,x=a==null?void 0:a.position;c&&c!==u;){t===c&&(g=!0);var _=Pe(c),S=c.tagName.toLowerCase(),C=$l(c,_),M=_.willChange,k=parseFloat(_.zoom)||1;if(m=_.position,n&&k!==1){y=k;break}if(!r&&n&&b!==1&&x&&x!=="absolute"||S==="svg"||m!=="static"||C&&C!=="none"||M==="transform")break;var E=(s=e==null?void 0:e.assignedSlot)===null||s===void 0?void 0:s.parentNode,R=c.parentNode;E&&(f=!0,d=R);var D=E||R;if(D&&D.nodeType===11){c=D.host,h=!0;break}c=D,m="relative"}return{offsetZoom:y,hasSlot:f,parentSlotElement:d,isCustomElement:h,isStatic:m==="static",isEnd:g||!c||c===u,offsetParent:c||u}}function _h(e,t,r){var n,a=e.tagName.toLowerCase(),i=e.offsetLeft,o=e.offsetTop,s=sn(i),l=!s,u,f;return!l&&a!=="svg"?(u=wl?xh(e):Hn(r).map(function(c){return parseFloat(c)}),f=u.slice(),l=!0,n=wh(e,u,e===t&&t.tagName.toLowerCase()==="g"),i=n[0],o=n[1],u[0]=n[2],u[1]=n[3]):(u=Hn(r).map(function(c){return parseFloat(c)}),f=u.slice()),{tagName:a,isSVG:s,hasOffset:l,offset:[i||0,o||0],origin:u,targetOrigin:f}}function Fl(e,t,r){r===void 0&&(r=Pe(e));var n=Pe(document.body),a=n.position;if(!t&&(!a||a==="static"))return[0,0];var i=parseInt(n.marginLeft,10),o=parseInt(n.marginTop,10);return r.position==="absolute"&&((r.top!=="auto"||r.bottom!=="auto")&&(o=0),(r.left!=="auto"||r.right!=="auto")&&(i=0)),[i,o]}function li(e){e.forEach(function(t){var r=t.matrix;r&&(t.matrix=Ee(r,3,4))})}function Sh(e){for(var t=e.parentElement,r=!1;t;){var n=Pe(t).transform;if(n&&n!=="none"){r=!0;break}if(t===document.body)break;t=t.parentElement}return{fixedContainer:t||document.body,hasTransform:r}}function ua(e,t){return t===void 0&&(t=e.length>9),"".concat(t?"matrix3d":"matrix","(").concat(hl(e,!t).join(","),")")}function Yi(e){var t=e.clientWidth,r=e.clientHeight;if(!e)return{x:0,y:0,width:0,height:0,clientWidth:t,clientHeight:r};var n=e.viewBox,a=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||t,height:a.height||r,clientWidth:t,clientHeight:r}}function Ch(e,t){var r=Yi(e),n=r.width,a=r.height,i=r.clientWidth,o=r.clientHeight,s=i/n,l=o/a,u=e.preserveAspectRatio.baseVal,f=u.align,c=u.meetOrSlice,d=[0,0],p=[s,l],v=[0,0];if(f!==1){var h=(f-2)%3,g=Math.floor((f-2)/3);d[0]=n*h/2,d[1]=a*g/2;var m=c===2?Math.max(l,s):Math.min(s,l);p[0]=m,p[1]=m,v[0]=(i-n)/2*h,v[1]=(o-a)/2*g}var y=$i(p,t);return y[t*(t-1)]=v[0],y[t*(t-1)+1]=v[1],Wn(y,t,d)}function wh(e,t,r){if(!e.getBBox||!r&&e.tagName.toLowerCase()==="g")return[0,0,0,0];var n=e.getBBox(),a=Yi(e.ownerSVGElement),i=n.x-a.x,o=n.y-a.y;return[i,o,t[0]-i,t[1]-o]}function Ft(e,t,r){return Yt(e,ar(t,r),r)}function We(e,t,r,n){return[[0,0],[t,0],[0,r],[t,r]].map(function(a){return Ft(e,a,n)})}function ve(e){var t=e.map(function(u){return u[0]}),r=e.map(function(u){return u[1]}),n=Math.min.apply(Math,t),a=Math.min.apply(Math,r),i=Math.max.apply(Math,t),o=Math.max.apply(Math,r),s=i-n,l=o-a;return{left:n,top:a,right:i,bottom:o,width:s,height:l}}function Jo(e,t,r,n){var a=We(e,t,r,n);return ve(a)}function Eh(e,t,r,n,a){var i,o=e.target,s=e.origin,l=t.matrix,u=Nl(o),f=u.offsetWidth,c=u.offsetHeight,d=r.getBoundingClientRect(),p=[0,0];r===document.body&&(p=Fl(o,!0));for(var v=o.getBoundingClientRect(),h=v.left-d.left+r.scrollLeft-(r.clientLeft||0)+p[0],g=v.top-d.top+r.scrollTop-(r.clientTop||0)+p[1],m=v.width,y=v.height,b=qa(n,a,l),x=Jo(b,f,c,n),_=x.left,S=x.top,C=x.width,M=x.height,k=Ft(b,s,n),E=at(k,[_,S]),R=[h+E[0]*m/C,g+E[1]*y/M],D=[0,0],P=0;++P<10;){var I=we(a,n);i=at(Ft(I,R,n),Ft(I,k,n)),D[0]=i[0],D[1]=i[1];var B=qa(n,a,Ur(D,n),l),V=Jo(B,f,c,n),K=V.left,X=V.top,H=K-h,z=X-g;if(Math.abs(H)<2&&Math.abs(z)<2)break;R[0]-=H,R[1]-=z}return D.map(function(j){return Math.round(j)})}function kh(e,t,r){var n=e.length===16,a=n?4:3,i=t.map(function(l){return Ft(e,l,a)}),o=r.left,s=r.top;return i.map(function(l){return[l[0]+o,l[1]+s]})}function br(e,t,r,n){var a=e.length===16,i=a?4:3,o=We(e,r,n,i),s=o[0],l=s[0],u=s[1],f=o[1],c=f[0],d=f[1],p=o[2],v=p[0],h=p[1],g=o[3],m=g[0],y=g[1],b=Ft(e,t,i),x=b[0],_=b[1],S=Math.min(l,c,v,m),C=Math.min(u,d,h,y),M=Math.max(l,c,v,m),k=Math.max(u,d,h,y);l=l-S||0,c=c-S||0,v=v-S||0,m=m-S||0,u=u-C||0,d=d-C||0,h=h-C||0,y=y-C||0,x=x-S||0,_=_-C||0;var E=Ha(We(e,100,100,i));return{left:S,top:C,right:M,bottom:k,origin:[x,_],pos1:[l,u],pos2:[c,d],pos3:[v,h],pos4:[m,y],direction:E}}function ye(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Gl(e,t){return ye([t[0]-e[0],t[1]-e[1]])}function Br(e,t,r,n){r===void 0&&(r=1),n===void 0&&(n=Ot(e,t));var a=Gl(e,t);return{transform:"translateY(-50%) translate(".concat(e[0],"px, ").concat(e[1],"px) rotate(").concat(n,"rad) scaleY(").concat(r,")"),width:"".concat(a,"px")}}function ji(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var a=r.length,i=r.reduce(function(s,l){return s+l[0]},0)/a,o=r.reduce(function(s,l){return s+l[1]},0)/a;return{transform:"translateZ(0px) translate(".concat(i,"px, ").concat(o,"px) rotate(").concat(e,"rad) scale(").concat(t,")")}}function ir(e,t){var r=e[t];return Se(r)?T(T({},e),r):e}function Nl(e,t){t===void 0&&(t=e?Pe(e):null);var r=e&&!sn(e.offsetWidth),n=0,a=0,i=0,o=0,s=0,l=0,u=0,f=0,c=0,d=0,p=0,v=0,h=1/0,g=1/0,m=1/0,y=1/0,b=0,x=0,_=!1;if(e)if(!r&&e.tagName.toLowerCase()!=="svg"){var S=e.getBBox();_=!0,n=S.width,a=S.height,s=n,l=a,u=n,f=a,i=n,o=a}else{var C=e.style,M=t.boxSizing==="border-box",k=parseFloat(t.borderLeftWidth)||0,E=parseFloat(t.borderRightWidth)||0,R=parseFloat(t.borderTopWidth)||0,D=parseFloat(t.borderBottomWidth)||0,P=parseFloat(t.paddingLeft)||0,I=parseFloat(t.paddingRight)||0,B=parseFloat(t.paddingTop)||0,V=parseFloat(t.paddingBottom)||0,K=P+I,X=B+V,H=k+E,z=R+D,j=K+H,G=X+z,$=t.position,N=0,F=0;if("clientLeft"in e){var W=null;if($==="absolute"){var Z=qr(e,document.body);W=Z.offsetParent}else W=e.parentElement;if(W){var nt=Pe(W);N=parseFloat(nt.width),F=parseFloat(nt.height)}}c=Math.max(K,kt(t.minWidth,N)||0),d=Math.max(X,kt(t.minHeight,F)||0),h=kt(t.maxWidth,N),g=kt(t.maxHeight,F),isNaN(h)&&(h=1/0),isNaN(g)&&(g=1/0),b=kt(C.width,0)||0,x=kt(C.height,0)||0,s=parseFloat(t.width)||0,l=parseFloat(t.height)||0,u=Math.abs(s-b)<1?Va(c,b||s,h):s,f=Math.abs(l-x)<1?Va(d,x||l,g):l,n=u,a=f,i=u,o=f,M?(m=h,y=g,p=c,v=d,u=n-j,f=a-G):(m=h+j,y=g+G,p=c+j,v=d+G,n=u+j,a=f+G),i=u+K,o=f+X}return{svg:_,offsetWidth:n,offsetHeight:a,clientWidth:i,clientHeight:o,contentWidth:u,contentHeight:f,inlineCSSWidth:b,inlineCSSHeight:x,cssWidth:s,cssHeight:l,minWidth:c,minHeight:d,maxWidth:h,maxHeight:g,minOffsetWidth:p,minOffsetHeight:v,maxOffsetWidth:m,maxOffsetHeight:y}}function Vl(e,t){return Ot(t>0?e[0]:e[1],t>0?e[1]:e[0])}function kn(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Wl(e,t){var r=e===document.body||e===document.documentElement,n={clientLeft:e.clientLeft,clientTop:e.clientTop,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,overflow:!1};return r&&(n.clientHeight=Math.max(t.height,n.clientHeight),n.scrollHeight=Math.max(t.height,n.scrollHeight)),n.overflow=Pe(e).overflow!=="visible",T(T({},t),n)}function Pa(e,t,r,n){var a=e.left,i=e.right,o=e.top,s=e.bottom,l=t.top,u=t.left,f={left:u+a,top:l+o,right:u+i,bottom:l+s,width:i-a,height:s-o};return r&&n?Wl(r,f):f}function Ar(e,t){var r=0,n=0,a=0,i=0;if(e){var o=e.getBoundingClientRect();r=o.left,n=o.top,a=o.width,i=o.height}var s={left:r,top:n,width:a,height:i,right:r+a,bottom:n+i};return e&&t?Wl(e,s):s}function Hl(e,t,r,n){var a;if(e)a=e;else if(t)a=[0,0];else{var i=r.target;a=Xl(i,n)}return a}function Xl(e,t){if(e){var r=e.getAttribute("data-rotation")||"",n=e.getAttribute("data-direction");if(t.deg=r,!!n){var a=[0,0];return n.indexOf("w")>-1&&(a[0]=-1),n.indexOf("e")>-1&&(a[0]=1),n.indexOf("n")>-1&&(a[1]=-1),n.indexOf("s")>-1&&(a[1]=1),a}}}function Ui(e,t){return[bt(t,e[0]),bt(t,e[1]),bt(t,e[2]),bt(t,e[3])]}function ie(e){var t=e.left,r=e.top,n=e.pos1,a=e.pos2,i=e.pos3,o=e.pos4;return Ui([n,a,i,o],[t,r])}function Dh(e){return Math.round(e%1===-.5?e-1:e)}function gr(e,t){var r;(r=e[t])===null||r===void 0||r.unset(),e[t]=null}function te(e,t){if(t){var r=Tr(t);r.nextStyle=T(T({},r.nextStyle),e)}return{style:e,cssText:Mr(e).map(function(n){return"".concat(zn(n,"-"),": ").concat(e[n],";")}).join("")}}function Yl(e,t,r){var n=t.afterTransform||t.transform;return T(T({},te(T(T(T({},e.style),t.style),{transform:n}),r)),{afterTransform:n,transform:e.transform})}function ft(e,t,r,n){var a=t.datas;a.datas||(a.datas={});var i=T(T({},r),{target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,moveable:e,datas:a.datas,isFirstDrag:!!t.isFirstDrag,isTrusted:t.isTrusted!==!1,stopAble:function(){a.isEventStart=!1},stopDrag:function(){var o;(o=t.stop)===null||o===void 0||o.call(t)}});return a.isStartEvent?n||(a.lastEvent=i):a.isStartEvent=!0,i}function ce(e,t,r){var n=t.datas,a="isDrag"in r?r.isDrag:t.isDrag;return n.datas||(n.datas={}),T(T({isDrag:a},r),{moveable:e,target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,lastEvent:n.lastEvent,isDouble:t.isDouble,datas:n.datas,isFirstDrag:!!t.isFirstDrag})}function ca(e,t,r){e._emitter.on(t,r)}function et(e,t,r,n){return e.triggerEvent(t,r,n)}function Pe(e,t){return window.getComputedStyle(e,t)}function Dn(e,t,r){var n={},a={};return e.filter(function(i){var o=i.name;if(n[o]||!t.some(function(s){return i[s]}))return!1;if(!r&&i.ableGroup){if(a[i.ableGroup])return!1;a[i.ableGroup]=!0}return n[o]=!0,!0})}function ui(e,t){return e===t||e==null&&t==null}function Mh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.length-1,n=0;n<r;++n){var a=e[n];if(!sn(a))return a}return e[r]}function jl(e,t){var r=[],n=[];return e.forEach(function(a,i){var o=t(a,i,e),s=n.indexOf(o),l=r[s]||[];s===-1&&(n.push(o),r.push(l)),l.push(a)}),r}function Th(e,t){var r=[],n={};return e.forEach(function(a,i){var o=t(a,i,e),s=n[o];s||(s=[],n[o]=s,r.push(s)),s.push(a)}),r}function Ul(e){return e.reduce(function(t,r){return t.concat(r)},[])}function Sr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.sort(function(r,n){return Math.abs(n)-Math.abs(r)}),e[0]}function nr(e,t,r){return Yt(we(e,r),ar(t,r),r)}function Rh(e,t){var r,n=e.is3d,a=e.rootMatrix,i=n?4:3;return r=nr(a,[t.distX,t.distY],i),t.distX=r[0],t.distY=r[1],t}function Mn(e,t,r,n,a){return at(Ft(e,bt(r,t),a),n)}function he(e,t,r){return r?"".concat(e/t*100,"%"):"".concat(e,"px")}function Xn(e){return Math.abs(e)<=re?0:e}function qi(e){return function(t){if(!t.isDragging(e))return"";var r=gh(t,e),n=r.deg;return n?ot("view-control-rotation".concat(n)):""}}function Ki(e,t){return t===void 0&&(t=[e]),function(r,n){if(n.isRequest)return t.some(function(i){return n.requestAble===i})?n.parentDirection:!1;var a=n.inputEvent.target;return Gt(a,ot("direction"))&&(!e||Gt(a,ot(e)))}}function Ph(e){var t={};for(var r in e)t[e[r]]=r;return t}function Ih(e,t){var r=e.slice(0,t<0?void 0:t),n=e.slice(0,t<0?void 0:t+1),a=e[t]||"",i=t<0?[]:e.slice(t),o=t<0?[]:e.slice(t+1),s=Ze(r),l=Ze(n),u=Ze([a]),f=Ze(i),c=Ze(o),d=pr(s),p=pr(l),v=pr(f),h=pr(c),g=Et(d,v,4);return{transforms:e,beforeFunctionMatrix:d,beforeFunctionMatrix2:p,targetFunctionMatrix:pr(u),afterFunctionMatrix:v,afterFunctionMatrix2:h,allFunctionMatrix:g,beforeFunctions:s,beforeFunctions2:l,targetFunction:u[0],afterFunctions:f,afterFunctions2:c,beforeFunctionTexts:r,beforeFunctionTexts2:n,targetFunctionText:a,afterFunctionTexts:i,afterFunctionTexts2:o}}function Oh(e){return!e||!Se(e)||e instanceof Element?!1:Lt(e)||"length"in e}function or(e,t){return e?e instanceof Element?e:ue(e)?t?document.querySelector(e):e:Ti(e)?e():"current"in e?e.current:e:null}function Zi(e,t){if(!e)return[];var r=Oh(e)?[].slice.call(e):[e];return r.reduce(function(n,a){return ue(a)&&t?st(st([],n,!0),[].slice.call(document.querySelectorAll(a)),!0):(Lt(a)?n.push(Zi(a,t)):n.push(or(a,t)),n)},[])}function Bh(e,t,r){var n=Ot(e,t)/Math.PI*180;return n=r>=0?n:180-n,n=n>=0?n:360+n,n}function Qo(e,t){var r=e.rootMatrix,n=e.is3d,a=n?4:3,i=we(r,a);return n||(i=Ee(i,3,4)),i[12]=0,i[13]=0,i[14]=0,_v(i,t)}function ql(e,t,r,n,a){var i=e[0],o=e[1],s=0,l=0;if(a&&i&&o){var u=Ot([0,0],t),f=Ot([0,0],n),c=ye(t),d=Math.cos(u-f)*c;if(!n[0])l=d,s=l*r;else if(!n[1])s=d,l=s/r;else{var p=n[0]*2*i,v=n[1]*2*o,h=ye([p+t[0],v+t[1]])-ye([p,v]),g=Ot([0,0],[r,1]);s=Math.cos(g)*h,l=Math.sin(g)*h}}else s=n[0]*t[0],l=n[1]*t[1];return[s,l]}function Kl(e,t,r,n){var a,i=r.ratio,o=r.startOffsetWidth,s=r.startOffsetHeight,l=0,u=0,f=n.distX,c=n.distY,d=n.parentDistance,p=n.parentDist,v=n.parentScale,h=r.fixedDirection,g=[0,1].map(function(S){return Math.abs(e[S]-h[S])}),m=[0,1].map(function(S){var C=g[S];return C!==0&&(C=2/C),C});if(p)l=p[0],u=p[1],t&&(l?u||(u=l/i):l=u*i);else if(v)l=(v[0]-1)*o,u=(v[1]-1)*s;else if(d){var y=o*g[0],b=s*g[1],x=ye([y,b]);l=d/x*y*m[0],u=d/x*b*m[1]}else{var _=De({datas:r,distX:f,distY:c});_=m.map(function(S,C){return _[C]*S}),a=ql([o,s],_,i,e,t),l=a[0],u=a[1]}return{distWidth:l,distHeight:u}}function ci(e,t){if(t){if(e==="left")return{x:"0%",y:"50%"};if(e==="top")return{x:"50%",y:"50%"};if(e==="center")return{x:"50%",y:"50%"};if(e==="right")return{x:"100%",y:"50%"};if(e==="bottom")return{x:"50%",y:"100%"};var r=e.split(" "),n=r[0],a=r[1],i=ci(n||""),o=ci(a||""),s=T(T({},i),o),l={x:"50%",y:"50%"};return s.x&&(l.x=s.x),s.y&&(l.y=s.y),s.value&&(s.x&&!s.y&&(l.y=s.value),!s.x&&s.y&&(l.x=s.value)),l}return e==="left"?{x:"0%"}:e==="right"?{x:"100%"}:e==="top"?{y:"0%"}:e==="bottom"?{y:"100%"}:e?e==="center"?{value:"50%"}:{value:e}:{}}function Ah(e,t,r){var n=ci(e,!0),a=n.x,i=n.y;return[kt(a,t)||0,kt(i,r)||0]}function zh(e,t,r){var n=e.map(function(i){return at(i,t)}),a=n.map(function(i){return fn(i,r)});return{prev:n,next:a,result:a.map(function(i){return bt(i,t)})}}function Zl(e,t){return e.length===t.length&&e.every(function(r,n){var a=t[n],i=Lt(r),o=Lt(a);return i&&o?Zl(r,a):!i&&!o?r===a:!1})}var Lh=pn("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(e,t){var r=t.datas,n=t.targets,a=t.angle,i=t.originalDatas,o=e.props,s=o.pinchable,l=o.ables;if(!s)return!1;var u="onPinch".concat(n?"Group":"","Start"),f="drag".concat(n?"Group":"","ControlStart"),c=(s===!0?e.controlAbles:l.filter(function(h){return s.indexOf(h.name)>-1})).filter(function(h){return h.canPinch&&h[f]}),d=ft(e,t,{});n&&(d.targets=n);var p=et(e,u,d);r.isPinch=p!==!1,r.ables=c;var v=r.isPinch;return v?(c.forEach(function(h){if(i[h.name]=i[h.name]||{},!!h[f]){var g=T(T({},t),{datas:i[h.name],parentRotate:a,isPinch:!0});h[f](e,g)}}),e.state.snapRenderInfo={request:t.isRequest,direction:[0,0]},v):!1},pinch:function(e,t){var r=t.datas,n=t.scale,a=t.distance,i=t.originalDatas,o=t.inputEvent,s=t.targets,l=t.angle;if(r.isPinch){var u=a*(1-1/n),f=ft(e,t,{});s&&(f.targets=s);var c="onPinch".concat(s?"Group":"");et(e,c,f);var d=r.ables,p="drag".concat(s?"Group":"","Control");return d.forEach(function(v){v[p]&&v[p](e,T(T({},t),{datas:i[v.name],inputEvent:o,parentDistance:u,parentRotate:l,isPinch:!0}))}),f}},pinchEnd:function(e,t){var r=t.datas,n=t.isPinch,a=t.inputEvent,i=t.targets,o=t.originalDatas;if(r.isPinch){var s="onPinch".concat(i?"Group":"","End"),l=ce(e,t,{isDrag:n});i&&(l.targets=i),et(e,s,l);var u=r.ables,f="drag".concat(i?"Group":"","ControlEnd");return u.forEach(function(c){c[f]&&c[f](e,T(T({},t),{isDrag:n,datas:o[c.name],inputEvent:a,isPinch:!0}))}),n}},pinchGroupStart:function(e,t){return this.pinchStart(e,T(T({},t),{targets:e.props.targets}))},pinchGroup:function(e,t){return this.pinch(e,T(T({},t),{targets:e.props.targets}))},pinchGroupEnd:function(e,t){return this.pinchEnd(e,T(T({},t),{targets:e.props.targets}))}});function xe(e,t,r){var n=r.originalDatas;n.groupable=n.groupable||{};var a=n.groupable;a.childDatas=a.childDatas||[];var i=a.childDatas;return e.moveables.map(function(o,s){return i[s]=i[s]||{},i[s][t]=i[s][t]||{},T(T({},r),{datas:i[s][t],originalDatas:i[s]})})}function Ia(e,t,r,n,a,i,o){var s=!!r.match(/Start$/g),l=!!r.match(/End$/g),u=a.isPinch,f=a.datas,c=xe(e,t.name,a),d=e.moveables,p=c.map(function(v,h){var g=d[h],m=g.state,y=m.gestos,b=v;if(s)b=new _r(o).dragStart(n,v);else{if(y[o]||(y[o]=f.childGestos[h]),!y[o])return;b=vn(v,m,n,u,i,o)}var x=t[r](g,T(T({},b),{parentFlag:!0}));return l&&(y[o]=null),x});return s&&(f.childGestos=d.map(function(v){return v.state.gestos[o]})),p}function Me(e,t,r,n,a,i){a===void 0&&(a=function(f,c){return c});var o=!!r.match(/End$/g),s=xe(e,t.name,n),l=e.moveables,u=s.map(function(f,c){var d=l[c],p=f;p=a(d,f);var v=t[r](d,T(T({},p),{parentFlag:!0}));return v&&i&&i(d,f,v,c),o&&(d.state.gestos={}),v});return u}var $h=["left","right","center"],Fh=["top","bottom","middle"],He={start:"left",end:"right",center:"center"},Xe={start:"top",end:"bottom",center:"middle"};function Rr(e,t){var r=e.props,n=r.snappable,a=r.bounds,i=r.innerBounds,o=r.verticalGuidelines,s=r.horizontalGuidelines,l=r.snapGridWidth,u=r.snapGridHeight,f=e.state,c=f.guidelines,d=f.enableSnap;return!n||!d||t&&n!==!0&&n.indexOf(t)<0?!1:!!(l||u||a||i||c&&c.length||o&&o.length||s&&s.length)}function Ji(e){return e===!1?{}:e===!0||!e?{left:!0,right:!0,top:!0,bottom:!0}:e}function Gh(e,t){var r=Ji(e),n={};for(var a in r)a in t&&r[a]&&(n[a]=t[a]);return n}function Qi(e,t){var r=Gh(e,t),n=Fh.filter(function(i){return i in r}),a=$h.filter(function(i){return i in r});return{horizontal:n.map(function(i){return r[i]}),vertical:a.map(function(i){return r[i]})}}function Nh(e,t,r){var n=Ft(e,[t.clientLeft,t.clientTop],r);return[t.left+n[0],t.top+n[1]]}function Vh(e){var t=e[0],r=e[1],n=r[0]-t[0],a=r[1]-t[1];Math.abs(n)<zt&&(n=0),Math.abs(a)<zt&&(a=0);var i=0,o=0,s=0;return n?a?(i=-a/n,o=1,s=i*t[0]-t[1]):(o=1,s=-t[1]):(i=-1,s=t[0]),[i,o,s].map(function(l){return ut(l,zt)})}function fa(e,t,r,n){var a=e.props,i=Mh(n,a.snapThreshold,5);return Jl(e.state.guidelines,t,r,i)}function Jl(e,t,r,n){return{vertical:es(e,"vertical",t,n),horizontal:es(e,"horizontal",r,n)}}function Wh(e,t,r){var n=r[0],a=r[1],i=t[0],o=t[1],s=at(r,t),l=s[0],u=s[1],f=u>0,c=l>0;l=Xn(l),u=Xn(u);var d={isSnap:!1,offset:0,pos:0},p={isSnap:!1,offset:0,pos:0};if(l===0&&u===0)return{vertical:d,horizontal:p};var v=fa(e,l?[n]:[],u?[a]:[]),h=v.vertical,g=v.horizontal;h.posInfos.filter(function(I){var B=I.pos;return c?B>=i:B<=i}),g.posInfos.filter(function(I){var B=I.pos;return f?B>=o:B<=o}),h.isSnap=h.posInfos.length>0,g.isSnap=g.posInfos.length>0;var m=fi(h),y=m.isSnap,b=m.guideline,x=fi(g),_=x.isSnap,S=x.guideline,C=_?S.pos[1]:0,M=y?b.pos[0]:0;if(l===0)_&&(p.isSnap=!0,p.pos=S.pos[1],p.offset=a-p.pos);else if(u===0)y&&(d.isSnap=!0,d.pos=M,d.offset=n-M);else{var k=u/l,E=r[1]-k*n,R=0,D=0,P=!1;y?(D=M,R=k*D+E,P=!0):_&&(R=C,D=(R-E)/k,P=!0),P&&(d.isSnap=!0,d.pos=D,d.offset=n-D,p.isSnap=!0,p.pos=R,p.offset=a-R)}return{vertical:d,horizontal:p}}function ts(e,t,r){var n=Qi(e.props.snapDirections,t);return fa(e,n.vertical,n.horizontal,r)}function fi(e){var t=e.isSnap;if(!t)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=e.posInfos[0],n=r.guidelineInfos[0],a=n.offset,i=n.dist,o=n.guideline;return{isSnap:t,offset:a,dist:i,pos:r.pos,guideline:o}}function es(e,t,r,n){if(!e||!e.length)return{isSnap:!1,index:-1,posInfos:[]};var a=t==="vertical",i=a?0:1,o=r.map(function(l,u){var f=e.map(function(c){var d=c.pos,p=l-d[i];return{offset:p,dist:Math.abs(p),guideline:c}}).filter(function(c){var d=c.guideline,p=c.dist,v=d.type;return!(v!==t||p>n)}).sort(function(c,d){return c.dist-d.dist});return{pos:l,index:u,guidelineInfos:f}}).filter(function(l){return l.guidelineInfos.length>0}).sort(function(l,u){return l.guidelineInfos[0].dist-u.guidelineInfos[0].dist}),s=o.length>0;return{isSnap:s,index:s?o[0].index:-1,posInfos:o}}function Hh(e,t,r,n){n===void 0&&(n=1);var a=[];if(r[0]&&r[1])a=[r,[-r[0],r[1]],[r[0],-r[1]]].map(function(s){return It(t,s)});else if(!r[0]&&!r[1])for(var i=[t[0],t[1],t[3],t[2],t[0]],o=0;o<4;++o)a.push(i[o]),a.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);else e.props.keepRatio?a=[[-1,-1],[-1,1],[1,-1],[1,1],r].map(function(s){return It(t,s)}):(a=uh(t,r),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));return fa(e,a.map(function(s){return s[0]}),a.map(function(s){return s[1]}),n)}function Ql(e,t){var r=Math.abs(e.offset),n=Math.abs(t.offset);return e.isBound&&t.isBound?n-r:e.isBound?-1:t.isBound?1:e.isSnap&&t.isSnap?n-r:e.isSnap?-1:t.isSnap||r<re?1:n<re?-1:r-n}function Yn(e,t){return e.slice().sort(function(r,n){var a=r.sign[t],i=n.sign[t],o=r.offset[t],s=n.offset[t];if(a){if(!i)return-1}else return 1;return Ql({isBound:r.isBound,isSnap:r.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:s})})[0]}function Xh(e,t,r){var n=[];if(r)Math.abs(t[0])!==1||Math.abs(t[1])!==1?n.push([t,[-1,-1]],[t,[-1,1]],[t,[1,-1]],[t,[1,1]]):n.push([t,[e[0],-e[1]]],[t,[-e[0],e[1]]]),n.push([t,e]);else if(e[0]&&e[1]||!e[0]&&!e[1]){var a=e[0]?e:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(s){var l=[o*a[0],s*a[1]];t[0]===l[0]&&t[1]===l[1]||n.push([t,l])})})}else if(e[0]){var i=Math.abs(t[0])===1?[1]:[1,-1];i.forEach(function(o){n.push([[t[0],-1],[o*e[0],-1]],[[t[0],0],[o*e[0],0]],[[t[0],1],[o*e[0],1]])})}else if(e[1]){var i=Math.abs(t[1])===1?[1]:[1,-1];i.forEach(function(s){n.push([[-1,t[1]],[-1,s*e[1]]],[[0,t[1]],[0,s*e[1]]],[[1,t[1]],[1,s*e[1]]])})}return n}function tu(e,t){var r=Wa([t[0][0],t[1][0]]),n=Wa([t[0][1],t[1][1]]);return{vertical:r<=e[0],horizontal:n<=e[1]}}function to(e,t){var r=t[0],n=t[1],a=n[0]-r[0],i=n[1]-r[1];Math.abs(a)<re&&(a=0),Math.abs(i)<re&&(i=0);var o,s;if(!a)o=r[0],s=e[0];else if(!i)o=r[1],s=e[1];else{var l=i/a;o=l*(e[0]-r[0])+r[1],s=e[1]}return o-s}function eu(e,t,r,n){return n===void 0&&(n=re),e.every(function(a){var i=to(a,t),o=i<=0;return o===r||Math.abs(i)<=n})}function rs(e,t,r,n,a){return a===void 0&&(a=0),n&&t-a<=e||!n&&e<=r+a?{isBound:!0,offset:n?t-e:r-e}:{isBound:!1,offset:0}}function Yh(e,t){var r=t.line,n=t.centerSign,a=t.verticalSign,i=t.horizontalSign,o=t.lineConstants,s=e.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=s.left,u=s.top,f=s.width,c=s.height,d=[[l,u],[l,u+c]],p=[[l,u],[l+f,u]],v=[[l+f,u],[l+f,u+c]],h=[[l,u+c],[l+f,u+c]];if(eu([[l,u],[l+f,u],[l,u+c],[l+f,u+c]],r,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=$e(r,o,p,a),m=$e(r,o,h,a),y=$e(r,o,d,i),b=$e(r,o,v,i),x=g.isBound&&m.isBound,_=g.isBound||m.isBound,S=y.isBound&&b.isBound,C=y.isBound||b.isBound,M=Sr(g.offset,m.offset),k=Sr(y.offset,b.offset),E=[0,0],R=!1,D=!1;return Math.abs(k)<Math.abs(M)?(E=[M,0],R=_,D=x):(E=[0,k],R=C,D=S),{isAllBound:D,isVerticalBound:_,isHorizontalBound:C,isBound:R,offset:E}}function $e(e,t,r,n,a,i){var o=t[0],s=t[1],l=e[0],u=r[0],f=r[1],c=Xn(f[1]-u[1]),d=Xn(f[0]-u[0]),p=s,v=o,h=-o/s;if(d){if(!c){if(i&&!p)return{isBound:!1,offset:0};if(v){var b=(u[1]-l[1])/h+l[0];return rs(b,u[0],f[0],n,a)}else{var m=u[1]-l[1],y=Math.abs(m)<=(a||0);return{isBound:y,offset:y?m:0}}}}else{if(i&&!v)return{isBound:!1,offset:0};if(p){var g=h*(u[0]-l[0])+l[1];return rs(g,u[1],f[1],n,a)}else{var m=u[0]-l[0],y=Math.abs(m)<=(a||0);return{isBound:y,offset:y?m:0}}}return{isBound:!1,offset:0}}function ru(e,t,r){return t.map(function(n){var a=Yh(e,n),i=a.isBound,o=a.offset,s=a.isVerticalBound,l=a.isHorizontalBound,u=n.multiple,f=De({datas:r,distX:o[0],distY:o[1]}).map(function(c,d){return c*(u[d]?2/u[d]:0)});return{sign:u,isBound:i,isVerticalBound:s,isHorizontalBound:l,isSnap:!1,offset:f}})}function jh(e,t,r){var n,a=eo(e,t,[0,0],!1).map(function(d){return T(T({},d),{multiple:d.multiple.map(function(p){return Math.abs(p)*2})})}),i=ru(e,a,r),o=Yn(i,0),s=Yn(i,1),l=0,u=0,f=o.isVerticalBound||s.isVerticalBound,c=o.isHorizontalBound||s.isHorizontalBound;return(f||c)&&(n=sh({datas:r,distX:-o.offset[0],distY:-s.offset[1]}),l=n[0],u=n[1]),{vertical:{isBound:f,offset:l},horizontal:{isBound:c,offset:u}}}function Uh(e,t){var r=[],n=e[0],a=e[1];return n&&a?r.push([[0,a*2],e,[-n,a]],[[n*2,0],e,[n,-a]]):n?(r.push([[n*2,0],[n,1],[n,-1]]),t&&r.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):a?(r.push([[0,a*2],[1,a],[-1,a]]),t&&r.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}function eo(e,t,r,n){var a=e.state,i=a.allMatrix,o=a.is3d,s=We(i,100,100,o?4:3),l=It(s,[0,0]);return Uh(r,n).map(function(u){var f=u[0],c=u[1],d=u[2],p=[It(s,c),It(s,d)],v=Vh(p),h=tu(l,p),g=h.vertical,m=h.horizontal,y=to(l,p)<=0;return{multiple:f,centerSign:y,verticalSign:g,horizontalSign:m,lineConstants:v,line:[It(t,c),It(t,d)]}})}function ns(e,t,r,n){var a=n?e.map(function(i){return fn(i,n)}):e;return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some(function(i){var o=to(r,i)<=0;return!eu(t,i,o)})}function qh(e){var t=e[0],r=e[1],n=r[0]-t[0],a=r[1]-t[1];if(!n)return Math.abs(t[0]);if(!a)return Math.abs(t[1]);var i=a/n;return Math.abs((-i*t[0]+t[1])/Math.sqrt(Math.pow(i,2)+1))}function Kh(e){var t=e[0],r=e[1],n=r[0]-t[0],a=r[1]-t[1];if(!n)return[t[0],0];if(!a)return[0,t[1]];var i=a/n,o=-i*t[0]+t[1];return[-o/(i+1/i),o/(i*i+1)]}function Zh(e,t,r,n,a){var i=e.props.innerBounds,o=a*Math.PI/180;if(!i)return[];var s=i.left,l=i.top,u=i.width,f=i.height,c=s-n[0],d=s+u-n[0],p=l-n[1],v=l+f-n[1],h=[[c,p],[d,p],[c,v],[d,v]],g=It(r,[0,0]);if(!ns(r,h,g,0))return[];var m=[],y=h.map(function(b){return[ye(b),Ot([0,0],b)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(b){var x=Ot([0,0],Kh(b)),_=qh(b);m.push.apply(m,y.filter(function(S){var C=S[0];return C&&_<=C}).map(function(S){var C=S[0],M=S[1],k=Math.acos(C?_/C:0),E=M+k,R=M-k;return[o+E-x,o+R-x]}).reduce(function(S,C){return S.push.apply(S,C),S},[]).filter(function(S){return!ns(t,h,g,S)}).map(function(S){return ut(S*180/Math.PI,re)}))}),m}function Jh(e){var t=e.props.innerBounds;if(!t)return{vertical:[],horizontal:[]};var r=e.getRect(),n=r.pos1,a=r.pos2,i=r.pos3,o=r.pos4,s=[n,a,i,o],l=It(s,[0,0]),u=t.left,f=t.top,c=t.width,d=t.height,p=[[u,f],[u,f+d]],v=[[u,f],[u+c,f]],h=[[u+c,f],[u+c,f+d]],g=[[u,f+d],[u+c,f+d]],m=eo(e,s,[0,0],!1),y=[],b=[],x={top:!1,bottom:!1,left:!1,right:!1};return m.forEach(function(_){var S=_.line,C=_.lineConstants,M=tu(l,S),k=M.horizontal,E=M.vertical,R=$e(S,C,v,E,1,!0),D=$e(S,C,g,E,1,!0),P=$e(S,C,p,k,1,!0),I=$e(S,C,h,k,1,!0);R.isBound&&!x.top&&(y.push(f),x.top=!0),D.isBound&&!x.bottom&&(y.push(f+d),x.bottom=!0),P.isBound&&!x.left&&(b.push(u),x.left=!0),I.isBound&&!x.right&&(b.push(u+c),x.right=!0)}),{horizontal:y,vertical:b}}function ro(e,t,r){var n=e||{},a=n.position,i=a===void 0?"client":a,o=n.left,s=o===void 0?-1/0:o,l=n.top,u=l===void 0?-1/0:l,f=n.right,c=f===void 0?1/0:f,d=n.bottom,p=d===void 0?1/0:d,v={position:i,left:s,top:u,right:c,bottom:p};return{vertical:as(v,t,!0),horizontal:as(v,r,!1)}}function da(e,t){var r=e.state,n=r.containerClientRect,a=n.clientHeight,i=n.clientWidth,o=n.clientLeft,s=n.clientTop,l=r.snapOffset,u=l.left,f=l.top,c=l.right,d=l.bottom,p=t||e.props.bounds||{},v=p.position||"client",h=v==="css",g=p.left,m=g===void 0?-1/0:g,y=p.top,b=y===void 0?-1/0:y,x=p.right,_=x===void 0?h?-1/0:1/0:x,S=p.bottom,C=S===void 0?h?-1/0:1/0:S;return h&&(_=i+c-u-_,C=a+d-f-C),{left:m+u-o,right:_+u-o,top:b+f-s,bottom:C+f-s}}function Qh(e,t,r){var n=da(e),a=n.left,i=n.top,o=n.right,s=n.bottom,l=r[0],u=r[1],f=at(r,t),c=f[0],d=f[1];Math.abs(c)<re&&(c=0),Math.abs(d)<re&&(d=0);var p=d>0,v=c>0,h={isBound:!1,offset:0,pos:0},g={isBound:!1,offset:0,pos:0};if(c===0&&d===0)return{vertical:h,horizontal:g};if(c===0)p?s<u&&(g.pos=s,g.offset=u-s):i>u&&(g.pos=i,g.offset=u-i);else if(d===0)v?o<l&&(h.pos=o,h.offset=l-o):a>l&&(h.pos=a,h.offset=l-a);else{var m=d/c,y=r[1]-m*l,b=0,x=0,_=!1;v&&o<=l?(b=m*o+y,x=o,_=!0):!v&&l<=a&&(b=m*a+y,x=a,_=!0),_&&(b<i||b>s)&&(_=!1),_||(p&&s<=u?(b=s,x=(b-y)/m,_=!0):!p&&u<=i&&(b=i,x=(b-y)/m,_=!0)),_&&(h.isBound=!0,h.pos=x,h.offset=l-x,g.isBound=!0,g.pos=b,g.offset=u-b)}return{vertical:h,horizontal:g}}function as(e,t,r){var n=e[r?"left":"top"],a=e[r?"right":"bottom"],i=Math.min.apply(Math,t),o=Math.max.apply(Math,t),s=[];return n+1>i&&s.push({isBound:!0,offset:i-n,pos:n}),a-1<o&&s.push({isBound:!0,offset:o-a,pos:a}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(l,u){return Math.abs(u.offset)-Math.abs(l.offset)})}function is(e,t,r){var n=r?e.map(function(a){return fn(a,r)}):e;return n.some(function(a){return a[0]<t.left&&Math.abs(a[0]-t.left)>.1||a[0]>t.right&&Math.abs(a[0]-t.right)>.1||a[1]<t.top&&Math.abs(a[1]-t.top)>.1||a[1]>t.bottom&&Math.abs(a[1]-t.bottom)>.1})}function tg(e,t,r){var n=ye(e),a=Math.sqrt(n*n-t*t)||0;return[a,-a].sort(function(i,o){return Math.abs(i-e[r?0:1])-Math.abs(o-e[r?0:1])}).map(function(i){return Ot([0,0],r?[i,t]:[t,i])})}function eg(e,t,r,n,a){if(!e.props.bounds)return[];var i=a*Math.PI/180,o=da(e),s=o.left,l=o.top,u=o.right,f=o.bottom,c=s-n[0],d=u-n[0],p=l-n[1],v=f-n[1],h={left:c,top:p,right:d,bottom:v};if(!is(r,h,0))return[];var g=[];return[[c,0],[d,0],[p,1],[v,1]].forEach(function(m){var y=m[0],b=m[1];r.forEach(function(x){var _=Ot([0,0],x);g.push.apply(g,tg(x,y,b).map(function(S){return i+S-_}).filter(function(S){return!is(t,h,S)}).map(function(S){return ut(S*180/Math.PI,re)}))})}),g}function rg(e,t){var r,n=e.direction,a=e.classNames,i=e.size,o=e.pos,s=e.zoom,l=e.key,u=n==="horizontal",f=u?"Y":"X";return t.createElement("div",{key:l,className:a.join(" "),style:(r={},r[u?"width":"height"]="".concat(i),r.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(f,"(-50%) scale").concat(f,"(").concat(s,")"),r)})}function no(e,t){return rg(T(T({},e),{classNames:st([ot("line","guideline",e.direction)],e.classNames,!0).filter(function(r){return r}),size:e.size||"".concat(e.sizeValue,"px"),pos:e.pos||e.posValue.map(function(r){return"".concat(ut(r,.1),"px")})}),t)}function os(e,t,r,n,a,i,o,s){var l=e.props.zoom;return r.map(function(u,f){var c=u.type,d=u.pos,p=[0,0];return p[o]=n,p[o?0:1]=-a+d,no({key:"".concat(t,"TargetGuideline").concat(f),classNames:[ot("target","bold",c)],posValue:p,sizeValue:i,zoom:l,direction:t},s)})}function ss(e,t,r,n,a,i){var o=e.props,s=o.zoom,l=o.isDisplayInnerSnapDigit,u=t==="horizontal"?He:Xe,f=a[u.start],c=a[u.end];return r.filter(function(d){var p=d.hide,v=d.elementRect;if(p)return!1;if(l&&v){var h=v.rect;if(h[u.start]<=f&&c<=h[u.end])return!1}return!0}).map(function(d,p){var v=d.pos,h=d.size,g=d.element,m=d.className,y=[-n[0]+v[0],-n[1]+v[1]];return no({key:"".concat(t,"-default-guideline-").concat(p),classNames:g?[ot("bold"),m]:[ot("normal"),m],direction:t,posValue:y,sizeValue:h,zoom:s},i)})}function zr(e,t,r,n,a,i,o,s){var l,u=e.props,f=u.snapDigit,c=f===void 0?0:f,d=u.isDisplaySnapDigit,p=d===void 0?!0:d,v=u.snapDistFormat,h=v===void 0?function(_,S){return _}:v,g=u.zoom,m=t==="horizontal"?"X":"Y",y=t==="vertical"?"height":"width",b=Math.abs(a),x=p?parseFloat(b.toFixed(c)):0;return s.createElement("div",{key:"".concat(t,"-").concat(r,"-guideline-").concat(n),className:ot("guideline-group",t),style:(l={left:"".concat(i[0],"px"),top:"".concat(i[1],"px")},l[y]="".concat(b,"px"),l)},no({direction:t,classNames:[ot(r),o],size:"100%",posValue:[0,0],sizeValue:b,zoom:g},s),s.createElement("div",{className:ot("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},x>0?h(x,t):""))}function ng(e,t,r,n){var a=e==="vertical"?0:1,i=e==="vertical"?1:0,o=a?He:Xe,s=r[o.start],l=r[o.end];return jl(t,function(u){return u.pos[a]}).map(function(u){var f=[],c=[],d=[];return u.forEach(function(p){var v,h,g=p.element,m=p.elementRect.rect;if(m[o.end]<s)f.push(p);else if(l<m[o.start])c.push(p);else if(m[o.start]<=s&&l<=m[o.end]&&n){var y=p.pos,b={element:g,rect:T(T({},m),(v={},v[o.end]=m[o.start],v))},x={element:g,rect:T(T({},m),(h={},h[o.start]=m[o.end],h))},_=[0,0],S=[0,0];_[a]=y[a],_[i]=y[i],S[a]=y[a],S[i]=y[i]+p.size,f.push({type:e,pos:_,size:0,elementRect:b}),c.push({type:e,pos:S,size:0,elementRect:x})}}),f.sort(function(p,v){return v.pos[i]-p.pos[i]}),c.sort(function(p,v){return p.pos[i]-v.pos[i]}),{total:u,start:f,end:c,inner:d}})}function ag(e,t,r,n,a){var i=e.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(s){var l=t.filter(function(g){return g.type===s}),u=s==="vertical"?1:0,f=u?0:1,c=ng(s,l,n,i),d=u?Xe:He,p=u?He:Xe,v=n[d.start],h=n[d.end];c.forEach(function(g){var m=g.total,y=g.start,b=g.end,x=g.inner,_=r[f]+m[0].pos[f]-n[p.start],S=n;y.forEach(function(C){var M=C.elementRect.rect,k=S[d.start]-M[d.end];if(k>0){var E=[0,0];E[u]=r[u]+S[d.start]-v-k,E[f]=_,o.push(zr(e,s,"dashed",o.length,k,E,C.className,a))}S=M}),S=n,b.forEach(function(C){var M=C.elementRect.rect,k=M[d.start]-S[d.end];if(k>0){var E=[0,0];E[u]=r[u]+S[d.end]-v,E[f]=_,o.push(zr(e,s,"dashed",o.length,k,E,C.className,a))}S=M}),x.forEach(function(C){var M=C.elementRect.rect,k=v-M[d.start],E=M[d.end]-h,R=[0,0],D=[0,0];R[u]=r[u]-k,R[f]=_,D[u]=r[u]+h-v,D[f]=_,o.push(zr(e,s,"dashed",o.length,k,R,C.className,a)),o.push(zr(e,s,"dashed",o.length,E,D,C.className,a))})})}),o}function ig(e,t,r,n,a){var i=[];return["horizontal","vertical"].forEach(function(o){var s=t.filter(function(g){return g.type===o}).slice(0,1),l=o==="vertical"?0:1,u=l?0:1,f=l?Xe:He,c=l?He:Xe,d=n[f.start],p=n[f.end],v=n[c.start],h=n[c.end];s.forEach(function(g){var m=g.gap,y=g.gapRects,b=Math.max.apply(Math,st([v],y.map(function(S){var C=S.rect;return C[c.start]}),!1)),x=Math.min.apply(Math,st([h],y.map(function(S){var C=S.rect;return C[c.end]}),!1)),_=(b+x)/2;b===x||_===(v+h)/2||y.forEach(function(S){var C=S.rect,M=S.className,k=[r[0],r[1]];if(C[f.end]<d)k[l]+=C[f.end]-d;else if(p<C[f.start])k[l]+=C[f.start]-d-m;else return;k[u]+=_-v,i.push(zr(e,l?"vertical":"horizontal","gap",i.length,m,k,M,a))})})}),i}function og(e,t,r,n){var a=t[0]-e[0],i=t[1]-e[1];if(Math.abs(a)<zt&&(a=0),Math.abs(i)<zt&&(i=0),!a)return n?[0,0]:[0,r];if(!i)return n?[r,0]:[0,0];var o=i/a,s=e[1]-o*e[0];if(n){var l=o*(t[0]+r)+s;return[r,l-t[1]]}else{var u=(t[1]+r-s)/o;return[u-t[0],r]}}function di(e,t,r,n,a){var i=og(e,t,r,n);if(!i)return{isOutside:!1,offset:[0,0]};var o=me(e,t),s=me(i,e),l=me(i,t),u=s>o||l>o,f=De({datas:a,distX:i[0],distY:i[1]}),c=f[0],d=f[1];return{offset:[c,d],isOutside:u}}function jn(e,t){return e.isBound?e.offset:t.isSnap?fi(t).offset:0}function sg(e,t,r,n,a){var i=t[0],o=t[1],s=r[0],l=r[1],u=n[0],f=n[1],c=a[0],d=a[1],p=-c,v=-d;if(e&&i&&o){p=0,v=0;var h=[];if(s&&l?h.push([0,d],[c,0]):s?h.push([c,0]):l?h.push([0,d]):u&&f?h.push([0,d],[c,0]):u?h.push([c,0]):f&&h.push([0,d]),h.length){h.sort(function(b,x){return ye(at([i,o],b))-ye(at([i,o],x))});var g=h[0];if(g[0]&&Math.abs(i)>zt)p=-g[0],v=o*Math.abs(i+p)/Math.abs(i)-o;else if(g[1]&&Math.abs(o)>zt){var m=o;v=-g[1],p=i*Math.abs(o+v)/Math.abs(m)-i}if(e&&l&&s)if(Math.abs(p)>zt&&Math.abs(p)<Math.abs(c)){var y=Math.abs(c)/Math.abs(p);p*=y,v*=y}else if(Math.abs(v)>zt&&Math.abs(v)<Math.abs(d)){var y=Math.abs(d)/Math.abs(v);p*=y,v*=y}else p=Sr(-c,p),v=Sr(-d,v)}}else p=i||s?-c:0,v=o||l?-d:0;return[p,v]}function lg(e,t,r,n,a,i){if(!Rr(e,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=Ui(i.absolutePoses,[t,r]),s=ve(o),l=s.left,u=s.right,f=s.top,c=s.bottom,d={horizontal:o.map(function(I){return I[1]}),vertical:o.map(function(I){return I[0]})},p=Ji(e.props.snapDirections),v=Qi(p,{left:l,right:u,top:f,bottom:c,center:(l+u)/2,middle:(f+c)/2}),h=pa(e,a,v,d),g=h.vertical,m=h.horizontal,y=jh(e,o,i),b=y.vertical,x=y.horizontal,_=g.isSnap,S=m.isSnap,C=g.isBound||b.isBound,M=m.isBound||x.isBound,k=Sr(g.offset,b.offset),E=Sr(m.offset,x.offset),R=sg(n,[t,r],[C,M],[_,S],[k,E]),D=R[0],P=R[1];return[{isBound:C,isSnap:_,offset:D},{isBound:M,isSnap:S,offset:P}]}function pa(e,t,r,n){n===void 0&&(n=r);var a=ro(da(e),n.vertical,n.horizontal),i=a.horizontal,o=a.vertical,s=t?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:fa(e,r.vertical,r.horizontal),l=s.horizontal,u=s.vertical,f=jn(i[0],l),c=jn(o[0],u),d=Math.abs(f),p=Math.abs(c);return{horizontal:{isBound:i[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:i,snap:l},vertical:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:p,bounds:o,snap:u}}}function ls(e,t,r,n,a){var i=ro(t,r,n),o=i.horizontal,s=i.vertical,l=Jl(e,r,n,a),u=l.horizontal,f=l.vertical,c=jn(o[0],u),d=jn(s[0],f),p=Math.abs(c),v=Math.abs(d);return{horizontal:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:p,bounds:o,snap:u},vertical:{isBound:s[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:d,dist:v,bounds:s,snap:f}}}function ug(e,t,r,n){var a=Ot(e,t)/Math.PI*180,i=r.vertical,o=i.isBound,s=i.isSnap,l=i.dist,u=r.horizontal,f=u.isBound,c=u.isSnap,d=u.dist,p=a%180,v=p<3||p>177,h=p>87&&p<93;return d<l&&(o||s&&!h&&(!n||!v))?"vertical":f||c&&!v&&(!n||!h)?"horizontal":""}function cg(e,t,r,n,a,i){return r.map(function(o){var s=o[0],l=o[1],u=It(t,s),f=It(t,l),c=n?fg(e,u,f,a):pa(e,a,{vertical:[f[0]],horizontal:[f[1]]}),d=c.horizontal,p=d.offset,v=d.isBound,h=d.isSnap,g=c.vertical,m=g.offset,y=g.isBound,b=g.isSnap,x=at(l,s);if(!m&&!p)return{isBound:y||v,isSnap:b||h,sign:x,offset:[0,0]};var _=ug(u,f,c,n);if(!_)return{sign:x,isBound:!1,isSnap:!1,offset:[0,0]};var S=_==="vertical",C=[0,0];return!n&&Math.abs(l[0])===1&&Math.abs(l[1])===1&&s[0]!==l[0]&&s[1]!==l[1]?C=De({datas:i,distX:-m,distY:-p}):C=di(u,f,-(S?m:p),S,i).offset,C=C.map(function(M,k){return M*(x[k]?2/x[k]:0)}),{sign:x,isBound:S?y:v,isSnap:S?b:h,offset:C}})}function us(e,t){return e.isBound?e.offset:t.isSnap?t.offset:0}function fg(e,t,r,n){var a=Qh(e,t,r),i=a.horizontal,o=a.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Wh(e,t,r),l=s.horizontal,u=s.vertical,f=us(i,l),c=us(o,u),d=Math.abs(f),p=Math.abs(c);return{horizontal:{isBound:i.isBound,isSnap:l.isSnap,offset:f,dist:d},vertical:{isBound:o.isBound,isSnap:u.isSnap,offset:c,dist:p}}}function dg(e,t,r,n,a){var i=[-r[0],-r[1]],o=e.state,s=o.width,l=o.height,u=e.props.bounds,f=1/0,c=1/0;if(u){var d=[[r[0],-r[1]],[-r[0],r[1]]],p=u.left,v=p===void 0?-1/0:p,h=u.top,g=h===void 0?-1/0:h,m=u.right,y=m===void 0?1/0:m,b=u.bottom,x=b===void 0?1/0:b;d.forEach(function(_){var S=_[0]!==i[0],C=_[1]!==i[1],M=It(t,_),k=Ot(n,M)*360/Math.PI;if(C){var E=M.slice();(Math.abs(k-360)<2||Math.abs(k-180)<2)&&(E[1]=n[1]);var R=di(n,E,(n[1]<M[1]?x:g)-M[1],!1,a),D=R.offset,P=D[1],I=R.isOutside;isNaN(P)||(c=l+(I?1:-1)*Math.abs(P))}if(S){var E=M.slice();(Math.abs(k-90)<2||Math.abs(k-270)<2)&&(E[0]=n[0]);var B=di(n,E,(n[0]<M[0]?y:v)-M[0],!0,a),V=B.offset[0],K=B.isOutside;isNaN(V)||(f=s+(K?1:-1)*Math.abs(V))}})}return{maxWidth:f,maxHeight:c}}function pi(e){var t=e.state,r=t.containerClientRect,n=t.hasFixed,a=r.overflow,i=r.scrollHeight,o=r.scrollWidth,s=r.clientHeight,l=r.clientWidth,u=r.clientLeft,f=r.clientTop,c=e.props,d=c.snapGap,p=d===void 0?!0:d,v=c.verticalGuidelines,h=c.horizontalGuidelines,g=c.snapThreshold,m=g===void 0?5:g,y=c.snapGridWidth,b=y===void 0?0:y,x=c.snapGridHeight,_=x===void 0?0:x,S=c.maxSnapElementGuidelineDistance,C=S===void 0?1/0:S,M=ve(ie(e.state)),k=M.top,E=M.left,R=M.bottom,D=M.right,P={top:k,left:E,bottom:R,right:D,center:(E+D)/2,middle:(k+R)/2},I=hg(e),B=st([],I,!0);p&&B.push.apply(B,pg(e,P,m)),B.push.apply(B,vg(b,_,a?o:l,a?i:s,u,f));var V=T({},t.snapOffset||{left:0,top:0,bottom:0,right:0});if(n){var K=r.left,X=r.top;V.left+=K,V.top+=X,V.right+=K,V.bottom+=X}return B.push.apply(B,au(h||!1,v||!1,a?o:l,a?i:s,u,f,V)),B=B.filter(function(H){var z=H.element,j=H.elementRect,G=H.type;if(!z||!j)return!0;var $=j.rect;return nu(P,$,G,C)}),B}function pg(e,t,r){var n=e.props,a=n.maxSnapElementGuidelineDistance,i=a===void 0?1/0:a,o=n.maxSnapElementGapDistance,s=o===void 0?1/0:o,l=e.state.elementRects,u=[];return[["vertical",He,Xe],["horizontal",Xe,He]].forEach(function(f){var c=f[0],d=f[1],p=f[2],v=t[d.start],h=t[d.end],g=t[d.center],m=t[p.start],y=t[p.end];function b(S){var C=S.rect;return C[d.end]<v+r?v-C[d.end]:h-r<C[d.start]?C[d.start]-h:-1}var x=l.filter(function(S){var C=S.rect;return C[p.start]>y||C[p.end]<m?!1:b(S)>0}).sort(function(S,C){return b(S)-b(C)}),_=[];x.forEach(function(S){x.forEach(function(C){if(S!==C){var M=S.rect,k=C.rect,E=M[p.start],R=M[p.end],D=k[p.start],P=k[p.end];E>P||D>R||_.push([S,C])}})}),_.forEach(function(S){var C=S[0],M=S[1],k=C.rect,E=M.rect,R=k[d.start],D=k[d.end],P=E[d.start],I=E[d.end],B=0,V=0,K=!1,X=!1,H=!1;if(D<=v&&h<=P){if(X=!0,B=(P-D-(h-v))/2,V=D+B+(h-v)/2,Math.abs(V-g)>r)return}else if(D<P&&I<v+r){if(K=!0,B=P-D,V=I+B,Math.abs(V-v)>r)return}else if(D<P&&h-r<R){if(H=!0,B=P-D,V=R-B,Math.abs(V-h)>r)return}else return;B&&nu(t,E,c,i)&&(B>s||u.push({type:c,pos:c==="vertical"?[V,0]:[0,V],element:M.element,size:0,className:M.className,isStart:K,isCenter:X,isEnd:H,gap:B,hide:!0,gapRects:[C,M]}))})}),u}function vg(e,t,r,n,a,i){a===void 0&&(a=0),i===void 0&&(i=0);var o=[];if(t)for(var s=0;s<=n;s+=t)o.push({type:"horizontal",pos:[0,ut(s-i,.1)],size:r,hide:!0});if(e)for(var s=0;s<=r;s+=e)o.push({type:"vertical",pos:[ut(s-a,.1),0],size:n,hide:!0});return o}function nu(e,t,r,n){return r==="horizontal"?Math.abs(e.right-t.left)<=n||Math.abs(e.left-t.right)<=n||e.left<=t.right&&t.left<=e.right:r==="vertical"?Math.abs(e.bottom-t.top)<=n||Math.abs(e.top-t.bottom)<=n||e.top<=t.bottom&&t.top<=e.bottom:!0}function hg(e){var t=e.state,r=e.props.elementGuidelines,n=r===void 0?[]:r;if(!n.length)return t.elementRects=[],[];var a=(t.elementRects||[]).filter(function(d){return!d.refresh}),i=n.map(function(d){return Se(d)&&"element"in d?T(T({},d),{element:or(d.element,!0)}):{element:or(d,!0)}}).filter(function(d){return d.element}),o=Cv(a.map(function(d){return d.element}),i.map(function(d){return d.element})),s=o.maintained,l=o.added,u=[];s.forEach(function(d){var p=d[0],v=d[1];u[v]=a[p]}),gg(e,l.map(function(d){return i[d]})).map(function(d,p){u[l[p]]=d}),t.elementRects=u;var f=Ji(e.props.elementSnapDirections),c=[];return u.forEach(function(d){var p=d.element,v=d.top,h=v===void 0?f.top:v,g=d.left,m=g===void 0?f.left:g,y=d.right,b=y===void 0?f.right:y,x=d.bottom,_=x===void 0?f.bottom:x,S=d.center,C=S===void 0?f.center:S,M=d.middle,k=M===void 0?f.middle:M,E=d.className,R=d.rect,D=Qi({top:h,right:b,left:m,bottom:_,center:C,middle:k},R),P=D.horizontal,I=D.vertical,B=R.top,V=R.left,K=R.right-V,X=R.bottom-B,H=[K,X];I.forEach(function(z){c.push({type:"vertical",element:p,pos:[ut(z,.1),B],size:X,sizes:H,className:E,elementRect:d})}),P.forEach(function(z){c.push({type:"horizontal",element:p,pos:[V,ut(z,.1)],size:K,sizes:H,className:E,elementRect:d})})}),c}function au(e,t,r,n,a,i,o){a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var s=[],l=o.left,u=o.top,f=o.bottom,c=o.right,d=r+c-l,p=n+f-u;return e&&e.forEach(function(v){var h=Se(v)?v:{pos:v};s.push({type:"horizontal",pos:[l,ut(h.pos-i+u,.1)],size:d,className:h.className})}),t&&t.forEach(function(v){var h=Se(v)?v:{pos:v};s.push({type:"vertical",pos:[ut(h.pos-a+l,.1),u],size:p,className:h.className})}),s}function gg(e,t){if(!t.length)return[];var r=e.state,n=r.containerClientRect,a=r.targetClientRect,i=a.top,o=a.left,s=r.rootMatrix,l=r.is3d,u=l?4:3,f=Nh(s,n,u),c=f[0],d=f[1],p=ie(r),v=Ve(p),h=v.minX,g=v.minY,m=at([h,g],nr(s,[o-c,i-d],u)).map(function(x){return Dh(x)}),y=m[0],b=m[1];return t.map(function(x){var _=x.element.getBoundingClientRect(),S=_.left-c,C=_.top-d,M=C+_.height,k=S+_.width,E=nr(s,[S,C],u),R=E[0],D=E[1],P=nr(s,[k,M],u),I=P[0],B=P[1];return T(T({},x),{rect:{left:R+y,right:I+y,top:D+b,bottom:B+b,center:(R+I)/2+y,middle:(D+B)/2+b}})})}function Tn(e){var t=e.state,r=t.container,n=e.props.snapContainer||r;if(t.snapContainer===n&&t.guidelines&&t.guidelines.length)return!1;var a=t.containerClientRect,i={left:0,top:0,bottom:0,right:0};if(r!==n){var o=or(n,!0);if(o){var s=Ar(o),l=Qo(t,[s.left-a.left,s.top-a.top]),u=Qo(t,[s.right-a.right,s.bottom-a.bottom]);i.left=ut(l[0],1e-5),i.top=ut(l[1],1e-5),i.right=ut(u[0],1e-5),i.bottom=ut(u[1],1e-5)}}return t.snapContainer=n,t.snapOffset=i,t.guidelines=pi(e),t.enableSnap=!0,!0}function iu(e,t,r,n,a,i){var o=We(e,t,r,i?4:3),s=It(o,n);return Ui(o,at(a,s))}function mg(e,t,r,n,a,i){var o=i.fixedDirection,s=Xh(r,o,n),l=eo(e,t,r,n),u=st(st([],cg(e,t,s,n,a,i),!0),ru(e,l,i),!0),f=Yn(u,0),c=Yn(u,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:c.isBound,offset:c.offset[1]}}}function bg(e,t,r,n,a,i,o,s,l){var u=It(t,o),f=pa(e,s,{vertical:[u[0]],horizontal:[u[1]]}),c=f.horizontal.offset,d=f.vertical.offset;if(ut(d,ii)||ut(c,ii)){var p=De({datas:l,distX:-d,distY:-c}),v=p[0],h=p[1],g=Math.min(a||1/0,r+o[0]*v),m=Math.min(i||1/0,n+o[1]*h);return[g-r,m-n]}return[0,0]}function ou(e,t,r,n,a,i,o,s){for(var l=ie(e.state),u=e.props.keepRatio,f=0,c=0,d=0;d<2;++d){var p=t(f,c),v=mg(e,p,a,u,o,s),h=v.width,g=v.height,m=h.isBound,y=g.isBound,b=h.offset,x=g.offset;if(d===1&&(m||(b=0),y||(x=0)),d===0&&o&&!m&&!y)return[0,0];if(u){var _=Math.abs(b)*(r?1/r:1),S=Math.abs(x)*(n?1/n:1),C=m&&y?_<S:y||!m&&_<S;C?b=r*x/n:x=n*b/r}f+=b,c+=x}if(a[0]&&a[1]){var M=dg(e,l,a,i,s),k=M.maxWidth,E=M.maxHeight,R=bg(e,t(f,c).map(function(I){return I.map(function(B){return ut(B,ii)})}),r+f,n+c,k,E,a,o,s),b=R[0],x=R[1];f+=b,c+=x}return[f,c]}function yg(e,t,r){if(!Rr(e,"rotatable"))return{isSnap:!1,rotation:r};var n=t.pos1,a=t.pos2,i=t.pos3,o=t.pos4,s=t.origin,l=r*Math.PI/180,u=[n,a,i,o].map(function(p){return at(p,s)}),f=u.map(function(p){return fn(p,l)}),c=st(st([],eg(e,u,f,s,r),!0),Zh(e,u,f,s,r),!0);c.sort(function(p,v){return Math.abs(p-r)-Math.abs(v-r)});var d=c.length>0;return{isSnap:d,rotation:d?c[0]:r}}function xg(e,t,r,n,a,i,o){if(!Rr(e,"resizable"))return[0,0];var s=o.fixedDirection,l=o.nextAllMatrix,u=e.state,f=u.allMatrix,c=u.is3d;return ou(e,function(d,p){return iu(l||f,t+d,r+p,s,a,c)},t,r,n,a,i,o)}function _g(e,t,r,n,a){if(!Rr(e,"scalable"))return[0,0];var i=a.startOffsetWidth,o=a.startOffsetHeight,s=a.fixedPosition,l=a.fixedDirection,u=a.is3d,f=ou(e,function(c,d){return iu(dh(a,bt(t,[c/i,d/o])),i,o,l,s,u)},i,o,r,s,n,a);return[f[0]/i,f[1]/o]}function Sg(e,t){t.absolutePoses=ie(e.state)}function cs(e){var t=[];return e.forEach(function(r){r.guidelineInfos.forEach(function(n){var a=n.guideline;t.indexOf(a)>-1||t.push(a)})}),t}function fs(e,t,r,n,a,i){var o=ro(da(e,i),t,r),s=o.vertical,l=o.horizontal;s.forEach(function(d){d.isBound&&n.push({type:"bounds",pos:d.pos})}),l.forEach(function(d){d.isBound&&a.push({type:"bounds",pos:d.pos})});var u=Jh(e),f=u.vertical,c=u.horizontal;f.forEach(function(d){Te(n,function(p){var v=p.type,h=p.pos;return v==="bounds"&&h===d})>=0||n.push({type:"bounds",pos:d})}),c.forEach(function(d){Te(a,function(p){var v=p.type,h=p.pos;return v==="bounds"&&h===d})>=0||a.push({type:"bounds",pos:d})})}var Cg=Ki("",["resizable","scalable"]),wg={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,snapRenderThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,maxSnapElementGuidelineDistance:Number,maxSnapElementGapDistance:Number},events:{onSnap:"snap"},css:[`:host {
    --bounds-color: #d66;
}
.guideline {
    pointer-events: none;
    z-index: 2;
}
.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}
.guideline-group {
    position: absolute;
    top: 0;
    left: 0;
}
.guideline-group .size-value {
    position: absolute;
    color: #f55;
    font-size: 12px;
    font-weight: bold;
}
.guideline-group.horizontal .size-value {
    transform-origin: 50% 100%;
    transform: translateX(-50%);
    left: 50%;
    bottom: 5px;
}
.guideline-group.vertical .size-value {
    transform-origin: 0% 50%;
    top: 50%;
    transform: translateY(-50%);
    left: 5px;
}
.guideline.gap {
    background: #f55;
}
.size-value.gap {
    color: #f55;
}
`],render:function(e,t){var r=e.state,n=r.top,a=r.left,i=r.pos1,o=r.pos2,s=r.pos3,l=r.pos4,u=r.snapRenderInfo,f=e.props.snapRenderThreshold,c=f===void 0?1:f;if(!u||!u.render||!Rr(e,""))return[];r.guidelines=pi(e);var d=Math.min(i[0],o[0],s[0],l[0]),p=Math.min(i[1],o[1],s[1],l[1]),v=u.externalPoses||[],h=ie(e.state),g=[],m=[],y=[],b=[],x=[],_=ve(h),S=_.width,C=_.height,M=_.top,k=_.left,E=_.bottom,R=_.right,D={left:k,right:R,top:M,bottom:E,center:(k+R)/2,middle:(M+E)/2},P=v.length>0,I=P?ve(v):{};if(!u.request){if(u.direction&&x.push(Hh(e,h,u.direction,c)),u.snap){var B=ve(h);u.center&&(B.middle=(B.top+B.bottom)/2,B.center=(B.left+B.right)/2),x.push(ts(e,B,c))}P&&(u.center&&(I.middle=(I.top+I.bottom)/2,I.center=(I.left+I.right)/2),x.push(ts(e,I,c))),x.forEach(function(H){var z=H.vertical.posInfos,j=H.horizontal.posInfos;g.push.apply(g,z.filter(function(G){var $=G.guidelineInfos;return $.some(function(N){var F=N.guideline;return!F.hide})}).map(function(G){return{type:"snap",pos:G.pos}})),m.push.apply(m,j.filter(function(G){var $=G.guidelineInfos;return $.some(function(N){var F=N.guideline;return!F.hide})}).map(function(G){return{type:"snap",pos:G.pos}})),y.push.apply(y,cs(z)),b.push.apply(b,cs(j))})}fs(e,[k,R],[M,E],g,m),P&&fs(e,[I.left,I.right],[I.top,I.bottom],g,m,u.externalBounds);var V=st(st([],y,!0),b,!0),K=V.filter(function(H){return H.element&&!H.gapRects}),X=V.filter(function(H){return H.gapRects}).sort(function(H,z){return H.gap-z.gap});return et(e,"onSnap",{guidelines:V.filter(function(H){var z=H.element;return!z}),elements:K,gaps:X},!0),st(st(st(st(st(st([],ag(e,K,[d,p],D,t),!0),ig(e,X,[d,p],D,t),!0),ss(e,"horizontal",b,[a,n],D,t),!0),ss(e,"vertical",y,[a,n],D,t),!0),os(e,"horizontal",m,d,n,S,0,t),!0),os(e,"vertical",g,p,a,C,1,t),!0)},dragStart:function(e,t){e.state.snapRenderInfo={request:t.isRequest,snap:!0,center:!0},Tn(e)},drag:function(e){var t=e.state;Tn(e)||(t.guidelines=pi(e)),t.snapRenderInfo&&(t.snapRenderInfo.render=!0)},pinchStart:function(e){this.unset(e)},dragEnd:function(e){this.unset(e)},dragControlCondition:function(e,t){if(Cg(e,t)||hi(e,t))return!0;if(!t.isRequest&&t.inputEvent)return Gt(t.inputEvent.target,ot("snap-control"))},dragControlStart:function(e){e.state.snapRenderInfo=null,Tn(e)},dragControl:function(e){this.drag(e)},dragControlEnd:function(e){this.unset(e)},dragGroupStart:function(e,t){this.dragStart(e,t)},dragGroup:function(e){this.drag(e)},dragGroupEnd:function(e){this.unset(e)},dragGroupControlStart:function(e){e.state.snapRenderInfo=null,Tn(e)},dragGroupControl:function(e){this.drag(e)},dragGroupControlEnd:function(e){this.unset(e)},unset:function(e){var t=e.state;t.enableSnap=!1,t.guidelines=[],t.snapRenderInfo=null,t.elementRects=[]}};function su(e,t,r,n){var a=e.getState(),i=a.renderPoses,o=a.rotation,s=a.direction,l=ir(e.props,t).zoom,u=s>0?1:-1,f=o/Math.PI*180,c={},d=e.renderState;d.renderDirectionMap||(d.renderDirectionMap={});var p=d.renderDirectionMap;return r.forEach(function(v){var h=v.dir;c[h]=!0}),r.map(function(v){var h=v.data,g=v.classNames,m=v.dir,y=Hi[m];if(!y||!c[m])return null;p[m]=!0;var b=(ut(f,15)+u*El[m]+720)%180,x={};return Mr(h).forEach(function(_){x["data-".concat(_)]=h[_]}),n.createElement("div",T({className:ot.apply(void 0,st(["control","direction",m,t],g,!1)),"data-rotation":b,"data-direction":m},x,{key:"direction-".concat(m),style:ji.apply(void 0,st([o,l],y.map(function(_){return i[_]}),!1))}))})}function lu(e,t,r,n){var a=ir(e.props,r).renderDirections,i=a===void 0?t:a;if(!i)return[];var o=i===!0?Wi:i;return su(e,r,o.map(function(s){return{data:{},classNames:[],dir:s}}),n)}function Eg(e,t){var r=e.renderState;r.renderDirectionMap||(r.renderDirectionMap={});var n=e.getState(),a=n.renderPoses,i=n.rotation,o=n.direction,s=r.renderDirectionMap,l=e.props.zoom,u=o>0?1:-1,f=i/Math.PI*180;return Mr(s).map(function(c){var d=Hi[c];if(!d)return null;var p=(ut(f,15)+u*El[c]+720)%180;return t.createElement("div",{className:ot("around-control"),"data-rotation":p,"data-direction":c,key:"direction-around-".concat(c),style:ji.apply(void 0,st([i,l],d.map(function(v){return a[v]}),!1))})})}function Kr(e,t,r,n,a,i){for(var o=[],s=6;s<arguments.length;s++)o[s-6]=arguments[s];var l=Ot(r,n),u=t?ut(l/Math.PI*180,15)%180:-1;return e.createElement("div",{key:"line-".concat(i),className:ot.apply(void 0,st(["line","direction",t?"edge":"",t],o,!1)),"data-rotation":u,"data-line-key":i,"data-direction":t,style:Br(r,n,a,l)})}function uu(e,t,r,n,a){var i=r===!0?nh:r;return i.map(function(o,s){var l=Hi[o],u=l[0],f=l[1];if(f!=null)return Kr(e,o,n[u],n[f],a,"".concat(t,"Edge").concat(s),t)}).filter(Boolean)}function cu(e){return function(t,r){var n=ir(t.props,e).edge;return n&&(n===!0||n.length)?st(st([],uu(r,e,n,t.getState().renderPoses,t.props.zoom),!0),kg(t,e,r),!0):fu(t,e,r)}}function fu(e,t,r){return lu(e,Wi,t,r)}function kg(e,t,r){return lu(e,["nw","ne","sw","se"],t,r)}var Qt={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},requestStyle:function(){return["left","top","right","bottom"]},render:function(e,t){var r=e.props,n=r.throttleDragRotate,a=r.zoom,i=e.getState(),o=i.dragInfo,s=i.beforeOrigin;if(!n||!o)return[];var l=o.dist;if(!l[0]&&!l[1])return[];var u=ye(l),f=Ot(l,[0,0]);return[t.createElement("div",{className:ot("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(u,"px"),transform:"translate(".concat(s[0],"px, ").concat(s[1],"px) rotate(").concat(f,"rad) scaleY(").concat(a,")")}})]},dragStart:function(e,t){var r=t.datas,n=t.parentEvent,a=t.parentGesto,i=e.state,o=i.gestos,s=i.style;if(o.draggable)return!1;o.draggable=a||e.targetGesto,r.datas={},r.left=parseFloat(s.left||"")||0,r.top=parseFloat(s.top||"")||0,r.bottom=parseFloat(s.bottom||"")||0,r.right=parseFloat(s.right||"")||0,r.startValue=[0,0],ur(e,t),la(t,"translate"),Sg(e,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var l=ft(e,t,T({set:function(f){r.startValue=f}},sa(t))),u=n||et(e,"onDragStart",l);return u!==!1?(r.isDrag=!0,e.state.dragInfo={startRect:e.getRect(),dist:[0,0]}):(o.draggable=null,r.isPinch=!1),r.isDrag?l:!1},drag:function(e,t){if(t){ia(t,"translate");var r=t.datas,n=t.parentEvent,a=t.parentFlag,i=t.isPinch,o=t.isRequest,s=t.deltaOffset,l=t.distX,u=t.distY,f=r.isDrag,c=r.prevDist,d=r.prevBeforeDist,p=r.startValue;if(f){s&&(l+=s[0],u+=s[1]);var v=e.props,h=v.parentMoveable,g=n?0:v.throttleDrag||0,m=n?0:v.throttleDragRotate||0,y=0,b=!1,x=!1,_=!1,S=!1;if(!n&&m>0&&(l||u)){var C=v.startDragRotate||0,M=ut(C+Ot([0,0],[l,u])*180/Math.PI,m)-C,k=u*Math.abs(Math.cos((M-90)/180*Math.PI)),E=l*Math.abs(Math.cos(M/180*Math.PI)),R=ye([E,k]);y=M*Math.PI/180,l=R*Math.cos(y),u=R*Math.sin(y)}if(!i&&!n&&!a){var D=lg(e,l,u,m,o||s,r),P=D[0],I=D[1];b=P.isSnap,x=P.isBound,_=I.isSnap,S=I.isBound;var B=P.offset,V=I.offset;l+=B,u+=V}var K=bt(Tl({datas:r,distX:l,distY:u}),p),X=bt(oh({datas:r,distX:l,distY:u}),p);Go(X,re),Go(K,re),m||(!b&&!x&&(X[0]=ut(X[0],g),K[0]=ut(K[0],g)),!_&&!S&&(X[1]=ut(X[1],g),K[1]=ut(K[1],g)));var H=at(K,p),z=at(X,p),j=at(z,c),G=at(H,d);r.prevDist=z,r.prevBeforeDist=H,r.passDelta=j,r.passDist=z;var $=r.left+H[0],N=r.top+H[1],F=r.right-H[0],W=r.bottom-H[1],Z=oa(r,"translate(".concat(X[0],"px, ").concat(X[1],"px)"),"translate(".concat(z[0],"px, ").concat(z[1],"px)"));if(Xi(t,Z),e.state.dragInfo.dist=n?[0,0]:z,!(!n&&!h&&j.every(function(ct){return!ct})&&G.some(function(ct){return!ct}))){var nt=e.state,U=nt.width,J=nt.height,Q=ft(e,t,T({transform:Z,dist:z,delta:j,translate:X,beforeDist:H,beforeDelta:G,beforeTranslate:K,left:$,top:N,right:F,bottom:W,width:U,height:J,isPinch:i},te({transform:Z},t)));return!n&&et(e,"onDrag",Q),Q}}}},dragAfter:function(e,t){var r=t.datas,n=r.deltaOffset;return n[0]||n[1]?(r.deltaOffset=[0,0],this.drag(e,T(T({},t),{deltaOffset:n}))):!1},dragEnd:function(e,t){var r=t.parentEvent,n=t.datas;if(e.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var a=ce(e,t,{});return!r&&et(e,"onDragEnd",a),a}},dragGroupStart:function(e,t){var r=t.datas,n=t.clientX,a=t.clientY,i=this.dragStart(e,t);if(!i)return!1;var o=Ia(e,this,"dragStart",[n||0,a||0],t,!1,"draggable"),s=T(T({},i),{targets:e.props.targets,events:o}),l=et(e,"onDragGroupStart",s);return r.isDrag=l!==!1,r.isDrag?i:!1},dragGroup:function(e,t){var r=t.datas;if(r.isDrag){var n=this.drag(e,t),a=t.datas.passDelta,i=Ia(e,this,"drag",a,t,!1,"draggable");if(n){var o=T({targets:e.props.targets,events:i},n);return et(e,"onDragGroup",o),o}}},dragGroupEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isDrag){this.dragEnd(e,t);var a=Ia(e,this,"dragEnd",[0,0],t,!1,"draggable");return et(e,"onDragGroupEnd",ce(e,t,{targets:e.props.targets,events:a})),r}},request:function(e){var t={},r=e.getRect(),n=0,a=0;return{isControl:!1,requestStart:function(){return{datas:t}},request:function(i){return"x"in i?n=i.x-r.left:"deltaX"in i&&(n+=i.deltaX),"y"in i?a=i.y-r.top:"deltaY"in i&&(a+=i.deltaY),{datas:t,distX:n,distY:a}},requestEnd:function(){return{datas:t,isDrag:!0}}}},unset:function(e){e.state.gestos.draggable=null,e.state.dragInfo=null}},ds=Ki("resizable"),vi={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean,checkResizableError:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:cu("resizable"),dragControlCondition:ds,viewClassName:qi("resizable"),dragControlStart:function(e,t){var r,n=t.inputEvent,a=t.isPinch,i=t.isGroup,o=t.parentDirection,s=t.parentGesto,l=t.datas,u=t.parentFixedDirection,f=t.parentEvent,c=Hl(o,a,n,l),d=e.state,p=d.target,v=d.width,h=d.height,g=d.gestos;if(!c||!p||g.resizable)return!1;g.resizable=s||e.controlGesto,!a&&ur(e,t),l.datas={},l.direction=c,l.startOffsetWidth=v,l.startOffsetHeight=h,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=d.inlineCSSWidth||d.cssWidth,l.startHeight=d.inlineCSSHeight||d.cssHeight,l.maxSize=[1/0,1/0],i||(l.minSize=[d.minOffsetWidth,d.minOffsetHeight],l.maxSize=[d.maxOffsetWidth,d.maxOffsetHeight]);var m=e.props.transformOrigin||"% %";l.transformOrigin=m&&ue(m)?m.split(" "):m,l.startOffsetMatrix=d.offsetMatrix,l.startTransformOrigin=d.transformOrigin,l.isWidth=(r=t==null?void 0:t.parentIsWidth)!==null&&r!==void 0?r:!c[0]&&!c[1]||c[0]||!c[1];function y(k){l.ratio=k&&isFinite(k)?k:0}l.startPositions=ie(e.state);function b(k){l.fixedDirection=k,l.fixedPosition=It(l.startPositions,k)}function x(k){var E=e.state,R=E.width,D=E.height;l.fixedPosition=k,l.fixedDirection=Bl(k,R,D)}function _(k){l.minSize=[kt("".concat(k[0]),0)||0,kt("".concat(k[1]),0)||0]}function S(k){var E=[k[0]||1/0,k[1]||1/0];(!Na(E[0])||isFinite(E[0]))&&(E[0]=kt("".concat(E[0]),0)||1/0),(!Na(E[1])||isFinite(E[1]))&&(E[1]=kt("".concat(E[1]),0)||1/0),l.maxSize=E}y(v/h),b(u||[-c[0],-c[1]]),l.setFixedDirection=b,l.setFixedPosition=x,l.setMin=_,l.setMax=S;var C=ft(e,t,{direction:c,startRatio:l.ratio,set:function(k){var E=k[0],R=k[1];l.startWidth=E,l.startHeight=R},setMin:_,setMax:S,setRatio:y,setFixedDirection:b,setFixedPosition:x,setOrigin:function(k){l.transformOrigin=k},dragStart:Qt.dragStart(e,new _r().dragStart([0,0],t))}),M=f||et(e,"onResizeStart",C);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,M!==!1&&(l.isResize=!0,e.state.snapRenderInfo={request:t.isRequest,direction:c}),l.isResize?C:!1},dragControl:function(e,t){var r,n=t.datas,a=t.parentFlag,i=t.isPinch,o=t.parentKeepRatio,s=t.dragClient,l=t.parentDist,u=t.isRequest,f=t.isGroup,c=t.parentEvent,d=t.resolveMatrix,p=n.isResize,v=n.transformOrigin,h=n.startWidth,g=n.startHeight,m=n.prevWidth,y=n.prevHeight,b=n.minSize,x=n.maxSize,_=n.ratio,S=n.startOffsetWidth,C=n.startOffsetHeight,M=n.isWidth;if(!p)return;if(d){var k=e.state.is3d,E=n.startOffsetMatrix,R=n.startTransformOrigin,D=k?4:3,P=Gi(Pl(t)),I=Math.sqrt(P.length);D!==I&&(P=Ee(P,I,D));var B=hn(E,P,R,D),V=We(B,S,C,D);n.startPositions=V,n.nextTargetMatrix=P,n.nextAllMatrix=B}var K=ir(e.props,"resizable"),X=K.resizeFormat,H=K.throttleResize,z=H===void 0?a?0:1:H,j=K.parentMoveable,G=K.keepRatioFinally,$=n.direction,N=$,F=0,W=0;!$[0]&&!$[1]&&(N=[1,1]);var Z=_&&(o??K.keepRatio)||!1;function nt(){var $t=n.fixedDirection,Ht=Kl(N,Z,n,t);F=Ht.distWidth,W=Ht.distHeight;var Oe=N[0]-$t[0]||Z?Math.max(S+F,re):S,cr=N[1]-$t[1]||Z?Math.max(C+W,re):C;return Z&&S&&C&&(M?cr=Oe/_:Oe=cr*_),[Oe,cr]}var U=nt(),J=U[0],Q=U[1];c||(n.setFixedDirection(n.fixedDirection),et(e,"onBeforeResize",ft(e,t,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function($t){var Ht;return n.setFixedDirection($t),Ht=nt(),J=Ht[0],Q=Ht[1],[J,Q]},setFixedPosition:function($t){var Ht;return n.setFixedPosition($t),Ht=nt(),J=Ht[0],Q=Ht[1],[J,Q]},boundingWidth:J,boundingHeight:Q,setSize:function($t){J=$t[0],Q=$t[1]}},!0)));var ct=s;s||(!a&&i?ct=zl(e,[0,0]):ct=n.fixedPosition);var dt=[0,0];i||(dt=xg(e,J,Q,$,ct,u,n)),l&&(!l[0]&&(dt[0]=0),!l[1]&&(dt[1]=0));function Bt(){var $t;X&&($t=X([J,Q]),J=$t[0],Q=$t[1]),J=ut(J,z),Q=ut(Q,z)}if(Z){N[0]&&N[1]&&dt[0]&&dt[1]&&(Math.abs(dt[0])>Math.abs(dt[1])?dt[1]=0:dt[0]=0);var St=!dt[0]&&!dt[1];St&&Bt(),N[0]&&!N[1]||dt[0]&&!dt[1]||St&&M?(J+=dt[0],Q=J/_):(!N[0]&&N[1]||!dt[0]&&dt[1]||St&&!M)&&(Q+=dt[1],J=Q*_)}else J+=dt[0],Q+=dt[1],J=Math.max(0,J),Q=Math.max(0,Q);r=Np([J,Q],b,x,Z?_:!1),J=r[0],Q=r[1],Bt(),Z&&(f||G)&&(M?Q=J/_:J=Q*_),F=J-S,W=Q-C;var yt=[F-m,W-y];n.prevWidth=F,n.prevHeight=W;var Mt=hh(e,J,Q,ct,v,n);if(!(!j&&yt.every(function($t){return!$t})&&Mt.every(function($t){return!$t}))){var mt=Qt.drag(e,vn(t,e.state,Mt,!!i,!1,"draggable")),xt=mt.transform,_t=h+F,ne=g+W,Ie=ft(e,t,T({width:_t,height:ne,offsetWidth:Math.round(J),offsetHeight:Math.round(Q),startRatio:_,boundingWidth:J,boundingHeight:Q,direction:$,dist:[F,W],delta:yt,isPinch:!!i,drag:mt},Yl({style:{width:"".concat(_t,"px"),height:"".concat(ne,"px")},transform:xt},mt,t)));return!c&&et(e,"onResize",Ie),Ie}},dragControlAfter:function(e,t){var r=t.datas,n=r.isResize,a=r.startOffsetWidth,i=r.startOffsetHeight,o=r.prevWidth,s=r.prevHeight;if(!(!n||e.props.checkResizableError===!1)){var l=e.state,u=l.width,f=l.height,c=u-(a+o),d=f-(i+s),p=Math.abs(c)>3,v=Math.abs(d)>3;if(p&&(r.startWidth+=c,r.startOffsetWidth+=c,r.prevWidth+=c),v&&(r.startHeight+=d,r.startOffsetHeight+=d,r.prevHeight+=d),p||v)return this.dragControl(e,t)}},dragControlEnd:function(e,t){var r=t.datas,n=t.parentEvent;if(r.isResize){r.isResize=!1;var a=ce(e,t,{});return!n&&et(e,"onResizeEnd",a),a}},dragGroupControlCondition:ds,dragGroupControlStart:function(e,t){var r=t.datas,n=this.dragControlStart(e,T(T({},t),{isGroup:!0}));if(!n)return!1;var a=xe(e,"resizable",t);function i(v,h){var g=r.fixedDirection,m=r.fixedPosition,y=h.datas.startPositions||ie(v.state),b=It(y,g),x=Yt(xr(-e.rotation/180*Math.PI,3),[b[0]-m[0],b[1]-m[1],1],3),_=x[0],S=x[1];return h.datas.originalX=_,h.datas.originalY=S,h}var o=r.startOffsetWidth,s=r.startOffsetHeight;function l(){var v=r.minSize;a.forEach(function(h){var g=h.datas,m=g.minSize,y=g.startOffsetWidth,b=g.startOffsetHeight,x=o*(y?m[0]/y:0),_=s*(b?m[1]/b:0);v[0]=Math.max(v[0],x),v[1]=Math.max(v[1],_)})}function u(){var v=r.maxSize;a.forEach(function(h){var g=h.datas,m=g.maxSize,y=g.startOffsetWidth,b=g.startOffsetHeight,x=o*(y?m[0]/y:0),_=s*(b?m[1]/b:0);v[0]=Math.min(v[0],x),v[1]=Math.min(v[1],_)})}var f=Me(e,this,"dragControlStart",t,function(v,h){return i(v,h)});l(),u();var c=function(v){n.setFixedDirection(v),f.forEach(function(h,g){h.setFixedDirection(v),i(h.moveable,a[g])})};r.setFixedDirection=c;var d=T(T({},n),{targets:e.props.targets,events:f.map(function(v){return T(T({},v),{setMin:function(h){v.setMin(h),l()},setMax:function(h){v.setMax(h),u()}})}),setFixedDirection:c,setMin:function(v){n.setMin(v),l()},setMax:function(v){n.setMax(v),u()}}),p=et(e,"onResizeGroupStart",d);return r.isResize=p!==!1,r.isResize?n:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isResize){var n=ir(e.props,"resizable");ca(e,"onBeforeResize",function(p){et(e,"onBeforeResizeGroup",ft(e,t,T(T({},p),{targets:n.targets}),!0))});var a=this.dragControl(e,T(T({},t),{isGroup:!0}));if(a){var i=a.boundingWidth,o=a.boundingHeight,s=a.dist,l=n.keepRatio,u=[i/(i-s[0]),o/(o-s[1])],f=r.fixedPosition,c=Me(e,this,"dragControl",t,function(p,v){var h=Yt(xr(e.rotation/180*Math.PI,3),[v.datas.originalX*u[0],v.datas.originalY*u[1],1],3),g=h[0],m=h[1];return T(T({},v),{parentDist:null,parentScale:u,dragClient:bt(f,[g,m]),parentKeepRatio:l})}),d=T({targets:n.targets,events:c},a);return et(e,"onResizeGroup",d),d}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isResize){this.dragControlEnd(e,t);var a=Me(e,this,"dragControlEnd",t),i=ce(e,t,{targets:e.props.targets,events:a});return et(e,"onResizeGroupEnd",i),r}},request:function(e){var t={},r=0,n=0,a=e.getRect();return{isControl:!0,requestStart:function(i){var o;return{datas:t,parentDirection:i.direction||[1,1],parentIsWidth:(o=i==null?void 0:i.horizontal)!==null&&o!==void 0?o:!0}},request:function(i){return"offsetWidth"in i?r=i.offsetWidth-a.offsetWidth:"deltaWidth"in i&&(r+=i.deltaWidth),"offsetHeight"in i?n=i.offsetHeight-a.offsetHeight:"deltaHeight"in i&&(n+=i.deltaHeight),{datas:t,parentDist:[r,n],parentKeepRatio:i.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}},unset:function(e){e.state.gestos.resizable=null}};function Oa(e,t,r,n,a){var i=e.props.groupable,o=e.state,s=o.is3d?4:3,l=t.origin,u=Ft(e.state.rootMatrix,at([l[0],l[1]],i?[0,0]:[o.left,o.top]),s),f=bt([a.left,a.top],u);t.startAbsoluteOrigin=f,t.prevDeg=Ot(f,[r,n])/Math.PI*180,t.defaultDeg=t.prevDeg,t.prevSnapDeg=0,t.loop=0,t.startDist=me(f,[r,n])}function $n(e,t,r){var n=r.defaultDeg,a=r.prevDeg,i=a%360,o=Math.floor(a/360);i<0&&(i+=360),i>e&&i>270&&e<90?++o:i<e&&i<90&&e>270&&--o;var s=t*(o*360+e-n);return r.prevDeg=n+s,s}function Ba(e,t,r,n){return $n(Ot(n.startAbsoluteOrigin,[e,t])/Math.PI*180,r,n)}function Aa(e,t,r,n,a,i){var o=e.props.throttleRotate,s=o===void 0?0:o,l=r.prevSnapDeg,u=0,f=!1;if(i){var c=yg(e,t,n);f=c.isSnap,u=a+c.rotation}f||(u=ut(a+n,s));var d=u-a;return r.prevSnapDeg=d,[d-l,d,u]}function du(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3];if(e==="none")return[];if(Lt(e))return e.map(function(h){return du(h,[n,a,i,o],r)[0]});var s=(e||"top").split("-"),l=s[0],u=s[1],f=[n,a];l==="left"?f=[i,n]:l==="right"?f=[a,o]:l==="bottom"&&(f=[o,i]);var c=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2],d=Vl(f,r);if(u){var p=u==="top"||u==="left",v=l==="bottom"||l==="left";c=f[p&&!v||!p&&v?0:1]}return[[c,d]]}function hi(e,t){if(t.isRequest)return t.requestAble==="rotatable";var r=t.inputEvent.target;if(Gt(r,ot("rotation-control"))||Gt(r,ot("around-control"))||Gt(r,ot("control"))&&Gt(r,ot("rotatable")))return!0;var n=e.props.rotationTarget;return n?Zi(n,!0).some(function(a){return a?r===a||r.contains(a):!1}):!1}var Dg=Wi.map(function(e){var t="",r="",n="center",a="center";return e.indexOf("n")>-1&&(t="top: -20px;",a="bottom"),e.indexOf("s")>-1&&(t="top: 0px;",a="top"),e.indexOf("w")>-1&&(r="left: -20px;",n="right"),e.indexOf("e")>-1&&(r="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(e,`"] {
        `).concat(r).concat(t,`
        transform-origin: `).concat(n," ").concat(a,`;
    }`)}).join(`
`),Mg=`.rotation {
    position: absolute;
    height: 40px;
    width: 1px;
    transform-origin: 50% 100%;
    height: calc(40px * var(--zoom));
    top: auto;
    left: 0;
    bottom: 100%;
    will-change: transform;
}
.rotation .rotation-line {
    display: block;
    width: 100%;
    height: 100%;
    transform-origin: 50% 50%;
}
.rotation .rotation-control {
    border-color: #4af;
    border-color: var(--moveable-color);
    background:#fff;
    cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
    cursor: alias;
}
.around-control {
    position: absolute;
    will-change: transform;
    width: 20px;
    height: 20px;
    left: -10px;
    top: -10px;
    box-sizing: border-box;
    background: transparent;
    z-index: 8;
    cursor: alias;
    transform-origin: center center;
}
.rotatable.direction.control.move {
    cursor: move;
}
`.concat(Dg,`
`),Tg={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[Mg],viewClassName:function(e){return e.isDragging("rotatable")?ot("view-rotation-dragging"):""},render:function(e,t){var r=ir(e.props,"rotatable"),n=r.rotatable,a=r.rotationPosition,i=r.zoom,o=r.renderDirections,s=r.rotateAroundControls,l=r.resolveAblesWithRotatable,u=e.getState(),f=u.renderPoses,c=u.direction;if(!n)return null;var d=du(a,f,c),p=[];if(d.forEach(function(m,y){var b=m[0],x=m[1];p.push(t.createElement("div",{key:"rotation".concat(y),className:ot("rotation"),style:{transform:"translate(-50%) translate(".concat(b[0],"px, ").concat(b[1],"px) rotate(").concat(x,"rad)")}},t.createElement("div",{className:ot("line rotation-line"),style:{transform:"scaleX(".concat(i,")")}}),t.createElement("div",{className:ot("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(i,")")}})))}),o){var v=Mr(l||{}),h={};v.forEach(function(m){l[m].forEach(function(y){h[y]=m})});var g=[];Lt(o)&&(g=o.map(function(m){var y=h[m];return{data:y?{resolve:y}:{},classNames:y?["move"]:[],dir:m}})),p.push.apply(p,su(e,"rotatable",g,t))}return s&&p.push.apply(p,Eg(e,t)),p},dragControlCondition:hi,dragControlStart:function(e,t){var r,n,a=t.datas,i=t.clientX,o=t.clientY,s=t.parentRotate,l=t.parentFlag,u=t.isPinch,f=t.isRequest,c=e.state,d=c.target,p=c.left,v=c.top,h=c.direction,g=c.beforeDirection,m=c.targetTransform,y=c.moveableClientRect,b=c.offsetMatrix,x=c.targetMatrix,_=c.allMatrix,S=c.width,C=c.height;if(!f&&!d)return!1;var M=e.getRect();a.rect=M,a.transform=m,a.left=p,a.top=v;var k=function(F){var W=e.state,Z=W.allMatrix,nt=W.is3d,U=W.width,J=W.height,Q=Bl(F,U,J);a.fixedDirection=Q,a.fixedPosition=Ft(Z,F,nt?4:3),j&&j.setFixedPosition(F)},E=function(F){a.fixedDirection=F,a.fixedPosition=Al(e,F),j&&j.setFixedDirection(F)},R=i,D=o;if(f||u||l){var P=s||0;a.beforeInfo={origin:M.beforeOrigin,prevDeg:P,defaultDeg:P,prevSnapDeg:0,startDist:0},a.afterInfo=T(T({},a.beforeInfo),{origin:M.origin}),a.absoluteInfo=T(T({},a.beforeInfo),{origin:M.origin,startValue:P})}else{var I=(n=t.inputEvent)===null||n===void 0?void 0:n.target;if(I){var B=I.getAttribute("data-direction")||"",V=ah[B];if(V){a.isControl=!0,a.isAroundControl=Gt(I,ot("around-control")),a.controlDirection=V;var K=I.getAttribute("data-resolve");K&&(a.resolveAble=K);var X=kh(c.rootMatrix,c.renderPoses,y);r=It(X,V),R=r[0],D=r[1]}}a.beforeInfo={origin:M.beforeOrigin},a.afterInfo={origin:M.origin},a.absoluteInfo={origin:M.origin,startValue:M.rotation};var H=k;k=function(F){var W=c.is3d?4:3,Z=bt(vl(x,W),F),nt=Z[0],U=Z[1],J=Yt(b,ar([nt,U],W)),Q=Yt(_,ar([F[0],F[1]],W));H(F);var ct=c.posDelta;a.beforeInfo.origin=at(J,ct),a.afterInfo.origin=at(Q,ct),a.absoluteInfo.origin=at(Q,ct),Oa(e,a.beforeInfo,R,D,y),Oa(e,a.afterInfo,R,D,y),Oa(e,a.absoluteInfo,R,D,y)},E=function(F){var W=It([[0,0],[S,0],[0,C],[S,C]],F);k(W)}}a.startClientX=R,a.startClientY=D,a.direction=h,a.beforeDirection=g,a.startValue=0,a.datas={},la(t,"rotate");var z=!1,j=!1;if(a.isControl&&a.resolveAble){var G=a.resolveAble;G==="resizable"&&(j=vi.dragControlStart(e,T(T({},new _r("resizable").dragStart([0,0],t)),{parentPosition:a.controlPosition,parentFixedPosition:a.fixedPosition})))}j||(z=Qt.dragStart(e,new _r().dragStart([0,0],t))),k(c.transformOrigin);var $=ft(e,t,T(T({set:function(F){a.startValue=F*Math.PI/180},setFixedDirection:E,setFixedPosition:k},sa(t)),{dragStart:z,resizeStart:j})),N=et(e,"onRotateStart",$);return a.isRotate=N!==!1,c.snapRenderInfo={request:t.isRequest},a.isRotate?$:!1},dragControl:function(e,t){var r,n,a,i=t.datas,o=t.clientDistX,s=t.clientDistY,l=t.parentRotate,u=t.parentFlag,f=t.isPinch,c=t.groupDelta,d=i.beforeDirection,p=i.beforeInfo,v=i.afterInfo,h=i.absoluteInfo,g=i.isRotate,m=i.startValue,y=i.rect,b=i.startClientX,x=i.startClientY;if(g){ia(t,"rotate");var _=ih(t),S=d*_,C=e.props.parentMoveable,M=0,k,E,R=0,D,P,I=0,B,V,K=180/Math.PI*m,X=h.startValue,H=!1,z=b+o,j=x+s;if(!u&&"parentDist"in t){var G=t.parentDist;k=G,D=G,B=G}else f||u?(k=$n(l,d,p),D=$n(l,S,v),B=$n(l,S,h)):(k=Ba(z,j,d,p),D=Ba(z,j,S,v),B=Ba(z,j,S,h),H=!0);if(E=K+k,P=K+D,V=X+B,et(e,"onBeforeRotate",ft(e,t,{beforeRotation:E,rotation:P,absoluteRotation:V,setRotation:function(ct){D=ct-K,k=D,B=D}},!0)),r=Aa(e,y,p,k,K,H),M=r[0],k=r[1],E=r[2],n=Aa(e,y,v,D,K,H),R=n[0],D=n[1],P=n[2],a=Aa(e,y,h,B,X,H),I=a[0],B=a[1],V=a[2],!(!I&&!R&&!M&&!C)){var $=oa(i,"rotate(".concat(P,"deg)"),"rotate(".concat(D,"deg)")),N=vh(e,D,i),F=at(bt(c||[0,0],N),i.prevInverseDist||[0,0]);i.prevInverseDist=N,i.requestValue=null;var W=Il(e,$,F,f,t),Z=W,nt=me([z,j],h.startAbsoluteOrigin)-h.startDist,U=void 0;if(i.resolveAble==="resizable"){var J=vi.dragControl(e,T(T({},vn(t,e.state,[t.deltaX,t.deltaY],!!f,!1,"resizable")),{resolveMatrix:!0,parentDistance:nt}));J&&(U=J,Z=Yl(Z,J,t))}var Q=ft(e,t,T(T({delta:R,dist:D,rotate:P,rotation:P,beforeDist:k,beforeDelta:M,beforeRotate:E,beforeRotation:E,absoluteDist:B,absoluteDelta:I,absoluteRotate:V,absoluteRotation:V,isPinch:!!f,resize:U},W),Z));return et(e,"onRotate",Q),Q}}},dragControlEnd:function(e,t){var r=t.datas;if(r.isRotate){r.isRotate=!1;var n=ce(e,t,{});return et(e,"onRotateEnd",n),n}},dragGroupControlCondition:hi,dragGroupControlStart:function(e,t){var r=t.datas,n=e.state,a=n.left,i=n.top,o=n.beforeOrigin,s=this.dragControlStart(e,t);if(!s)return!1;s.set(r.beforeDirection*e.rotation);var l=Me(e,this,"dragControlStart",t,function(c,d){var p=c.state,v=p.left,h=p.top,g=p.beforeOrigin,m=bt(at([v,h],[a,i]),at(g,o));return d.datas.startGroupClient=m,d.datas.groupClient=m,T(T({},d),{parentRotate:0})}),u=T(T({},s),{targets:e.props.targets,events:l}),f=et(e,"onRotateGroupStart",u);return r.isRotate=f!==!1,r.isRotate?s:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isRotate){ca(e,"onBeforeRotate",function(u){et(e,"onBeforeRotateGroup",ft(e,t,T(T({},u),{targets:e.props.targets}),!0))});var n=this.dragControl(e,t);if(n){var a=r.beforeDirection,i=n.beforeDist,o=i/180*Math.PI,s=Me(e,this,"dragControl",t,function(u,f){var c=f.datas.startGroupClient,d=f.datas.groupClient,p=d[0],v=d[1],h=fn(c,o*a),g=h[0],m=h[1],y=[g-p,m-v];return f.datas.groupClient=[g,m],T(T({},f),{parentRotate:i,groupDelta:y})});e.rotation=a*n.beforeRotation;var l=T({targets:e.props.targets,events:s,set:function(u){e.rotation=u},setGroupRotation:function(u){e.rotation=u}},n);return et(e,"onRotateGroup",l),l}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isRotate){this.dragControlEnd(e,t);var a=Me(e,this,"dragControlEnd",t),i=ce(e,t,{targets:e.props.targets,events:a});return et(e,"onRotateGroupEnd",i),r}},request:function(e){var t={},r=0,n=e.getRotation();return{isControl:!0,requestStart:function(){return{datas:t}},request:function(a){return"deltaRotate"in a?r+=a.deltaRotate:"rotate"in a&&(r=a.rotate-n),{datas:t,parentDist:r}},requestEnd:function(){return{datas:t,isDrag:!0}}}}},ps=Ki("scalable"),Rg={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:cu("scalable"),dragControlCondition:ps,viewClassName:qi("scalable"),dragControlStart:function(e,t){var r=t.datas,n=t.isPinch,a=t.inputEvent,i=t.parentDirection,o=Hl(i,n,a,r),s=e.state,l=s.width,u=s.height,f=s.targetTransform,c=s.target,d=s.pos1,p=s.pos2,v=s.pos4;if(!o||!c)return!1;n||ur(e,t),r.datas={},r.transform=f,r.prevDist=[1,1],r.direction=o,r.startOffsetWidth=l,r.startOffsetHeight=u,r.startValue=[1,1];var h=me(d,p),g=me(p,v),m=!o[0]&&!o[1]||o[0]||!o[1];r.scaleWidth=h,r.scaleHeight=g,r.scaleXRatio=h/l,r.scaleYRatio=g/u,la(t,"scale"),r.isWidth=m;function y(S){r.ratio=S&&isFinite(S)?S:0}r.startPositions=ie(e.state);function b(S){r.fixedDirection=S,r.fixedPosition=It(r.startPositions,S)}r.setFixedDirection=b,y(me(d,p)/me(p,v)),b([-o[0],-o[1]]);var x=ft(e,t,T(T({direction:o,set:function(S){r.startValue=S},setRatio:y,setFixedDirection:b},sa(t)),{dragStart:Qt.dragStart(e,new _r().dragStart([0,0],t))})),_=et(e,"onScaleStart",x);return r.startFixedDirection=r.fixedDirection,_!==!1&&(r.isScale=!0,e.state.snapRenderInfo={request:t.isRequest,direction:o}),r.isScale?x:!1},dragControl:function(e,t){ia(t,"scale");var r=t.datas,n=t.parentKeepRatio,a=t.parentFlag,i=t.isPinch,o=t.dragClient,s=t.isRequest,l=r.prevDist,u=r.direction,f=r.startOffsetWidth,c=r.startOffsetHeight,d=r.isScale,p=r.startValue,v=r.isWidth,h=r.ratio;if(!d)return!1;var g=e.props,m=g.throttleScale,y=g.parentMoveable,b=u;!u[0]&&!u[1]&&(b=[1,1]);var x=h&&(n??g.keepRatio)||!1,_=e.state;function S(){var j=Kl(b,x,r,t),G=j.distWidth,$=j.distHeight,N=f?(f+G)/f:1,F=c?(c+$)/c:1;return N=b[0]||x?N*p[0]:p[0],F=b[1]||x?F*p[1]:p[1],N===0&&(N=(l[0]>0?1:-1)*Cn),F===0&&(F=(l[1]>0?1:-1)*Cn),[N,F]}var C=S();if(!i&&e.props.groupable){var M=_.snapRenderInfo||{},k=M.direction;Lt(k)&&(k[0]||k[1])&&(_.snapRenderInfo={direction:u,request:t.isRequest})}et(e,"onBeforeScale",ft(e,t,{scale:C,setFixedDirection:function(j){return r.setFixedDirection(j),C=S(),C},startFixedDirection:r.startFixedDirection,setScale:function(j){C=j}},!0));var E=[C[0]/p[0],C[1]/p[1]],R=o,D=[0,0];if(o||(!a&&i?R=zl(e,[0,0]):R=r.fixedPosition),i||(D=_g(e,E,u,s,r)),x){b[0]&&b[1]&&D[0]&&D[1]&&(Math.abs(D[0]*f)>Math.abs(D[1]*c)?D[1]=0:D[0]=0);var P=!D[0]&&!D[1];if(P&&(v?E[0]=ut(E[0]*p[0],m)/p[0]:E[1]=ut(E[1]*p[1],m)/p[1]),b[0]&&!b[1]||D[0]&&!D[1]||P&&v){E[0]+=D[0];var I=f*E[0]*p[0]/h;E[1]=I/c/p[1]}else if(!b[0]&&b[1]||!D[0]&&D[1]||P&&!v){E[1]+=D[1];var B=c*E[1]*p[1]*h;E[0]=B/f/p[0]}}else E[0]+=D[0],E[1]+=D[1],D[0]||(E[0]=ut(E[0]*p[0],m)/p[0]),D[1]||(E[1]=ut(E[1]*p[1],m)/p[1]);E[0]===0&&(E[0]=(l[0]>0?1:-1)*Cn),E[1]===0&&(E[1]=(l[1]>0?1:-1)*Cn);var V=[E[0]/l[0],E[1]/l[1]];C=mh(E,p);var K=ph(e,E,r.fixedDirection,R,r),X=at(K,r.prevInverseDist||[0,0]);if(r.prevDist=E,r.prevInverseDist=K,C[0]===l[0]&&C[1]===l[1]&&X.every(function(j){return!j})&&!y)return!1;var H=oa(r,"scale(".concat(C.join(", "),")"),"scale(".concat(E.join(", "),")")),z=ft(e,t,T({offsetWidth:f,offsetHeight:c,direction:u,scale:C,dist:E,delta:V,isPinch:!!i},Il(e,H,X,i,t)));return et(e,"onScale",z),z},dragControlEnd:function(e,t){var r=t.datas;if(!r.isScale)return!1;r.isScale=!1;var n=ce(e,t,{});return et(e,"onScaleEnd",n),n},dragGroupControlCondition:ps,dragGroupControlStart:function(e,t){var r=t.datas,n=this.dragControlStart(e,t);if(!n)return!1;var a=xe(e,"resizable",t);function i(f,c){var d=r.fixedDirection,p=r.fixedPosition,v=c.datas.startPositions||ie(f.state),h=It(v,d),g=Yt(xr(-e.rotation/180*Math.PI,3),[h[0]-p[0],h[1]-p[1],1],3),m=g[0],y=g[1];return c.datas.originalX=m,c.datas.originalY=y,c}r.moveableScale=e.scale;var o=Me(e,this,"dragControlStart",t,function(f,c){return i(f,c)}),s=function(f){n.setFixedDirection(f),o.forEach(function(c,d){c.setFixedDirection(f),i(c.moveable,a[d])})};r.setFixedDirection=s;var l=T(T({},n),{targets:e.props.targets,events:o,setFixedDirection:s}),u=et(e,"onScaleGroupStart",l);return r.isScale=u!==!1,r.isScale?l:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isScale){ca(e,"onBeforeScale",function(c){et(e,"onBeforeScaleGroup",ft(e,t,T(T({},c),{targets:e.props.targets}),!0))});var n=this.dragControl(e,t);if(n){var a=r.moveableScale;e.scale=[n.scale[0]*a[0],n.scale[1]*a[1]];var i=e.props.keepRatio,o=n.dist,s=n.scale,l=r.fixedPosition,u=Me(e,this,"dragControl",t,function(c,d){var p=Yt(xr(e.rotation/180*Math.PI,3),[d.datas.originalX*o[0],d.datas.originalY*o[1],1],3),v=p[0],h=p[1];return T(T({},d),{parentDist:null,parentScale:s,parentKeepRatio:i,dragClient:bt(l,[v,h])})}),f=T({targets:e.props.targets,events:u},n);return et(e,"onScaleGroup",f),f}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isScale){this.dragControlEnd(e,t);var a=Me(e,this,"dragControlEnd",t),i=ce(e,t,{targets:e.props.targets,events:a});return et(e,"onScaleGroupEnd",i),r}},request:function(){var e={},t=0,r=0;return{isControl:!0,requestStart:function(n){return{datas:e,parentDirection:n.direction||[1,1]}},request:function(n){return t+=n.deltaWidth,r+=n.deltaHeight,{datas:e,parentDist:[t,r],parentKeepRatio:n.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Be(e,t){return e.map(function(r,n){return Ke(r,t[n],1,2)})}function vs(e,t,r){var n=Ot(e,t),a=Ot(e,r),i=a-n;return i>=0?i:i+2*Math.PI}function Pg(e,t){var r=vs(e[0],e[1],e[2]),n=vs(t[0],t[1],t[2]),a=Math.PI;return!(r>=a&&n<=a||r<=a&&n>=a)}var Ig={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},viewClassName:qi("warpable"),render:function(e,t){var r=e.props,n=r.resizable,a=r.scalable,i=r.warpable,o=r.zoom;if(n||a||!i)return[];var s=e.state,l=s.pos1,u=s.pos2,f=s.pos3,c=s.pos4,d=Be(l,u),p=Be(u,l),v=Be(l,f),h=Be(f,l),g=Be(f,c),m=Be(c,f),y=Be(u,c),b=Be(c,u);return st([t.createElement("div",{className:ot("line"),key:"middeLine1",style:Br(d,g,o)}),t.createElement("div",{className:ot("line"),key:"middeLine2",style:Br(p,m,o)}),t.createElement("div",{className:ot("line"),key:"middeLine3",style:Br(v,y,o)}),t.createElement("div",{className:ot("line"),key:"middeLine4",style:Br(h,b,o)})],fu(e,"warpable",t),!0)},dragControlCondition:function(e,t){if(t.isRequest)return!1;var r=t.inputEvent.target;return Gt(r,ot("direction"))&&Gt(r,ot("warpable"))},dragControlStart:function(e,t){var r=t.datas,n=t.inputEvent,a=e.props.target,i=n.target,o=Xl(i,r);if(!o||!a)return!1;var s=e.state,l=s.transformOrigin,u=s.is3d,f=s.targetTransform,c=s.targetMatrix,d=s.width,p=s.height,v=s.left,h=s.top;r.datas={},r.targetTransform=f,r.warpTargetMatrix=u?c:Ee(c,3,4),r.targetInverseMatrix=pl(we(r.warpTargetMatrix,4),3,4),r.direction=o,r.left=v,r.top=h,r.poses=[[0,0],[d,0],[0,p],[d,p]].map(function(y){return at(y,l)}),r.nextPoses=r.poses.map(function(y){var b=y[0],x=y[1];return Yt(r.warpTargetMatrix,[b,x,0,1],4)}),r.startValue=Rt(4),r.prevMatrix=Rt(4),r.absolutePoses=ie(s),r.posIndexes=Rl(o),ur(e,t),la(t,"matrix3d"),s.snapRenderInfo={request:t.isRequest,direction:o};var g=ft(e,t,T({set:function(y){r.startValue=y}},sa(t))),m=et(e,"onWarpStart",g);return m!==!1&&(r.isWarp=!0),r.isWarp},dragControl:function(e,t){var r=t.datas,n=t.isRequest,a=t.distX,i=t.distY,o=r.targetInverseMatrix,s=r.prevMatrix,l=r.isWarp,u=r.startValue,f=r.poses,c=r.posIndexes,d=r.absolutePoses;if(!l)return!1;if(ia(t,"matrix3d"),Rr(e,"warpable")){var p=c.map(function(k){return d[k]});p.length>1&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var v=pa(e,n,{horizontal:p.map(function(k){return k[1]+i}),vertical:p.map(function(k){return k[0]+a})}),h=v.horizontal,g=v.vertical;i-=h.offset,a-=g.offset}var m=De({datas:r,distX:a,distY:i},!0),y=r.nextPoses.slice();if(c.forEach(function(k){y[k]=bt(y[k],m)}),!rh.every(function(k){return Pg(k.map(function(E){return f[E]}),k.map(function(E){return y[E]}))}))return!1;var b=Fi(f[0],f[2],f[1],f[3],y[0],y[2],y[1],y[3]);if(!b.length)return!1;var x=Et(o,b,4),_=Ml(r,x,!0),S=Et(we(s,4),_,4);r.prevMatrix=_;var C=Et(u,_,4),M=oa(r,"matrix3d(".concat(C.join(", "),")"),"matrix3d(".concat(_.join(", "),")"));return Xi(t,M),et(e,"onWarp",ft(e,t,T({delta:S,matrix:C,dist:_,multiply:Et,transform:M},te({transform:M},t)))),!0},dragControlEnd:function(e,t){var r=t.datas,n=t.isDrag;return r.isWarp?(r.isWarp=!1,et(e,"onWarpEnd",ce(e,t,{})),n):!1}},Og=ot("area-pieces"),Rn=ot("area-piece"),pu=ot("avoid"),Bg=ot("view-dragging");function za(e){var t=e.areaElement;if(t){var r=e.state,n=r.width,a=r.height;tl(t,pu),t.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(a,"px")}}function hs(e){return e.createElement("div",{key:"area_pieces",className:Og},e.createElement("div",{className:Rn}),e.createElement("div",{className:Rn}),e.createElement("div",{className:Rn}),e.createElement("div",{className:Rn}))}var vu={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(e,t){var r=e.props,n=r.target,a=r.dragArea,i=r.groupable,o=r.passDragArea,s=e.getState(),l=s.width,u=s.height,f=s.renderPoses,c=o?ot("area","pass"):ot("area");if(i)return[t.createElement("div",{key:"area",ref:Ce(e,"areaElement"),className:c}),hs(t)];if(!n||!a)return[];var d=Fi([0,0],[l,0],[0,u],[l,u],f[0],f[1],f[2],f[3]),p=d.length?ua(d,!0):"none";return[t.createElement("div",{key:"area",ref:Ce(e,"areaElement"),className:c,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:p}}),hs(t)]},dragStart:function(e,t){var r=t.datas,n=t.clientX,a=t.clientY,i=t.inputEvent;if(!i)return!1;r.isDragArea=!1;var o=e.areaElement,s=e.state,l=s.moveableClientRect,u=s.renderPoses,f=s.rootMatrix,c=s.is3d,d=l.left,p=l.top,v=ve(u),h=v.left,g=v.top,m=v.width,y=v.height,b=c?4:3,x=nr(f,[n-d,a-p],b),_=x[0],S=x[1];_-=h,S-=g;var C=[{left:h,top:g,width:m,height:S-10},{left:h,top:g,width:_-10,height:y},{left:h,top:g+S+10,width:m,height:y-S-10},{left:h+_+10,top:g,width:m-_-10,height:y}],M=[].slice.call(o.nextElementSibling.children);C.forEach(function(k,E){M[E].style.cssText="left: ".concat(k.left,"px;top: ").concat(k.top,"px; width: ").concat(k.width,"px; height: ").concat(k.height,"px;")}),Qs(o,pu),s.disableNativeEvent=!0},drag:function(e,t){var r=t.datas,n=t.inputEvent;if(this.enableNativeEvent(e),!n)return!1;r.isDragArea||(r.isDragArea=!0,za(e))},dragEnd:function(e,t){this.enableNativeEvent(e);var r=t.inputEvent,n=t.datas;if(!r)return!1;n.isDragArea||za(e)},dragGroupStart:function(e,t){return this.dragStart(e,t)},dragGroup:function(e,t){return this.drag(e,t)},dragGroupEnd:function(e,t){return this.dragEnd(e,t)},unset:function(e){za(e),e.state.disableNativeEvent=!1},enableNativeEvent:function(e){var t=e.state;t.disableNativeEvent&&Js(function(){t.disableNativeEvent=!1})}},Ag=pn("origin",{render:function(e,t){var r=e.props.zoom,n=e.getState(),a=n.beforeOrigin,i=n.rotation;return[t.createElement("div",{className:ot("control","origin"),style:ji(i,r,a),key:"beforeOrigin"})]}});function zg(e){var t=e.scrollContainer;return[t.scrollLeft,t.scrollTop]}var Lg={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,scrollThrottleTime:Number,getScrollPosition:Function,scrollOptions:Object},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(e,t){var r=e.props,n=r.scrollContainer,a=n===void 0?e.getContainer():n,i=r.scrollOptions,o=new Ov,s=or(a,!0);t.datas.dragScroll=o,e.state.dragScroll=o;var l=t.isControl?"controlGesto":"targetGesto",u=t.targets;o.on("scroll",function(f){var c=f.container,d=f.direction,p=ft(e,t,{scrollContainer:c,direction:d}),v=u?"onScrollGroup":"onScroll";u&&(p.targets=u),et(e,v,p)}).on("move",function(f){var c=f.offsetX,d=f.offsetY,p=f.inputEvent;e[l].scrollBy(c,d,p.inputEvent,!0)}).on("scrollDrag",function(f){var c=f.next;c(e[l].getCurrentEvent())}),o.dragStart(t,T({container:s},i))},checkScroll:function(e,t){var r=t.datas.dragScroll;if(r){var n=e.props,a=n.scrollContainer,i=a===void 0?e.getContainer():a,o=n.scrollThreshold,s=o===void 0?0:o,l=n.scrollThrottleTime,u=l===void 0?0:l,f=n.getScrollPosition,c=f===void 0?zg:f,d=n.scrollOptions;return r.drag(t,T({container:i,threshold:s,throttleTime:u,getScrollPosition:function(p){return c({scrollContainer:p.container,direction:p.direction})}},d)),!0}},drag:function(e,t){return this.checkScroll(e,t)},dragEnd:function(e,t){t.datas.dragScroll.dragEnd(),t.datas.dragScroll=null},dragControlStart:function(e,t){return this.dragStart(e,T(T({},t),{isControl:!0}))},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupStart:function(e,t){return this.dragStart(e,T(T({},t),{targets:e.props.targets}))},dragGroup:function(e,t){return this.drag(e,T(T({},t),{targets:e.props.targets}))},dragGroupEnd:function(e,t){return this.dragEnd(e,T(T({},t),{targets:e.props.targets}))},dragGroupControlStart:function(e,t){return this.dragStart(e,T(T({},t),{targets:e.props.targets,isControl:!0}))},dragGroupControl:function(e,t){return this.drag(e,T(T({},t),{targets:e.props.targets}))},dragGroupControEnd:function(e,t){return this.dragEnd(e,T(T({},t),{targets:e.props.targets}))},unset:function(e){var t,r=e.state;(t=r.dragScroll)===null||t===void 0||t.dragEnd(),r.dragScroll=null}},hu={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function,stopPropagation:Boolean,preventClickEventOnDrag:Boolean,preventClickDefault:Boolean,viewContainer:Object,persistData:Object,useAccuratePosition:Boolean,firstRenderState:Object,linePadding:Boolean},events:{onChangeTargets:"changeTargets"}},$g=pn("padding",{render:function(e,t){var r=e.props;if(r.dragArea)return[];var n=r.padding||{},a=n.left,i=a===void 0?0:a,o=n.top,s=o===void 0?0:o,l=n.right,u=l===void 0?0:l,f=n.bottom,c=f===void 0?0:f,d=e.getState(),p=d.renderPoses,v=d.pos1,h=d.pos2,g=d.pos3,m=d.pos4,y=[v,h,g,m],b=[];return i>0&&b.push([0,2]),s>0&&b.push([0,1]),u>0&&b.push([1,3]),c>0&&b.push([2,3]),b.map(function(x,_){var S=x[0],C=x[1],M=y[S],k=y[C],E=p[S],R=p[C],D=Fi([0,0],[100,0],[0,100],[100,100],M,k,E,R);if(D.length)return t.createElement("div",{key:"padding".concat(_),className:ot("padding"),style:{transform:ua(D,!0)}})})}}),gs=["nw","ne","se","sw"];function Pn(e,t){var r=e[0]+e[1],n=r>t?t/r:1;return e[0]*=n,e[1]=t-e[1]*n,e}var Fg=[1,2,5,6],Gg=[0,3,4,7],Je=[1,-1,-1,1],Qe=[1,1,-1,-1];function ao(e,t,r,n,a,i,o,s){a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=r),s===void 0&&(s=n);var l=[],u=!1,f=e.filter(function(d){return!d.virtual}),c=f.map(function(d){var p=d.horizontal,v=d.vertical,h=d.pos;if(v&&!u&&(u=!0,l.push("/")),u){var g=Math.max(0,v===1?h[1]-i:s-h[1]);return l.push(he(g,n,t)),g}else{var g=Math.max(0,p===1?h[0]-a:o-h[0]);return l.push(he(g,r,t)),g}});return{radiusPoses:f,styles:l,raws:c}}function gu(e){for(var t=[0,0],r=[0,0],n=e.length,a=0;a<n;++a){var i=e[a];i.sub&&(i.horizontal&&(t[1]===0&&(t[0]=a),t[1]=a-t[0]+1,r[0]=a+1),i.vertical&&(r[1]===0&&(r[0]=a),r[1]=a-r[0]+1))}return{horizontalRange:t,verticalRange:r}}function mu(e,t,r,n,a,i,o){var s,l,u,f;i===void 0&&(i=[0,0]),o===void 0&&(o=!1);var c=e.indexOf("/"),d=(c>-1?e.slice(0,c):e).length,p=e.slice(0,d),v=e.slice(d+1),h=p.length,g=v.length,m=g>0,y=p[0],b=y===void 0?"0px":y,x=p[1],_=x===void 0?b:x,S=p[2],C=S===void 0?b:S,M=p[3],k=M===void 0?_:M,E=v[0],R=E===void 0?b:E,D=v[1],P=D===void 0?m?R:_:D,I=v[2],B=I===void 0?m?R:C:I,V=v[3],K=V===void 0?m?P:k:V,X=[b,_,C,k].map(function(N){return kt(N,t)}),H=[R,P,B,K].map(function(N){return kt(N,r)}),z=X.slice(),j=H.slice();s=Pn([z[0],z[1]],t),z[0]=s[0],z[1]=s[1],l=Pn([z[3],z[2]],t),z[3]=l[0],z[2]=l[1],u=Pn([j[0],j[3]],r),j[0]=u[0],j[3]=u[1],f=Pn([j[1],j[2]],r),j[1]=f[0],j[2]=f[1];var G=o?z:z.slice(0,Math.max(i[0],h)),$=o?j:j.slice(0,Math.max(i[1],g));return st(st([],G.map(function(N,F){var W=gs[F];return{virtual:F>=h,horizontal:Je[F],vertical:0,pos:[n+N,a+(Qe[F]===-1?r:0)],sub:!0,raw:X[F],direction:W}}),!0),$.map(function(N,F){var W=gs[F];return{virtual:F>=g,horizontal:0,vertical:Qe[F],pos:[n+(Je[F]===-1?t:0),a+N],sub:!0,raw:H[F],direction:W}}),!0)}function Ng(e,t,r,n,a){a===void 0&&(a=t.length);var i=gu(e.slice(n)),o=i.horizontalRange,s=i.verticalRange,l=r-n,u=0;if(l===0)u=a;else if(l>0&&l<o[1])u=o[1]-l;else if(l>=s[0])u=s[0]+s[1]-l;else return;e.splice(r,u),t.splice(r,u)}function Vg(e,t,r,n,a,i,o,s,l,u,f){u===void 0&&(u=0),f===void 0&&(f=0);var c=gu(e.slice(r)),d=c.horizontalRange,p=c.verticalRange;if(n>-1)for(var v=Je[n]===1?i-u:s-i,h=d[1];h<=n;++h){var g=Qe[h]===1?f:l,m=0;if(n===h?m=i:h===0?m=u+v:Je[h]===-1&&(m=s-(t[r][0]-u)),e.splice(r+h,0,{horizontal:Je[h],vertical:0,pos:[m,g]}),t.splice(r+h,0,[m,g]),h===0)break}else if(a>-1){var y=Qe[a]===1?o-f:l-o;if(d[1]===0&&p[1]===0){var b=[u+y,f];e.push({horizontal:Je[0],vertical:0,pos:b}),t.push(b)}for(var x=p[0],h=p[1];h<=a;++h){var m=Je[h]===1?u:s,g=0;if(a===h?g=o:h===0?g=f+y:Qe[h]===1?g=t[r+x][1]:Qe[h]===-1&&(g=l-(t[r+x][1]-f)),e.push({horizontal:0,vertical:Qe[h],pos:[m,g]}),t.push([m,g]),h===0)break}}}function Wg(e,t){t===void 0&&(t=e.map(function(a){return a.raw}));var r=e.map(function(a,i){return a.horizontal?t[i]:null}).filter(function(a){return a!=null}),n=e.map(function(a,i){return a.vertical?t[i]:null}).filter(function(a){return a!=null});return{horizontals:r,verticals:n}}var Hg=[[0,-1,"n"],[1,0,"e"]],Xg=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function io(e,t,r){var n=e.props.clipRelative,a=e.state,i=a.width,o=a.height,s=t,l=s.type,u=s.poses,f=l==="rect",c=l==="circle";if(l==="polygon")return r.map(function(S){return"".concat(he(S[0],i,n)," ").concat(he(S[1],o,n))});if(f||l==="inset"){var d=r[1][1],p=r[3][0],v=r[7][0],h=r[5][1];if(f)return[d,p,h,v].map(function(S){return"".concat(S,"px")});var g=[d,i-p,o-h,v].map(function(S,C){return he(S,C%2?i:o,n)});if(r.length>8){var m=at(r[4],r[0]),y=m[0],b=m[1];g.push.apply(g,st(["round"],ao(u.slice(8).map(function(S,C){return T(T({},S),{pos:r[C]})}),n,y,b,v,d,p,h).styles,!1))}return g}else if(c||l==="ellipse"){var x=r[0],_=he(Math.abs(r[1][1]-x[1]),c?Math.sqrt((i*i+o*o)/2):o,n),g=c?[_]:[he(Math.abs(r[2][0]-x[0]),i,n),_];return g.push("at",he(x[0],i,n),he(x[1],o,n)),g}}function Un(e,t,r,n){var a=[n,(n+t)/2,t],i=[e,(e+r)/2,r];return Xg.map(function(o){var s=o[0],l=o[1],u=o[2],f=a[s+1],c=i[l+1];return{vertical:Math.abs(l),horizontal:Math.abs(s),direction:u,pos:[f,c]}})}function bu(e){var t=[1/0,-1/0],r=[1/0,-1/0];return e.forEach(function(n){var a=n.pos;t[0]=Math.min(t[0],a[0]),t[1]=Math.max(t[1],a[0]),r[0]=Math.min(r[0],a[1]),r[1]=Math.max(r[1],a[1])}),[Math.abs(t[1]-t[0]),Math.abs(r[1]-r[0])]}function ms(e,t,r,n,a){var i,o,s,l,u,f,c;if(e){var d=a;if(!d){var p=getComputedStyle(e),v=p.clipPath;d=v!=="none"?v:p.clip}if(!((!d||d==="none"||d==="auto")&&(d=n,!d))){var h=Zs(d),g=h.prefix,m=g===void 0?d:g,y=h.value,b=y===void 0?"":y,x=m==="circle",_=" ";if(m==="polygon"){var S=er(b||"0% 0%, 100% 0%, 100% 100%, 0% 100%");_=",";var C=S.map(function(mt){var xt=mt.split(" "),_t=xt[0],ne=xt[1];return{vertical:1,horizontal:1,pos:[kt(_t,t),kt(ne,r)]}}),M=Ve(C.map(function(mt){return mt.pos}));return{type:m,clipText:d,poses:C,splitter:_,left:M.minX,right:M.maxX,top:M.minY,bottom:M.maxY}}else if(x||m==="ellipse"){var k="",E="",R=0,D=0,S=Ne(b);if(x){var P="";i=S[0],P=i===void 0?"50%":i,o=S[2],k=o===void 0?"50%":o,s=S[3],E=s===void 0?"50%":s,R=kt(P,Math.sqrt((t*t+r*r)/2)),D=R}else{var I="",B="";l=S[0],I=l===void 0?"50%":l,u=S[1],B=u===void 0?"50%":u,f=S[3],k=f===void 0?"50%":f,c=S[4],E=c===void 0?"50%":c,R=kt(I,t),D=kt(B,r)}var V=[kt(k,t),kt(E,r)],C=st([{vertical:1,horizontal:1,pos:V,direction:"nesw"}],Hg.slice(0,x?1:2).map(function(_t){return{vertical:Math.abs(_t[1]),horizontal:_t[0],direction:_t[2],sub:!0,pos:[V[0]+_t[0]*R,V[1]+_t[1]*D]}}),!0);return{type:m,clipText:d,radiusX:R,radiusY:D,left:V[0]-R,top:V[1]-D,right:V[0]+R,bottom:V[1]+D,poses:C,splitter:_}}else if(m==="inset"){var S=Ne(b||"0 0 0 0"),K=S.indexOf("round"),X=(K>-1?S.slice(0,K):S).length,H=S.slice(X+1),z=S.slice(0,X),j=z[0],G=z[1],$=G===void 0?j:G,N=z[2],F=N===void 0?j:N,W=z[3],Z=W===void 0?$:W,nt=[j,F].map(function(_t){return kt(_t,r)}),U=nt[0],J=nt[1],Q=[Z,$].map(function(_t){return kt(_t,t)}),ct=Q[0],dt=Q[1],Bt=t-dt,St=r-J,yt=mu(H,Bt-ct,St-U,ct,U),C=st(st([],Un(U,Bt,St,ct),!0),yt,!0);return{type:"inset",clipText:d,poses:C,top:U,left:ct,right:Bt,bottom:St,radius:H,splitter:_}}else if(m==="rect"){var S=er(b||"0px, ".concat(t,"px, ").concat(r,"px, 0px"));_=",";var Mt=S.map(function(Ht){var Oe=ln(Ht).value;return Oe}),U=Mt[0],dt=Mt[1],J=Mt[2],ct=Mt[3],C=Un(U,dt,J,ct);return{type:"rect",clipText:d,poses:C,top:U,right:dt,bottom:J,left:ct,values:S,splitter:_}}}}}function Yg(e,t,r,n,a){var i=e[t],o=i.direction,s=i.sub,l=e.map(function(){return[0,0]}),u=o?o.split(""):[];if(n&&t<8){var f=u.filter(function(P){return P==="w"||P==="e"}),c=u.filter(function(P){return P==="n"||P==="s"}),d=f[0],p=c[0];l[t]=r;var v=bu(e),h=v[0],g=v[1],m=h&&g?h/g:0;if(m&&a){var y=(t+4)%8,b=e[y].pos,x=[0,0];o.indexOf("w")>-1?x[0]=-1:o.indexOf("e")>-1&&(x[0]=1),o.indexOf("n")>-1?x[1]=-1:o.indexOf("s")>-1&&(x[1]=1);var _=ql([h,g],r,m,x,!0),S=h+_[0],C=g+_[1],M=b[1],k=b[1],E=b[0],R=b[0];x[0]===-1?E=R-S:x[0]===1?R=E+S:(E=E-S/2,R=R+S/2),x[1]===-1?M=k-C:(x[1]===1||(M=k-C/2),k=M+C);var D=Un(M,R,k,E);e.forEach(function(P,I){l[I][0]=D[I].pos[0]-P.pos[0],l[I][1]=D[I].pos[1]-P.pos[1]})}else e.forEach(function(P,I){var B=P.direction;B&&(B.indexOf(d)>-1&&(l[I][0]=r[0]),B.indexOf(p)>-1&&(l[I][1]=r[1]))}),d&&(l[1][0]=r[0]/2,l[5][0]=r[0]/2),p&&(l[3][1]=r[1]/2,l[7][1]=r[1]/2)}else o&&!s?u.forEach(function(P){var I=P==="n"||P==="s";e.forEach(function(B,V){var K=B.direction,X=B.horizontal,H=B.vertical;!K||K.indexOf(P)===-1||(l[V]=[I||!X?0:r[0],!I||!H?0:r[1]])})}):l[t]=r;return l}function jg(e,t){var r=Dl(e,t),n=r[0],a=r[1],i=t.datas,o=i.clipPath,s=i.clipIndex,l=o,u=l.type,f=l.poses,c=l.splitter,d=f.map(function(y){return y.pos});if(u==="polygon")d.splice(s,0,[n,a]);else if(u==="inset"){var p=Fg.indexOf(s),v=Gg.indexOf(s),h=f.length;if(Vg(f,d,8,p,v,n,a,d[4][0],d[4][1],d[0][0],d[0][1]),h===f.length)return}else return;var g=io(e,o,d),m="".concat(u,"(").concat(g.join(c),")");et(e,"onClip",ft(e,t,T({clipEventType:"added",clipType:u,poses:d,clipStyles:g,clipStyle:m,distX:0,distY:0},te({clipPath:m},t))))}function Ug(e,t){var r=t.datas,n=r.clipPath,a=r.clipIndex,i=n,o=i.type,s=i.poses,l=i.splitter,u=s.map(function(p){return p.pos}),f=u.length;if(o==="polygon")s.splice(a,1),u.splice(a,1);else if(o==="inset"){if(a<8||(Ng(s,u,a,8,f),f===s.length))return}else return;var c=io(e,n,u),d="".concat(o,"(").concat(c.join(l),")");et(e,"onClip",ft(e,t,T({clipEventType:"removed",clipType:o,poses:u,clipStyles:c,clipStyle:d,distX:0,distY:0},te({clipPath:d},t))))}var qg={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[`.control.clip-control {
    background: #6d6;
    cursor: pointer;
}
.control.clip-control.clip-radius {
    background: #d66;
}
.line.clip-line {
    background: #6e6;
    cursor: move;
    z-index: 1;
}
.clip-area {
    position: absolute;
    top: 0;
    left: 0;
}
.clip-ellipse {
    position: absolute;
    cursor: move;
    border: 1px solid #6d6;
    border: var(--zoompx) solid #6d6;
    border-radius: 50%;
    transform-origin: 0px 0px;
}`,`:host {
    --bounds-color: #d66;
}`,`.guideline {
    pointer-events: none;
    z-index: 2;
}`,`.line.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}`],render:function(e,t){var r=e.props,n=r.customClipPath,a=r.defaultClipPath,i=r.clipArea,o=r.zoom,s=r.groupable,l=e.getState(),u=l.target,f=l.width,c=l.height,d=l.allMatrix,p=l.is3d,v=l.left,h=l.top,g=l.pos1,m=l.pos2,y=l.pos3,b=l.pos4,x=l.clipPathState,_=l.snapBoundInfos,S=l.rotation;if(!u||s)return[];var C=ms(u,f,c,a||"inset",x||n);if(!C)return[];var M=p?4:3,k=C.type,E=C.poses,R=E.map(function(St){var yt=Ft(d,St.pos,M);return[yt[0]-v,yt[1]-h]}),D=[],P=[],I=k==="rect",B=k==="inset",V=k==="polygon";if(I||B||V){var K=B?R.slice(0,8):R;P=K.map(function(St,yt){var Mt=yt===0?K[K.length-1]:K[yt-1],mt=Ot(Mt,St),xt=Gl(Mt,St);return t.createElement("div",{key:"clipLine".concat(yt),className:ot("line","clip-line","snap-control"),"data-clip-index":yt,style:{width:"".concat(xt,"px"),transform:"translate(".concat(Mt[0],"px, ").concat(Mt[1],"px) rotate(").concat(mt,"rad) scaleY(").concat(o,")")}})})}if(D=R.map(function(St,yt){return t.createElement("div",{key:"clipControl".concat(yt),className:ot("control","clip-control","snap-control"),"data-clip-index":yt,style:{transform:"translate(".concat(St[0],"px, ").concat(St[1],"px) rotate(").concat(S,"rad) scale(").concat(o,")")}})}),B&&D.push.apply(D,R.slice(8).map(function(St,yt){return t.createElement("div",{key:"clipRadiusControl".concat(yt),className:ot("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+yt,style:{transform:"translate(".concat(St[0],"px, ").concat(St[1],"px) rotate(").concat(S,"rad) scale(").concat(o,")")}})})),k==="circle"||k==="ellipse"){var X=C.left,H=C.top,z=C.radiusX,j=C.radiusY,G=at(Ft(d,[X,H],M),Ft(d,[0,0],M)),$=G[0],N=G[1],F="none";if(!i){for(var W=Math.max(10,z/5,j/5),Z=[],nt=0;nt<=W;++nt){var U=Math.PI*2/W*nt;Z.push([z+(z-o)*Math.cos(U),j+(j-o)*Math.sin(U)])}Z.push([z,-2]),Z.push([-2,-2]),Z.push([-2,j*2+2]),Z.push([z*2+2,j*2+2]),Z.push([z*2+2,-2]),Z.push([z,-2]),F="polygon(".concat(Z.map(function(St){return"".concat(St[0],"px ").concat(St[1],"px")}).join(", "),")")}D.push(t.createElement("div",{key:"clipEllipse",className:ot("clip-ellipse","snap-control"),style:{width:"".concat(z*2,"px"),height:"".concat(j*2,"px"),clipPath:F,transform:"translate(".concat(-v+$,"px, ").concat(-h+N,"px) ").concat(ua(d))}}))}if(i){var J=ve(st([g,m,y,b],R,!0)),Q=J.width,ct=J.height,dt=J.left,Bt=J.top;if(V||I||B){var Z=B?R.slice(0,8):R;D.push(t.createElement("div",{key:"clipArea",className:ot("clip-area","snap-control"),style:{width:"".concat(Q,"px"),height:"".concat(ct,"px"),transform:"translate(".concat(dt,"px, ").concat(Bt,"px)"),clipPath:"polygon(".concat(Z.map(function(yt){return"".concat(yt[0]-dt,"px ").concat(yt[1]-Bt,"px")}).join(", "),")")}}))}}return _&&["vertical","horizontal"].forEach(function(St){var yt=_[St],Mt=St==="horizontal";yt.isSnap&&P.push.apply(P,yt.snap.posInfos.map(function(mt,xt){var _t=mt.pos,ne=at(Ft(d,Mt?[0,_t]:[_t,0],M),[v,h]),Ie=at(Ft(d,Mt?[f,_t]:[_t,c],M),[v,h]);return Kr(t,"",ne,Ie,o,"clip".concat(St,"snap").concat(xt),"guideline")})),yt.isBound&&P.push.apply(P,yt.bounds.map(function(mt,xt){var _t=mt.pos,ne=at(Ft(d,Mt?[0,_t]:[_t,0],M),[v,h]),Ie=at(Ft(d,Mt?[f,_t]:[_t,c],M),[v,h]);return Kr(t,"",ne,Ie,o,"clip".concat(St,"bounds").concat(xt),"guideline","bounds","bold")}))}),st(st([],D,!0),P,!0)},dragControlCondition:function(e,t){return t.inputEvent&&(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(e,t){var r=e.props,n=r.dragWithClip,a=n===void 0?!0:n;return a?!1:this.dragControlStart(e,t)},drag:function(e,t){return this.dragControl(e,T(T({},t),{isDragTarget:!0}))},dragEnd:function(e,t){return this.dragControlEnd(e,t)},dragControlStart:function(e,t){var r=e.state,n=e.props,a=n.defaultClipPath,i=n.customClipPath,o=r.target,s=r.width,l=r.height,u=t.inputEvent?t.inputEvent.target:null,f=u&&u.getAttribute("class")||"",c=t.datas,d=ms(o,s,l,a||"inset",i);if(!d)return!1;var p=d.clipText,v=d.type,h=d.poses,g=et(e,"onClipStart",ft(e,t,{clipType:v,clipStyle:p,poses:h.map(function(m){return m.pos})}));return g===!1?(c.isClipStart=!1,!1):(c.isControl=f&&f.indexOf("clip-control")>-1,c.isLine=f.indexOf("clip-line")>-1,c.isArea=f.indexOf("clip-area")>-1||f.indexOf("clip-ellipse")>-1,c.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,c.clipPath=d,c.isClipStart=!0,r.clipPathState=p,ur(e,t),!0)},dragControl:function(e,t){var r,n,a=t.datas,i=t.originalDatas,o=t.isDragTarget;if(!a.isClipStart)return!1;var s=a,l=s.isControl,u=s.isLine,f=s.isArea,c=s.clipIndex,d=s.clipPath;if(!d)return!1;var p=ir(e.props,"clippable"),v=p.keepRatio,h=0,g=0,m=i.draggable,y=De(t);o&&m?(r=m.prevBeforeDist,h=r[0],g=r[1]):(h=y[0],g=y[1]);var b=[h,g],x=e.state,_=x.width,S=x.height,C=!f&&!l&&!u,M=d.type,k=d.poses,E=d.splitter,R=k.map(function(Dt){return Dt.pos});C&&(h=-h,g=-g);var D=!l||k[c].direction==="nesw",P=M==="inset"||M==="rect",I=k.map(function(){return[0,0]});if(l&&!D){var B=k[c],V=B.horizontal,K=B.vertical,X=[h*Math.abs(V),g*Math.abs(K)];I=Yg(k,c,X,P,v)}else D&&(I=R.map(function(){return[h,g]}));var H=R.map(function(Dt,Zt){return bt(Dt,I[Zt])}),z=st([],H,!0);x.snapBoundInfos=null;var j=d.type==="circle",G=d.type==="ellipse";if(j||G){var $=ve(H),N=Math.abs($.bottom-$.top),F=Math.abs(G?$.right-$.left:N),W=H[0][1]+N,Z=H[0][0]-F,nt=H[0][0]+F;j&&(z.push([nt,$.bottom]),I.push([1,0])),z.push([$.left,W]),I.push([0,1]),z.push([Z,$.bottom]),I.push([1,0])}var U=au((p.clipHorizontalGuidelines||[]).map(function(Dt){return kt("".concat(Dt),S)}),(p.clipVerticalGuidelines||[]).map(function(Dt){return kt("".concat(Dt),_)}),_,S),J=[],Q=[];if(j||G)J=[z[4][0],z[2][0]],Q=[z[1][1],z[3][1]];else if(P){var ct=[z[0],z[2],z[4],z[6]],dt=[I[0],I[2],I[4],I[6]];J=ct.filter(function(Dt,Zt){return dt[Zt][0]}).map(function(Dt){return Dt[0]}),Q=ct.filter(function(Dt,Zt){return dt[Zt][1]}).map(function(Dt){return Dt[1]})}else J=z.filter(function(Dt,Zt){return I[Zt][0]}).map(function(Dt){return Dt[0]}),Q=z.filter(function(Dt,Zt){return I[Zt][1]}).map(function(Dt){return Dt[1]});var Bt=[0,0],St=ls(U,p.clipTargetBounds&&{left:0,top:0,right:_,bottom:S},J,Q,5),yt=St.horizontal,Mt=St.vertical,mt=yt.offset,xt=Mt.offset;if(yt.isBound&&(Bt[1]+=mt),Mt.isBound&&(Bt[0]+=xt),(G||j)&&I[0][0]===0&&I[0][1]===0){var $=ve(H),_t=$.bottom-$.top,ne=G?$.right-$.left:_t,Ie=Mt.isBound?Math.abs(xt):Mt.snapIndex===0?-xt:xt,$t=yt.isBound?Math.abs(mt):yt.snapIndex===0?-mt:mt;ne-=Ie,_t-=$t,j&&(_t=Ql(Mt,yt)>0?_t:ne,ne=_t);var Ht=z[0];z[1][1]=Ht[1]-_t,z[2][0]=Ht[0]+ne,z[3][1]=Ht[1]+_t,z[4][0]=Ht[0]-ne}else if(P&&v&&l){var Oe=bu(k),cr=Oe[0],vo=Oe[1],ho=cr&&vo?cr/vo:0,zu=k[c],mn=zu.direction||"",ha=z[1][1],W=z[5][1],Z=z[7][0],nt=z[3][0];mt<=xt?mt=xt/ho:xt=mt*ho,mn.indexOf("w")>-1?Z-=xt:mn.indexOf("e")>-1?nt-=xt:(Z+=xt/2,nt-=xt/2),mn.indexOf("n")>-1?ha-=mt:mn.indexOf("s")>-1?W-=mt:(ha+=mt/2,W-=mt/2);var Lu=Un(ha,nt,W,Z);z.forEach(function(bo,Nu){var ba;ba=Lu[Nu].pos,bo[0]=ba[0],bo[1]=ba[1]})}else z.forEach(function(Dt,Zt){var mo=I[Zt];mo[0]&&(Dt[0]-=xt),mo[1]&&(Dt[1]-=mt)});var go=io(e,d,H),ga="".concat(M,"(").concat(go.join(E),")");if(x.clipPathState=ga,j||G)J=[z[4][0],z[2][0]],Q=[z[1][1],z[3][1]];else if(P){var ct=[z[0],z[2],z[4],z[6]];J=ct.map(function(Zt){return Zt[0]}),Q=ct.map(function(Zt){return Zt[1]})}else J=z.map(function(Dt){return Dt[0]}),Q=z.map(function(Dt){return Dt[1]});if(x.snapBoundInfos=ls(U,p.clipTargetBounds&&{left:0,top:0,right:_,bottom:S},J,Q,1),m){var $u=x.is3d,Fu=x.allMatrix,Gu=$u?4:3,ma=Bt;o&&(ma=[b[0]+Bt[0]-y[0],b[1]+Bt[1]-y[1]]),m.deltaOffset=Et(Fu,[ma[0],ma[1],0,0],Gu)}return et(e,"onClip",ft(e,t,T({clipEventType:"changed",clipType:M,poses:H,clipStyle:ga,clipStyles:go,distX:h,distY:g},te((n={},n[M==="rect"?"clip":"clipPath"]=ga,n),t)))),!0},dragControlEnd:function(e,t){this.unset(e);var r=t.isDrag,n=t.datas,a=t.isDouble,i=n.isLine,o=n.isClipStart,s=n.isControl;return o?(et(e,"onClipEnd",ce(e,t,{})),a&&(s?Ug(e,t):i&&jg(e,t)),a||r):!1},unset:function(e){e.state.clipPathState="",e.state.snapBoundInfos=null}},Kg={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[`:host[data-able-origindraggable] .control.origin {
    pointer-events: auto;
}`],dragControlCondition:function(e,t){return t.isRequest?t.requestAble==="originDraggable":Gt(t.inputEvent.target,ot("origin"))},dragControlStart:function(e,t){var r=t.datas;ur(e,t);var n=ft(e,t,{dragStart:Qt.dragStart(e,new _r().dragStart([0,0],t))}),a=et(e,"onDragOriginStart",n);return r.startOrigin=e.state.transformOrigin,r.startTargetOrigin=e.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,a===!1?(r.isDragOrigin=!1,!1):n},dragControl:function(e,t){var r=t.datas,n=t.isPinch,a=t.isRequest;if(!r.isDragOrigin)return!1;var i=De(t),o=i[0],s=i[1],l=e.state,u=l.width,f=l.height,c=l.offsetMatrix,d=l.targetMatrix,p=l.is3d,v=e.props.originRelative,h=v===void 0?!0:v,g=p?4:3,m=[o,s];if(a){var y=t.distOrigin;(y[0]||y[1])&&(m=y)}var b=bt(r.startOrigin,m),x=bt(r.startTargetOrigin,m),_=at(m,r.prevOrigin),S=hn(c,d,b,g),C=e.getRect(),M=ve(We(S,u,f,g)),k=[C.left-M.left,C.top-M.top];r.prevOrigin=m;var E=[he(x[0],u,h),he(x[1],f,h)].join(" "),R=Qt.drag(e,vn(t,e.state,k,!!n)),D=ft(e,t,T(T({width:u,height:f,origin:b,dist:m,delta:_,transformOrigin:E,drag:R},te({transformOrigin:E,transform:R.transform},t)),{afterTransform:R.transform}));return et(e,"onDragOrigin",D),D},dragControlEnd:function(e,t){var r=t.datas;return r.isDragOrigin?(et(e,"onDragOriginEnd",ce(e,t,{})),!0):!1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);return!!r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);return r?(e.transformOrigin=r.transformOrigin,!0):!1},request:function(e){var t={},r=e.getRect(),n=0,a=0,i=r.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:t}},request:function(s){return"deltaOrigin"in s?(o[0]+=s.deltaOrigin[0],o[1]+=s.deltaOrigin[1]):"origin"in s?(o[0]=s.origin[0]-i[0],o[1]=s.origin[1]-i[1]):("x"in s?n=s.x-r.left:"deltaX"in s&&(n+=s.deltaX),"y"in s?a=s.y-r.top:"deltaY"in s&&(a+=s.deltaY)),{datas:t,distX:n,distY:a,distOrigin:o}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Zg(e,t,r,n){var a=e.filter(function(l){var u=l.virtual,f=l.horizontal;return f&&!u}).length,i=e.filter(function(l){var u=l.virtual,f=l.vertical;return f&&!u}).length,o=-1;if(t===0&&(a===0?o=0:a===1&&(o=1)),t===2&&(a<=2?o=2:a<=3&&(o=3)),t===3&&(i===0?o=4:i<4&&(o=7)),t===1&&(i<=1?o=5:i<=2&&(o=6)),!(o===-1||!e[o].virtual)){var s=e[o];Jg(e,o),o<4?s.pos[0]=r:s.pos[1]=n}}function Jg(e,t){t<4?e.slice(0,t+1).forEach(function(r){r.virtual=!1}):(e[0].virtual&&(e[0].virtual=!1),e.slice(4,t+1).forEach(function(r){r.virtual=!1}))}function Qg(e,t){t<4?e.slice(t,4).forEach(function(r){r.virtual=!0}):e.slice(t).forEach(function(r){r.virtual=!0})}function bs(e,t,r,n,a){n===void 0&&(n=[0,0]);var i=[];return!e||e==="0px"?i=[]:i=Ne(e),mu(i,t,r,0,0,n,a)}function ys(e,t,r,n,a){var i=e.state,o=i.width,s=i.height,l=ao(a,e.props.roundRelative,o,s),u=l.raws,f=l.styles,c=l.radiusPoses,d=Wg(c,u),p=d.horizontals,v=d.verticals,h=f.join(" ");i.borderRadiusState=h;var g=ft(e,t,T({horizontals:p,verticals:v,borderRadius:h,width:o,height:s,delta:n,dist:r},te({borderRadius:h},t)));return et(e,"onRound",g),g}function xs(e){var t=e.getState().style,r=t.borderRadius||"";if(!r&&e.props.groupable){var n=e.getTargets()[0];n&&(r=getComputedStyle(n).borderRadius,t.borderRadius=r)}return r}var t0={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean,roundPadding:Number,isDisplayShadowRoundControls:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd",onRoundGroupStart:"roundGroupStart",onRoundGroup:"roundGroup",onRoundGroupEnd:"roundGroupEnd"},css:[`.control.border-radius {
    background: #d66;
    cursor: pointer;
    z-index: 3;
}`,`.control.border-radius.vertical {
    background: #d6d;
    z-index: 2;
}`,`.control.border-radius.virtual {
    opacity: 0.5;
    z-index: 1;
}`,`:host.round-line-clickable .line.direction {
    cursor: pointer;
}`],className:function(e){var t=e.props.roundClickable;return t===!0||t==="line"?ot("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},render:function(e,t){var r=e.getState(),n=r.target,a=r.width,i=r.height,o=r.allMatrix,s=r.is3d,l=r.left,u=r.top,f=r.borderRadiusState,c=e.props,d=c.minRoundControls,p=d===void 0?[0,0]:d,v=c.maxRoundControls,h=v===void 0?[4,4]:v,g=c.zoom,m=c.roundPadding,y=m===void 0?0:m,b=c.isDisplayShadowRoundControls,x=c.groupable;if(!n)return null;var _=f||xs(e),S=s?4:3,C=bs(_,a,i,p,!0);if(!C)return null;var M=0,k=0,E=x?[0,0]:[l,u];return C.map(function(R,D){var P=R.horizontal,I=R.vertical,B=R.direction||"",V=st([],R.pos,!0);k+=Math.abs(P),M+=Math.abs(I),P&&B.indexOf("n")>-1&&(V[1]-=y),I&&B.indexOf("w")>-1&&(V[0]-=y),P&&B.indexOf("s")>-1&&(V[1]+=y),I&&B.indexOf("e")>-1&&(V[0]+=y);var K=at(Ft(o,V,S),E),X=R.vertical?M<=h[1]&&(b||!R.virtual):k<=h[0]&&(b||!R.virtual);return t.createElement("div",{key:"borderRadiusControl".concat(D),className:ot("control","border-radius",R.vertical?"vertical":"",R.virtual?"virtual":""),"data-radius-index":D,style:{display:X?"block":"none",transform:"translate(".concat(K[0],"px, ").concat(K[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(e,t){if(!t.inputEvent||t.isRequest)return!1;var r=t.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragControlStart:function(e,t){var r=t.inputEvent,n=t.datas,a=r.target,i=a.getAttribute("class")||"",o=i.indexOf("border-radius")>-1,s=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,l=o?parseInt(a.getAttribute("data-radius-index"),10):-1,u=-1;if(s){var f=a.getAttribute("data-line-key")||"";f&&(u=parseInt(f.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!o&&!s)return!1;var c=ft(e,t,{}),d=et(e,"onRoundStart",c);if(d===!1)return!1;n.lineIndex=u,n.controlIndex=l,n.isControl=o,n.isLine=s,ur(e,t);var p=e.props,v=p.roundRelative,h=p.minRoundControls,g=h===void 0?[0,0]:h,m=e.state,y=m.width,b=m.height;n.isRound=!0,n.prevDist=[0,0];var x=xs(e),_=bs(x||"",y,b,g,!0)||[];return n.controlPoses=_,m.borderRadiusState=ao(_,v,y,b).styles.join(" "),c},dragControl:function(e,t){var r=t.datas,n=r.controlPoses;if(!r.isRound||!r.isControl||!n.length)return!1;var a=r.controlIndex,i=De(t),o=i[0],s=i[1],l=[o,s],u=at(l,r.prevDist),f=e.props.maxRoundControls,c=f===void 0?[4,4]:f,d=e.state,p=d.width,v=d.height,h=n[a],g=h.vertical,m=h.horizontal,y=n.map(function(x){var _=x.horizontal,S=x.vertical,C=[_*m*l[0],S*g*l[1]];if(_){if(c[0]===1)return C;if(c[0]<4&&_!==m)return C}else{if(c[1]===0)return C[1]=S*m*l[0]/p*v,C;if(g){if(c[1]===1)return C;if(c[1]<4&&S!==g)return C}}return[0,0]});y[a]=l;var b=n.map(function(x,_){return T(T({},x),{pos:bt(x.pos,y[_])})});return a<4?b.slice(0,a+1).forEach(function(x){x.virtual=!1}):b.slice(4,a+1).forEach(function(x){x.virtual=!1}),r.prevDist=[o,s],ys(e,t,l,u,b)},dragControlEnd:function(e,t){var r=e.state;r.borderRadiusState="";var n=t.datas,a=t.isDouble;if(!n.isRound)return!1;var i=n.isControl,o=n.controlIndex,s=n.isLine,l=n.lineIndex,u=n.controlPoses,f=u.filter(function(m){var y=m.virtual;return y}).length,c=e.props.roundClickable,d=c===void 0?!0:c;if(a&&d){if(i&&(d===!0||d==="control"))Qg(u,o);else if(s&&(d===!0||d==="line")){var p=Dl(e,t),v=p[0],h=p[1];Zg(u,l,v,h)}f!==u.filter(function(m){var y=m.virtual;return y}).length&&ys(e,t,[0,0],[0,0],u)}var g=ce(e,t,{});return et(e,"onRoundEnd",g),r.borderRadiusState="",g},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);if(!r)return!1;var n=e.moveables,a=e.props.targets,i=xe(e,"roundable",t),o=T({targets:e.props.targets,events:i.map(function(s,l){return T(T({},s),{target:a[l],moveable:n[l],currentTarget:n[l]})})},r);return et(e,"onRoundGroupStart",o),r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);if(!r)return!1;var n=e.moveables,a=e.props.targets,i=xe(e,"roundable",t),o=T({targets:e.props.targets,events:i.map(function(s,l){return T(T(T({},s),{target:a[l],moveable:n[l],currentTarget:n[l]}),te({borderRadius:r.borderRadius},s))})},r);return et(e,"onRoundGroup",o),o},dragGroupControlEnd:function(e,t){var r=e.moveables,n=e.props.targets,a=xe(e,"roundable",t);ca(e,"onRound",function(s){var l=T({targets:e.props.targets,events:a.map(function(u,f){return T(T(T({},u),{target:n[f],moveable:r[f],currentTarget:r[f]}),te({borderRadius:s.borderRadius},u))})},s);et(e,"onRoundGroup",l)});var i=this.dragControlEnd(e,t);if(!i)return!1;var o=T({targets:e.props.targets,events:a.map(function(s,l){var u;return T(T({},s),{target:n[l],moveable:r[l],currentTarget:r[l],lastEvent:(u=s.datas)===null||u===void 0?void 0:u.lastEvent})})},i);return et(e,"onRoundGroupEnd",o),o},unset:function(e){e.state.borderRadiusState=""}};function e0(e,t){var r=t?4:3,n=Rt(r),a="matrix".concat(t?"3d":"","(").concat(n.join(","),")");return e===a||e==="matrix(1,0,0,1,0,0)"}var yu={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(e,t){var r=e.state,n=r.is3d,a=r.target,i=r.targetMatrix,o=a==null?void 0:a.style.transform,s=n?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(hl(i,!0),")"),l=!o||o==="none"?s:o;t.datas.startTransforms=e0(l,n)?[]:Ne(l)},resetStyle:function(e){var t=e.datas;t.nextStyle={},t.nextTransforms=e.datas.startTransforms,t.nextTransformAppendedIndexes=[]},fillDragStartParams:function(e,t){return ft(e,t,{setTransform:function(r){t.datas.startTransforms=Lt(r)?r:Ne(r)},isPinch:!!t.isPinch})},fillDragParams:function(e,t){return ft(e,t,{isPinch:!!t.isPinch})},dragStart:function(e,t){this.setTransform(e,t),this.resetStyle(t),et(e,"onBeforeRenderStart",this.fillDragStartParams(e,t))},drag:function(e,t){this.resetStyle(t),et(e,"onBeforeRender",ft(e,t,{isPinch:!!t.isPinch}))},dragEnd:function(e,t){et(e,"onBeforeRenderEnd",ft(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag}))},dragGroupStart:function(e,t){var r=this;this.dragStart(e,t);var n=xe(e,"beforeRenderable",t),a=e.moveables,i=n.map(function(o,s){var l=a[s];return r.setTransform(l,o),r.resetStyle(o),r.fillDragStartParams(l,o)});et(e,"onBeforeRenderGroupStart",ft(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,setTransform:function(){},events:i}))},dragGroup:function(e,t){var r=this;this.drag(e,t);var n=xe(e,"beforeRenderable",t),a=e.moveables,i=n.map(function(o,s){var l=a[s];return r.resetStyle(o),r.fillDragParams(l,o)});et(e,"onBeforeRenderGroup",ft(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,events:i}))},dragGroupEnd:function(e,t){this.dragEnd(e,t),et(e,"onBeforeRenderGroupEnd",ft(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets}))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)}},xu={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(e,t){et(e,"onRenderStart",ft(e,t,{isPinch:!!t.isPinch}))},drag:function(e,t){et(e,"onRender",this.fillDragParams(e,t))},dragAfter:function(e,t){if(t.resultCount)return this.drag(e,t)},dragEnd:function(e,t){et(e,"onRenderEnd",this.fillDragEndParams(e,t))},dragGroupStart:function(e,t){et(e,"onRenderGroupStart",ft(e,t,{isPinch:!!t.isPinch,targets:e.props.targets}))},dragGroup:function(e,t){var r=this,n=xe(e,"beforeRenderable",t),a=e.moveables,i=n.map(function(o,s){var l=a[s];return r.fillDragParams(l,o)});et(e,"onRenderGroup",ft(e,t,T(T({isPinch:!!t.isPinch,targets:e.props.targets,transform:wn(t)},te(En(t))),{events:i})))},dragGroupEnd:function(e,t){var r=this,n=xe(e,"beforeRenderable",t),a=e.moveables,i=n.map(function(o,s){var l=a[s];return r.fillDragEndParams(l,o)});et(e,"onRenderGroupEnd",ft(e,t,T({isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets,events:i,transform:wn(t)},te(En(t)))))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlAfter:function(e,t){return this.dragAfter(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)},fillDragParams:function(e,t){return ft(e,t,T({isPinch:!!t.isPinch,transform:wn(t)},te(En(t))))},fillDragEndParams:function(e,t){return ft(e,t,T({isPinch:!!t.isPinch,isDrag:t.isDrag,transform:wn(t)},te(En(t))))}};function Nr(e,t,r,n,a,i,o){var s=a==="Start",l=e.state.target,u=i.isRequest;if(!l||s&&n.indexOf("Control")>-1&&!u&&e.areaElement===i.inputEvent.target)return!1;var f="".concat(r).concat(n).concat(a),c="".concat(r).concat(n,"Condition"),d=a==="End",p=a==="After",v=s&&(!e.targetGesto||!e.controlGesto||!e.targetGesto.isFlag()||!e.controlGesto.isFlag());v&&e.updateRect(a,!0,!1),i.clientDistX=i.distX,i.clientDistY=i.distY,a===""&&!u&&Rh(e.state,i);var h=st([],e[t],!0);if(u){var g=i.requestAble;h.some(function(D){return D.name===g})||h.push.apply(h,e.props.ables.filter(function(D){return D.name===g}))}if(!h.length||h.every(function(D){return D.dragRelation}))return!1;var m=st(st([yu],h,!0),[xu],!1).filter(function(D){return D[f]}),y=i.datas;v&&m.forEach(function(D){D.unset&&D.unset(e)});var b=i.inputEvent,x;d&&b&&(x=document.elementFromPoint(i.clientX,i.clientY)||b.target);var _=0,S=!1,C=function(){var D;S=!0,(D=i.stop)===null||D===void 0||D.call(i)},M=m.filter(function(D){var P=D.name,I=y[P]||(y[P]={});if(s&&(I.isEventStart=!D[c]||D[c](e,i)),I.isEventStart){var B=D[f](e,T(T({},i),{stop:C,resultCount:_,datas:I,originalDatas:y,inputTarget:x}));return e._emitter.off(),s&&B===!1&&(I.isEventStart=!1),_+=B||I.isEventStart?1:0,B}return!1}),k=M.length,E=!1;if(S&&(E=!0),!E&&s&&m.length&&!k&&(E=m.filter(function(D){var P=D.name,I=y[P];return I.isEventStart?D.dragRelation!=="strong":!1}).length),(d||E)&&(e.state.gestos={},e.moveables&&e.moveables.forEach(function(D){D.state.gestos={}}),m.forEach(function(D){D.unset&&D.unset(e)})),s&&!E&&!u&&k&&(i==null||i.preventDefault()),e.isUnmounted||E)return!1;if(!s&&k&&!o||d){var R=e.props.flushSync||Ll;R(function(){e.updateRect(d?a:"",!0,!1),e.forceUpdate()})}return!s&&!d&&!p&&k&&!o&&Nr(e,t,r,n,a+"After",i),!0}function gi(e){return function(t){var r=e.props.dragTarget,n=t.inputEvent.target,a=e.areaElement;return r&&(n===r||r.contains(n))||n===a||!e.isMoveableElement(n)&&!e.controlBox.getElement().contains(n)||Gt(n,"moveable-area")||Gt(n,"moveable-padding")||Gt(n,"moveable-edgeDraggable")}}function _u(e,t,r){var n=e.controlBox.getElement(),a=[],i=e.props.dragTarget;return a.push(n),(!e.props.dragArea||i)&&a.push(t),oo(e,a,"targetAbles",r,{dragStart:gi(e),pinchStart:gi(e)})}function oo(e,t,r,n,a){a===void 0&&(a={});var i=r==="targetAbles",o=e.props,s=o.pinchOutside,l=o.pinchThreshold,u=o.preventClickEventOnDrag,f=o.preventClickDefault,c=o.checkInput,d={preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:l,pinchOutside:s,preventClickEventOnDrag:i?u:!1,preventClickEventOnDragStart:i?f:!1,preventClickEventByCondition:i?null:function(h){return e.controlBox.getElement().contains(h.target)},checkInput:i?c:!1},p=new Fv(t,d),v=n==="Control";return["drag","pinch"].forEach(function(h){["Start","","End"].forEach(function(g){p.on("".concat(h).concat(g),function(m){var y,b=m.eventType;if(a[b]&&!a[b](m)){m.stop();return}var x=Nr(e,r,h,n,g,m);x?(e.props.stopPropagation||g==="Start"&&v)&&((y=m==null?void 0:m.inputEvent)===null||y===void 0||y.stopPropagation()):m.stop()})})}),p}var r0=function(){function e(r,n,a){var i=this;this.target=r,this.moveable=n,this.eventName=a,this.ables=[],this._onEvent=function(o){var s=i.eventName,l=i.moveable;l.state.disableNativeEvent||i.ables.forEach(function(u){u[s](l,{inputEvent:o})})},r.addEventListener(a.toLowerCase(),this._onEvent)}var t=e.prototype;return t.setAbles=function(r){this.ables=r},t.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},e}();function n0(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function _s(e,t,r){for(var n=e,a=[],i=document.documentElement||document.body,o=!r&&e===t||e===i,s=o,l=!1,u=3,f,c,d,p=!1,v=qr(t,t,!0).offsetParent,h=1;n&&!s;){s=o;var g=getComputedStyle(n),m=g.position,y=$l(n,g),b=gv(bh(y)),x=m==="fixed",_={hasTransform:!1,fixedContainer:null};x&&(p=!0,_=Sh(n),v=_.fixedContainer);var S=b.length;!l&&S===16&&(l=!0,u=4,li(a),d&&(d=Ee(d,3,4))),l&&S===9&&(b=Ee(b,3,4));var C=_h(n,e,g),M=C.tagName,k=C.hasOffset,E=C.isSVG,R=C.origin,D=C.targetOrigin,P=C.offset,I=P[0],B=P[1];M==="svg"&&d&&(a.push({type:"target",target:n,matrix:Ch(n,u)}),a.push({type:"offset",target:n,matrix:Rt(u)}));var V=void 0,K=!1,X=!1,H=parseFloat(g.zoom)||1;if(x)V=_.fixedContainer,K=!0;else{var z=qr(n,t,!1,!0,g),j=z.offsetZoom;if(V=z.offsetParent,K=z.isEnd,X=z.isStatic,h*=j,j!==1&&X)I-=V.offsetLeft,B-=V.offsetTop;else if(Qv){var G=z.parentSlotElement;if(G){for(var $=V,N=0,F=0;$&&n0($);)N+=$.offsetLeft,F+=$.offsetTop,$=$.offsetParent;I-=N,B-=F}}}Cl&&!th&&k&&!E&&X&&(m==="relative"||m==="static")&&(I-=V.offsetLeft,B-=V.offsetTop,o=o||K);var W=0,Z=0,nt=0,U=0;if(x)k&&_.hasTransform&&(nt=V.clientLeft,U=V.clientTop);else if(k&&v!==V&&(W=V.clientLeft,Z=V.clientTop),k&&V===i){var J=Fl(n,!1,g);I+=J[0],B+=J[1]}if(a.push({type:"target",target:n,matrix:Wn(b,u,R)}),k){var Q=n===e,ct=Q?0:n.scrollLeft,dt=Q?0:n.scrollTop;a.push({type:"offset",target:n,matrix:Ur([I-ct+W-nt,B-dt+Z-U],u)})}else a.push({type:"offset",target:n,origin:R});if(H!==1&&a.push({type:"zoom",target:n,matrix:Wn($i([H,H],u),u,[0,0])}),d||(d=b),f||(f=R),c||(c=D),s||x)break;n=V,o=K,(!r||n===i)&&(s=o)}return d||(d=Rt(u)),f||(f=[0,0]),c||(c=[0,0]),{zoom:h,offsetContainer:v,matrixes:a,targetMatrix:d,transformOrigin:f,targetOrigin:c,is3d:l,hasFixed:p}}function a0(e,t,r,n){var a;r===void 0&&(r=t);var i=_s(e,t),o=i.matrixes,s=i.is3d,l=i.targetMatrix,u=i.transformOrigin,f=i.targetOrigin,c=i.offsetContainer,d=i.hasFixed,p=i.zoom,v=_s(c,r,!0),h=v.matrixes,g=v.is3d,m=v.offsetContainer,y=v.zoom,b=n,x=4,_=e.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in e,S=l,C=Rt(x),M=Rt(x),k=Rt(x),E=Rt(x),R=o.length;h.reverse(),o.reverse(),!s&&b&&(S=Ee(S,3,4),li(o)),!g&&b&&li(h),h.forEach(function(X){M=Et(M,X.matrix,x)});var D=r||document.body,P=((a=h[0])===null||a===void 0?void 0:a.target)||qr(D,D,!0).offsetParent,I=h.slice(1).reduce(function(X,H){return Et(X,H.matrix,x)},Rt(x));o.forEach(function(X,H){if(R-2===H&&(k=C.slice()),R-1===H&&(E=C.slice()),!X.matrix){var z=o[H+1],j=Eh(X,z,P,x,Et(I,C,x));X.matrix=Ur(j,x)}C=Et(C,X.matrix,x)});var B=!_&&s;S||(S=Rt(B?4:3));var V=ua(_&&S.length===16?Ee(S,4,3):S,B),K=M;return M=pl(M,x,x),{hasZoom:p!==1||y!==1,hasFixed:d,rootMatrix:M,originalRootMatrix:K,beforeMatrix:k,offsetMatrix:E,allMatrix:C,targetMatrix:S,targetTransform:V,transformOrigin:u,targetOrigin:f,is3d:b,offsetContainer:c,offsetRootContainer:m}}function i0(e,t,r,n){r===void 0&&(r=t);var a=0,i=0,o=0,s={},l=Nl(e);if(e&&(a=l.offsetWidth,i=l.offsetHeight),e){var u=a0(e,t,r,n),f=br(u.allMatrix,u.transformOrigin,a,i);s=T(T({},u),f);var c=br(u.allMatrix,[50,50],100,100);o=Vl([c.pos1,c.pos2],c.direction)}var d=4;return T(T(T({hasZoom:!1,width:a,height:i,rotation:o},l),{originalRootMatrix:Rt(d),rootMatrix:Rt(d),beforeMatrix:Rt(d),offsetMatrix:Rt(d),allMatrix:Rt(d),targetMatrix:Rt(d),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),s)}function mi(e,t,r,n,a,i){i===void 0&&(i=[]);var o=1,s=[0,0],l=kn(),u=kn(),f=kn(),c=kn(),d=[0,0],p={},v=i0(t,r,a,!0);if(t){var h=getComputedStyle(t);i.forEach(function(D){p[D]=h[D]});var g=v.is3d?4:3,m=br(v.offsetMatrix,bt(v.transformOrigin,vl(v.targetMatrix,g)),v.width,v.height);o=m.direction,s=bt(m.origin,[m.left-v.left,m.top-v.top]),c=Ar(v.offsetRootContainer);var y=qr(n,n,!0).offsetParent||v.offsetRootContainer;if(v.hasZoom){var b=br(Et(v.originalRootMatrix,v.allMatrix),v.transformOrigin,v.width,v.height),x=br(v.originalRootMatrix,Hn(getComputedStyle(y)).map(function(D){return parseFloat(D)}),y.offsetWidth,y.offsetHeight);if(l=Pa(b,c),f=Pa(x,c,y,!0),e){var _=b.left,S=b.top;u=Pa({left:_,top:S,bottom:S,right:S},c)}}else{l=Ar(t),f=Ar(y,!0),e&&(u=Ar(e));var C=f.left,M=f.top,k=f.clientLeft,E=f.clientTop,R=[l.left-C,l.top-M];d=at(nr(v.rootMatrix,R,4),[k+v.left,E+v.top])}}return T({targetClientRect:l,containerClientRect:f,moveableClientRect:u,rootContainerClientRect:c,beforeDirection:o,beforeOrigin:s,originalBeforeOrigin:s,target:t,style:p,offsetDelta:d},v)}function Ss(e){var t=e.pos1,r=e.pos2,n=e.pos3,a=e.pos4;if(!t||!r||!n||!a)return null;var i=Ve([t,r,n,a]),o=[i.minX,i.minY],s=at(e.origin,o);return t=at(t,o),r=at(r,o),n=at(n,o),a=at(a,o),T(T({},e),{left:e.left,top:e.top,posDelta:o,pos1:t,pos2:r,pos3:n,pos4:a,origin:s,beforeOrigin:s,isPersisted:!0})}var Cr=function(e){dn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state=T({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},mi(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new aa,n._prevTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._observer=null,n._observerId=0,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n.checkUpdateRect=function(){if(!n.isDragging()){var a=n.props.parentMoveable;if(a){a.checkUpdateRect();return}Gp(n._observerId),n._observerId=Js(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(a){a.stopPropagation(),a.preventDefault()},n}var r=t.prototype;return r.render=function(){var n=this.props,a=this.getState(),i=n.parentPosition,o=n.className,s=n.target,l=n.zoom,u=n.cspNonce,f=n.translateZ,c=n.cssStyled,d=n.portalContainer,p=n.groupable,v=n.linePadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var h=i||[0,0],g=h[0],m=h[1],y=a.left,b=a.top,x=a.target,_=a.direction,S=a.hasFixed,C=a.offsetDelta,M=n.targets,k=this.isDragging(),E={};this.getEnabledAbles().forEach(function(V){E["data-able-".concat(V.name.toLowerCase())]=!0});var R=this._getAbleClassName(),D=M&&M.length&&(x||p)||s||!this._hasFirstTarget&&this.state.isPersisted,P=this.controlBox||this.props.firstRenderState||this.props.persistData,I=[y-g,b-m];!p&&n.useAccuratePosition&&(I[0]+=C[0],I[1]+=C[1]);var B={position:S?"fixed":"absolute",display:D?"block":"none",visibility:P?"visible":"hidden",transform:"translate3d(".concat(I[0],"px, ").concat(I[1],"px, ").concat(f,")"),"--zoom":l,"--zoompx":"".concat(l,"px")};return v&&(B["--moveable-line-padding"]=v),pe(c,T({cspNonce:u,ref:Ce(this,"controlBox"),className:"".concat(ot("control-box",_===-1?"reverse":"",k?"dragging":"")," ").concat(R," ").concat(o)},E,{onClick:this._onPreventClick,portalContainer:d,style:B}),this.renderAbles(),this._renderLines())},r.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1,this.controlBox.getElement();var n=this.props,a=n.parentMoveable,i=n.container,o=n.wrapperMoveable;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!a&&!o&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},r.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(n)},r.componentWillUnmount=function(){this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off();var n=this._viewContainer;n&&this._changeAbleViewClassNames([]),gr(this,"targetGesto"),gr(this,"controlGesto");var a=this.events;for(var i in a){var o=a[i];o&&o.destroy()}},r.getTargets=function(){var n=this.props.target;return n?[n]:[]},r.getAble=function(n){var a=this.props.ables||[];return Re(a,function(i){return i.name===n})},r.getContainer=function(){var n=this.props,a=n.parentMoveable,i=n.wrapperMoveable,o=n.container;return o||i&&i.getContainer()||a&&a.getContainer()||this.controlBox.getElement().parentElement},r.isMoveableElement=function(n){var a;return n&&(((a=n.getAttribute)===null||a===void 0?void 0:a.call(n,"class"))||"").indexOf(Vi)>-1},r.dragStart=function(n){var a=this.targetGesto,i=this.controlGesto;return a&&gi(this)({inputEvent:n})?a.isFlag()||a.triggerDragStart(n):i&&this.isMoveableElement(n.target)&&(i.isFlag()||i.triggerDragStart(n)),this},r.hitTest=function(n){var a=this.state,i=a.target,o=a.pos1,s=a.pos2,l=a.pos3,u=a.pos4,f=a.targetClientRect;if(!i)return 0;var c;if(n instanceof Element){var d=n.getBoundingClientRect();c={left:d.left,top:d.top,width:d.width,height:d.height}}else c=T({width:0,height:0},n);var p=c.left,v=c.top,h=c.width,g=c.height,m=jo([o,s,u,l],f),y=Tv(m,[[p,v],[p+h,v],[p+h,v+g],[p,v+g]]),b=bl(m);return!y||!b?0:Math.min(100,y/b*100)},r.isInside=function(n,a){var i=this.state,o=i.target,s=i.pos1,l=i.pos2,u=i.pos3,f=i.pos4,c=i.targetClientRect;return o?Za([n,a],jo([s,l,f,u],c)):!1},r.updateRect=function(n,a,i){i===void 0&&(i=!0);var o=this.props,s=o.parentMoveable,l=this.state,u=l.target||this.props.target,f=this.getContainer(),c=s?s._rootContainer:this._rootContainer,d=mi(this.controlBox&&this.controlBox.getElement(),u,f,f,c||f,this._getRequestStyles());if(!u&&this._hasFirstTarget&&o.persistData){var p=Ss(o.persistData);for(var v in p)d[v]=p[v]}this.updateState(d,s?!1:i)},r.isDragging=function(n){var a,i,o=this.targetGesto,s=this.controlGesto;if(o!=null&&o.isFlag()){if(!n)return!0;var l=o.getEventData();return!!(!((a=l[n])===null||a===void 0)&&a.isEventStart)}if(s!=null&&s.isFlag()){if(!n)return!0;var l=s.getEventData();return!!(!((i=l[n])===null||i===void 0)&&i.isEventStart)}return!1},r.updateTarget=function(n){this.updateRect(n,!0)},r.getRect=function(){var n=this.state,a=ie(this.state),i=a[0],o=a[1],s=a[2],l=a[3],u=ve(a),f=n.width,c=n.height,d=u.width,p=u.height,v=u.left,h=u.top,g=[n.left,n.top],m=bt(g,n.origin),y=bt(g,n.beforeOrigin),b=n.transformOrigin;return{width:d,height:p,left:v,top:h,pos1:i,pos2:o,pos3:s,pos4:l,offsetWidth:f,offsetHeight:c,beforeOrigin:y,origin:m,transformOrigin:b,rotation:this.getRotation()}},r.getManager=function(){return this},r.stopDrag=function(n){var a,i;(!n||n==="target")&&((a=this.targetGesto)===null||a===void 0||a.stop()),(!n||n==="control")&&((i=this.controlGesto)===null||i===void 0||i.stop())},r.getRotation=function(){var n=this.state,a=n.pos1,i=n.pos2,o=n.direction;return Bh(a,i,o)},r.request=function(n,a,i){a===void 0&&(a={});var o=this.props,s=o.ables,l=o.groupable,u=s.filter(function(g){return g.name===n})[0];if(this.isDragging()||!u||!u.request)return{request:function(){return this},requestEnd:function(){return this}};var f=this,c=u.request(this),d=i||a.isInstant,p=c.isControl?"controlAbles":"targetAbles",v="".concat(l?"Group":"").concat(c.isControl?"Control":""),h={request:function(g){return Nr(f,p,"drag",v,"",T(T({},c.request(g)),{requestAble:n,isRequest:!0}),d),this},requestEnd:function(){return Nr(f,p,"drag",v,"End",T(T({},c.requestEnd()),{requestAble:n,isRequest:!0}),d),this}};return Nr(f,p,"drag",v,"Start",T(T({},c.requestStart(a)),{requestAble:n,isRequest:!0}),d),d?h.request(a).requestEnd():h},r.destroy=function(){this.componentWillUnmount()},r.updateRenderPoses=function(){var n=this.getState(),a=this.props,i=n.originalBeforeOrigin,o=n.transformOrigin,s=n.allMatrix,l=n.is3d,u=n.pos1,f=n.pos2,c=n.pos3,d=n.pos4,p=n.left,v=n.top,h=n.isPersisted,g=a.padding||{},m=g.left,y=m===void 0?0:m,b=g.top,x=b===void 0?0:b,_=g.bottom,S=_===void 0?0:_,C=g.right,M=C===void 0?0:C,k=l?4:3,E=[];h?E=o:this.controlBox&&a.groupable?E=i:E=bt(i,[p,v]),n.renderPoses=[bt(u,Mn(s,[-y,-x],o,E,k)),bt(f,Mn(s,[M,-x],o,E,k)),bt(c,Mn(s,[-y,S],o,E,k)),bt(d,Mn(s,[M,S],o,E,k))]},r.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,a=n.target,i=n.container,o=n.parentMoveable,s=this.state,l=s.target,u=s.container;if(!(!l&&!a)){this.updateAbles();var f=!ui(l,a),c=f||!ui(u,i);if(c){var d=i||this.controlBox;d&&this.unsetAbles(),this.updateState({target:a,container:i}),!o&&d&&this.updateRect("End",!1,!1),this._isPropTargetChanged=f}}},r.waitToChangeTarget=function(){return new Promise(function(){})},r.triggerEvent=function(n,a){this._emitter.trigger(n,a);var i=this.props[n];return i&&i(a)},r.useCSS=function(n,a){var i=this.props.customStyledMap,o=n+a;return i[o]||(i[o]=Sl(n,a)),i[o]},r.getState=function(){var n,a=this.props;(a.target||!((n=a.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,o=a.persistData,s=a.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&o){var l=Ss(o);if(l)return this.updateState(l,!1),this.state}return this.state.isPersisted=!1,this.state},r.updateSelectors=function(){},r.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(a){a.unset&&a.unset(n)})},r.updateAbles=function(n,a){n===void 0&&(n=this.props.ables),a===void 0&&(a="");var i=this.props,o=i.triggerAblesSimultaneously,s=this.getEnabledAbles(n),l="drag".concat(a,"Start"),u="pinch".concat(a,"Start"),f="drag".concat(a,"ControlStart"),c=Dn(s,[l,u],o),d=Dn(s,[f],o);this.enabledAbles=s,this.targetAbles=c,this.controlAbles=d},r.updateState=function(n,a){if(a){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var o in n)i[o]=n[o]}},r.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var a=this.props;return n.filter(function(i){return i&&(i.always&&a[i.name]!==!1||a[i.name])})},r.renderAbles=function(){var n=this,a=this.props,i=a.triggerAblesSimultaneously,o={createElement:pe};return this.renderState={},Th(Ul(Dn(this.getEnabledAbles(),["render"],i).map(function(s){var l=s.render;return l(n,o)||[]})).filter(function(s){return s}),function(s){var l=s.key;return l}).map(function(s){return s[0]})},r.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},r._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(a,i){var o,s,l=(s=(o=i.requestStyle)===null||o===void 0?void 0:o.call(i))!==null&&s!==void 0?s:[];return st(st([],a,!0),l,!0)},[]);return n},r._updateObserver=function(n){var a,i=this.props,o=i.target;if(!window.ResizeObserver||!o||!i.useResizeObserver){(a=this._observer)===null||a===void 0||a.disconnect();return}if(!(n.target===o&&this._observer)){var s=new ResizeObserver(this.checkUpdateRect);s.observe(o,{box:"border-box"}),this._observer=s}},r._updateEvents=function(){var n=this.controlBox.getElement(),a=this.targetAbles.length,i=this.controlAbles.length,o=this.props,s=o.dragTarget||o.target,l=!a&&this.targetGesto||this._isTargetChanged(!0);l&&(gr(this,"targetGesto"),this.updateState({gesto:null})),i||gr(this,"controlGesto"),s&&a&&!this.targetGesto&&(this.targetGesto=_u(this,s,"")),!this.controlGesto&&i&&(this.controlGesto=oo(this,n,"controlAbles","Control"))},r._updateTargets=function(){var n=this.props;this._prevTarget=n.dragTarget||n.target,this._prevDragArea=n.dragArea},r._renderLines=function(){var n=this.props,a=n,i=a.zoom,o=a.hideDefaultLines,s=a.hideChildMoveableDefaultLines,l=a.parentMoveable;if(o||l&&s)return[];var u=this.getState().renderPoses,f={createElement:pe};return[[0,1],[1,3],[3,2],[2,0]].map(function(c,d){var p=c[0],v=c[1];return Kr(f,"",u[p],u[v],i,"render-line-".concat(d))})},r._isTargetChanged=function(n){var a=this.props,i=a.dragTarget||a.target,o=this._prevTarget,s=this._prevDragArea,l=a.dragArea,u=!l&&o!==i,f=(n||l)&&s!==l;return u||f},r._updateNativeEvents=function(){var n=this,a=this.props,i=a.dragArea?this.areaElement:this.state.target,o=this.events,s=Mr(o);if(this._isTargetChanged())for(var l in o){var u=o[l];u&&u.destroy(),o[l]=null}if(i){var f=this.enabledAbles;s.forEach(function(c){var d=Dn(f,[c]),p=d.length>0,v=o[c];if(!p){v&&(v.destroy(),o[c]=null);return}v||(v=new r0(i,n,c),o[c]=v),v.setAbles(d)})}},r._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=or(n,!0))},r._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=or(n,!0));var a=this._viewContainer;a&&this._changeAbleViewClassNames(st(st([],this._getAbleViewClassNames(),!0),[this.isDragging()?Bg:""],!1))},r._changeAbleViewClassNames=function(n){var a=this._viewContainer,i=jl(n.filter(Boolean),function(f){return f}).map(function(f){var c=f[0];return c}),o=this._viewClassNames,s=on(o,i),l=s.removed,u=s.added;l.forEach(function(f){tl(a,o[f])}),u.forEach(function(f){Qs(a,i[f])}),this._viewClassNames=i},r._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(a){var i;return((i=a.viewClassName)===null||i===void 0?void 0:i.call(a,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},r._getAbleClassName=function(n){var a=this;n===void 0&&(n="");var i=this.getEnabledAbles(),o=this.targetGesto,s=this.controlGesto,l=o!=null&&o.isFlag()?o.getEventData():{},u=s!=null&&s.isFlag()?s.getEventData():{};return i.map(function(f){var c,d,p,v=f.name,h=((c=f.className)===null||c===void 0?void 0:c.call(f,a))||"";return(!((d=l[v])===null||d===void 0)&&d.isEventStart||!((p=u[v])===null||p===void 0)&&p.isEventStart)&&(h+=" ".concat(ot("".concat(v).concat(n,"-dragging")))),h.trim()}).filter(Boolean).join(" ")},t.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,portalContainer:null,useResizeObserver:!1,linePadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Ll,firstRenderState:null,persistData:null,viewContainer:null,useAccuratePosition:!1},t}(Ai),so={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,groupableProps:Object,targetGroups:Object,hideChildMoveableDefaultLines:Boolean},events:{},render:function(e,t){var r,n=e.props,a=n.targets||[];e.moveables=[];var i=e.getState(),o=i.left,s=i.top,l=i.isPersisted,u=[o,s],f=n.zoom||1,c=e.renderGroupRects,d=((r=n.persistData)===null||r===void 0?void 0:r.children)||[];return l?a=d.map(function(){return null}):d=[],st(st([],a.map(function(p,v){return t.createElement(Cr,{key:"moveable"+v,ref:Us(e,"moveables",v),target:p,origin:!1,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:e,parentPosition:u,persistData:d[v],zoom:f})}),!0),Ul(c.map(function(p,v){var h=p.pos1,g=p.pos2,m=p.pos3,y=p.pos4,b=[h,g,m,y];return[[0,1],[1,3],[3,2],[2,0]].map(function(x,_){var S=x[0],C=x[1];return Kr(t,"",at(b[S],u),at(b[C],u),f,"group-rect-".concat(v,"-").concat(_))})})),!0)}},o0=pn("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(e,t){t.datas.inputTarget=t.inputEvent&&t.inputEvent.target},dragEnd:function(e,t){var r=e.props.target,n=t.inputEvent,a=t.inputTarget,i=e.isMoveableElement(a),o=!i&&e.controlBox.getElement().contains(a);if(!(!n||!a||t.isDrag||e.isMoveableElement(a)||o)){var s=r.contains(a);et(e,"onClick",ft(e,t,{isDouble:t.isDouble,inputTarget:a,isTarget:r===a,moveableTarget:e.props.target,containsTarget:s}))}},dragGroupEnd:function(e,t){var r=t.inputEvent,n=t.inputTarget;if(!(!r||!n||t.isDrag||e.isMoveableElement(n)||t.datas.inputTarget===n)){var a=e.props.targets,i=a.indexOf(n),o=i>-1,s=!1;i===-1&&(i=Te(a,function(l){return l.contains(n)}),s=i>-1),et(e,"onClickGroup",ft(e,t,{isDouble:t.isDouble,targets:a,inputTarget:n,targetIndex:i,isTarget:o,containsTarget:s,moveableTarget:a[i]}))}},dragControlEnd:function(e,t){this.dragEnd(e,t)},dragGroupControlEnd:function(e,t){this.dragEnd(e,t)}});function fr(e){var t=e.originalDatas.draggable;return t||(e.originalDatas.draggable={},t=e.originalDatas.draggable),T(T({},e),{datas:t})}var s0=pn("edgeDraggable",{css:[`.edge.edgeDraggable.line {
    cursor: move;
}`],render:function(e,t){var r=e.props,n=r.edgeDraggable;return n?uu(t,"edgeDraggable",n,e.getState().renderPoses,r.zoom):[]},dragCondition:function(e,t){var r,n=e.props,a=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!a?!1:!n.draggable&&Gt(a,ot("direction"))&&Gt(a,ot("edge"))&&Gt(a,ot("edgeDraggable"))},dragStart:function(e,t){return Qt.dragStart(e,fr(t))},drag:function(e,t){return Qt.drag(e,fr(t))},dragEnd:function(e,t){return Qt.dragEnd(e,fr(t))},dragGroupCondition:function(e,t){var r,n=e.props,a=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!a?!1:!n.draggable&&Gt(a,ot("direction"))&&Gt(a,ot("line"))},dragGroupStart:function(e,t){return Qt.dragGroupStart(e,fr(t))},dragGroup:function(e,t){return Qt.dragGroup(e,fr(t))},dragGroupEnd:function(e,t){return Qt.dragGroupEnd(e,fr(t))},unset:function(e){return Qt.unset(e)}}),Su={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},lo=[yu,hu,wg,Lh,Qt,s0,vi,Rg,Ig,Tg,Lg,$g,Ag,Kg,qg,t0,so,Su,o0,vu,xu],l0=lo.reduce(function(e,t){return T(T({},e),"events"in t?t.events:{})},{}),u0=lo.reduce(function(e,t){return T(T({},e),t.props)},{}),c0=Ph(l0),f0=Object.keys(c0),d0=Object.keys(u0);function Cs(e,t){var r=e[0],n=e[1],a=e[2];return(r*t[0]+n*t[1]+a)/Math.sqrt(r*r+n*n)}function In(e,t){var r=e[0],n=e[1];return-r*t[0]-n*t[1]}function ws(e,t){return Math.max.apply(Math,e.map(function(r){var n=r[0],a=r[1],i=r[2],o=r[3];return Math.max(n[t],a[t],i[t],o[t])}))}function Es(e,t){return Math.min.apply(Math,e.map(function(r){var n=r[0],a=r[1],i=r[2],o=r[3];return Math.min(n[t],a[t],i[t],o[t])}))}function p0(e,t){var r,n=[0,0],a=[0,0],i=[0,0],o=[0,0],s=0,l=0;if(!e.length)return{pos1:n,pos2:a,pos3:i,pos4:o,minX:0,minY:0,maxX:0,maxY:0,width:s,height:l,rotation:t};var u=ut(t,re);if(u%90){var f=u/180*Math.PI,c=Math.tan(f),d=-1/c,p=[oi,Zo],v=[[0,0],[0,0]],h=[oi,Zo],g=[[0,0],[0,0]];e.forEach(function(H){H.forEach(function(z){var j=Cs([-c,1,0],z),G=Cs([-d,1,0],z);p[0]>j&&(v[0]=z,p[0]=j),p[1]<j&&(v[1]=z,p[1]=j),h[0]>G&&(g[0]=z,h[0]=G),h[1]<G&&(g[1]=z,h[1]=G)})});var m=v[0],y=v[1],b=g[0],x=g[1],_=[-c,1,In([-c,1],m)],S=[-c,1,In([-c,1],y)],C=[-d,1,In([-d,1],b)],M=[-d,1,In([-d,1],x)];r=[[_,C],[_,M],[S,C],[S,M]].map(function(H){var z=H[0],j=H[1];return Ni(z,j)[0]}),n=r[0],a=r[1],i=r[2],o=r[3],s=h[1]-h[0],l=p[1]-p[0]}else{var k=Es(e,0),E=Es(e,1),R=ws(e,0),D=ws(e,1);if(n=[k,E],a=[R,E],i=[k,D],o=[R,D],s=R-k,l=D-E,u%180){var P=[i,n,o,a];n=P[0],a=P[1],i=P[2],o=P[3],s=D-E,l=R-k}}if(u%360>180){var P=[o,i,a,n];n=P[0],a=P[1],i=P[2],o=P[3]}var I=Ve([n,a,i,o]),B=I.minX,V=I.minY,K=I.maxX,X=I.maxY;return{pos1:n,pos2:a,pos3:i,pos4:o,width:s,height:l,minX:B,minY:V,maxX:K,maxY:X,rotation:t}}function Cu(e,t){var r=t.map(function(n){if(Lt(n)){var a=Cu(e,n),i=a.length;return i>1?a:i===1?a[0]:null}else{var o=Re(e,function(s){var l=s.manager;return l.props.target===n});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return r.length===1&&Lt(r[0])?r[0]:r}var v0=function(e){dn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.differ=new ml,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}var r=t.prototype;return r.componentDidMount=function(){e.prototype.componentDidMount.call(this)},r.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},r.getTargets=function(){return this.props.targets},r.updateRect=function(n,a,i){var o;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;this.moveables.forEach(function(nt){nt.updateRect(n,!1,!1)});var l=this.props,u=this.moveables,f=s.target||l.target,c=u.map(function(nt){return{finded:!1,manager:nt}}),d=this.props.targetGroups||[],p=Cu(c,d);p.push.apply(p,c.filter(function(nt){var U=nt.finded;return!U}).map(function(nt){var U=nt.manager;return U}));var v=[],h=!a||n!==""&&l.updateGroup,g=l.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(o=this.props.persistData)===null||o===void 0?void 0:o.rotation;m!=null&&(g=m)}function y(nt,U,J){var Q=nt.map(function(mt){if(Lt(mt)){var xt=y(mt,U),_t=[xt.pos1,xt.pos2,xt.pos3,xt.pos4];return v.push(xt),{poses:_t,rotation:xt.rotation}}else return{poses:ie(mt.state),rotation:mt.getRotation()}}),ct=Q.map(function(mt){var xt=mt.rotation;return xt}),dt=0,Bt=ct[0],St=ct.every(function(mt){return Math.abs(Bt-mt)<.1});h?dt=St?Bt:g:dt=!J&&St?Bt:U;var yt=Q.map(function(mt){var xt=mt.poses;return xt}),Mt=p0(yt,dt);return Mt}var b=y(p,this.rotation,!0);h&&(this.rotation=b.rotation,this.transformOrigin=l.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=d,this.renderGroupRects=v;var x=this.transformOrigin,_=this.rotation,S=this.scale,C=b.width,M=b.height,k=b.minX,E=b.minY,R=zh([[0,0],[C,0],[0,M],[C,M]],Ah(x,C,M),this.rotation/180*Math.PI),D=Ve(R.result),P=D.minX,I=D.minY,B=" rotate(".concat(_,"deg)")+" scale(".concat(S[0]>=0?1:-1,", ").concat(S[1]>=0?1:-1,")"),V="translate(".concat(-P,"px, ").concat(-I,"px)").concat(B);this.controlBox.getElement().style.transform="translate3d(".concat(k,"px, ").concat(E,"px, ").concat(this.props.translateZ||0,")"),f.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(x,";")+"width:".concat(C,"px;height:").concat(M,"px;")+"transform: ".concat(V),s.width=C,s.height=M;var K=this.getContainer(),X=mi(this.controlBox.getElement(),f,this.controlBox.getElement(),this.getContainer(),this._rootContainer||K,[]),H=[X.left,X.top],z=ie(X),j=z[0],G=z[1],$=z[2],N=z[3],F=Ve([j,G,$,N]),W=[F.minX,F.minY],Z=S[0]*S[1]>0?1:-1;X.pos1=at(j,W),X.pos2=at(G,W),X.pos3=at($,W),X.pos4=at(N,W),X.left=k-X.left+W[0],X.top=E-X.top+W[1],X.origin=at(bt(H,X.origin),W),X.beforeOrigin=at(bt(H,X.beforeOrigin),W),X.originalBeforeOrigin=bt(H,X.originalBeforeOrigin),X.transformOrigin=at(bt(H,X.transformOrigin),W),f.style.transform="translate(".concat(-P-W[0],"px, ").concat(-I-W[1],"px)")+B,this.updateState(T(T({},X),{posDelta:W,direction:Z,beforeDirection:Z}),i)},r.getRect=function(){return T(T({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},r.triggerEvent=function(n,a,i){if(i||n.indexOf("Group")>-1)return e.prototype.triggerEvent.call(this,n,a);this._emitter.trigger(n,a)},r.updateAbles=function(){e.prototype.updateAbles.call(this,st(st([],this.props.ables,!0),[so],!1),"Group")},r._updateTargets=function(){e.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},r._updateEvents=function(){var n=this.state,a=this.props,i=this._prevTarget,o=a.dragTarget||this.areaElement;i!==o&&(gr(this,"targetGesto"),gr(this,"controlGesto"),n.target=null),n.target||(n.target=this.areaElement,this.controlBox.getElement().style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=_u(this,o,"Group")),this.controlGesto||(this.controlGesto=oo(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var s=!ui(n.container,a.container);s&&(n.container=a.container);var l=a.targets,u=this.differ.update(l),f=u.added,c=u.changed,d=u.removed,p=f.length||d.length;(s||p||this.transformOrigin!==(a.defaultGroupOrigin||"50% 50%")||c.length||l.length&&!Zl(this._targetGroups,a.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!p},r._updateObserver=function(){},t.defaultProps=T(T({},Cr.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}(Cr),h0=function(e){dn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.moveables=[],n}var r=t.prototype;return r.render=function(){var n=this,a,i=this.props,o=i.cspNonce,s=i.cssStyled,l=i.persistData,u=i.targets||[],f=u.length,c=this.isUnmounted||!f,d=(a=l==null?void 0:l.children)!==null&&a!==void 0?a:[];return c&&!f&&d.length?u=d.map(function(){return null}):c||(d=[]),pe(s,{cspNonce:o,ref:Ce(this,"controlBox"),className:ot("control-box")},u.map(function(p,v){return pe(Cr,T({key:"moveable"+v,ref:Us(n,"moveables",v)},n.props,{target:p,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:d[v]}))}))},r.componentDidUpdate=function(){},r.getTargets=function(){return this.props.targets},r.updateRect=function(n,a,i){i===void 0&&(i=!0),this.moveables.forEach(function(o){o.updateRect(n,a,i)})},r.getRect=function(){return T(T({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},r.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},r.dragStart=function(){return this},r.hitTest=function(){return 0},r.isInside=function(){return!1},r.isDragging=function(){return!1},r.updateRenderPoses=function(){},r.checkUpdate=function(){},r.triggerEvent=function(){},r.updateAbles=function(){},r._updateEvents=function(){},r._updateObserver=function(){},t}(Cr);function wu(e,t){var r=[];return e.forEach(function(n){if(n){if(ue(n)){t[n]&&r.push.apply(r,t[n]);return}Lt(n)?r.push.apply(r,wu(n,t)):r.push(n)}}),r}function Eu(e,t){var r=[];return e.forEach(function(n){if(n){if(ue(n)){t[n]&&r.push.apply(r,t[n]);return}Lt(n)?r.push(Eu(n,t)):r.push(n)}}),r}function ku(e,t){return e.length!==t.length||e.some(function(r,n){var a=t[n];return!r&&!a?!1:r!=a?Lt(r)&&Lt(a)?ku(r,a):!0:!1})}var g0=function(e){dn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new ml,n._elementTargets=[],n._onChangeTargets=null,n}var r=t.prototype;return t.makeStyled=function(){var n={},a=this.getTotalAbles();a.forEach(function(o){var s=o.css;s&&s.forEach(function(l){n[l]=!0})});var i=Mr(n).join(`
`);this.defaultStyled=Sl("div",_p(Vi,eh+i))},t.getTotalAbles=function(){return st([hu,so,Su,vu],this.defaultAbles,!0)},r.render=function(){var n,a=this.constructor;a.defaultStyled||a.makeStyled();var i=this.props,o=i.ables,s=i.props,l=qv(i,["ables","props"]),u=this._updateRefs(!0),f=wu(u,this.selectorMap),c=f.length>1,d=a.getTotalAbles(),p=st(st([],d,!0),o||[],!0),v=T(T(T({},l),s||{}),{ables:p,cssStyled:a.defaultStyled,customStyledMap:a.customStyledMap});this._elementTargets=f;var h=null,g=this.moveable,m=l.persistData;if(m!=null&&m.children&&(c=!0),c){if(l.individualGroupable)return pe(h0,T({key:"individual-group",ref:Ce(this,"moveable")},v,{target:null,targets:f}));var y=Eu(u,this.selectorMap);if(g&&!g.props.groupable&&!g.props.individualGroupable){var b=g.props.target;b&&f.indexOf(b)>-1&&(h=T({},g.state))}return pe(v0,T({key:"group",ref:Ce(this,"moveable")},v,(n=l.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:f,targetGroups:y,firstRenderState:h}))}else{var x=f[0];if(g&&(g.props.groupable||g.props.individualGroupable)){var _=g.moveables||[],S=Re(_,function(C){return C.props.target===x});S&&(h=T({},S.state))}return pe(Cr,T({key:"single",ref:Ce(this,"moveable")},v,{target:x,firstRenderState:h}))}},r.componentDidMount=function(){this._checkChangeTargets(),this._updateRefs()},r.componentDidUpdate=function(){this._checkChangeTargets()},r.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},r.getTargets=function(){var n,a;return(a=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&a!==void 0?a:[]},r.updateSelectors=function(){this.selectorMap={},this._updateRefs()},r.waitToChangeTarget=function(){var n=this,a;return this._onChangeTargets=function(){n._onChangeTargets=null,a()},new Promise(function(i){a=i})},r.waitToChangeTargets=function(){return this.waitToChangeTarget()},r.getManager=function(){return this.moveable},r._updateRefs=function(n){var a=this.refTargets,i=Zi(this.props.target||this.props.targets),o=typeof document<"u",s=ku(a,i),l=this.selectorMap,u={};return this.refTargets.forEach(function f(c){if(ue(c)){var d=l[c];d?u[c]=l[c]:o&&(s=!0,u[c]=[].slice.call(document.querySelectorAll(c)))}else Lt(c)&&c.forEach(f)}),this.refTargets=i,this.selectorMap=u,!n&&s&&this.forceUpdate(),i},r._checkChangeTargets=function(){var n,a,i,o=this._differ.update(this._elementTargets),s=o.added,l=o.removed,u=s.length||l.length;u&&((a=(n=this.props).onChangeTargets)===null||a===void 0||a.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this)),this._updateRefs()},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,Kv([Sp(kl)],t.prototype,"moveable",void 0),t}(Ai),m0=function(e){dn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.defaultAbles=lo,t}(g0),b0=m0;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bi=function(e,t){return bi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a])},bi(e,t)};function uo(e,t){bi(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Zr=function(){return Zr=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Zr.apply(this,arguments)};function y0(e,t,r,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}var x0=function(e){uo(t,e);function t(n){var a=e.call(this,n)||this;return a.state={},a.state=a.props,a}var r=t.prototype;return r.render=function(){return av(pe(b0,Zr({ref:Ce(this,"moveable")},this.state)),this.state.parentElement)},t}(Bi),qn=d0,Du=kl,Mu=f0,_0=function(e){uo(t,e);function t(n,a){a===void 0&&(a={});var i=e.call(this)||this;i.tempElement=document.createElement("div");var o=Zr({},a),s={};Mu.forEach(function(u){s[Fp("on ".concat(u))]=function(f){return i.trigger(u,f)}}),Xo(pe(x0,Zr({ref:Ce(i,"innerMoveable"),parentElement:n},o,s)),i.tempElement);var l=o.target;return Lt(l)&&l.length>1&&i.updateRect(),i}var r=t.prototype;return r.setState=function(n,a){this.innerMoveable.setState(n,a)},r.forceUpdate=function(n){this.innerMoveable.forceUpdate(n)},r.dragStart=function(n){var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(n)},r.destroy=function(){Xo(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},r.getMoveable=function(){return this.innerMoveable.moveable},t=y0([$o(Du,function(n,a){n[a]||(n[a]=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=this.getMoveable();if(!(!s||!s[a]))return s[a].apply(s,i)})}),$o(qn,function(n,a){Object.defineProperty(n,a,{get:function(){return this.getMoveable().props[a]},set:function(i){var o;this.setState((o={},o[a]=i,o))},enumerable:!0,configurable:!0})})],t),t}(aa),S0=function(e){uo(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(_0),Vr=function(){return Vr=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Vr.apply(this,arguments)},Tu={};Du.forEach(function(e){Tu[e]=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(t=this.$_moveable)[e].apply(t,r)}});var Ru={};qn.forEach(function(e){Ru[e]=function(t){this.$_moveable[e]=t}});var co=lt({name:"moveable",methods:Tu,props:qn,watch:Ru,mounted:function(){var e=this,t={},r=this.$props;qn.forEach(function(o){var s=r[o];sn(s)||(t[o]=r[o])});var n=this.$refs,a=n.moveableElement,i=new S0(a,Vr(Vr({},t),{portalContainer:a}));Mu.forEach(function(o){i.on(o,function(s){e.$emit(o,Vr({},s))})}),this.$_moveable=i},beforeUnmount:function(){this.$_moveable.destroy()}});const C0={ref:"moveableElement"};function w0(e,t,r,n,a,i){return L(),Y("div",C0,null,512)}co.render=w0;co.__file="src/Moveable.vue";const E0=["data-eleId","data-lineIndex","data-itemIndex","onClick","onMousedown"],k0=lt({__name:"PlayerMoveable",props:{canvasSize:{type:Object,default(){return{width:0,height:0}}}},setup(e){const t=de(),r=Vt(),n=it(),a=it(),i=it(),o=tt(()=>{if(t.playerHeight===0&&t.playerWidth===0)return[];const d=[];return r.trackList.forEach(({list:p,type:v},h)=>{if(v==="audio")return;const g=p.findIndex((y,b)=>!!(t.playStartFrame>=y.start&&t.playStartFrame<=y.end&&y.draw)),m=p[g];m&&d.unshift({lineIndex:h,itemIndex:g,id:m.id,scale:m.scale/100,x:m.centerX,y:m.centerY,w:m.width,h:m.height,left:t.playerWidth/2-m.width/2,top:t.playerHeight/2-m.height/2})}),a.value&&a.value.updateRect(),d}),s=sr({target:i,className:"cc-move",container:n.value,...Rc});function l(d){console.log("🚀 ~ selectItem ~ Element Id:",d),t.isPause=!0,r.selectTrackById(d)}function u(d){let{target:p,transform:v,translate:h}=d;const{lineindex:g,itemindex:m}=p.dataset,[y,b]=h;r.trackList[g].list[m].centerX=y,r.trackList[g].list[m].centerY=b,p.style.transform=v}function f(d){let{target:p,scale:v,transform:h}=d;const{lineindex:g,itemindex:m}=p.dataset,y=Math.max(Math.round(v[0]*100),1);r.trackList[g].list[m].scale=y,p.style.transform=h}function c(d,p){d.stopPropagation(),t.isPause=!0,r.selectTrackById(p),i.value=d.currentTarget,vr(()=>{a.value.dragStart(d)})}return Tt([r.selectTrackItem,o],()=>{if(n.value&&r.selectTrackItem.line!==-1&&r.selectTrackItem.index!==-1){const d=r.trackList[r.selectTrackItem.line].list[r.selectTrackItem.index];d&&o.value.find(p=>p.id===d.id)?i.value=n.value.querySelector(`.move-target[data-eleid='${d.id}']`):i.value=null}else i.value=null},{immediate:!0,flush:"post"}),(d,p)=>(L(),Y("div",{ref_key:"moveContainer",ref:n,class:"absolute left-0 right-0 top-0 bottom-0 m-auto"},[(L(!0),Y(le,null,_e(o.value,(v,h)=>(L(),Y("div",{key:v.id,"data-eleId":v.id,"data-lineIndex":v.lineIndex,"data-itemIndex":v.itemIndex,style:gt({zIndex:h,top:`${v.top}px`,left:`${v.left}px`,width:`${v.w}px`,height:`${v.h}px`,transform:`translate(${v.x}px, ${v.y}px) scale(${v.scale})`}),class:"move-target absolute",onClick:Fe(g=>l(v.id),["stop"]),onMousedown:g=>c(g,v.id)},null,44,E0))),128)),O(w(co),yr({ref_key:"moveable",ref:a},s,{onDrag:u,onScale:f}),null,16)],512))}}),D0={class:"flex items-center justify-center h-8 my-2"},M0={class:"m-auto flex items-center gap-4"},T0={class:"text-xs text-purple inline-block"},R0={class:"text-xs"},P0=lt({__name:"PlayerControl",setup(e){const t=de(),r=Vt(),n=tt(()=>ko(t.playStartFrame)),a=tt(()=>ko(r.frameCount)),i=tt(()=>[{title:"回退1s [<-]",disable:r.frameCount===0,icon:"BackwardIcon",handler:()=>{r.frameCount!==0&&t.backward()}},{title:"播放/暂停 [Space]",disable:r.frameCount===0,icon:t.isPause?"PauseIcon":"PlayIcon",handler:()=>{r.frameCount!==0&&(t.isPause=!t.isPause)}},{title:"快进1s [->]",disable:r.frameCount===0,icon:"ForwardIcon",handler:()=>{r.frameCount!==0&&t.forward()}}]);return(o,s)=>{const l=Wt,u=Si;return L(),Y("div",D0,[A("div",M0,[A("span",T0,pt(w(n)),1),(L(!0),Y(le,null,_e(w(i),(f,c)=>(L(),Ct(u,{key:c,effect:"light",content:f.title},{default:q(()=>[O(l,{size:18,class:rt(["cursor-pointer box-content",[f.disable?"cursor-not-allowed":"cursor-pointer"]]),onClick:f.handler},{default:q(()=>[(L(),Ct(wr(f.icon)))]),_:2},1032,["class","onClick"])]),_:2},1032,["content"]))),128)),A("span",R0,pt(w(a)),1)])])}}});var fe,Pu,Iu,Ou,Bu,yi;class I0{constructor(t){xo(this,fe);this.playerStore=de(),this.trackState=Vt(),this.canvasSize=sr({width:0,height:0}),this.playerTimer=0,this.playerContext=null,this.audioPlayAt=0,this.audioContext=new AudioContext,this.captureAudioDest=this.audioContext.createMediaStreamDestination(),this.playingAudioCache=new Set,this.player=t.player,this.playerContext=this.player.value.getContext("bitmaprenderer"),Tt([()=>this.trackState.trackList,()=>this.canvasSize,()=>this.playerStore.playStartFrame],()=>Ue(this,fe,Pu).call(this),{deep:!0}),Tt(()=>this.playerStore.isPause,()=>{this.playerStore.isPause?Ue(this,fe,yi).call(this):Ue(this,fe,Bu).call(this)})}}fe=new WeakSet,Pu=async function(){if(this.playerStore.ingLoadingCount!==0)return;const t=[],r=[];this.playerStore.playingTracks.forEach(async n=>{n instanceof gc?r.push(n):t.unshift(n)}),t.push(...r),Ue(this,fe,Iu).call(this,t),this.playerStore.isPause||Ue(this,fe,Ou).call(this,r)},Iu=async function(t){const r=new OffscreenCanvas(this.playerStore.playerWidth,this.playerStore.playerHeight),n=r.getContext("2d");for(const a of t)await a.draw(n,this.playerStore.playerWidth,this.playerStore.playerHeight,this.playerStore.playStartFrame);this.playerContext&&this.playerContext.transferFromImageBitmap(r.transferToImageBitmap())},Ou=async function(t){var i;const r=[];for(const o of t){const s=await o.render(this.audioContext,this.playerStore.playStartFrame);s&&r.push(s)}const n=Math.max(this.audioContext.currentTime,this.audioPlayAt);let a=0;for(const o of r)o.start(n),o.connect(this.audioContext.destination),o.connect(this.captureAudioDest),this.playingAudioCache.add(o),o.onended=()=>{o.disconnect(),this.playingAudioCache.delete(o)},a=Math.max(a,((i=o.buffer)==null?void 0:i.duration)??0);this.audioPlayAt=n+a},Bu=function(){this.playerStore.playStartFrame>=this.trackState.frameCount&&(this.playerStore.playStartFrame=0),this.audioContext.resume(),this.audioPlayAt=0,this.playerTimer=hc(()=>{this.playerStore.playStartFrame++,this.playerStore.playStartFrame>=this.trackState.frameCount&&Ue(this,fe,yi).call(this)},1e3/Kt)},yi=function(){var t;(t=this.playerTimer)==null||t.cancel(),this.audioContext.suspend();for(const r of this.playingAudioCache)r.stop(),r.disconnect();this.playingAudioCache.clear()};const O0={class:"h-full flex flex-col dark:bg-night bg-gray-100"},B0={class:"flex-1 relative overflow-hidden"},A0={key:0,class:"absolute left-0 right-0 top-0 bottom-0 z-20 flex justify-center items-center"},z0=lt({__name:"Player",props:{containerSize:{type:Object,default(){return{width:0,height:0}}}},setup(e){const t=e,r=de(),{playerWidth:n,playerHeight:a}=mc(r),i=Vt(),o=it(),s=it(),l=tt(()=>{let{width:u,height:f}=t.containerSize;return f-=70,u-=10,Math.min(u/n.value,f/a.value)});return je(()=>{s.value=new I0({player:o})}),(u,f)=>{const c=Wt;return L(),Y("div",O0,[A("div",B0,[ee(A("canvas",{ref_key:"playerCanvas",ref:o,class:"absolute left-0 right-0 top-0 bottom-0 m-auto bg-gray-900",id:"player",style:gt({zoom:w(l),width:`${w(n)}px`,height:`${w(a)}px`})},null,4),[[Ge,w(i).frameCount>0]]),w(i).frameCount===0?(L(),Y("div",A0,[O(c,{size:144,class:"box-content opacity-50",style:{color:"#FDE68A"}},{default:q(()=>[O(w(bc))]),_:1})])):ht("",!0),O(k0,{style:gt({zoom:w(l),width:`${w(n)}px`,height:`${w(a)}px`})},null,8,["style"])]),O(P0)])}}}),L0=lt({__name:"CanvasPlayer",setup(e){const t=Er(),r=de(),n=Vt(),a=it(),i=sr({width:0,height:0});function o(l){l.stopPropagation(),n.selectTrackItem.line=-1,n.selectTrackItem.index=-1}function s(){const{width:l,height:u}=a.value.getBoundingClientRect();i.width=l,i.height=u}return je(()=>{s()}),window.addEventListener("resize",s,!1),Tt(()=>[t.trackHeight,t.attrWidth],()=>{s()}),Tt([()=>r.playerHeight,()=>r.playerWidth],()=>{s()}),(l,u)=>(L(),Y("div",{ref_key:"playerContent",ref:a,class:"flex-1 overflow-hidden relative",onClick:o},[O(z0,{"container-size":i},null,8,["container-size"])],512))}}),$0={class:"px-4 w-full h-10 border-b dark:border-night-light"},F0={class:"float-left h-9 w-32 flex flex-row gap-3 flex-nowrap items-center justify-around"},G0=["onClick"],N0={class:"float-right flex w-52 h-9 justify-center items-center gap-4"},V0=lt({__name:"TrackControl",props:{modelValue:{type:Number,default:30}},emits:{"update:modelValue":e=>e!==null},setup(e,{emit:t}){const r=e,n=t,a=tt({get(){return r.modelValue},set(f){n("update:modelValue",f)}}),i=Vt();de();const o=it({fontSize:"1.75rem",padding:"0.25rem",boxSizing:"content-box"}),s=sr({showTooltip:!1,size:"small",step:10,max:100,min:0});function l(f){let c=a.value+f;c>s.max&&(c=s.max),c<s.min&&(c=s.min),a.value=c}const u=tt(()=>[{title:"撤销[Ctrl+Z]",icon:"UndoIcon",handler:i._undo},{title:"恢复[Ctrl+Shift+Z]",icon:"RedoIcon",handler:i._redo},{title:"左链接[L]",disable:i.selectTrackItem.index===-1,icon:"LeftLinkIcon",handler:i.leftLink},{title:"分割[S]",disable:i.selectTrackItem.index===-1,icon:"SplitIcon",handler:i.splitTrack},{title:"删除[Backspace]",disable:i.selectTrackItem.index===-1,icon:"DeleteIcon",handler:i.removeTrack},{title:"文字[T]",disable:!1,icon:"AddTextIcon",handler:i.addText}]);return(f,c)=>{const d=Wt,p=Si,v=yc,h=nn,g=xc;return L(),Y("div",$0,[A("div",F0,[(L(!0),Y(le,null,_e(u.value,m=>(L(),Y("div",{key:m.title,onClick:m.handler},[O(p,{effect:"light",content:m.title},{default:q(()=>[O(d,{size:"15",class:rt(["focus:outline-0",m.disable?"cursor-not-allowed text-gray-400":"cursor-pointer"])},{default:q(()=>[(L(),Ct(wr(m.icon)))]),_:2},1032,["class"])]),_:2},1032,["content"])],8,G0))),128))]),A("div",N0,[O(v,{style:gt(o.value),class:"cursor-pointer",onClick:c[0]||(c[0]=m=>l(-10))},null,8,["style"]),O(h,yr({modelValue:a.value,"onUpdate:modelValue":c[1]||(c[1]=m=>a.value=m)},s),null,16,["modelValue"]),O(g,{style:gt(o.value),class:"cursor-pointer",onClick:c[2]||(c[2]=m=>l(10))},null,8,["style"])])])}}}),fo=e=>new Map([[100,100],[90,50],[80,20],[70,10],[60,80],[50,40],[40,20],[30,10],[20,40],[10,25],[0,10]]).get(e)||100,Jt=(e,t)=>{let n=fo(e)*t;return e<70&&(n=n/Kt),e<30&&(n=n/6),n},W0=(e,t)=>e>60?t:10,H0=(e,t)=>{let r=e;return t<30?r*=60:t<70&&(r*=10),_c(r*1e3).str},X0=(e,t,r)=>{const n=e%t;let a="";return r<70?"":(a=r>80?n===0?"":`${n<10?"0":""}${n}f`:"",a)},On=.5,tr=(e,t,r)=>{const n=fo(t);return t<70&&(e*=r),t<30&&(e*=6),Math.round(e/n)},Y0=(e,t,r)=>{const{start:n,scale:a,step:i,focusPosition:o}=t,{ratio:s,bgColor:l,width:u,height:f,textColor:c,subTextColor:d,textSize:p,textScale:v,focusColor:h,longColor:g,shortColor:m}=r,y=W0(a,i);e.scale(s,s),e.clearRect(0,0,u,f),e.fillStyle=l,e.fillRect(0,0,u,f);const b=fo(a),x=b*y,_=Math.floor(n/b)*b,S=Math.floor(n/x)*x,C=_-n,M=S-n,k=n+Math.ceil(u);if(o){let E=o.start,R=o.end-o.start;a<70&&(E=E/i,R=R/i),a<30&&(E=E/6,R=R/6);const D=E*b+On-n,P=R*b-On;P>b&&(e.fillStyle=h,e.fillRect(D,0,P,f*3/8))}e.beginPath(),e.fillStyle=c,e.strokeStyle=g;for(let E=S,R=0;E<k;E+=x,R++){const D=M+R*x+On;e.moveTo(D,0),e.save(),e.translate(D,f*.4),e.scale(v/s,v/s);const P=H0(E/x,a),I=P.length*5*v*s,B=p/s*v/s/2;e.fillText(P,I,B),e.restore(),e.lineTo(D,f*10/16/s)}e.stroke(),e.closePath(),e.beginPath(),e.fillStyle=d,e.strokeStyle=m;for(let E=_,R=0;E<k;E+=b,R++){const D=C+R*b+On;e.moveTo(D,0);const P=X0(E/b,y,a);if(P){e.save(),e.translate(D,f*.4),e.scale(v/s,v/s);const I=P.length*5*v*s,B=p/s*v/s/2;e.fillText(P,I,B),e.restore()}E%x!==0&&e.lineTo(D,f/3/s)}e.stroke(),e.closePath(),e.setTransform(1,0,0,1,0,0)},j0=lt({__name:"TimeLine",props:{start:{type:Number,default:0},step:{type:Number,default:Kt},scale:{type:Number,default:0},focusPosition:{type:Object,default(){return{start:0,end:0}}}},emits:{selectFrame(e){return e!==null}},setup(e,{emit:t}){const r=e,n=t,a=it(),i=it();let o={};const{isDark:s}=Sc(Er()),l=tt(()=>({bgColor:s.value?"#374151":"#E5E7EB",ratio:window.devicePixelRatio||1,textSize:12,textScale:.83,lineWidth:1,textBaseline:"middle",textAlign:"center",longColor:s.value?"#E5E7EB":"#374151",shortColor:s.value?"#9CA3AF":"#6B7280",textColor:s.value?"#E5E7EB":"#374151",subTextColor:s.value?"#9CA3AF":"#6B7280",focusColor:s.value?"#6D28D9":"#C4B5FD"})),u=sr({width:0,height:0}),f=tt(()=>({width:`${u.width/l.value.ratio}px`,height:`${u.height/l.value.ratio}px`}));function c(){Y0(o,{...r},{...u,...l.value})}function d(){o=i.value.getContext("2d"),o.font=`${l.value.textSize*l.value.ratio}px -apple-system, ".SFNSText-Regular", "SF UI Text", "PingFang SC", "Hiragino Sans GB", "Helvetica Neue", "WenQuanYi Zen Hei", "Microsoft YaHei", Arial, sans-serif`,o.lineWidth=l.value.lineWidth,o.textBaseline=l.value.textBaseline,o.textAlign=l.value.textAlign}function p(){const{width:h,height:g}=a.value.getBoundingClientRect();u.width=h*l.value.ratio,u.height=g*l.value.ratio,vr(()=>{d(),c()})}function v(h){const g=h.offsetX,m=tr(r.start+g,r.scale,r.step);n("selectFrame",m)}return je(()=>{p()}),Tt(l,c),Tt(r,c),window.addEventListener("resize",p,!1),(h,g)=>(L(),Y("div",{ref_key:"canvasContainer",ref:a,class:"sticky top-0 left-0 right-0 h-5 text-center leading-5 text-sm z-20"},[A("canvas",yr({style:f.value},u,{ref_key:"timeLine",ref:i,onClick:v}),null,16)],512))}}),U0=lt({__name:"TrackHandler",props:{isActive:{type:Boolean,default:!1},lineIndex:{type:Number,default:0},itemIndex:{type:Number,default:0}},setup(e){const t=e,r=Vt(),n=de(),a=tt(()=>r.trackList[t.lineIndex].list[t.itemIndex]),i=it();let o=0,s={isVA:!1,start:0,end:0,offsetR:0,offsetL:0,minStart:0,maxStart:0,minEnd:0,maxEnd:0},l=!1,u=[];function f(g,m=10){const y=[];u.forEach(x=>{Math.abs(x.left-g)<=m&&y.push({position:x.left,frame:x.start}),Math.abs(x.right-g)<=m&&y.push({position:x.right,frame:x.end})});const b=Jt(r.trackScale,n.playStartFrame);return Math.abs(b-g)<=m&&y.push({position:b,frame:n.playStartFrame}),y}function c(g,m){return m.length===0?void 0:m.reduce((b,x)=>Math.abs(x.position-g)<Math.abs(b.position-g)?x:b,{position:Number.MAX_SAFE_INTEGER,frame:0})}const d=tt(()=>Jt(r.trackScale,1));function p(g,m){const y=t.itemIndex>0?g[t.itemIndex-1]:null,b=t.itemIndex<g.length?g[t.itemIndex+1]:null,x=["video","audio"].includes(m.type),_={isVA:x,start:m.start,end:m.end,offsetR:m.offsetR,offsetL:m.offsetL,minStart:y?y.end:0,maxStart:m.end-1,minEnd:m.start+1,maxEnd:b?b.start:Kt*60*60};if(x){const S=m.frameCount-_.offsetL,C=m.frameCount-_.offsetR;_.maxEnd=b?Math.min(b.start,_.start+S):Math.min(S+_.start,Kt*60*60),_.minStart=y?Math.max(y.end,_.end-C):Math.max(_.end-C,0)}Object.assign(s,{..._})}function v(g,m){const{isVA:y,start:b,end:x,offsetR:_,offsetL:S,minStart:C,maxStart:M,minEnd:k,maxEnd:E}=s,R=x-b,D=S+R,P=_+R;if(m==="left"){let I=b+g;I>M&&(I=M),I<C&&(I=C);let B=I-b;y?(x-I>D&&(I=x-D,B=I-b),r.trackList[t.lineIndex].list[t.itemIndex].offsetL=Math.max(S+B,0)):r.trackList[t.lineIndex].list[t.itemIndex].frameCount=x-I,r.trackList[t.lineIndex].list[t.itemIndex].start=I}else{let I=x+g;if(I>E&&(I=E),I<k&&(I=k),y){I-b>P&&(I=b+P);const B=I-x;r.trackList[t.lineIndex].list[t.itemIndex].offsetR=Math.max(_-B,0)}else r.trackList[t.lineIndex].list[t.itemIndex].frameCount=I-b;r.trackList[t.lineIndex].list[t.itemIndex].end=I}}function h(g,m){var C;g.preventDefault(),g.stopPropagation(),u=[];for(let M=0;M<r.trackList.length;M++)for(let k=0;k<r.trackList[M].list.length;k++)if(M!==t.lineIndex||k!==t.itemIndex){const E=r.trackList[M].list[k];u.push({start:E.start,end:E.end,left:Jt(r.trackScale,E.start),right:Jt(r.trackScale,E.end)})}n.isPause=!0;const{pageX:y}=g;o=y,l=!0,p(((C=r.trackList[t.lineIndex])==null?void 0:C.list)||[],a.value);const b=a.value.start,x=a.value.end,_=i.value.closest(".trackItem"),S=m==="left"?_.offsetLeft:_.offsetLeft+_.offsetWidth;document.onmousemove=M=>{if(!l)return;const{pageX:k}=M,E=o-k,R=f(S-E);r.dragData.fixLines=[R];const D=c(S-E,R),P=D!=null&&D.frame?m==="left"?D.frame-b:D.frame-x:-Math.round(E/d.value);v(P,m)},document.onmouseup=()=>{l=!1,document.onmouseup=null,document.onmousemove=null}}return(g,m)=>ee((L(),Y("div",{class:rt(["absolute left-0 right-0 top-0 bottom-0 border z-20",{"dark:border-gray-100 border-gray-600":e.isActive}]),ref_key:"el",ref:i},[A("div",{class:"cursor-c-resize flex flex-col justify-center absolute -top-px -bottom-px -left-2 text-center rounded-tl rounded-bl w-2 dark:bg-gray-100 bg-gray-500 dark:text-gray-800 text-gray-100",ref:"handlerLeft",onMousedown:m[0]||(m[0]=y=>h(y,"left"))},m[2]||(m[2]=[A("span",null,"|",-1)]),544),A("div",{class:"cursor-c-resize flex flex-col justify-center absolute -top-px -bottom-px -right-2 text-center rounded-tr rounded-br w-2 dark:bg-gray-100 bg-gray-500 dark:text-gray-800 text-gray-100",ref:"handlerRight",onMousedown:m[1]||(m[1]=y=>h(y,"right"))},m[3]||(m[3]=[A("span",null,"|",-1)]),544)],2)),[[Ge,e.isActive]])}}),q0={},K0={class:"loading absolute top-0 left-0 right-0 bottom-0 bg-gray-600 flex flex-row justify-start items-center"};function Z0(e,t){return L(),Y("div",K0,t[0]||(t[0]=[A("span",null,null,-1),A("span",null,null,-1),A("span",null,null,-1),A("span",null,null,-1),A("span",null,null,-1)]))}const po=rn(q0,[["render",Z0],["__scopeId","data-v-5979cec8"]]),J0={class:"flex flex-col rounded overflow-hidden h-full"},Q0={class:"flex items-center text-xs pl-2 overflow-hidden h-5 leading-5 bg-[#4b4f54] text-white"},tm={key:0,class:"mr-4 shrink-0"},em={class:"shrink-0"},rm=["src"],nm={key:0,class:"pl-2 overflow-hidden h-4 flex items-center bg-gray-700 relative text-xs overflow-ellipsis whitespace-nowrap text-white"},am=lt({__name:"VideoItem",props:{trackItem:{type:Object}},setup(e){const t=e,r=de(),n=Vt(),a=it(),i=it(!0),o=it([]),s=tt(()=>t.trackItem.resource);async function l(){if(!s.value){console.error("Video resource not found");return}try{r.ingLoadingCount++,i.value=!0;const u=Jt(n.trackScale,t.trackItem.frameCount),f=Math.ceil(u/50),c=Math.ceil(s.value.duration*1e6/f),d=await Cc.thumbnails(t.trackItem,n.trackScale,c);o.value=d.map(({img:p})=>URL.createObjectURL(p))}finally{i.value=!1,r.ingLoadingCount--}}return Tt(()=>[t.trackItem,s.value],l,{immediate:!0,flush:"post"}),$s(()=>{o.value.forEach(u=>{URL.revokeObjectURL(u)})}),(u,f)=>{var p;const c=Ei,d=Wt;return L(),Y("div",J0,[A("div",Q0,[O(d,{size:"18"},{default:q(()=>[O(c,{class:"inline-block mr-2 shrink-0"})]),_:1}),w(s)?(L(),Y("span",tm," ["+pt(w(s).duration.toFixed(1))+"s] ",1)):ht("",!0),A("span",em,pt(`${e.trackItem.name}.${e.trackItem.format}`),1)]),A("div",{ref_key:"container",ref:a,class:"bg-gray-400 bg-opacity-70 flex-1 relative whitespace-nowrap overflow-hidden",style:gt({left:`-${w(Jt)(w(n).trackScale,e.trackItem.offsetL)}px`})},[(L(!0),Y(le,null,_e(w(o),(v,h)=>(L(),Y("img",{key:h,src:v,alt:"",class:"image-item",draggable:"false"},null,8,rm))),128))],4),(p=w(s))!=null&&p.prompt?(L(),Y("div",nm,[A("span",null,pt(w(s).meta.prompt),1)])):ht("",!0),ee(O(po,{class:"pl-12 bg-opacity-70"},null,512),[[Ge,w(i)||e.trackItem.loading]])])}}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Nt(e,t,r,n){return new(r||(r=Promise))(function(a,i){function o(u){try{l(n.next(u))}catch(f){i(f)}}function s(u){try{l(n.throw(u))}catch(f){i(f)}}function l(u){var f;u.done?a(u.value):(f=u.value,f instanceof r?f:new r(function(c){c(f)})).then(o,s)}l((n=n.apply(e,[])).next())})}class gn{constructor(){this.listeners={}}on(t,r,n){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(r),n==null?void 0:n.once){const a=()=>{this.un(t,a),this.un(t,r)};return this.on(t,a),a}return()=>this.un(t,r)}un(t,r){var n;(n=this.listeners[t])===null||n===void 0||n.delete(r)}once(t,r){return this.on(t,r,{once:!0})}unAll(){this.listeners={}}emit(t,...r){this.listeners[t]&&this.listeners[t].forEach(n=>n(...r))}}const ks={decode:function(e,t){return Nt(this,void 0,void 0,function*(){const r=new AudioContext({sampleRate:t});return r.decodeAudioData(e).finally(()=>r.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(r){const n=r[0];if(n.some(a=>a>1||a<-1)){const a=n.length;let i=0;for(let o=0;o<a;o++){const s=Math.abs(n[o]);s>i&&(i=s)}for(const o of r)for(let s=0;s<a;s++)o[s]/=i}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:r=>e==null?void 0:e[r],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function Au(e,t){const r=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[n,a]of Object.entries(t))if(n==="children")for(const[i,o]of Object.entries(t))typeof o=="string"?r.appendChild(document.createTextNode(o)):r.appendChild(Au(i,o));else n==="style"?Object.assign(r.style,a):n==="textContent"?r.textContent=a:r.setAttribute(n,a.toString());return r}function Ds(e,t,r){const n=Au(e,t||{});return r==null||r.appendChild(n),n}var im=Object.freeze({__proto__:null,createElement:Ds,default:Ds});const om={fetchBlob:function(e,t,r){return Nt(this,void 0,void 0,function*(){const n=yield fetch(e,r);if(n.status>=400)throw new Error(`Failed to fetch ${e}: ${n.status} (${n.statusText})`);return function(a,i){Nt(this,void 0,void 0,function*(){if(!a.body||!a.headers)return;const o=a.body.getReader(),s=Number(a.headers.get("Content-Length"))||0;let l=0;const u=c=>Nt(this,void 0,void 0,function*(){l+=(c==null?void 0:c.length)||0;const d=Math.round(l/s*100);i(d)}),f=()=>Nt(this,void 0,void 0,function*(){let c;try{c=yield o.read()}catch{return}c.done||(u(c.value),yield f())});f()})}(n.clone(),t),n.blob()})}};class sm extends gn{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,r,n){return this.media.addEventListener(t,r,n),()=>this.media.removeEventListener(t,r,n)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,r){if(this.getSrc()===t)return;this.revokeSrc();const n=r instanceof Blob&&this.canPlayType(r.type)?URL.createObjectURL(r):t;this.media.src=n}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return Nt(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,r){r!=null&&(this.media.preservesPitch=r),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}class va extends gn{constructor(t,r){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.subscriptions=[],this.options=t;const n=this.parentFromOptionsContainer(t.container);this.parent=n;const[a,i]=this.initHtml();n.appendChild(a),this.container=a,this.scrollContainer=i.querySelector(".scroll"),this.wrapper=i.querySelector(".wrapper"),this.canvasWrapper=i.querySelector(".canvases"),this.progressWrapper=i.querySelector(".progress"),this.cursor=i.querySelector(".cursor"),r&&i.appendChild(r),this.initEvents()}parentFromOptionsContainer(t){let r;if(typeof t=="string"?r=document.querySelector(t):t instanceof HTMLElement&&(r=t),!r)throw new Error("Container not found");return r}initEvents(){const t=n=>{const a=this.wrapper.getBoundingClientRect(),i=n.clientX-a.left,o=n.clientX-a.left;return[i/a.width,o/a.height]};this.wrapper.addEventListener("click",n=>{const[a,i]=t(n);this.emit("click",a,i)}),this.wrapper.addEventListener("dblclick",n=>{const[a,i]=t(n);this.emit("dblclick",a,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:a,clientWidth:i}=this.scrollContainer,o=n/a,s=(n+i)/a;this.emit("scroll",o,s)});const r=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{r().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,r,n,a,i=3,o=0,s=100){if(!t)return()=>{};const l=matchMedia("(pointer: coarse)").matches;let u=()=>{};const f=c=>{if(c.button!==o)return;c.preventDefault(),c.stopPropagation();let d=c.clientX,p=c.clientY,v=!1;const h=Date.now(),g=_=>{if(_.preventDefault(),_.stopPropagation(),l&&Date.now()-h<s)return;const S=_.clientX,C=_.clientY,M=S-d,k=C-p;if(v||Math.abs(M)>i||Math.abs(k)>i){const E=t.getBoundingClientRect(),{left:R,top:D}=E;v||(n==null||n(d-R,p-D),v=!0),r(M,k,S-R,C-D),d=S,p=C}},m=_=>{if(v){const S=_.clientX,C=_.clientY,M=t.getBoundingClientRect(),{left:k,top:E}=M;a==null||a(S-k,C-E)}u()},y=_=>{_.relatedTarget&&_.relatedTarget!==document.documentElement||m(_)},b=_=>{v&&(_.stopPropagation(),_.preventDefault())},x=_=>{v&&_.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",m),document.addEventListener("pointerout",y),document.addEventListener("pointercancel",y),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("click",b,{capture:!0}),u=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",m),document.removeEventListener("pointerout",y),document.removeEventListener("pointercancel",y),document.removeEventListener("touchmove",x),setTimeout(()=>{document.removeEventListener("click",b,{capture:!0})},10)}};return t.addEventListener("pointerdown",f),()=>{u(),t.removeEventListener("pointerdown",f)}}(this.wrapper,(t,r,n)=>{this.emit("drag",Math.max(0,Math.min(1,n/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t){return t==null?128:isNaN(Number(t))?t==="auto"&&this.parent.clientHeight||128:Number(t)}initHtml(){const t=document.createElement("div"),r=t.attachShadow({mode:"open"});return r.innerHTML=`
      <style>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,r]}setOptions(t){if(this.options.container!==t.container){const r=this.parentFromOptionsContainer(t.container);r.appendChild(this.container),this.parent=r}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:r}=this.scrollContainer,n=r*t;this.setScroll(n)}destroy(){var t;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect()}createDelay(t=10){let r,n;const a=()=>{r&&clearTimeout(r),n&&n()};return this.timeouts.push(a),()=>new Promise((i,o)=>{a(),n=o,r=setTimeout(()=>{r=void 0,n=void 0,i()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const r=document.createElement("canvas"),n=r.getContext("2d"),a=r.height*(window.devicePixelRatio||1),i=n.createLinearGradient(0,0,0,a),o=1/(t.length-1);return t.forEach((s,l)=>{const u=l*o;i.addColorStop(u,s)}),i}renderBarWaveform(t,r,n,a){const i=t[0],o=t[1]||t[0],s=i.length,{width:l,height:u}=n.canvas,f=u/2,c=window.devicePixelRatio||1,d=r.barWidth?r.barWidth*c:1,p=r.barGap?r.barGap*c:r.barWidth?d/2:0,v=r.barRadius||0,h=l/(d+p)/s,g=v&&"roundRect"in n?"roundRect":"rect";n.beginPath();let m=0,y=0,b=0;for(let x=0;x<=s;x++){const _=Math.round(x*h);if(_>m){const M=Math.round(y*f*a),k=M+Math.round(b*f*a)||1;let E=f-M;r.barAlign==="top"?E=0:r.barAlign==="bottom"&&(E=u-k),n[g](m*(d+p),E,d,k,v),m=_,y=0,b=0}const S=Math.abs(i[x]||0),C=Math.abs(o[x]||0);S>y&&(y=S),C>b&&(b=C)}n.fill(),n.closePath()}renderLineWaveform(t,r,n,a){const i=o=>{const s=t[o]||t[0],l=s.length,{height:u}=n.canvas,f=u/2,c=n.canvas.width/l;n.moveTo(0,f);let d=0,p=0;for(let v=0;v<=l;v++){const h=Math.round(v*c);if(h>d){const m=f+(Math.round(p*f*a)||1)*(o===0?-1:1);n.lineTo(d,m),d=h,p=0}const g=Math.abs(s[v]||0);g>p&&(p=g)}n.lineTo(d,f)};n.beginPath(),i(0),i(1),n.fill(),n.closePath()}renderWaveform(t,r,n){if(n.fillStyle=this.convertColorValues(r.waveColor),r.renderFunction)return void r.renderFunction(t,n);let a=r.barHeight||1;if(r.normalize){const i=Array.from(t[0]).reduce((o,s)=>Math.max(o,Math.abs(s)),0);a=i?1/i:1}r.barWidth||r.barGap||r.barAlign?this.renderBarWaveform(t,r,n,a):this.renderLineWaveform(t,r,n,a)}renderSingleCanvas(t,r,n,a,i,o,s,l){const u=window.devicePixelRatio||1,f=document.createElement("canvas"),c=t[0].length;f.width=Math.round(n*(o-i)/c),f.height=a*u,f.style.width=`${Math.floor(f.width/u)}px`,f.style.height=`${a}px`,f.style.left=`${Math.floor(i*n/u/c)}px`,s.appendChild(f);const d=f.getContext("2d");if(this.renderWaveform(t.map(p=>p.slice(i,o)),r,d),f.width>0&&f.height>0){const p=f.cloneNode(),v=p.getContext("2d");v.drawImage(f,0,0),v.globalCompositeOperation="source-in",v.fillStyle=this.convertColorValues(r.progressColor),v.fillRect(0,0,f.width,f.height),l.appendChild(p)}}renderChannel(t,r,n,a){var{overlay:i}=r,o=function(s,l){var u={};for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&l.indexOf(f)<0&&(u[f]=s[f]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function"){var c=0;for(f=Object.getOwnPropertySymbols(s);c<f.length;c++)l.indexOf(f[c])<0&&Object.prototype.propertyIsEnumerable.call(s,f[c])&&(u[f[c]]=s[f[c]])}return u}(r,["overlay"]);return Nt(this,void 0,void 0,function*(){const s=document.createElement("div"),l=this.getHeight(o.height);s.style.height=`${l}px`,i&&a>0&&(s.style.marginTop=`-${l}px`),this.canvasWrapper.style.minHeight=`${l}px`,this.canvasWrapper.appendChild(s);const u=s.cloneNode();this.progressWrapper.appendChild(u);const f=t[0].length,c=(x,_)=>{this.renderSingleCanvas(t,o,n,l,Math.max(0,x),Math.min(_,f),s,u)};if(!this.isScrollable)return void c(0,f);const{scrollLeft:d,scrollWidth:p,clientWidth:v}=this.scrollContainer,h=f/p;let g=Math.min(va.MAX_CANVAS_WIDTH,v);if(o.barWidth||o.barGap){const x=o.barWidth||.5,_=x+(o.barGap||x/2);g%_!=0&&(g=Math.floor(g/_)*_)}const m=Math.floor(Math.abs(d)*h),y=Math.floor(m+g*h),b=y-m;b<=0||(c(m,y),yield Promise.all([Nt(this,void 0,void 0,function*(){if(m===0)return;const x=this.createDelay();for(let _=m;_>=0;_-=b)yield x(),c(Math.max(0,_-b),_)}),Nt(this,void 0,void 0,function*(){if(y===f)return;const x=this.createDelay();for(let _=y;_<f;_+=b)yield x(),c(_,Math.min(f,_+b))})]))})}render(t){return Nt(this,void 0,void 0,function*(){this.timeouts.forEach(s=>s()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=window.devicePixelRatio||1,n=this.scrollContainer.clientWidth,a=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=a>n;const i=this.options.fillParent&&!this.isScrollable,o=(i?n:a)*r;this.wrapper.style.width=i?"100%":`${a}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render");try{if(this.options.splitChannels)yield Promise.all(Array.from({length:t.numberOfChannels}).map((s,l)=>{var u;const f=Object.assign(Object.assign({},this.options),(u=this.options.splitChannels)===null||u===void 0?void 0:u[l]);return this.renderChannel([t.getChannelData(l)],f,o,l)}));else{const s=[t.getChannelData(0)];t.numberOfChannels>1&&s.push(t.getChannelData(1)),yield this.renderChannel(s,this.options,o,0)}}catch{return}this.emit("rendered")})}reRender(){if(!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:r}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:n}=this.progressWrapper.getBoundingClientRect();let a=n-r;a*=2,a=a<0?Math.floor(a):Math.ceil(a),a/=2,this.scrollContainer.scrollLeft+=a}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,r=!1){const{scrollLeft:n,scrollWidth:a,clientWidth:i}=this.scrollContainer,o=t*a,s=n,l=n+i,u=i/2;if(this.isDragging)o+30>l?this.scrollContainer.scrollLeft+=30:o-30<s&&(this.scrollContainer.scrollLeft-=30);else{(o<s||o>l)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?u:0));const f=o-n-u;r&&this.options.autoCenter&&f>0&&(this.scrollContainer.scrollLeft+=Math.min(f,10))}{const f=this.scrollContainer.scrollLeft,c=f/a,d=(f+i)/a;this.emit("scroll",c,d)}}renderProgress(t,r){if(isNaN(t))return;const n=100*t;this.canvasWrapper.style.clipPath=`polygon(${n}% 0, 100% 0, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.transform=`translateX(-${Math.round(n)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,r)}exportImage(t,r,n){return Nt(this,void 0,void 0,function*(){const a=this.canvasWrapper.querySelectorAll("canvas");if(!a.length)throw new Error("No waveform data");if(n==="dataURL"){const i=Array.from(a).map(o=>o.toDataURL(t,r));return Promise.resolve(i)}return Promise.all(Array.from(a).map(i=>new Promise((o,s)=>{i.toBlob(l=>{l?o(l):s(new Error("Could not export image"))},t,r)})))})}}va.MAX_CANVAS_WIDTH=4e3;class lm extends gn{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class Ms extends gn{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Nt(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(r=>{if(r.status>=400)throw new Error(`Failed to fetch ${t}: ${r.status} (${r.statusText})`);return r.arrayBuffer()}).then(r=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(r)).then(r=>{this.currentSrc===t&&(this.buffer=r,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let r=this.playedDuration*this._playbackRate;r>=this.duration&&(r=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,r),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Nt(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var r,n;const a=t-this.currentTime;(r=this.bufferNode)===null||r===void 0||r.stop(this.audioContext.currentTime+a),(n=this.bufferNode)===null||n===void 0||n.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return Nt(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const r=!this.paused;r&&this._pause(),this.playedDuration=t/this._playbackRate,r&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,r;return(t=this._duration)!==null&&t!==void 0?t:((r=this.buffer)===null||r===void 0?void 0:r.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const r=this.buffer.numberOfChannels;for(let n=0;n<r;n++)t.push(this.buffer.getChannelData(n));return t}}const um={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class Jr extends sm{static create(t){return new Jr(t)}constructor(t){const r=t.media||(t.backend==="WebAudio"?new Ms:void 0);super({media:r,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},um,t),this.timer=new lm;const n=r?void 0:this.getMediaElement();this.renderer=new va(this.options,n),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins(),Promise.resolve().then(()=>{this.emit("init");const a=this.options.url||this.getSrc()||"";(a||this.options.peaks&&this.options.duration)&&this.load(a,this.options.peaks,this.options.duration).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{this.emit("error",t.error)}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,r)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,r))}),this.renderer.on("dblclick",(t,r)=>{this.emit("dblclick",t,r)}),this.renderer.on("scroll",(t,r)=>{const n=this.getDuration();this.emit("scroll",t*n,r*n)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",r=>{if(!this.options.interact)return;let n;this.renderer.renderProgress(r),clearTimeout(t),this.isPlaying()?n=0:this.options.dragToSeek===!0?n=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(n=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(r)},n),this.emit("interaction",r*this.getDuration()),this.emit("drag",r)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(r=>{this.registerPlugin(r)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(r=>r!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}setScrollTime(t){const r=t/this.getDuration();this.renderer.setScrollPercentage(r)}getActivePlugins(){return this.plugins}loadAudio(t,r,n,a){var i;return Nt(this,void 0,void 0,function*(){if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!r&&!n){const s=this.options.fetchParams||{};window.AbortController&&!s.signal&&(this.abortController=new AbortController,s.signal=(i=this.abortController)===null||i===void 0?void 0:i.signal);const l=u=>this.emit("loading",u);r=yield om.fetchBlob(t,l,s)}this.setSrc(t,r);const o=a||this.getDuration()||(yield new Promise(s=>{this.onMediaEvent("loadedmetadata",()=>s(this.getDuration()),{once:!0})}));if(!t&&!r){const s=this.getMediaElement();s instanceof Ms&&(s.duration=o)}if(n)this.decodedData=ks.createBuffer(n,o||0);else if(r){const s=yield r.arrayBuffer();this.decodedData=yield ks.decode(s,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,r,n){return Nt(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,r,n)}catch(a){throw this.emit("error",a),a}})}loadBlob(t,r,n){return Nt(this,void 0,void 0,function*(){try{return yield this.loadAudio("blob",t,r,n)}catch(a){throw this.emit("error",a),a}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:r=8e3,precision:n=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const a=Math.min(t,this.decodedData.numberOfChannels),i=[];for(let o=0;o<a;o++){const s=this.decodedData.getChannelData(o),l=[],u=Math.round(s.length/r);for(let f=0;f<r;f++){const c=s.slice(f*u,(f+1)*u);let d=0;for(let p=0;p<c.length;p++){const v=c[p];Math.abs(v)>Math.abs(d)&&(d=v)}l.push(Math.round(d*n)/n)}i.push(l)}return i}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const r=this.getDuration()*t;this.setTime(r)}playPause(){return Nt(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(t="image/png",r=1,n="dataURL"){return Nt(this,void 0,void 0,function*(){return this.renderer.exportImage(t,r,n)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(r=>r.destroy()),this.subscriptions.forEach(r=>r()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}Jr.BasePlugin=class extends gn{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},Jr.dom=im;const cm={class:"flex flex-col rounded overflow-hidden h-full"},fm={class:"flex items-center text-xs pl-2 overflow-hidden h-5 leading-5 bg-[#395c96] text-gray-100"},dm={class:"mr-4 shrink-0"},pm={class:"overflow-hidden bg-blue-900 bg-opacity-60 flex-1 relative"},vm={key:0,class:"pl-2 overflow-hidden h-4 bg-gray-600 relative text-xs text-white"},hm=lt({__name:"AudioItem",props:{trackItem:{type:Object,default(){return{showWidth:"0px",showLeft:"0px"}}}},setup(e){const t=e,r=de(),n=tt(()=>t.trackItem.resource),a=tt(()=>{const{start:l,end:u,offsetL:f,offsetR:c,frameCount:d}=t.trackItem,p=u-l;return{transformOrigin:"left top",left:`-${f/p*100}%`,right:`-${c/p*100}%`}}),i=it(!0),o=it();async function s(){var l;if(!((l=n.value)!=null&&l.url)){console.error("Audio resource URL not found");return}r.ingLoadingCount++;try{Jr.create({container:o.value,url:n.value.url,...wc})}finally{i.value=!1,r.ingLoadingCount--}}return Tt(()=>n.value&&o.value,()=>{o.value&&s()},{immediate:!0}),(l,u)=>{var d,p;const f=Fs,c=Wt;return L(),Y("div",cm,[A("div",fm,[O(c,{size:"18"},{default:q(()=>[O(f,{class:"inline-block mr-2 shrink-0"})]),_:1}),A("span",dm,pt(`${e.trackItem.name}.${e.trackItem.format}`),1)]),A("div",pm,[A("div",{style:gt(w(a)),class:"absolute",ref_key:"waveRef",ref:o},null,4)]),(p=(d=w(n))==null?void 0:d.meta)!=null&&p.prompt?(L(),Y("div",vm,[A("span",null,pt(w(n).meta.prompt),1)])):ht("",!0),ee(O(po,{class:"pl-12 bg-opacity-70"},null,512),[[Ge,w(i)||e.trackItem.loading]])])}}}),gm={class:"flex flex-col rounded overflow-hidden h-full"},mm={class:"flex items-center text-xs pl-2 overflow-hidden h-6 leading-6 bg-red-900 bg-opacity-70 text-gray-300"},bm={class:"mr-4 shrink-0"},ym=lt({__name:"TextItem",props:{trackItem:{type:Object,default(){return{width:"0px",left:"0px"}}}},setup(e){const t=e;return(r,n)=>{const a=Gs,i=Wt;return L(),Y("div",gm,[A("div",mm,[O(i,{size:"18"},{default:q(()=>[O(a,{class:"inline-block mr-2 shrink-0"})]),_:1}),A("span",bm,pt(t.trackItem.text),1)])])}}}),xm={class:"flex flex-col rounded overflow-hidden h-full"},_m={class:"flex items-center text-xs pl-2 overflow-hidden h-full leading-6 bg-yellow-700 bg-opacity-70 text-white"},Sm=["src"],Cm={class:"mr-4 shrink-0 flex flex-col gap-1"},wm={class:"text-xs h-4"},Em={class:"overflow-hidden h-4 relative text-xs text-white"},km=lt({__name:"ImageItem",props:{trackItem:{type:Object,default(){return{width:"0px",left:"0px"}}}},setup(e){const t=e,r=tt(()=>t.trackItem.resource);return(n,a)=>{var i,o;return L(),Y("div",xm,[A("div",_m,[A("img",{src:(i=w(r))==null?void 0:i.url,class:"h-full inline-block mr-2 shrink-0",alt:"",draggable:"false"},null,8,Sm),A("div",Cm,[A("div",wm,pt(e.trackItem.name),1),A("div",Em,[A("span",null,pt(((o=w(r))==null?void 0:o.name)||"图片"),1)])])]),ee(O(po,{class:"pl-12 bg-opacity-70"},null,512),[[Ge,e.trackItem.loading]])])}}}),Dm=["data-type","data-line","data-index"],Mm=lt({__name:"TrackItem",props:{trackType:{type:String,default:""},lineIndex:{type:Number,default:0},itemIndex:{type:Number,default:0},trackItem:{type:Object,default(){return{width:"0px",left:"0px"}}}},setup(e){const t=e,r=Vt(),n=tt(()=>r.selectTrackItem.line===t.lineIndex&&r.selectTrackItem.index===t.itemIndex),a=new Map([["video",am],["audio",hm],["text",ym],["image",km]]),i=tt(()=>r.moveTrackData.lineIndex===t.lineIndex&&r.moveTrackData.itemIndex===t.itemIndex);function o(l){l.preventDefault(),l.stopPropagation(),r.selectTrackItem.line=t.lineIndex,r.selectTrackItem.index=t.itemIndex}const s=tt(()=>i.value?{width:t.trackItem.showWidth,left:`${parseInt(t.trackItem.showLeft)+r.dragData.moveX}px`,top:`${r.dragData.moveY}px`}:{width:t.trackItem.showWidth,left:t.trackItem.showLeft});return(l,u)=>(L(),Y("div",{class:rt(["text-left text-sm top-0 absolute trackItem",[w(ki).get(t.trackItem.type),i.value?"z-50 isDrag":"z-10"]]),style:gt([s.value]),"data-type":t.trackItem.type,"data-line":e.lineIndex,"data-index":e.itemIndex,onClick:o},[O(U0,{isActive:n.value,lineIndex:e.lineIndex,itemIndex:e.itemIndex},null,8,["isActive","lineIndex","itemIndex"]),(L(),Ct(wr(w(a).get(e.trackItem.type)),{trackItem:e.trackItem},null,8,["trackItem"]))],14,Dm))}}),Tm=["data-index","data-type"],Rm=lt({__name:"TrackLine",props:{isMain:{type:Boolean,default:!1},lineType:{type:String,default:""},lineIndex:{type:Number,default:0},lineData:{type:Array,default(){return[]}}},setup(e){const t=e,r=Vt(),n=tt(()=>r.selectTrackItem.line===t.lineIndex);return(a,i)=>(L(),Y("div",{class:rt(["mb-1 mt-1 relative ml-2 trackLine",[w(ki).get(e.lineType),w(n)?"dark:bg-gray-700 bg-gray-400 bg-opacity-20":"bg-gray-200 bg-opacity-10",e.isMain?"bg-blue-500 bg-opacity-20":""]]),"data-index":e.lineIndex,"data-type":e.lineType},[(L(!0),Y(le,null,_e(e.lineData,(o,s)=>(L(),Ct(Mm,{key:o.id,lineIndex:e.lineIndex,itemIndex:s,trackItem:o},null,8,["lineIndex","itemIndex","trackItem"]))),128))],10,Tm))}}),Pm=rn(Rm,[["__scopeId","data-v-f61e98b9"]]),Im={class:"absolute pt-10 pb-5 min-w-full flex flex-col justify-center min-h-full overflow-x-hidden left-0 right-0"},Om=["title"],Bm=lt({__name:"TrackListIcon",props:{listData:{type:Array,default(){return[]}},offsetTop:{type:Number,default:0}},setup(e){const t=e,r=new Map([["video",Ei],["audio",Fs],["text",Gs],["image",Ec]]),n=it();return Tt(()=>t.offsetTop,()=>{n.value.scrollTop=t.offsetTop}),(a,i)=>{const o=Wt;return L(),Y("div",{ref_key:"iconList",ref:n,class:"relative w-12 flex h-full flex-col items-center justify-start overflow-y-hidden overflow-x-scroll border-r-2 dark:border-gray-700 border-gray-300 border-t"},[i[0]||(i[0]=A("span",{class:"w-full h-5 sticky top-0 left-0 right-0 z-20"},null,-1)),A("div",Im,[(L(!0),Y(le,null,_e(e.listData,(s,l)=>(L(),Y("div",{key:l,class:rt(["z-10 flex justify-center items-center w-12 text-center mb-1 mt-1",[w(ki).get(s.type),s.main?"bg-blue-500 bg-opacity-20":""]]),title:s.main?"主轨道":""},[O(o,{size:"20"},{default:q(()=>[(L(),Ct(wr(w(r).get(s.type))))]),_:2},1024)],10,Om))),128))])],512)}}}),Am=lt({__name:"TrackPlayPoint",setup(e){const t={left:10},r=Vt(),n=de(),a=tt(()=>({left:`${t.left}px`,transform:`translate(${Jt(r.trackScale,n.playStartFrame)}px, 0px)`})),i=it(!1);function o(u){u.stopPropagation(),u.preventDefault(),n.isPause=!0,i.value=!0}function s(u){if(i.value){const f=document.getElementById("track-container").getBoundingClientRect(),d=tr(u.pageX-t.left-f.left,r.trackScale,30)-1,p=d<0?0:d>r.frameCount?r.frameCount:d;n.playStartFrame=p}}document.addEventListener("mousemove",s);function l(u){i.value=!1}return document.addEventListener("mouseup",l),(u,f)=>(L(),Y("div",{class:"z-30 w-px absolute -top-5 bottom-0 bg-gray-700 dark:bg-gray-100 transition-transform duration-75",id:"trackPlayPoint",style:gt(a.value),onMousedown:o},f[0]||(f[0]=[A("span",{class:"playPoint block border-1 border-gray-600 bg-gray-600 h-3 w-2.5 dark:border-gray-100 dark:bg-gray-100 sticky top-0 right-0 left-0 cursor-move"},null,-1)]),36))}}),zm=rn(Am,[["__scopeId","data-v-86d34692"]]),Lm={class:"trackList flex flex-1 flex-row w-full overflow-x-hidden overflow-y-auto relative"},$m={key:0,class:"flex justify-center items-center h-24 m-auto w-2/3 dark:bg-gray-500 bg-gray-200 rounded-md text-sm border-dashed border-2 dark:border-gray-500 border-gray-200 hover:dark:border-blue-300 hover:border-blue-400"},Fm=lt({__name:"TrackList",setup(e){const t=Vt(),r=de(),n=it(),a=it(),i={left:10,right:200},o=it(0-i.left),s=it(0),l=tt(()=>t.trackScale),u=tt(()=>({width:Jt(l.value,t.frameCount)+i.right})),f=it(-1),c=it(0),d=it(!0),p=tt(()=>t.dragData.dragPoint);let v=it(0);const h=tt(()=>t.trackList.map((G,$)=>{G.main&&(v.value=$);const N=G.list.map(F=>({...F,showWidth:`${Jt(l.value,F.end-F.start)}px`,showLeft:`${Jt(l.value,F.start)}px`}));return{...G,list:N}}));function g(G,$,N){G.preventDefault(),G.stopPropagation(),t.selectTrackItem.line=$,t.selectTrackItem.index=N}function m(G){const $=G-1,N=$<0?0:$;r.isPause=!0,r.playStartFrame=N}let y=0;const b=Fn(()=>{t.trackScale-=y>0?10:-10,y=0},100),x=G=>{(G.ctrlKey||G.metaKey)&&(G.preventDefault(),y||(y=G.deltaY),b())};function _(){const{scrollLeft:G,scrollTop:$}=n.value;o.value=G-i.left,s.value=$}let S={left:0,right:0,start:0,end:0},C=[],M;function k(G){const $=window.getComputedStyle(G);return{left:parseInt($.left),right:parseInt($.left)+parseInt($.width)}}function E(G){if(M=G.target.closest(".trackItem"),!M)return;r.isPause=!0;const $=Number(M.dataset.line),N=Number(M.dataset.index);t.dragData.dragPoint.x=G.pageX,t.dragData.dragPoint.y=G.pageY,t.dragData.dataInfo=t.trackList[$].list[N],t.dragData.dragType=M.dataset.type,t.moveTrackData.lineIndex=$,t.moveTrackData.itemIndex=N,t.selectTrackItem.line=-1,t.selectTrackItem.index=0;const F=t.trackList[$].list[N];S={start:F.start,end:F.end,left:Jt(t.trackScale,F.start),right:Jt(t.trackScale,F.end)},C=[];for(let W=0;W<t.trackList.length;W++)for(let Z=0;Z<t.trackList[W].list.length;Z++)if(W!==$||Z!==N){const nt=t.trackList[W].list[Z];C.push({start:nt.start,end:nt.end,left:Jt(t.trackScale,nt.start),right:Jt(t.trackScale,nt.end)})}}function R(G,$,{start:N,end:F}){if(G.type!==$.type)return{overlap:!0,index:0};const W=$.list.filter(Z=>Z.id!==G.id);if(W.length===0)return{overlap:!1,index:0};if(W[0].start>=F)return{overlap:!1,index:0};if(W[W.length-1].end<=N)return{overlap:!1,index:W.length};for(let Z=0;Z<W.length-1;Z++){const nt=W[Z],U=W[Z+1];if(N>=nt.end&&F<=U.start)return{overlap:!1,index:Z+1}}return{overlap:!0,index:0}}function D(){const G=M.offsetTop+M.offsetHeight/2+M.offsetParent.offsetTop,$=Array.from(document.querySelectorAll(".trackLine"));if($[0].offsetTop>G)return{isNewLine:!0,insertIndex:0};for(let N=0;N<$.length;N++){const F=$[N];if(F.offsetTop<=G&&F.offsetTop+F.offsetHeight>=G)return{isNewLine:!1,insertIndex:N,elem:F};if(N+1!==$.length){const W=$[N+1];if(F.offsetTop+F.offsetHeight<=G&&W.offsetTop>=G)return{isNewLine:!0,insertIndex:N+1}}}return{isNewLine:!0,insertIndex:$.length}}let P={left:0,right:0,start:0,end:0};function I(){let{isNewLine:G,insertIndex:$,elem:N}=D();const F=k(M),W=P.left||F.left,Z=P.right||F.right,nt=P.start||tr(W,t.trackScale,Kt),U=P.end||tr(Z,t.trackScale,Kt);if(!N)return{insertIndex:$,itemIndex:0,left:W,right:Z,isNewLine:G,start:nt,end:U};const J=t.dragData.dataInfo,Q=t.trackList[$],{overlap:ct,index:dt}=R(J,Q,{start:nt,end:U});return ct&&(G=!0,N.offsetLeft+N.offsetWidth/2<M.offsetTop+M.offsetParent.offsetTop+M.offsetHeight/2&&($-=1)),{insertIndex:$,itemIndex:dt,left:W,right:Z,isNewLine:G,start:nt,end:U}}function B(G,$=10){const N=[];C.forEach(W=>{Math.abs(W.left-G)<=$&&N.push({position:W.left,frame:W.start}),Math.abs(W.right-G)<=$&&N.push({position:W.right,frame:W.end})});const F=Jt(t.trackScale,r.playStartFrame);return Math.abs(F-G)<=$&&N.push({position:F,frame:r.playStartFrame}),N}function V({left:G,right:$},N){if(P={left:0,right:0,start:0,end:0},N[0].length===0&&N[1].length===0)return;const F=N[0].reduce((Z,nt)=>Math.abs(nt.position-G)<Math.abs(Z.position-G)?nt:Z,{position:Number.MAX_SAFE_INTEGER,frame:0}),W=N[1].reduce((Z,nt)=>Math.abs(nt.position-$)<Math.abs(Z.position-$)?nt:Z,{position:Number.MAX_SAFE_INTEGER,frame:0});Math.abs(F.position-G)<Math.abs(W.position-$)?(P.left=F.position,P.start=F.frame,t.dragData.moveX=F.position-S.left):(P.right=W.position,P.end=W.frame,t.dragData.moveX=W.position-S.right)}function K(G){if(M){t.dragData.moveX=G.pageX-t.dragData.dragPoint.x,t.dragData.moveY=G.pageY-t.dragData.dragPoint.y;const $=t.dragData.moveX+S.left,N=t.dragData.moveX+S.right;t.dragData.fixLines=[B($),B(N)],V({left:$,right:N},t.dragData.fixLines)}}function X(G){let $=t.dragData.dataInfo;const N=Math.max(P.right!==0?tr(G.right,t.trackScale,Kt)-($.end-$.start):tr(G.left,t.trackScale,Kt),0);$.end=N+($.end-$.start),$.start=N;const F=$;let W=0,Z=0;t.trackList.forEach((U,J)=>{U.list.forEach((Q,ct)=>{Q.id===$.id&&(W=J,Z=ct)})}),t.trackList[W].list.splice(Z,1),G.isNewLine?t.trackList.splice(G.insertIndex,0,{type:F.type,list:[F]}):t.trackList[G.insertIndex].list.splice(G.itemIndex,0,F);const nt=t.trackList.findIndex(U=>U.list.length===0);nt!==-1&&t.trackList.splice(nt,1)}function H(G){if(M){t.dragData.moveX=G.pageX-t.dragData.dragPoint.x,t.dragData.moveY=G.pageY-t.dragData.dragPoint.y;const $=t.dragData.moveX+S.left,N=t.dragData.moveX+S.right;t.dragData.fixLines=[B($),B(N)],V({left:$,right:N},t.dragData.fixLines);const F=I();X(F),M=null}t.dragData.fixLines=[],t.moveTrackData.lineIndex=-1,t.moveTrackData.itemIndex=-1,t.dragData.moveX=0,t.dragData.moveY=0}function z(G){const $=a.value,{left:N}=$.getBoundingClientRect(),{clientX:F}=G,{x:W}=p.value,Z=F-N-W;c.value=Z<0?0:Z}async function j(){const G=tr(c.value,t.trackScale,Kt),$=await t.createTrack(t.dragData.dataInfo,G);t.addTrack($),c.value=0,t.dragData.dataInfo={},t.moveTrackData.lineIndex=-1,t.moveTrackData.itemIndex=-1,t.dragData.moveX=0,t.dragData.moveY=0}return(G,$)=>(L(),Y("div",Lm,[O(Bm,{listData:h.value,offsetTop:s.value},null,8,["listData","offsetTop"]),A("div",{class:"flex-1 overflow-x-scroll overflow-y-auto flex-col shrink-0 grow relative",ref_key:"trackList",ref:n,onScroll:_,onWheel:x,onClick:$[0]||($[0]=N=>g(N,-1,-1))},[O(j0,{start:o.value,scale:l.value,step:w(Kt),focusPosition:w(t).selectResource,onSelectFrame:m},null,8,["start","scale","step","focusPosition"]),A("div",{class:"absolute top-5 flex shrink-0 grow min-w-full",style:{"min-height":"calc(100% - 20px)"},ref_key:"trackListContainer",ref:a,onMousedown:E,onMousemove:K,onMouseup:H,onMouseleave:H,onDragover:Fe(z,["stop","prevent"]),onDrop:j},[h.value.length===0?(L(),Y("div",$m,[O(Ei,{class:"text-xl mr-4"}),$[1]||($[1]=Pt(" 将素材拖拽到这里，开始编辑你的大作吧~ "))])):(L(),Y("div",{key:1,class:"z-10 pt-5 pb-5 min-w-full flex shrink-0 grow flex-col justify-center min-h-full",style:gt({width:`${u.value.width}px`}),id:"track-container"},[(L(!0),Y(le,null,_e(h.value,(N,F)=>(L(),Ct(Pm,{key:N.list.reduce((W,Z)=>W+Z.id,"line"),style:gt({"margin-left":`${i.left}px`}),class:rt([f.value===F?d.value?"showLine-t":"showLine-b":""]),lineType:N.type,isActive:w(t).selectTrackItem.line===F,lineIndex:F,isMain:N.main,lineData:N.list},null,8,["style","class","lineType","isActive","lineIndex","isMain","lineData"]))),128))],4)),ee(O(zm,null,null,512),[[Ge,h.value.length!==0]]),h.value.length!==0?(L(!0),Y(le,{key:2},_e(w(t).dragData.fixLines.reduce((N,F)=>N.concat(F),[]),(N,F)=>(L(),Y("div",{key:F,class:"z-30 w-px absolute -top-5 bottom-0 bg-yellow-300 dark:bg-yellow-300 pointer-events-none",style:gt({left:`${N.position+10}px`})},null,4))),128)):ht("",!0),h.value.length!==0&&c.value!==0?(L(),Y("div",{key:3,class:"z-30 w-px absolute -top-5 bottom-0 bg-yellow-300 dark:bg-yellow-300",style:gt({left:`${c.value}px`})},null,4)):ht("",!0)],544)],544)]))}}),Gm=lt({__name:"TrackContainer",setup(e){const t=Er(),r=Vt(),n=tt(()=>({height:`${t.trackHeight}px`}));return(a,i)=>(L(),Y("div",{class:"overflow-hidden select-none relative pt-2 flex flex-col dark:bg-night-light bg-white rounded",style:gt(w(n))},[O(V0,{modelValue:w(r).trackScale,"onUpdate:modelValue":i[0]||(i[0]=o=>w(r).trackScale=o)},null,8,["modelValue"]),O(Fm)],4))}}),Ts=lt({__name:"SplitLine",props:{disabled:{type:Boolean,default:!1},newWidth:{type:Number,default:0},newHeight:{type:Number,default:0},direction:{type:String,default:"horizontal"},limitSize:{type:Object,default(){return{minHeight:0,maxHeight:999999,minWidth:0,maxWidth:999999}}}},emits:{"update:newWidth":e=>e!==null,"update:newHeight":e=>e!==null},setup(e,{emit:t}){const r=e,n=t,a=tt({get(){return r.newWidth},set(p){n("update:newWidth",p)}}),i=tt({get(){return r.newHeight},set(p){n("update:newHeight",p)}}),o=it(),s=Er(),l=tt(()=>r.direction==="vertical"),u=tt(()=>s.isDark?"#E5E7EB":"#1F2937"),f={left:0,top:0};let c=!1;function d(){if(r.disabled)return;const{left:p,top:v}=o.value.getBoundingClientRect();f.left=parseInt(p),f.top=parseInt(v),c=!0,document.onmousemove=h=>{if(!c)return;const{pageX:g,pageY:m}=h,{top:y,left:b}=f,{minHeight:x,maxHeight:_,minWidth:S,maxWidth:C}=r.limitSize,M=g-b,k=m-y;if(f.left=g,f.top=m,l.value){const E=a.value-M;a.value=E>C?C:E<S?S:E}else{const E=i.value-k;i.value=E>_?_:E<x?x:E}},document.onmouseup=()=>{c=!1,document.onmouseup=null,document.onmousemove=null}}return(p,v)=>{const h=Wt;return L(),Y("div",{ref_key:"lineElement",ref:o,class:rt(["flex justify-center items-center",[e.disabled?"cursor-no-drop":l.value?"cursor-c-resize":"cursor-r-resize",l.value?"w-2 h-full flex-col":"h-2 w-full flex-row"]]),onMousedown:d},[A("span",{class:rt(["absolute flex z-10 dark:bg-gray-800 bg-gray-200",l.value?"h-8 w-4 flex-col":"w-8 h-4 flex-row"])},[O(h,{class:rt(["flex-auto",l.value?"rotate-90":""]),color:u.value},{default:q(()=>[O(w(kc))]),_:1},8,["class","color"])],2)],34)}}}),Nm={class:"flex h-full overflow-hidden relative container-box !p-0 bg-transparent"},Vm={class:"flex flex-col gap-2 w-full"},Wm=lt({__name:"GenerateContainer",setup(e){const t=it(0),r=tt(()=>Do[t.value]);return(n,a)=>(L(),Y("div",Nm,[A("div",Vm,[O(Vs,{"active-index":w(t),"onUpdate:activeIndex":a[0]||(a[0]=i=>Fa(t)?t.value=i:null),menu:w(Do)},null,8,["active-index","menu"]),(L(),Ct(Dc,null,[(L(),Ct(wr(w(r).component),{key:w(r).key}))],1024))])]))}}),Hm=Ns(),oe=Vt(),Ir=de(),Xm=()=>{se("backspace,delete",(e,t)=>{oe.removeTrack(),e.preventDefault()}),se("space",(e,t)=>{Ir.isPause=!Ir.isPause,e.preventDefault()}),se("right",(e,t)=>{Ir.forward(),e.preventDefault()}),se("left",(e,t)=>{Ir.backward(),e.preventDefault()}),se("t|T",(e,t)=>{oe.addText(),e.preventDefault()}),se("l",(e,t)=>{oe.leftLink(),e.preventDefault()}),se("s",(e,t)=>{oe.splitTrack(),e.preventDefault()}),se("ctrl+c",(e,t)=>{oe.selectResource&&(oe.copyData=oe.selectResource,e.preventDefault())}),se("ctrl+v",(e,t)=>{(async()=>{if(oe.copyData){const r=await oe.copyTrack(oe.copyData),n=r.end-r.start;r.start=Ir.playStartFrame,r.end=r.start+n,oe.addTrack(r),e.preventDefault()}})()}),se("ctrl+s",(e,t)=>{Hm.saveProject().then(()=>{ge.success("保存成功")}),e.preventDefault()}),se("ctrl+z",(e,t)=>{oe._undo(),e.preventDefault()}),se("ctrl+shift+z",(e,t)=>{oe._redo(),e.preventDefault()})},Ym=()=>{se.deleteScope("all")},jm={class:"w-full h-full overflow-hidden flex flex-col items-center"},Um={class:"flex-1 w-full overflow-auto"},qm={class:"w-full upload-container"},Km=lt({__name:"UploadContainer",setup(e){const t=Mc(),r=it([]),n=it(!1),a=it(0),i=tt(()=>t.getResourcesByType(o.value.key).value||[]),o=tt(()=>Mo.filter(l=>l.fileType)[a.value]),s=async()=>{if(r.value.length===0){ge.error("请选择文件再上传");return}n.value=!0;try{const l=r.value[0].raw;if(!l){ge.error("文件无效");return}await t.createResource(l),ge.success("文件上传成功"),r.value=[]}catch(l){console.error("Upload error:",l),ge.error("文件上传失败")}finally{n.value=!1}};return Tt(()=>r.value,()=>{r.value.length>0&&s()}),(l,u)=>{const f=Bc,c=Wt,d=Af,p=en;return L(),Y("div",jm,[O(Vs,{"active-index":w(a),"onUpdate:activeIndex":u[0]||(u[0]=v=>Fa(a)?a.value=v:null),menu:w(Mo)},null,8,["active-index","menu"]),A("div",Um,[O(f,{"list-data":w(i),type:w(o).key},null,8,["list-data","type"])]),ee((L(),Y("div",qm,[O(d,{"file-list":w(r),"onUpdate:fileList":u[1]||(u[1]=v=>Fa(r)?r.value=v:null),class:"w-full",drag:"",action:"","show-file-list":!1,"auto-upload":!1,accept:w(o).fileType,limit:1},{default:q(()=>[O(c,{class:"el-icon--upload mt-2",size:"40"},{default:q(()=>[O(w(Tc))]),_:1}),u[2]||(u[2]=A("div",{class:"el-upload__text !mt-[-10px] mb-4"},[Pt(" 拖拽文件到此 或 "),A("em",null,"点击上传")],-1))]),_:1},8,["file-list","accept"])])),[[p,w(n)]])])}}}),Zm=rn(Km,[["__scopeId","data-v-8aca2d5a"]]),Jm={class:"flex flex-1 overflow-hidden gap-4 p-4 h-full"},Qm={class:"w-[370px] flex flex-col rounded overflow-hidden"},t1={class:"flex flex-1 flex-col overflow-hidden gap-2"},e1={class:"flex flex-1 flex-row flex-nowrap container-box gap-2"},s1=lt({__name:"index",setup(e){const t=Er(),r=Ns(),n=it(),a=sr({minHeight:200,maxHeight:document.body.getBoundingClientRect().height-200,minWidth:300,maxWidth:600});return je(()=>{Xm(),n.value=setInterval(async()=>{await r.saveProject()},30*1e3)}),$s(()=>{Ym(),clearInterval(n.value)}),(i,o)=>{const s=zs,l=Ls;return L(),Y("div",Jm,[A("div",Qm,[O(l,{type:"border-card",class:"flex-1 overflow-hidden"},{default:q(()=>[O(s,{class:"h-full",label:"生成区"},{default:q(()=>[O(Wm)]),_:1}),O(s,{class:"h-full",label:"上传区"},{default:q(()=>[O(Zm)]),_:1})]),_:1})]),A("div",t1,[A("div",e1,[O(L0),O(Ts,{"new-width":w(t).attrWidth,"onUpdate:newWidth":o[0]||(o[0]=u=>w(t).attrWidth=u),direction:"vertical","limit-size":w(a)},null,8,["new-width","limit-size"]),O(yp)]),O(Ts,{"new-height":w(t).trackHeight,"onUpdate:newHeight":o[1]||(o[1]=u=>w(t).trackHeight=u),direction:"horizontal","limit-size":w(a)},null,8,["new-height","limit-size"]),O(Gm)])])}}});export{s1 as default};
