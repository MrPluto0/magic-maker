import{d as w,J as y,r as v,a8 as E,B as S,D as f,a as k,o as F,P as m,g as A,k as _,a2 as b,y as T,e as L}from"./index-DnwN-RZ1.js";import{d as N,a as P}from"./canvasUtil-Cql1jrBt.js";const z=w({__name:"TimeLine",props:{start:{type:Number,default:0},step:{type:Number,default:y},scale:{type:Number,default:0},focusPosition:{type:Object,default(){return{start:0,end:0}}}},emits:{selectFrame(l){return l!==null}},setup(l,{emit:p}){const s=l,x=p,c=v(),u=v();let t={};const{isDark:a}=E(S()),e=f(()=>({bgColor:a.value?"#374151":"#E5E7EB",ratio:window.devicePixelRatio||1,textSize:12,textScale:.83,lineWidth:1,textBaseline:"middle",textAlign:"center",longColor:a.value?"#E5E7EB":"#374151",shortColor:a.value?"#9CA3AF":"#6B7280",textColor:a.value?"#E5E7EB":"#374151",subTextColor:a.value?"#9CA3AF":"#6B7280",focusColor:a.value?"#6D28D9":"#C4B5FD"})),n=k({width:0,height:0}),g=f(()=>({width:`${n.width/e.value.ratio}px`,height:`${n.height/e.value.ratio}px`}));function r(){N(t,{...s},{...n,...e.value})}function h(){t=u.value.getContext("2d"),t.font=`${e.value.textSize*e.value.ratio}px -apple-system, ".SFNSText-Regular", "SF UI Text", "PingFang SC", "Hiragino Sans GB", "Helvetica Neue", "WenQuanYi Zen Hei", "Microsoft YaHei", Arial, sans-serif`,t.lineWidth=e.value.lineWidth,t.textBaseline=e.value.textBaseline,t.textAlign=e.value.textAlign}function d(){const{width:i,height:o}=c.value.getBoundingClientRect();n.width=i*e.value.ratio,n.height=o*e.value.ratio,T(()=>{h(),r()})}function C(i){const o=i.offsetX,B=P(s.start+o,s.scale,s.step);x("selectFrame",B)}return F(()=>{d()}),m(e,r),m(s,r),window.addEventListener("resize",d,!1),(i,o)=>(L(),A("div",{ref_key:"canvasContainer",ref:c,class:"sticky top-0 left-0 right-0 h-5 text-center leading-5 text-sm z-20"},[_("canvas",b({style:g.value},n,{ref_key:"timeLine",ref:u,onClick:C}),null,16)],512))}});export{z as _};
