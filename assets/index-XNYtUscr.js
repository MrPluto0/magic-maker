import{a0 as C,D as K,N as R,E as X,d as B,G as _,r as P,C as j,g as N,h as v,n as y,s as Y,e as V,a as G,o as O,B as q,f as n,w as b,u as m,al as A,am as J}from"./index-C9HzHbyJ.js";import{h as a}from"./hotkeys.esm-BfWqkGRU.js";import{_ as Q}from"./AttributeContainer.vue_vue_type_script_setup_true_lang-BB80beAx.js";import{_ as Z}from"./CanvasPlayer.vue_vue_type_script_setup_true_lang-DZmGsNlb.js";import{_ as ee}from"./TrackContainer.vue_vue_type_script_setup_true_lang-B8pAiSnV.js";import{_ as te}from"./GenerateContainer.vue_vue_type_script_setup_true_lang-DCf_HnBj.js";import oe from"./UploadContainer-BcNvE2dM.js";import"./el-empty-Bs4r2tUC.js";import"./VideoAttr.vue_vue_type_script_setup_true_lang-QDgSo2wh.js";/* empty css                   */import"./el-input-number-Hl8y28gj.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-tag-D8DtC0Fq.js";import"./AttrCol.vue_vue_type_script_setup_true_lang-C36UuEIu.js";import"./ImageAttr.vue_vue_type_script_setup_true_lang-Cqmlu5oP.js";import"./AudioAttr-BVjG0cE-.js";import"./position-DWX10pAW.js";import"./index-CV9thRvz.js";import"./Player.vue_vue_type_script_setup_true_lang-CF1uWlBX.js";import"./PlayerMoveable.vue_vue_type_style_index_0_lang-D9R-RBpv.js";import"./constant-DzChqTSo.js";import"./PlayerControl.vue_vue_type_script_setup_true_lang-IJcLVU8F.js";import"./TrackControl.vue_vue_type_script_setup_true_lang-WzW7_0Qc.js";import"./TrackList.vue_vue_type_script_setup_true_lang-Ccs5FLxz.js";import"./TimeLine.vue_vue_type_script_setup_true_lang-DS2rOdOD.js";import"./canvasUtil-Buwp7mdT.js";import"./TrackLine-CjPZIphZ.js";import"./TrackItem.vue_vue_type_script_setup_true_lang-DIcJD9gc.js";import"./TrackHandler.vue_vue_type_script_setup_true_lang-Bq-AEKrU.js";import"./VideoItem.vue_vue_type_style_index_0_scope_true_lang-rO3gBfZl.js";import"./Loading-BYHt-F-H.js";import"./AudioItem.vue_vue_type_script_setup_true_lang-CJv2C2OC.js";import"./TextItem.vue_vue_type_script_setup_true_lang-DZl5tCxj.js";import"./ImageItem.vue_vue_type_script_setup_true_lang-DVckZNa2.js";import"./TrackListIcon.vue_vue_type_script_setup_true_lang-DCHJlcJ6.js";import"./TrackPlayPoint-B2TfzNYF.js";import"./menu-C8lNEgsb.js";import"./TextGenerate-CaK5UptE.js";import"./index-NT0ps5Vv.js";import"./ImageGenerate-BeQkmQCr.js";import"./ResourceList.vue_vue_type_script_setup_true_lang-Bgx40Ufe.js";import"./ResourceItem.vue_vue_type_script_setup_true_lang-Cu2Li4U2.js";import"./el-popover-ClIMayzq.js";import"./el-image-viewer-CtlOkK0q.js";import"./AudioGenerate-C0UvpSPb.js";import"./VideoGenerate-Dr5j74Zb.js";import"./SpeechGenerate-CRoyy09n.js";const re=C(),r=K(),h=R(),ae=()=>{a("backspace,delete",(e,t)=>{r.removeTrack(),e.preventDefault()}),a("space",(e,t)=>{h.isPause=!h.isPause,e.preventDefault()}),a("right",(e,t)=>{h.forward(),e.preventDefault()}),a("left",(e,t)=>{h.backward(),e.preventDefault()}),a("t|T",(e,t)=>{r.addText(),e.preventDefault()}),a("l",(e,t)=>{r.leftLink(),e.preventDefault()}),a("s",(e,t)=>{r.splitTrack(),e.preventDefault()}),a("ctrl+c",(e,t)=>{r.selectTrack&&(r.copyData=r.selectTrack,e.preventDefault())}),a("ctrl+v",(e,t)=>{(async()=>{if(r.copyData){const o=await r.copyTrack(r.copyData),i=o.end-o.start;o.start=h.playStartFrame,o.end=o.start+i,r.addTrack(o),e.preventDefault()}})()}),a("ctrl+s",(e,t)=>{re.saveProject().then(()=>{X.success("保存成功")}),e.preventDefault()}),a("ctrl+z",(e,t)=>{r._undo(),e.preventDefault()}),a("ctrl+shift+z",(e,t)=>{r._redo(),e.preventDefault()})},ne=()=>{a.deleteScope("all")},E=B({__name:"SplitLine",props:{disabled:{type:Boolean,default:!1},newWidth:{type:Number,default:0},newHeight:{type:Number,default:0},direction:{type:String,default:"horizontal"},limitSize:{type:Object,default(){return{minHeight:0,maxHeight:999999,minWidth:0,maxWidth:999999}}}},emits:{"update:newWidth":e=>e!==null,"update:newHeight":e=>e!==null},setup(e,{emit:t}){const o=e,i=t,d=_({get(){return o.newWidth},set(p){i("update:newWidth",p)}}),g=_({get(){return o.newHeight},set(p){i("update:newHeight",p)}}),l=P(),w=j(),s=_(()=>o.direction==="vertical"),u=_(()=>w.isDark?"#E5E7EB":"#1F2937"),f={left:0,top:0};let x=!1;function $(){if(o.disabled)return;const{left:p,top:k}=l.value.getBoundingClientRect();f.left=parseInt(p),f.top=parseInt(k),x=!0,document.onmousemove=I=>{if(!x)return;const{pageX:z,pageY:D}=I,{top:M,left:U}=f,{minHeight:H,maxHeight:S,minWidth:W,maxWidth:T}=o.limitSize,L=z-U,F=D-M;if(f.left=z,f.top=D,s.value){const c=d.value-L;d.value=c>T?T:c<W?W:c}else{const c=g.value-F;g.value=c>S?S:c<H?H:c}},document.onmouseup=()=>{x=!1,document.onmouseup=null,document.onmousemove=null}}return(p,k)=>(V(),N("div",{ref_key:"lineElement",ref:l,class:y(["flex justify-center items-center",[e.disabled?"cursor-no-drop":s.value?"cursor-c-resize":"cursor-r-resize",s.value?"w-2 h-full flex-col":"h-2 w-full flex-row"]]),onMousedown:$},[v("span",{class:y(["absolute flex z-10 dark:bg-night-light bg-gray-200",s.value?"h-8 w-4 flex-col  cursor-ew-resize":"w-8 h-4 flex-row cursor-ns-resize"])},[v("i",{class:y(["i-mdi-dots-horizontal flex-auto",s.value?"rotate-90":""]),style:Y({color:u.value,fontSize:"16px"})},null,6)],2)],34))}}),ie={class:"flex flex-1 overflow-hidden gap-4 p-4 h-full"},le={class:"w-[370px] flex flex-col rounded overflow-hidden"},se={class:"flex flex-1 flex-col overflow-hidden gap-2"},ce={class:"flex flex-1 flex-row flex-nowrap gap-2"},rt=B({__name:"index",setup(e){const t=j(),o=C(),i=P(),d=G({minHeight:200,maxHeight:document.body.getBoundingClientRect().height-200,minWidth:300,maxWidth:600});return O(()=>{ae(),i.value=setInterval(async()=>{await o.saveProject()},30*1e3)}),q(()=>{ne(),clearInterval(i.value)}),(g,l)=>{const w=J,s=A;return V(),N("div",ie,[v("div",le,[n(s,{type:"border-card",class:"flex-1 overflow-hidden"},{default:b(()=>[n(w,{class:"h-full",label:"生成区"},{default:b(()=>[n(te)]),_:1}),n(w,{class:"h-full",label:"上传区"},{default:b(()=>[n(oe)]),_:1})]),_:1})]),v("div",se,[v("div",ce,[n(Z),n(E,{"new-width":m(t).attrWidth,"onUpdate:newWidth":l[0]||(l[0]=u=>m(t).attrWidth=u),direction:"vertical","limit-size":m(d)},null,8,["new-width","limit-size"]),n(Q)]),n(E,{"new-height":m(t).trackHeight,"onUpdate:newHeight":l[1]||(l[1]=u=>m(t).trackHeight=u),direction:"horizontal","limit-size":m(d)},null,8,["new-height","limit-size"]),n(ee)])])}}});export{rt as default};
