import{M as Pe,N as ue,O as Fe,P as We,Q as at,U as ye,R as Oe,S as He,T as me,V as de,W as st,a as ne,y as w,X as pe,Y as Se,Z as je,$ as Y,a0 as Ee,b as le,a1 as Ne,I as Ge,a2 as Me,o as x,e as N,g as Te,w as _e,f as Z,v as Qe,h as s,a3 as A,a4 as ot,a5 as te,a6 as Ze,a7 as Xe,a8 as rt,a9 as it,aa as ut,ab as ct,ac as Re,ad as dt,ae as ft,af as mt,ag as gt,ah as vt,H as ke,ai as be,F as ce,i as Ve,aj as yt,ak as ht,al as bt,am as wt,L as pt}from"./index-D1slywUk.js";const qe=Symbol("sliderContextKey"),kt=Pe({modelValue:{type:ue([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Fe,inputSize:Fe,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:ue(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:ue(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:We,default:"top"},marks:{type:ue(Object)},validateEvent:{type:Boolean,default:!0},...at(["ariaLabel"])}),xe=e=>me(e)||de(e)&&e.every(me),Vt={[ye]:xe,[Oe]:xe,[He]:xe},St=Pe({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:We,default:"top"}}),Et={[ye]:e=>me(e)},xt=(e,t,a)=>{const n=ne(),l=ne(!1),r=w(()=>t.value instanceof Function),i=w(()=>r.value&&t.value(e.modelValue)||e.modelValue),o=je(()=>{a.value&&(l.value=!0)},50),d=je(()=>{a.value&&(l.value=!1)},50);return{tooltip:n,tooltipVisible:l,formatValue:i,displayTooltip:o,hideTooltip:d}},Lt=(e,t,a)=>{const{disabled:n,min:l,max:r,step:i,showTooltip:o,precision:d,sliderSize:c,formatTooltip:f,emitChange:u,resetSize:h,updateDragging:b}=st(qe),{tooltip:M,tooltipVisible:E,formatValue:z,displayTooltip:I,hideTooltip:_}=xt(e,f,o),T=ne(),B=w(()=>`${(e.modelValue-l.value)/(r.value-l.value)*100}%`),U=w(()=>e.vertical?{bottom:B.value}:{left:B.value}),W=()=>{t.hovering=!0,I()},q=()=>{t.hovering=!1,t.dragging||_()},ae=v=>{n.value||(v.preventDefault(),ee(v),window.addEventListener("mousemove",P),window.addEventListener("touchmove",P),window.addEventListener("mouseup",C),window.addEventListener("touchend",C),window.addEventListener("contextmenu",C),T.value.focus())},j=v=>{n.value||(t.newPosition=Number.parseFloat(B.value)+v/(r.value-l.value)*100,O(t.newPosition),u())},se=()=>{j(-i.value)},H=()=>{j(i.value)},g=()=>{j(-i.value*4)},V=()=>{j(i.value*4)},L=()=>{n.value||(O(0),u())},J=()=>{n.value||(O(100),u())},D=v=>{let k=!0;switch(v.code){case Y.left:case Y.down:se();break;case Y.right:case Y.up:H();break;case Y.home:L();break;case Y.end:J();break;case Y.pageDown:g();break;case Y.pageUp:V();break;default:k=!1;break}k&&v.preventDefault()},G=v=>{let k,K;return v.type.startsWith("touch")?(K=v.touches[0].clientY,k=v.touches[0].clientX):(K=v.clientY,k=v.clientX),{clientX:k,clientY:K}},ee=v=>{t.dragging=!0,t.isClick=!0;const{clientX:k,clientY:K}=G(v);e.vertical?t.startY=K:t.startX=k,t.startPosition=Number.parseFloat(B.value),t.newPosition=t.startPosition},P=v=>{if(t.dragging){t.isClick=!1,I(),h();let k;const{clientX:K,clientY:R}=G(v);e.vertical?(t.currentY=R,k=(t.startY-t.currentY)/c.value*100):(t.currentX=K,k=(t.currentX-t.startX)/c.value*100),t.newPosition=t.startPosition+k,O(t.newPosition)}},C=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||_(),t.isClick||O(t.newPosition),u()},0),window.removeEventListener("mousemove",P),window.removeEventListener("touchmove",P),window.removeEventListener("mouseup",C),window.removeEventListener("touchend",C),window.removeEventListener("contextmenu",C))},O=async v=>{if(v===null||Number.isNaN(+v))return;v<0?v=0:v>100&&(v=100);const k=100/((r.value-l.value)/i.value);let R=Math.round(v/k)*k*(r.value-l.value)*.01+l.value;R=Number.parseFloat(R.toFixed(d.value)),R!==e.modelValue&&a(ye,R),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await Ee(),t.dragging&&I(),M.value.updatePopper()};return pe(()=>t.dragging,v=>{b(v)}),Se(T,"touchstart",ae,{passive:!1}),{disabled:n,button:T,tooltip:M,tooltipVisible:E,showTooltip:o,wrapperStyle:U,formatValue:z,handleMouseEnter:W,handleMouseLeave:q,onButtonDown:ae,onKeyDown:D,setPosition:O}},Ct=le({name:"ElSliderButton"}),Kt=le({...Ct,props:St,emits:Et,setup(e,{expose:t,emit:a}){const n=e,l=Ne("slider"),r=Ge({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:n.modelValue}),{disabled:i,button:o,tooltip:d,showTooltip:c,tooltipVisible:f,wrapperStyle:u,formatValue:h,handleMouseEnter:b,handleMouseLeave:M,onButtonDown:E,onKeyDown:z,setPosition:I}=Lt(n,r,a),{hovering:_,dragging:T}=Me(r);return t({onButtonDown:E,onKeyDown:z,setPosition:I,hovering:_,dragging:T}),(B,U)=>(x(),N("div",{ref_key:"button",ref:o,class:A([s(l).e("button-wrapper"),{hover:s(_),dragging:s(T)}]),style:te(s(u)),tabindex:s(i)?-1:0,onMouseenter:s(b),onMouseleave:s(M),onMousedown:s(E),onFocus:s(b),onBlur:s(M),onKeydown:s(z)},[Te(s(ot),{ref_key:"tooltip",ref:d,visible:s(f),placement:B.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":B.tooltipClass,disabled:!s(c),persistent:s(c)},{content:_e(()=>[Z("span",null,Qe(s(h)),1)]),default:_e(()=>[Z("div",{class:A([s(l).e("button"),{hover:s(_),dragging:s(T)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var Ye=Ze(Kt,[["__file","button.vue"]]);const Mt=Pe({mark:{type:ue([String,Object]),default:void 0}});var _t=le({name:"ElSliderMarker",props:Mt,setup(e){const t=Ne("slider"),a=w(()=>Xe(e.mark)?e.mark:e.mark.label),n=w(()=>Xe(e.mark)?void 0:e.mark.style);return()=>rt("div",{class:t.e("marks-text"),style:n.value},a.value)}});const Bt=(e,t,a)=>{const{form:n,formItem:l}=it(),r=ut(),i=ne(),o=ne(),d={firstButton:i,secondButton:o},c=w(()=>e.disabled||(n==null?void 0:n.disabled)||!1),f=w(()=>Math.min(t.firstValue,t.secondValue)),u=w(()=>Math.max(t.firstValue,t.secondValue)),h=w(()=>e.range?`${100*(u.value-f.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),b=w(()=>e.range?`${100*(f.value-e.min)/(e.max-e.min)}%`:"0%"),M=w(()=>e.vertical?{height:e.height}:{}),E=w(()=>e.vertical?{height:h.value,bottom:b.value}:{width:h.value,left:b.value}),z=()=>{r.value&&(t.sliderSize=r.value[`client${e.vertical?"Height":"Width"}`])},I=g=>{const V=e.min+g*(e.max-e.min)/100;if(!e.range)return i;let L;return Math.abs(f.value-V)<Math.abs(u.value-V)?L=t.firstValue<t.secondValue?"firstButton":"secondButton":L=t.firstValue>t.secondValue?"firstButton":"secondButton",d[L]},_=g=>{const V=I(g);return V.value.setPosition(g),V},T=g=>{t.firstValue=g??e.min,U(e.range?[f.value,u.value]:g??e.min)},B=g=>{t.secondValue=g,e.range&&U([f.value,u.value])},U=g=>{a(ye,g),a(Oe,g)},W=async()=>{await Ee(),a(He,e.range?[f.value,u.value]:e.modelValue)},q=g=>{var V,L,J,D,G,ee;if(c.value||t.dragging)return;z();let P=0;if(e.vertical){const C=(J=(L=(V=g.touches)==null?void 0:V.item(0))==null?void 0:L.clientY)!=null?J:g.clientY;P=(r.value.getBoundingClientRect().bottom-C)/t.sliderSize*100}else{const C=(ee=(G=(D=g.touches)==null?void 0:D.item(0))==null?void 0:G.clientX)!=null?ee:g.clientX,O=r.value.getBoundingClientRect().left;P=(C-O)/t.sliderSize*100}if(!(P<0||P>100))return _(P)};return{elFormItem:l,slider:r,firstButton:i,secondButton:o,sliderDisabled:c,minValue:f,maxValue:u,runwayStyle:M,barStyle:E,resetSize:z,setPosition:_,emitChange:W,onSliderWrapperPrevent:g=>{var V,L;((V=d.firstButton.value)!=null&&V.dragging||(L=d.secondButton.value)!=null&&L.dragging)&&g.preventDefault()},onSliderClick:g=>{q(g)&&W()},onSliderDown:async g=>{const V=q(g);V&&(await Ee(),V.value.onButtonDown(g))},onSliderMarkerDown:g=>{c.value||t.dragging||_(g)},setFirstValue:T,setSecondValue:B}},Pt=(e,t,a,n)=>({stops:w(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const i=(e.max-e.min)/e.step,o=100*e.step/(e.max-e.min),d=Array.from({length:i-1}).map((c,f)=>(f+1)*o);return e.range?d.filter(c=>c<100*(a.value-e.min)/(e.max-e.min)||c>100*(n.value-e.min)/(e.max-e.min)):d.filter(c=>c>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:i=>e.vertical?{bottom:`${i}%`}:{left:`${i}%`}}),Ot=e=>w(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((a,n)=>a-n).filter(a=>a<=e.max&&a>=e.min).map(a=>({point:a,position:(a-e.min)*100/(e.max-e.min),mark:e.marks[a]})):[]),Nt=(e,t,a,n,l,r)=>{const i=c=>{l(ye,c),l(Oe,c)},o=()=>e.range?![a.value,n.value].every((c,f)=>c===t.oldValue[f]):e.modelValue!==t.oldValue,d=()=>{var c,f;e.min>e.max&&ct("Slider","min should not be greater than max.");const u=e.modelValue;e.range&&de(u)?u[1]<e.min?i([e.min,e.min]):u[0]>e.max?i([e.max,e.max]):u[0]<e.min?i([e.min,u[1]]):u[1]>e.max?i([u[0],e.max]):(t.firstValue=u[0],t.secondValue=u[1],o()&&(e.validateEvent&&((c=r==null?void 0:r.validate)==null||c.call(r,"change").catch(h=>Re())),t.oldValue=u.slice())):!e.range&&me(u)&&!Number.isNaN(u)&&(u<e.min?i(e.min):u>e.max?i(e.max):(t.firstValue=u,o()&&(e.validateEvent&&((f=r==null?void 0:r.validate)==null||f.call(r,"change").catch(h=>Re())),t.oldValue=u)))};d(),pe(()=>t.dragging,c=>{c||d()}),pe(()=>e.modelValue,(c,f)=>{t.dragging||de(c)&&de(f)&&c.every((u,h)=>u===f[h])&&t.firstValue===c[0]&&t.secondValue===c[1]||d()},{deep:!0}),pe(()=>[e.min,e.max],()=>{d()})},Tt=(e,t,a)=>{const n=ne();return dt(async()=>{e.range?(de(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):(!me(e.modelValue)||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),Se(window,"resize",a),await Ee(),a()}),{sliderWrapper:n}},zt=le({name:"ElSlider"}),It=le({...zt,props:kt,emits:Vt,setup(e,{expose:t,emit:a}){const n=e,l=Ne("slider"),{t:r}=ft(),i=Ge({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:o,slider:d,firstButton:c,secondButton:f,sliderDisabled:u,minValue:h,maxValue:b,runwayStyle:M,barStyle:E,resetSize:z,emitChange:I,onSliderWrapperPrevent:_,onSliderClick:T,onSliderDown:B,onSliderMarkerDown:U,setFirstValue:W,setSecondValue:q}=Bt(n,i,a),{stops:ae,getStopStyle:j}=Pt(n,i,h,b),{inputId:se,isLabeledByFormItem:H}=mt(n,{formItemContext:o}),g=gt(),V=w(()=>n.inputSize||g.value),L=w(()=>n.ariaLabel||r("el.slider.defaultLabel",{min:n.min,max:n.max})),J=w(()=>n.range?n.rangeStartLabel||r("el.slider.defaultRangeStartLabel"):L.value),D=w(()=>n.formatValueText?n.formatValueText(k.value):`${k.value}`),G=w(()=>n.rangeEndLabel||r("el.slider.defaultRangeEndLabel")),ee=w(()=>n.formatValueText?n.formatValueText(K.value):`${K.value}`),P=w(()=>[l.b(),l.m(g.value),l.is("vertical",n.vertical),{[l.m("with-input")]:n.showInput}]),C=Ot(n);Nt(n,i,h,b,a,o);const O=w(()=>{const m=[n.min,n.max,n.step].map(Ie=>{const oe=`${Ie}`.split(".")[1];return oe?oe.length:0});return Math.max.apply(null,m)}),{sliderWrapper:v}=Tt(n,i,z),{firstValue:k,secondValue:K,sliderSize:R}=Me(i),lt=m=>{i.dragging=m};return Se(v,"touchstart",_,{passive:!1}),Se(v,"touchmove",_,{passive:!1}),vt(qe,{...Me(n),sliderSize:R,disabled:u,precision:O,emitChange:I,resetSize:z,updateDragging:lt}),t({onSliderClick:T}),(m,Ie)=>{var oe,Ae;return x(),N("div",{id:m.range?s(se):void 0,ref_key:"sliderWrapper",ref:v,class:A(s(P)),role:m.range?"group":void 0,"aria-label":m.range&&!s(H)?s(L):void 0,"aria-labelledby":m.range&&s(H)?(oe=s(o))==null?void 0:oe.labelId:void 0},[Z("div",{ref_key:"slider",ref:d,class:A([s(l).e("runway"),{"show-input":m.showInput&&!m.range},s(l).is("disabled",s(u))]),style:te(s(M)),onMousedown:s(B),onTouchstartPassive:s(B)},[Z("div",{class:A(s(l).e("bar")),style:te(s(E))},null,6),Te(Ye,{id:m.range?void 0:s(se),ref_key:"firstButton",ref:c,"model-value":s(k),vertical:m.vertical,"tooltip-class":m.tooltipClass,placement:m.placement,role:"slider","aria-label":m.range||!s(H)?s(J):void 0,"aria-labelledby":!m.range&&s(H)?(Ae=s(o))==null?void 0:Ae.labelId:void 0,"aria-valuemin":m.min,"aria-valuemax":m.range?s(K):m.max,"aria-valuenow":s(k),"aria-valuetext":s(D),"aria-orientation":m.vertical?"vertical":"horizontal","aria-disabled":s(u),"onUpdate:modelValue":s(W)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),m.range?(x(),ke(Ye,{key:0,ref_key:"secondButton",ref:f,"model-value":s(K),vertical:m.vertical,"tooltip-class":m.tooltipClass,placement:m.placement,role:"slider","aria-label":s(G),"aria-valuemin":s(k),"aria-valuemax":m.max,"aria-valuenow":s(K),"aria-valuetext":s(ee),"aria-orientation":m.vertical?"vertical":"horizontal","aria-disabled":s(u),"onUpdate:modelValue":s(q)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):be("v-if",!0),m.showStops?(x(),N("div",{key:1},[(x(!0),N(ce,null,Ve(s(ae),(Q,re)=>(x(),N("div",{key:re,class:A(s(l).e("stop")),style:te(s(j)(Q))},null,6))),128))])):be("v-if",!0),s(C).length>0?(x(),N(ce,{key:2},[Z("div",null,[(x(!0),N(ce,null,Ve(s(C),(Q,re)=>(x(),N("div",{key:re,style:te(s(j)(Q.position)),class:A([s(l).e("stop"),s(l).e("marks-stop")])},null,6))),128))]),Z("div",{class:A(s(l).e("marks"))},[(x(!0),N(ce,null,Ve(s(C),(Q,re)=>(x(),ke(s(_t),{key:re,mark:Q.mark,style:te(s(j)(Q.position)),onMousedown:yt(Jt=>s(U)(Q.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):be("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),m.showInput&&!m.range?(x(),ke(s(ht),{key:0,ref:"input","model-value":s(k),class:A(s(l).e("input")),step:m.step,disabled:s(u),controls:m.showInputControls,min:m.min,max:m.max,precision:s(O),debounce:m.debounce,size:s(V),"onUpdate:modelValue":s(W),onChange:s(I)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):be("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var At=Ze(It,[["__file","slider.vue"]]);const en=bt(At),Ft={class:"flex items-center gap-2 w-full"},jt=["onClick"],tn=le({__name:"MenuList",props:{activeIndex:{},menu:{}},emits:["update:activeIndex"],setup(e,{emit:t}){const a=t;function n(l){a("update:activeIndex",l)}return(l,r)=>{const i=pt;return x(),N("ul",Ft,[(x(!0),N(ce,null,Ve(l.menu,(o,d)=>(x(),N("li",{key:o.key,class:"flex items-center p-2 cursor-pointer hover:dark:bg-gray-700 hover:bg-gray-200",onClick:c=>n(d)},[Te(i,{color:d===l.activeIndex?"#1473e6":"",size:o.iconSize??14,class:"flex-auto mr-1"},{default:_e(()=>[(x(),ke(wt(o.icon)))]),_:2},1032,["color","size"]),Z("span",{class:A(["ml-0.5 select-none text-xs font-bold",d===l.activeIndex?"text-[#1473e6]":"dark:text-gray-300 text-gray-500"])},Qe(o.title),3)],8,jt))),128))])}}}),Le=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Ce(e,t,a,n){e.addEventListener?e.addEventListener(t,a,n):e.attachEvent&&e.attachEvent("on".concat(t),a)}function ie(e,t,a,n){e.removeEventListener?e.removeEventListener(t,a,n):e.detachEvent&&e.detachEvent("on".concat(t),a)}function Je(e,t){const a=t.slice(0,t.length-1);for(let n=0;n<a.length;n++)a[n]=e[a[n].toLowerCase()];return a}function De(e){typeof e!="string"&&(e=""),e=e.replace(/\s/g,"");const t=e.split(",");let a=t.lastIndexOf("");for(;a>=0;)t[a-1]+=",",t.splice(a,1),a=t.lastIndexOf("");return t}function Xt(e,t){const a=e.length>=t.length?e:t,n=e.length>=t.length?t:e;let l=!0;for(let r=0;r<a.length;r++)n.indexOf(a[r])===-1&&(l=!1);return l}const ge={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":Le?173:189,"=":Le?61:187,";":Le?59:186,"'":222,"[":219,"]":221,"\\":220},F={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},Be={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},S={16:!1,18:!1,17:!1,91:!1},p={};for(let e=1;e<20;e++)ge["f".concat(e)]=111+e;let y=[],fe=null,et="all";const X=new Map,he=e=>ge[e.toLowerCase()]||F[e.toLowerCase()]||e.toUpperCase().charCodeAt(0),Rt=e=>Object.keys(ge).find(t=>ge[t]===e),Yt=e=>Object.keys(F).find(t=>F[t]===e);function tt(e){et=e||"all"}function ve(){return et||"all"}function $t(){return y.slice(0)}function Ut(){return y.map(e=>Rt(e)||Yt(e)||String.fromCharCode(e))}function Wt(){const e=[];return Object.keys(p).forEach(t=>{p[t].forEach(a=>{let{key:n,scope:l,mods:r,shortcut:i}=a;e.push({scope:l,shortcut:i,mods:r,keys:n.split("+").map(o=>he(o))})})}),e}function Ht(e){const t=e.target||e.srcElement,{tagName:a}=t;let n=!0;const l=a==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);return(t.isContentEditable||(l||a==="TEXTAREA"||a==="SELECT")&&!t.readOnly)&&(n=!1),n}function Gt(e){return typeof e=="string"&&(e=he(e)),y.indexOf(e)!==-1}function Qt(e,t){let a,n;e||(e=ve());for(const l in p)if(Object.prototype.hasOwnProperty.call(p,l))for(a=p[l],n=0;n<a.length;)a[n].scope===e?a.splice(n,1).forEach(i=>{let{element:o}=i;return ze(o)}):n++;ve()===e&&tt(t||"all")}function Zt(e){let t=e.keyCode||e.which||e.charCode;const a=y.indexOf(t);if(a>=0&&y.splice(a,1),e.key&&e.key.toLowerCase()==="meta"&&y.splice(0,y.length),(t===93||t===224)&&(t=91),t in S){S[t]=!1;for(const n in F)F[n]===t&&($[n]=!1)}}function nt(e){if(typeof e>"u")Object.keys(p).forEach(l=>{Array.isArray(p[l])&&p[l].forEach(r=>we(r)),delete p[l]}),ze(null);else if(Array.isArray(e))e.forEach(l=>{l.key&&we(l)});else if(typeof e=="object")e.key&&we(e);else if(typeof e=="string"){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];let[l,r]=a;typeof l=="function"&&(r=l,l=""),we({key:e,scope:l,method:r,splitKey:"+"})}}const we=e=>{let{key:t,scope:a,method:n,splitKey:l="+"}=e;De(t).forEach(i=>{const o=i.split(l),d=o.length,c=o[d-1],f=c==="*"?"*":he(c);if(!p[f])return;a||(a=ve());const u=d>1?Je(F,o):[],h=[];p[f]=p[f].filter(b=>{const E=(n?b.method===n:!0)&&b.scope===a&&Xt(b.mods,u);return E&&h.push(b.element),!E}),h.forEach(b=>ze(b))})};function $e(e,t,a,n){if(t.element!==n)return;let l;if(t.scope===a||t.scope==="all"){l=t.mods.length>0;for(const r in S)Object.prototype.hasOwnProperty.call(S,r)&&(!S[r]&&t.mods.indexOf(+r)>-1||S[r]&&t.mods.indexOf(+r)===-1)&&(l=!1);(t.mods.length===0&&!S[16]&&!S[18]&&!S[17]&&!S[91]||l||t.shortcut==="*")&&(t.keys=[],t.keys=t.keys.concat(y),t.method(e,t)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0)))}}function Ue(e,t){const a=p["*"];let n=e.keyCode||e.which||e.charCode;if(!$.filter.call(this,e))return;if((n===93||n===224)&&(n=91),y.indexOf(n)===-1&&n!==229&&y.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach(o=>{const d=Be[o];e[o]&&y.indexOf(d)===-1?y.push(d):!e[o]&&y.indexOf(d)>-1?y.splice(y.indexOf(d),1):o==="metaKey"&&e[o]&&y.length===3&&(e.ctrlKey||e.shiftKey||e.altKey||(y=y.slice(y.indexOf(d))))}),n in S){S[n]=!0;for(const o in F)F[o]===n&&($[o]=!0);if(!a)return}for(const o in S)Object.prototype.hasOwnProperty.call(S,o)&&(S[o]=e[Be[o]]);e.getModifierState&&!(e.altKey&&!e.ctrlKey)&&e.getModifierState("AltGraph")&&(y.indexOf(17)===-1&&y.push(17),y.indexOf(18)===-1&&y.push(18),S[17]=!0,S[18]=!0);const l=ve();if(a)for(let o=0;o<a.length;o++)a[o].scope===l&&(e.type==="keydown"&&a[o].keydown||e.type==="keyup"&&a[o].keyup)&&$e(e,a[o],l,t);if(!(n in p))return;const r=p[n],i=r.length;for(let o=0;o<i;o++)if((e.type==="keydown"&&r[o].keydown||e.type==="keyup"&&r[o].keyup)&&r[o].key){const d=r[o],{splitKey:c}=d,f=d.key.split(c),u=[];for(let h=0;h<f.length;h++)u.push(he(f[h]));u.sort().join("")===y.sort().join("")&&$e(e,d,l,t)}}function $(e,t,a){y=[];const n=De(e);let l=[],r="all",i=document,o=0,d=!1,c=!0,f="+",u=!1,h=!1;for(a===void 0&&typeof t=="function"&&(a=t),Object.prototype.toString.call(t)==="[object Object]"&&(t.scope&&(r=t.scope),t.element&&(i=t.element),t.keyup&&(d=t.keyup),t.keydown!==void 0&&(c=t.keydown),t.capture!==void 0&&(u=t.capture),typeof t.splitKey=="string"&&(f=t.splitKey),t.single===!0&&(h=!0)),typeof t=="string"&&(r=t),h&&nt(e,r);o<n.length;o++)e=n[o].split(f),l=[],e.length>1&&(l=Je(F,e)),e=e[e.length-1],e=e==="*"?"*":he(e),e in p||(p[e]=[]),p[e].push({keyup:d,keydown:c,scope:r,mods:l,shortcut:n[o],method:a,key:n[o],splitKey:f,element:i});if(typeof i<"u"&&window){if(!X.has(i)){const b=function(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return Ue(E,i)},M=function(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;Ue(E,i),Zt(E)};X.set(i,{keydownListener:b,keyupListenr:M,capture:u}),Ce(i,"keydown",b,u),Ce(i,"keyup",M,u)}if(!fe){const b=()=>{y=[]};fe={listener:b,capture:u},Ce(window,"focus",b,u)}}}function qt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(p).forEach(a=>{p[a].filter(l=>l.scope===t&&l.shortcut===e).forEach(l=>{l&&l.method&&l.method()})})}function ze(e){const t=Object.values(p).flat();if(t.findIndex(n=>{let{element:l}=n;return l===e})<0){const{keydownListener:n,keyupListenr:l,capture:r}=X.get(e)||{};n&&l&&(ie(e,"keyup",l,r),ie(e,"keydown",n,r),X.delete(e))}if((t.length<=0||X.size<=0)&&(Object.keys(X).forEach(l=>{const{keydownListener:r,keyupListenr:i,capture:o}=X.get(l)||{};r&&i&&(ie(l,"keyup",i,o),ie(l,"keydown",r,o),X.delete(l))}),X.clear(),Object.keys(p).forEach(l=>delete p[l]),fe)){const{listener:l,capture:r}=fe;ie(window,"focus",l,r),fe=null}}const Ke={getPressedKeyString:Ut,setScope:tt,getScope:ve,deleteScope:Qt,getPressedKeyCodes:$t,getAllKeyCodes:Wt,isPressed:Gt,filter:Ht,trigger:qt,unbind:nt,keyMap:ge,modifier:F,modifierMap:Be};for(const e in Ke)Object.prototype.hasOwnProperty.call(Ke,e)&&($[e]=Ke[e]);if(typeof window<"u"){const e=window.hotkeys;$.noConflict=t=>(t&&window.hotkeys===$&&(window.hotkeys=e),$),window.hotkeys=$}export{en as E,tn as _,$ as h};
