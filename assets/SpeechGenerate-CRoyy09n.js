import{c3 as C1,c4 as e1,c5 as L1,c6 as a1,c7 as t1,c8 as r1,c9 as n1,ca as Sa,cb as I1,cc as Va,cd as s1,aG as k1,ce as g1,cf as d1,cg as m1,ch as j0,ci as O1,cj as D1,ck as H1,bd as ya,G as $e,cl as X0,cm as aa,cn as N1,O as $0,b6 as Pa,co as V1,au as Ta,d as na,aq as fa,aD as b1,u as wa,a as ra,Z as Ga,c1 as F1,A as G0,q as ta,V as Ua,e as Ze,g as S0,K as E0,h as d0,I as V0,n as l0,Y as N0,r as w0,o as Ea,cp as K0,i as T0,s as Ma,aE as P1,cq as G1,bi as U1,bf as X1,bh as Y1,cr as q1,S as Y0,cs as W1,ap as z1,bI as da,ct as i1,bl as K1,R as j1,aI as $1,be as Z1,bG as ua,bZ as Q1,X as J1,aY as et,b9 as J0,cu as at,bb as p1,b1 as tt,an as rt,b7 as nt,aw as ma,az as st,cv as l1,bT as it,bk as lt,bQ as ot,cw as ut,b8 as _t,b as ft,Q as S1,as as vt,bj as w1,H as U0,cx as ct,f as D0,w as M0,F as _a,l as Fa,t as o1,c as O0,ab as ea,b5 as ht,L as Ha,cy as dt,cz as mt,av as bt,cA as M1,ak as pt,U as St,E as ba,x as wt,j as Mt,y as xt,ah as yt}from"./index-C9HzHbyJ.js";/* empty css                   */import"./el-tooltip-l0sNRNKZ.js";import{t as u1,E as At}from"./el-tag-D8DtC0Fq.js";import{C as Tt}from"./index-CV9thRvz.js";function Et(r,X,Q,V){r.length;for(var oe=Q+1;oe--;)if(X(r[oe],oe,r))return oe;return-1}var Rt="__lodash_hash_undefined__";function Bt(r){return this.__data__.set(r,Rt),this}function Ct(r){return this.__data__.has(r)}function Aa(r){var X=-1,Q=r==null?0:r.length;for(this.__data__=new C1;++X<Q;)this.add(r[X])}Aa.prototype.add=Aa.prototype.push=Bt;Aa.prototype.has=Ct;function Lt(r,X){for(var Q=-1,V=r==null?0:r.length;++Q<V;)if(X(r[Q],Q,r))return!0;return!1}function It(r,X){return r.has(X)}var kt=1,gt=2;function x1(r,X,Q,V,oe,Ae){var d=Q&kt,P=r.length,ue=X.length;if(P!=ue&&!(d&&ue>P))return!1;var ne=Ae.get(r),_e=Ae.get(X);if(ne&&_e)return ne==X&&_e==r;var Ee=-1,fe=!0,pe=Q&gt?new Aa:void 0;for(Ae.set(r,X),Ae.set(X,r);++Ee<P;){var q=r[Ee],Y=X[Ee];if(V)var re=d?V(Y,q,Ee,X,r,Ae):V(q,Y,Ee,r,X,Ae);if(re!==void 0){if(re)continue;fe=!1;break}if(pe){if(!Lt(X,function(Le,j){if(!It(pe,j)&&(q===Le||oe(q,Le,Q,V,Ae)))return pe.push(j)})){fe=!1;break}}else if(!(q===Y||oe(q,Y,Q,V,Ae))){fe=!1;break}}return Ae.delete(r),Ae.delete(X),fe}function Ot(r){var X=-1,Q=Array(r.size);return r.forEach(function(V,oe){Q[++X]=[oe,V]}),Q}function Dt(r){var X=-1,Q=Array(r.size);return r.forEach(function(V){Q[++X]=V}),Q}var Ht=1,Nt=2,Vt="[object Boolean]",Ft="[object Date]",Pt="[object Error]",Gt="[object Map]",Ut="[object Number]",Xt="[object RegExp]",Yt="[object Set]",qt="[object String]",Wt="[object Symbol]",zt="[object ArrayBuffer]",Kt="[object DataView]",_1=e1?e1.prototype:void 0,Na=_1?_1.valueOf:void 0;function jt(r,X,Q,V,oe,Ae,d){switch(Q){case Kt:if(r.byteLength!=X.byteLength||r.byteOffset!=X.byteOffset)return!1;r=r.buffer,X=X.buffer;case zt:return!(r.byteLength!=X.byteLength||!Ae(new a1(r),new a1(X)));case Vt:case Ft:case Ut:return L1(+r,+X);case Pt:return r.name==X.name&&r.message==X.message;case Xt:case qt:return r==X+"";case Gt:var P=Ot;case Yt:var ue=V&Ht;if(P||(P=Dt),r.size!=X.size&&!ue)return!1;var ne=d.get(r);if(ne)return ne==X;V|=Nt,d.set(r,X);var _e=x1(P(r),P(X),V,oe,Ae,d);return d.delete(r),_e;case Wt:if(Na)return Na.call(r)==Na.call(X)}return!1}var $t=1,Zt=Object.prototype,Qt=Zt.hasOwnProperty;function Jt(r,X,Q,V,oe,Ae){var d=Q&$t,P=t1(r),ue=P.length,ne=t1(X),_e=ne.length;if(ue!=_e&&!d)return!1;for(var Ee=ue;Ee--;){var fe=P[Ee];if(!(d?fe in X:Qt.call(X,fe)))return!1}var pe=Ae.get(r),q=Ae.get(X);if(pe&&q)return pe==X&&q==r;var Y=!0;Ae.set(r,X),Ae.set(X,r);for(var re=d;++Ee<ue;){fe=P[Ee];var Le=r[fe],j=X[fe];if(V)var ke=d?V(j,Le,fe,X,r,Ae):V(Le,j,fe,r,X,Ae);if(!(ke===void 0?Le===j||oe(Le,j,Q,V,Ae):ke)){Y=!1;break}re||(re=fe=="constructor")}if(Y&&!re){var De=r.constructor,Ve=X.constructor;De!=Ve&&"constructor"in r&&"constructor"in X&&!(typeof De=="function"&&De instanceof De&&typeof Ve=="function"&&Ve instanceof Ve)&&(Y=!1)}return Ae.delete(r),Ae.delete(X),Y}var er=1,f1="[object Arguments]",v1="[object Array]",pa="[object Object]",ar=Object.prototype,c1=ar.hasOwnProperty;function tr(r,X,Q,V,oe,Ae){var d=Va(r),P=Va(X),ue=d?v1:r1(r),ne=P?v1:r1(X);ue=ue==f1?pa:ue,ne=ne==f1?pa:ne;var _e=ue==pa,Ee=ne==pa,fe=ue==ne;if(fe&&n1(r)){if(!n1(X))return!1;d=!0,_e=!1}if(fe&&!_e)return Ae||(Ae=new Sa),d||I1(r)?x1(r,X,Q,V,oe,Ae):jt(r,X,ue,Q,V,oe,Ae);if(!(Q&er)){var pe=_e&&c1.call(r,"__wrapped__"),q=Ee&&c1.call(X,"__wrapped__");if(pe||q){var Y=pe?r.value():r,re=q?X.value():X;return Ae||(Ae=new Sa),oe(Y,re,Q,V,Ae)}}return fe?(Ae||(Ae=new Sa),Jt(r,X,Q,V,oe,Ae)):!1}function Ra(r,X,Q,V,oe){return r===X?!0:r==null||X==null||!s1(r)&&!s1(X)?r!==r&&X!==X:tr(r,X,Q,V,Ra,oe)}var rr=1,nr=2;function sr(r,X,Q,V){var oe=Q.length,Ae=oe;if(r==null)return!Ae;for(r=Object(r);oe--;){var d=Q[oe];if(d[2]?d[1]!==r[d[0]]:!(d[0]in r))return!1}for(;++oe<Ae;){d=Q[oe];var P=d[0],ue=r[P],ne=d[1];if(d[2]){if(ue===void 0&&!(P in r))return!1}else{var _e=new Sa,Ee;if(!(Ee===void 0?Ra(ne,ue,rr|nr,V,_e):Ee))return!1}}return!0}function y1(r){return r===r&&!k1(r)}function ir(r){for(var X=g1(r),Q=X.length;Q--;){var V=X[Q],oe=r[V];X[Q]=[V,oe,y1(oe)]}return X}function A1(r,X){return function(Q){return Q==null?!1:Q[r]===X&&(X!==void 0||r in Object(Q))}}function lr(r){var X=ir(r);return X.length==1&&X[0][2]?A1(X[0][0],X[0][1]):function(Q){return Q===r||sr(Q,r,X)}}var or=1,ur=2;function _r(r,X){return d1(r)&&y1(X)?A1(m1(r),X):function(Q){var V=j0(Q,r);return V===void 0&&V===X?O1(Q,r):Ra(X,V,or|ur)}}function fr(r){return function(X){return X==null?void 0:X[r]}}function vr(r){return function(X){return D1(X,r)}}function cr(r){return d1(r)?fr(m1(r)):vr(r)}function hr(r){return typeof r=="function"?r:r==null?H1:typeof r=="object"?Va(r)?_r(r[0],r[1]):lr(r):cr(r)}function dr(r,X,Q){var V=r==null?0:r.length;if(!V)return-1;var oe=V-1;return Et(r,hr(X),oe)}function xa(r,X){return Ra(r,X)}const T1=Symbol("ElSelectGroup"),Ba=Symbol("ElSelect");function mr(r,X){const Q=ya(Ba),V=ya(T1,{disabled:!1}),oe=$e(()=>_e(X0(Q.props.modelValue),r.value)),Ae=$e(()=>{var pe;if(Q.props.multiple){const q=X0((pe=Q.props.modelValue)!=null?pe:[]);return!oe.value&&q.length>=Q.props.multipleLimit&&Q.props.multipleLimit>0}else return!1}),d=$e(()=>r.label||(aa(r.value)?"":r.value)),P=$e(()=>r.value||r.label||""),ue=$e(()=>r.disabled||X.groupDisabled||Ae.value),ne=Pa(),_e=(pe=[],q)=>{if(aa(r.value)){const Y=Q.props.valueKey;return pe&&pe.some(re=>N1(j0(re,Y))===j0(q,Y))}else return pe&&pe.includes(q)},Ee=()=>{!r.disabled&&!V.disabled&&(Q.states.hoveringIndex=Q.optionsArray.indexOf(ne.proxy))},fe=pe=>{const q=new RegExp(V1(pe),"i");X.visible=q.test(d.value)||r.created};return $0(()=>d.value,()=>{!r.created&&!Q.props.remote&&Q.setSelected()}),$0(()=>r.value,(pe,q)=>{const{remote:Y,valueKey:re}=Q.props;if(pe!==q&&(Q.onOptionDestroy(q,ne.proxy),Q.onOptionCreate(ne.proxy)),!r.created&&!Y){if(re&&aa(pe)&&aa(q)&&pe[re]===q[re])return;Q.setSelected()}}),$0(()=>V.disabled,()=>{X.groupDisabled=V.disabled},{immediate:!0}),{select:Q,currentLabel:d,currentValue:P,itemSelected:oe,isDisabled:ue,hoverItem:Ee,updateOption:fe}}const br=na({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(r){const X=fa("select"),Q=b1(),V=$e(()=>[X.be("dropdown","item"),X.is("disabled",wa(P)),X.is("selected",wa(d)),X.is("hovering",wa(fe))]),oe=ra({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:Ae,itemSelected:d,isDisabled:P,select:ue,hoverItem:ne,updateOption:_e}=mr(r,oe),{visible:Ee,hover:fe}=Ga(oe),pe=Pa().proxy;ue.onOptionCreate(pe),F1(()=>{const Y=pe.value,{selected:re}=ue.states,Le=re.some(j=>j.value===pe.value);G0(()=>{ue.states.cachedOptions.get(Y)===pe&&!Le&&ue.states.cachedOptions.delete(Y)}),ue.onOptionDestroy(Y,pe)});function q(){P.value||ue.handleOptionSelect(pe)}return{ns:X,id:Q,containerKls:V,currentLabel:Ae,itemSelected:d,isDisabled:P,select:ue,hoverItem:ne,updateOption:_e,visible:Ee,hover:fe,selectOptionClick:q,states:oe}}});function pr(r,X,Q,V,oe,Ae){return ta((Ze(),S0("li",{id:r.id,class:l0(r.containerKls),role:"option","aria-disabled":r.isDisabled||void 0,"aria-selected":r.itemSelected,onMousemove:r.hoverItem,onClick:N0(r.selectOptionClick,["stop"])},[E0(r.$slots,"default",{},()=>[d0("span",null,V0(r.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[Ua,r.visible]])}var Xa=Ta(br,[["render",pr],["__file","option.vue"]]);const Sr=na({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const r=ya(Ba),X=fa("select"),Q=$e(()=>r.props.popperClass),V=$e(()=>r.props.multiple),oe=$e(()=>r.props.fitInputWidth),Ae=w0("");function d(){var P;Ae.value=`${(P=r.selectRef)==null?void 0:P.offsetWidth}px`}return Ea(()=>{d(),K0(r.selectRef,d)}),{ns:X,minWidth:Ae,popperClass:Q,isMultiple:V,isFitInputWidth:oe}}});function wr(r,X,Q,V,oe,Ae){return Ze(),S0("div",{class:l0([r.ns.b("dropdown"),r.ns.is("multiple",r.isMultiple),r.popperClass]),style:Ma({[r.isFitInputWidth?"width":"minWidth"]:r.minWidth})},[r.$slots.header?(Ze(),S0("div",{key:0,class:l0(r.ns.be("dropdown","header"))},[E0(r.$slots,"header")],2)):T0("v-if",!0),E0(r.$slots,"default"),r.$slots.footer?(Ze(),S0("div",{key:1,class:l0(r.ns.be("dropdown","footer"))},[E0(r.$slots,"footer")],2)):T0("v-if",!0)],6)}var Mr=Ta(Sr,[["render",wr],["__file","select-dropdown.vue"]]);const xr=11,yr=(r,X)=>{const{t:Q}=P1(),V=b1(),oe=fa("select"),Ae=fa("input"),d=ra({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),P=w0(null),ue=w0(null),ne=w0(null),_e=w0(null),Ee=w0(null),fe=w0(null),pe=w0(null),q=w0(null),Y=w0(null),re=w0(null),Le=w0(null),j=w0(null),{isComposing:ke,handleCompositionStart:De,handleCompositionUpdate:Ve,handleCompositionEnd:Fe}=G1({afterComposition:M=>$(M)}),{wrapperRef:o0,isFocused:Ye,handleBlur:v0}=U1(Ee,{beforeFocus(){return m0.value},afterFocus(){r.automaticDropdown&&!ge.value&&(ge.value=!0,d.menuVisibleOnFocus=!0)},beforeBlur(M){var W,ve;return((W=ne.value)==null?void 0:W.isFocusInsideContent(M))||((ve=_e.value)==null?void 0:ve.isFocusInsideContent(M))},afterBlur(){ge.value=!1,d.menuVisibleOnFocus=!1}}),ge=w0(!1),Me=w0(),{form:N,formItem:u0}=X1(),{inputId:Xe}=Y1(r,{formItemContext:u0}),{valueOnClear:qe,isEmptyValue:R0}=q1(r),m0=$e(()=>r.disabled||(N==null?void 0:N.disabled)),B0=$e(()=>Y0(r.modelValue)?r.modelValue.length>0:!R0(r.modelValue)),x0=$e(()=>{var M;return(M=N==null?void 0:N.statusIcon)!=null?M:!1}),n0=$e(()=>r.clearable&&!m0.value&&d.inputHovering&&B0.value),Je=$e(()=>r.remote&&r.filterable&&!r.remoteShowSuffix?"":r.suffixIcon),I0=$e(()=>oe.is("reverse",Je.value&&ge.value)),b0=$e(()=>(u0==null?void 0:u0.validateState)||""),me=$e(()=>W1[b0.value]),Z0=$e(()=>r.remote?300:0),S=$e(()=>r.loading?r.loadingText||Q("el.select.loading"):r.remote&&!d.inputValue&&d.options.size===0?!1:r.filterable&&d.inputValue&&d.options.size>0&&E.value===0?r.noMatchText||Q("el.select.noMatch"):d.options.size===0?r.noDataText||Q("el.select.noData"):null),E=$e(()=>t.value.filter(M=>M.visible).length),t=$e(()=>{const M=Array.from(d.options.values()),W=[];return d.optionValues.forEach(ve=>{const xe=M.findIndex(We=>We.value===ve);xe>-1&&W.push(M[xe])}),W.length>=M.length?W:M}),D=$e(()=>Array.from(d.cachedOptions.values())),Z=$e(()=>{const M=t.value.filter(W=>!W.created).some(W=>W.currentLabel===d.inputValue);return r.filterable&&r.allowCreate&&d.inputValue!==""&&!M}),le=()=>{r.filterable&&ua(r.filterMethod)||r.filterable&&r.remote&&ua(r.remoteMethod)||t.value.forEach(M=>{var W;(W=M.updateOption)==null||W.call(M,d.inputValue)})},se=z1(),Te=$e(()=>["small"].includes(se.value)?"small":"default"),Re=$e({get(){return ge.value&&S.value!==!1},set(M){ge.value=M}}),Be=$e(()=>{if(r.multiple&&!da(r.modelValue))return X0(r.modelValue).length===0&&!d.inputValue;const M=Y0(r.modelValue)?r.modelValue[0]:r.modelValue;return r.filterable||da(M)?!d.inputValue:!0}),be=$e(()=>{var M;const W=(M=r.placeholder)!=null?M:Q("el.select.placeholder");return r.multiple||!B0.value?W:d.selectedLabel}),s0=$e(()=>i1?null:"mouseenter");$0(()=>r.modelValue,(M,W)=>{r.multiple&&r.filterable&&!r.reserveKeyword&&(d.inputValue="",He("")),Ie(),!xa(M,W)&&r.validateEvent&&(u0==null||u0.validate("change").catch(ve=>K1()))},{flush:"post",deep:!0}),$0(()=>ge.value,M=>{M?He(d.inputValue):(d.inputValue="",d.previousQuery=null,d.isBeforeHide=!0),X("visible-change",M)}),$0(()=>d.options.entries(),()=>{j1&&(Ie(),r.defaultFirstOption&&(r.filterable||r.remote)&&E.value&&Ue())},{flush:"post"}),$0(()=>d.hoveringIndex,M=>{$1(M)&&M>-1?Me.value=t.value[M]||{}:Me.value={},t.value.forEach(W=>{W.hover=Me.value===W})}),Z1(()=>{d.isBeforeHide||le()});const He=M=>{d.previousQuery===M||ke.value||(d.previousQuery=M,r.filterable&&ua(r.filterMethod)?r.filterMethod(M):r.filterable&&r.remote&&ua(r.remoteMethod)&&r.remoteMethod(M),r.defaultFirstOption&&(r.filterable||r.remote)&&E.value?G0(Ue):G0(c))},Ue=()=>{const M=t.value.filter(We=>We.visible&&!We.disabled&&!We.states.groupDisabled),W=M.find(We=>We.created),ve=M[0],xe=t.value.map(We=>We.value);d.hoveringIndex=l(xe,W||ve)},Ie=()=>{if(r.multiple)d.selectedLabel="";else{const W=Y0(r.modelValue)?r.modelValue[0]:r.modelValue,ve=Ke(W);d.selectedLabel=ve.currentLabel,d.selected=[ve];return}const M=[];da(r.modelValue)||X0(r.modelValue).forEach(W=>{M.push(Ke(W))}),d.selected=M},Ke=M=>{let W;const ve=Q1(M);for(let a0=d.cachedOptions.size-1;a0>=0;a0--){const je=D.value[a0];if(ve?j0(je.value,r.valueKey)===j0(M,r.valueKey):je.value===M){W={value:M,currentLabel:je.currentLabel,get isDisabled(){return je.isDisabled}};break}}if(W)return W;const xe=ve?M.label:M??"";return{value:M,currentLabel:xe}},c=()=>{d.hoveringIndex=t.value.findIndex(M=>d.selected.some(W=>b(W)===b(M)))},g=()=>{d.selectionWidth=ue.value.getBoundingClientRect().width},H=()=>{d.calculatorWidth=fe.value.getBoundingClientRect().width},y=()=>{d.collapseItemWidth=Le.value.getBoundingClientRect().width},ae=()=>{var M,W;(W=(M=ne.value)==null?void 0:M.updatePopper)==null||W.call(M)},p=()=>{var M,W;(W=(M=_e.value)==null?void 0:M.updatePopper)==null||W.call(M)},T=()=>{d.inputValue.length>0&&!ge.value&&(ge.value=!0),He(d.inputValue)},$=M=>{if(d.inputValue=M.target.value,r.remote)I();else return T()},I=J1(()=>{T()},Z0.value),K=M=>{xa(r.modelValue,M)||X(p1,M)},x=M=>dr(M,W=>{const ve=d.cachedOptions.get(W);return ve&&!ve.disabled&&!ve.states.groupDisabled}),J=M=>{if(r.multiple&&M.code!==et.delete&&M.target.value.length<=0){const W=X0(r.modelValue).slice(),ve=x(W);if(ve<0)return;const xe=W[ve];W.splice(ve,1),X(J0,W),K(W),X("remove-tag",xe)}},R=(M,W)=>{const ve=d.selected.indexOf(W);if(ve>-1&&!m0.value){const xe=X0(r.modelValue).slice();xe.splice(ve,1),X(J0,xe),K(xe),X("remove-tag",W.value)}M.stopPropagation(),i()},A=M=>{M.stopPropagation();const W=r.multiple?[]:qe.value;if(r.multiple)for(const ve of d.selected)ve.isDisabled&&W.push(ve.value);X(J0,W),K(W),d.hoveringIndex=-1,ge.value=!1,X("clear"),i()},e=M=>{var W;if(r.multiple){const ve=X0((W=r.modelValue)!=null?W:[]).slice(),xe=l(ve,M);xe>-1?ve.splice(xe,1):(r.multipleLimit<=0||ve.length<r.multipleLimit)&&ve.push(M.value),X(J0,ve),K(ve),M.created&&He(""),r.filterable&&!r.reserveKeyword&&(d.inputValue="")}else X(J0,M.value),K(M.value),ge.value=!1;i(),!ge.value&&G0(()=>{m(M)})},l=(M=[],W)=>da(W)?-1:aa(W.value)?M.findIndex(ve=>xa(j0(ve,r.valueKey),b(W))):M.indexOf(W.value),m=M=>{var W,ve,xe,We,a0;const je=Y0(M)?M[0]:M;let t0=null;if(je!=null&&je.value){const h0=t.value.filter(H0=>H0.value===je.value);h0.length>0&&(t0=h0[0].$el)}if(ne.value&&t0){const h0=(We=(xe=(ve=(W=ne.value)==null?void 0:W.popperRef)==null?void 0:ve.contentRef)==null?void 0:xe.querySelector)==null?void 0:We.call(xe,`.${oe.be("dropdown","wrap")}`);h0&&at(h0,t0)}(a0=j.value)==null||a0.handleScroll()},C=M=>{d.options.set(M.value,M),d.cachedOptions.set(M.value,M)},h=(M,W)=>{d.options.get(M)===W&&d.options.delete(M)},o=$e(()=>{var M,W;return(W=(M=ne.value)==null?void 0:M.popperRef)==null?void 0:W.contentRef}),f=()=>{d.isBeforeHide=!1,G0(()=>m(d.selected))},i=()=>{var M;(M=Ee.value)==null||M.focus()},w=()=>{var M;if(ge.value){ge.value=!1,G0(()=>{var W;return(W=Ee.value)==null?void 0:W.blur()});return}(M=Ee.value)==null||M.blur()},n=M=>{A(M)},O=M=>{if(ge.value=!1,Ye.value){const W=new FocusEvent("focus",M);G0(()=>v0(W))}},u=()=>{d.inputValue.length>0?d.inputValue="":ge.value=!1},_=()=>{m0.value||(i1&&(d.inputHovering=!0),d.menuVisibleOnFocus?d.menuVisibleOnFocus=!1:ge.value=!ge.value)},v=()=>{if(!ge.value)_();else{const M=t.value[d.hoveringIndex];M&&!M.isDisabled&&e(M)}},b=M=>aa(M.value)?j0(M.value,r.valueKey):M.value,B=$e(()=>t.value.filter(M=>M.visible).every(M=>M.isDisabled)),a=$e(()=>r.multiple?r.collapseTags?d.selected.slice(0,r.maxCollapseTags):d.selected:[]),s=$e(()=>r.multiple?r.collapseTags?d.selected.slice(r.maxCollapseTags):[]:[]),G=M=>{if(!ge.value){ge.value=!0;return}if(!(d.options.size===0||E.value===0||ke.value)&&!B.value){M==="next"?(d.hoveringIndex++,d.hoveringIndex===d.options.size&&(d.hoveringIndex=0)):M==="prev"&&(d.hoveringIndex--,d.hoveringIndex<0&&(d.hoveringIndex=d.options.size-1));const W=t.value[d.hoveringIndex];(W.isDisabled||!W.visible)&&G(M),G0(()=>m(Me.value))}},L=()=>{if(!ue.value)return 0;const M=window.getComputedStyle(ue.value);return Number.parseFloat(M.gap||"6px")},F=$e(()=>{const M=L();return{maxWidth:`${Le.value&&r.maxCollapseTags===1?d.selectionWidth-d.collapseItemWidth-M:d.selectionWidth}px`}}),ee=$e(()=>({maxWidth:`${d.selectionWidth}px`})),ie=$e(()=>({width:`${Math.max(d.calculatorWidth,xr)}px`}));return K0(ue,g),K0(fe,H),K0(Y,ae),K0(o0,ae),K0(re,p),K0(Le,y),Ea(()=>{Ie()}),{inputId:Xe,contentId:V,nsSelect:oe,nsInput:Ae,states:d,isFocused:Ye,expanded:ge,optionsArray:t,hoverOption:Me,selectSize:se,filteredOptionsCount:E,resetCalculatorWidth:H,updateTooltip:ae,updateTagTooltip:p,debouncedOnInputChange:I,onInput:$,deletePrevTag:J,deleteTag:R,deleteSelected:A,handleOptionSelect:e,scrollToOption:m,hasModelValue:B0,shouldShowPlaceholder:Be,currentPlaceholder:be,mouseEnterEventName:s0,needStatusIcon:x0,showClose:n0,iconComponent:Je,iconReverse:I0,validateState:b0,validateIcon:me,showNewOption:Z,updateOptions:le,collapseTagSize:Te,setSelected:Ie,selectDisabled:m0,emptyText:S,handleCompositionStart:De,handleCompositionUpdate:Ve,handleCompositionEnd:Fe,onOptionCreate:C,onOptionDestroy:h,handleMenuEnter:f,focus:i,blur:w,handleClearClick:n,handleClickOutside:O,handleEsc:u,toggleMenu:_,selectOption:v,getValueKey:b,navigateOptions:G,dropdownMenuVisible:Re,showTagList:a,collapseTagList:s,tagStyle:F,collapseTagStyle:ee,inputStyle:ie,popperRef:o,inputRef:Ee,tooltipRef:ne,tagTooltipRef:_e,calculatorRef:fe,prefixRef:pe,suffixRef:q,selectRef:P,wrapperRef:o0,selectionRef:ue,scrollbarRef:j,menuRef:Y,tagMenuRef:re,collapseItemRef:Le}};var Ar=na({name:"ElOptions",setup(r,{slots:X}){const Q=ya(Ba);let V=[];return()=>{var oe,Ae;const d=(oe=X.default)==null?void 0:oe.call(X),P=[];function ue(ne){Y0(ne)&&ne.forEach(_e=>{var Ee,fe,pe,q;const Y=(Ee=(_e==null?void 0:_e.type)||{})==null?void 0:Ee.name;Y==="ElOptionGroup"?ue(!tt(_e.children)&&!Y0(_e.children)&&ua((fe=_e.children)==null?void 0:fe.default)?(pe=_e.children)==null?void 0:pe.default():_e.children):Y==="ElOption"?P.push((q=_e.props)==null?void 0:q.value):Y0(_e.children)&&ue(_e.children)})}return d.length&&ue((Ae=d[0])==null?void 0:Ae.children),xa(P,V)||(V=P,Q&&(Q.states.optionValues=P)),d}}});const Tr=rt({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:nt,effect:{type:ma(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:ma(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:st.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:l1,default:it},fitInputWidth:Boolean,suffixIcon:{type:l1,default:lt},tagType:{...u1.type,default:"info"},tagEffect:{...u1.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:ma(String),values:ot,default:"bottom-start"},fallbackPlacements:{type:ma(Array),default:["bottom-start","top-start","right","left"]},tabindex:{type:[String,Number],default:0},appendTo:String,...ut,..._t(["ariaLabel"])}),h1="ElSelect",Er=na({name:h1,componentName:h1,components:{ElSelectMenu:Mr,ElOption:Xa,ElOptions:Ar,ElTag:At,ElScrollbar:ft,ElTooltip:S1,ElIcon:vt},directives:{ClickOutside:Tt},props:Tr,emits:[J0,p1,"remove-tag","clear","visible-change","focus","blur"],setup(r,{emit:X}){const Q=$e(()=>{const{modelValue:d,multiple:P}=r,ue=P?[]:void 0;return Y0(d)?P?d:ue:P?ue:d}),V=ra({...Ga(r),modelValue:Q}),oe=yr(V,X);w1(Ba,ra({props:V,states:oe.states,optionsArray:oe.optionsArray,handleOptionSelect:oe.handleOptionSelect,onOptionCreate:oe.onOptionCreate,onOptionDestroy:oe.onOptionDestroy,selectRef:oe.selectRef,setSelected:oe.setSelected}));const Ae=$e(()=>r.multiple?oe.states.selected.map(d=>d.currentLabel):oe.states.selectedLabel);return{...oe,modelValue:Q,selectedLabel:Ae}}});function Rr(r,X,Q,V,oe,Ae){const d=U0("el-tag"),P=U0("el-tooltip"),ue=U0("el-icon"),ne=U0("el-option"),_e=U0("el-options"),Ee=U0("el-scrollbar"),fe=U0("el-select-menu"),pe=ct("click-outside");return ta((Ze(),S0("div",{ref:"selectRef",class:l0([r.nsSelect.b(),r.nsSelect.m(r.selectSize)]),[dt(r.mouseEnterEventName)]:q=>r.states.inputHovering=!0,onMouseleave:q=>r.states.inputHovering=!1},[D0(P,{ref:"tooltipRef",visible:r.dropdownMenuVisible,placement:r.placement,teleported:r.teleported,"popper-class":[r.nsSelect.e("popper"),r.popperClass],"popper-options":r.popperOptions,"fallback-placements":r.fallbackPlacements,effect:r.effect,pure:"",trigger:"click",transition:`${r.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:r.persistent,"append-to":r.appendTo,"show-arrow":r.showArrow,offset:r.offset,onBeforeShow:r.handleMenuEnter,onHide:q=>r.states.isBeforeHide=!1},{default:M0(()=>{var q;return[d0("div",{ref:"wrapperRef",class:l0([r.nsSelect.e("wrapper"),r.nsSelect.is("focused",r.isFocused),r.nsSelect.is("hovering",r.states.inputHovering),r.nsSelect.is("filterable",r.filterable),r.nsSelect.is("disabled",r.selectDisabled)]),onClick:N0(r.toggleMenu,["prevent"])},[r.$slots.prefix?(Ze(),S0("div",{key:0,ref:"prefixRef",class:l0(r.nsSelect.e("prefix"))},[E0(r.$slots,"prefix")],2)):T0("v-if",!0),d0("div",{ref:"selectionRef",class:l0([r.nsSelect.e("selection"),r.nsSelect.is("near",r.multiple&&!r.$slots.prefix&&!!r.states.selected.length)])},[r.multiple?E0(r.$slots,"tag",{key:0},()=>[(Ze(!0),S0(_a,null,Fa(r.showTagList,Y=>(Ze(),S0("div",{key:r.getValueKey(Y),class:l0(r.nsSelect.e("selected-item"))},[D0(d,{closable:!r.selectDisabled&&!Y.isDisabled,size:r.collapseTagSize,type:r.tagType,effect:r.tagEffect,"disable-transitions":"",style:Ma(r.tagStyle),onClose:re=>r.deleteTag(re,Y)},{default:M0(()=>[d0("span",{class:l0(r.nsSelect.e("tags-text"))},[E0(r.$slots,"label",{label:Y.currentLabel,value:Y.value},()=>[o1(V0(Y.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),r.collapseTags&&r.states.selected.length>r.maxCollapseTags?(Ze(),O0(P,{key:0,ref:"tagTooltipRef",disabled:r.dropdownMenuVisible||!r.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:r.effect,placement:"bottom",teleported:r.teleported},{default:M0(()=>[d0("div",{ref:"collapseItemRef",class:l0(r.nsSelect.e("selected-item"))},[D0(d,{closable:!1,size:r.collapseTagSize,type:r.tagType,effect:r.tagEffect,"disable-transitions":"",style:Ma(r.collapseTagStyle)},{default:M0(()=>[d0("span",{class:l0(r.nsSelect.e("tags-text"))}," + "+V0(r.states.selected.length-r.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:M0(()=>[d0("div",{ref:"tagMenuRef",class:l0(r.nsSelect.e("selection"))},[(Ze(!0),S0(_a,null,Fa(r.collapseTagList,Y=>(Ze(),S0("div",{key:r.getValueKey(Y),class:l0(r.nsSelect.e("selected-item"))},[D0(d,{class:"in-tooltip",closable:!r.selectDisabled&&!Y.isDisabled,size:r.collapseTagSize,type:r.tagType,effect:r.tagEffect,"disable-transitions":"",onClose:re=>r.deleteTag(re,Y)},{default:M0(()=>[d0("span",{class:l0(r.nsSelect.e("tags-text"))},[E0(r.$slots,"label",{label:Y.currentLabel,value:Y.value},()=>[o1(V0(Y.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):T0("v-if",!0)]):T0("v-if",!0),d0("div",{class:l0([r.nsSelect.e("selected-item"),r.nsSelect.e("input-wrapper"),r.nsSelect.is("hidden",!r.filterable)])},[ta(d0("input",{id:r.inputId,ref:"inputRef","onUpdate:modelValue":Y=>r.states.inputValue=Y,type:"text",name:r.name,class:l0([r.nsSelect.e("input"),r.nsSelect.is(r.selectSize)]),disabled:r.selectDisabled,autocomplete:r.autocomplete,style:Ma(r.inputStyle),tabindex:r.tabindex,role:"combobox",readonly:!r.filterable,spellcheck:"false","aria-activedescendant":((q=r.hoverOption)==null?void 0:q.id)||"","aria-controls":r.contentId,"aria-expanded":r.dropdownMenuVisible,"aria-label":r.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[ea(N0(Y=>r.navigateOptions("next"),["stop","prevent"]),["down"]),ea(N0(Y=>r.navigateOptions("prev"),["stop","prevent"]),["up"]),ea(N0(r.handleEsc,["stop","prevent"]),["esc"]),ea(N0(r.selectOption,["stop","prevent"]),["enter"]),ea(N0(r.deletePrevTag,["stop"]),["delete"])],onCompositionstart:r.handleCompositionStart,onCompositionupdate:r.handleCompositionUpdate,onCompositionend:r.handleCompositionEnd,onInput:r.onInput,onClick:N0(r.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","tabindex","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[ht,r.states.inputValue]]),r.filterable?(Ze(),S0("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:l0(r.nsSelect.e("input-calculator")),textContent:V0(r.states.inputValue)},null,10,["textContent"])):T0("v-if",!0)],2),r.shouldShowPlaceholder?(Ze(),S0("div",{key:1,class:l0([r.nsSelect.e("selected-item"),r.nsSelect.e("placeholder"),r.nsSelect.is("transparent",!r.hasModelValue||r.expanded&&!r.states.inputValue)])},[r.hasModelValue?E0(r.$slots,"label",{key:0,label:r.currentPlaceholder,value:r.modelValue},()=>[d0("span",null,V0(r.currentPlaceholder),1)]):(Ze(),S0("span",{key:1},V0(r.currentPlaceholder),1))],2)):T0("v-if",!0)],2),d0("div",{ref:"suffixRef",class:l0(r.nsSelect.e("suffix"))},[r.iconComponent&&!r.showClose?(Ze(),O0(ue,{key:0,class:l0([r.nsSelect.e("caret"),r.nsSelect.e("icon"),r.iconReverse])},{default:M0(()=>[(Ze(),O0(Ha(r.iconComponent)))]),_:1},8,["class"])):T0("v-if",!0),r.showClose&&r.clearIcon?(Ze(),O0(ue,{key:1,class:l0([r.nsSelect.e("caret"),r.nsSelect.e("icon"),r.nsSelect.e("clear")]),onClick:r.handleClearClick},{default:M0(()=>[(Ze(),O0(Ha(r.clearIcon)))]),_:1},8,["class","onClick"])):T0("v-if",!0),r.validateState&&r.validateIcon&&r.needStatusIcon?(Ze(),O0(ue,{key:2,class:l0([r.nsInput.e("icon"),r.nsInput.e("validateIcon")])},{default:M0(()=>[(Ze(),O0(Ha(r.validateIcon)))]),_:1},8,["class"])):T0("v-if",!0)],2)],10,["onClick"])]}),content:M0(()=>[D0(fe,{ref:"menuRef"},{default:M0(()=>[r.$slots.header?(Ze(),S0("div",{key:0,class:l0(r.nsSelect.be("dropdown","header")),onClick:N0(()=>{},["stop"])},[E0(r.$slots,"header")],10,["onClick"])):T0("v-if",!0),ta(D0(Ee,{id:r.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":r.nsSelect.be("dropdown","wrap"),"view-class":r.nsSelect.be("dropdown","list"),class:l0([r.nsSelect.is("empty",r.filteredOptionsCount===0)]),role:"listbox","aria-label":r.ariaLabel,"aria-orientation":"vertical"},{default:M0(()=>[r.showNewOption?(Ze(),O0(ne,{key:0,value:r.states.inputValue,created:!0},null,8,["value"])):T0("v-if",!0),D0(_e,null,{default:M0(()=>[E0(r.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[Ua,r.states.options.size>0&&!r.loading]]),r.$slots.loading&&r.loading?(Ze(),S0("div",{key:1,class:l0(r.nsSelect.be("dropdown","loading"))},[E0(r.$slots,"loading")],2)):r.loading||r.filteredOptionsCount===0?(Ze(),S0("div",{key:2,class:l0(r.nsSelect.be("dropdown","empty"))},[E0(r.$slots,"empty",{},()=>[d0("span",null,V0(r.emptyText),1)])],2)):T0("v-if",!0),r.$slots.footer?(Ze(),S0("div",{key:3,class:l0(r.nsSelect.be("dropdown","footer")),onClick:N0(()=>{},["stop"])},[E0(r.$slots,"footer")],10,["onClick"])):T0("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[pe,r.handleClickOutside,r.popperRef]])}var Br=Ta(Er,[["render",Rr],["__file","select.vue"]]);const Cr=na({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(r){const X=fa("select"),Q=w0(null),V=Pa(),oe=w0([]);w1(T1,ra({...Ga(r)}));const Ae=$e(()=>oe.value.some(ne=>ne.visible===!0)),d=ne=>{var _e,Ee;return((_e=ne.type)==null?void 0:_e.name)==="ElOption"&&!!((Ee=ne.component)!=null&&Ee.proxy)},P=ne=>{const _e=X0(ne),Ee=[];return _e.forEach(fe=>{var pe,q;d(fe)?Ee.push(fe.component.proxy):(pe=fe.children)!=null&&pe.length?Ee.push(...P(fe.children)):(q=fe.component)!=null&&q.subTree&&Ee.push(...P(fe.component.subTree))}),Ee},ue=()=>{oe.value=P(V.subTree)};return Ea(()=>{ue()}),mt(Q,ue,{attributes:!0,subtree:!0,childList:!0}),{groupRef:Q,visible:Ae,ns:X}}});function Lr(r,X,Q,V,oe,Ae){return ta((Ze(),S0("ul",{ref:"groupRef",class:l0(r.ns.be("group","wrap"))},[d0("li",{class:l0(r.ns.be("group","title"))},V0(r.label),3),d0("li",null,[d0("ul",{class:l0(r.ns.b("group"))},[E0(r.$slots,"default")],2)])],2)),[[Ua,r.visible]])}var E1=Ta(Cr,[["render",Lr],["__file","option-group.vue"]]);const Ir=bt(Br,{Option:Xa,OptionGroup:E1}),kr=M1(Xa);M1(E1);var R1={exports:{}};(function(r){(function(X){var Q=typeof window=="object"&&!!window.document,V=Q?window:Object;X(V,Q),r.exports&&(r.exports=V.Recorder)})(function(X,Q){var V=function(){},oe=function(S){return typeof S=="number"},Ae=function(S){return JSON.stringify(S)},d=function(S){return new m0(S)},P=d.LM="2024-10-20 22:15",ue="https://github.com/xiangyuecn/Recorder",ne="Recorder",_e="getUserMedia",Ee="srcSampleRate",fe="sampleRate",pe="bitRate",q="catch",Y=X[ne];if(Y&&Y.LM==P){Y.CLog(Y.i18n.$T("K8zP::重复导入{1}",0,ne),3);return}d.IsOpen=function(){var S=d.Stream;if(S){var E=u0(S),t=E[0];if(t){var D=t.readyState;return D=="live"||D==t.LIVE}}return!1},d.BufferSize=4096,d.Destroy=function(){Xe(ne+" Destroy"),Me();for(var S in re)re[S]()};var re={};d.BindDestroy=function(S,E){re[S]=E},d.Support=function(){if(!Q)return!1;var S=navigator.mediaDevices||{};return S[_e]||(S=navigator,S[_e]||(S[_e]=S.webkitGetUserMedia||S.mozGetUserMedia||S.msGetUserMedia)),!(!S[_e]||(d.Scope=S,!d.GetContext()))},d.GetContext=function(S){if(!Q)return null;var E=window.AudioContext;if(E||(E=window.webkitAudioContext),!E)return null;var t=d.Ctx,D=0;return t||(t=d.Ctx=new E,D=1,d.NewCtxs=d.NewCtxs||[],d.BindDestroy("Ctx",function(){var Z=d.Ctx;Z&&Z.close&&(Le(Z),d.Ctx=0);var le=d.NewCtxs;d.NewCtxs=[];for(var se=0;se<le.length;se++)Le(le[se])})),S&&t.close&&(D||(t._useC||Le(t),t=new E),t._useC=1,d.NewCtxs.push(t)),t},d.CloseNewCtx=function(S){if(S&&S.close){Le(S);for(var E=d.NewCtxs||[],t=E.length,D=0;D<E.length;D++)if(E[D]==S){E.splice(D,1);break}Xe(me("mSxV::剩{1}个GetContext未close",0,t+"-1="+E.length),E.length?3:0)}};var Le=function(S){if(S&&S.close&&!S._isC&&(S._isC=1,S.state!="closed"))try{S.close()}catch(E){Xe("ctx close err",1,E)}},j=d.ResumeCtx=function(S,E,t,D){var Z=0,le=0,se=0,Te=0,Re="EventListener",Be="ResumeCtx ",be=function(Ue,Ie){le&&s0(),Z||(Z=1,Ue&&D(Ue,Te),Ie&&t(Te)),Ie&&(!S._LsSC&&S["add"+Re]&&S["add"+Re]("statechange",He),S._LsSC=1,se=1)},s0=function(Ue){if(!(Ue&&le)){le=Ue?1:0;for(var Ie=["focus","mousedown","mouseup","touchstart","touchend"],Ke=0;Ke<Ie.length;Ke++)window[(Ue?"add":"remove")+Re](Ie[Ke],He,!0)}},He=function(){var Ue=S.state,Ie=ke(Ue);if(!Z&&!E(Ie?++Te:Te))return be();Ie?(se&&Xe(Be+"sc "+Ue,3),s0(1),S.resume().then(function(){se&&Xe(Be+"sc "+S.state),be(0,1)})[q](function(Ke){Xe(Be+"error",1,Ke),ke(S.state)||be(Ke.message||"error")})):Ue=="closed"?(se&&!S._isC&&Xe(Be+"sc "+Ue,1),be("ctx closed")):be(0,1)};He()},ke=d.CtxSpEnd=function(S){return S=="suspended"||S=="interrupted"},De=function(S){var E=S.state,t="ctx.state="+E;return ke(E)&&(t+=me("nMIy::（注意：ctx不是running状态，rec.open和start至少要有一个在用户操作(触摸、点击等)时进行调用，否则将在rec.start时尝试进行ctx.resume，可能会产生兼容性问题(仅iOS)，请参阅文档中runningContext配置）")),t},Ve="ConnectEnableWebM";d[Ve]=!0;var Fe="ConnectEnableWorklet";d[Fe]=!1;var o0=function(S){var E=S.BufferSize||d.BufferSize,t=S.Stream,D=t._c,Z=D[fe],le={},se=u0(t),Te=se[0],Re=null,Be="";if(Te&&Te.getSettings){Re=Te.getSettings();var be=Re[fe];be&&be!=Z&&(Be=me("eS8i::Stream的采样率{1}不等于{2}，将进行采样率转换（注意：音质不会变好甚至可能变差），主要在移动端未禁用回声消除时会产生此现象，浏览器有回声消除时可能只会返回16k采样率的音频数据，",0,be,Z))}t._ts=Re,Xe(Be+"Stream TrackSet: "+Ae(Re),Be?3:0);var s0=function(A){var e=t._m=D.createMediaStreamSource(t),l=D.destination,m="createMediaStreamDestination";D[m]&&(l=t._d=D[m]()),e.connect(A),A.connect(l)},He,Ue,Ie,Ke="",c=t._call,g=function(A,e){for(var l in c){if(e!=Z){le.index=0,le=d.SampleData([A],e,Z,le,{_sum:1});var m=le.data,C=le._sum}else{le={};for(var h=A.length,m=new Int16Array(h),C=0,o=0;o<h;o++){var f=Math.max(-1,Math.min(1,A[o]));f=f<0?f*32768:f*32767,m[o]=f,C+=Math.abs(f)}}for(var i in c)c[i](m,C);return}},H="ScriptProcessor",y="audioWorklet",ae=ne+" "+y,p="RecProc",T="MediaRecorder",$=T+".WebM.PCM",I=D.createScriptProcessor||D.createJavaScriptNode,K=me("ZGlf::。由于{1}内部1秒375次回调，在移动端可能会有性能问题导致回调丢失录音变短，PC端无影响，暂不建议开启{1}。",0,y),x=function(){Ue=t.isWorklet=!1,v0(t),Xe(me("7TU0::Connect采用老的{1}，",0,H)+b0.get(d[Fe]?me("JwCL::但已设置{1}尝试启用{2}",2):me("VGjB::可设置{1}尝试启用{2}",2),[ne+"."+Fe+"=true",y])+Ke+K,3);var A=t._p=I.call(D,E,1,1);s0(A),A.onaudioprocess=function(e){var l=e.inputBuffer.getChannelData(0);g(l,Z)}},J=function(){He=t.isWebM=!1,ge(t),Ue=t.isWorklet=!I||d[Fe];var A=window.AudioWorkletNode;if(!(Ue&&D[y]&&A)){x();return}var e=function(){var o=function(i){return i.toString().replace(/^function|DEL_/g,"").replace(/\$RA/g,ae)},f="class "+p+" extends AudioWorkletProcessor{";return f+="constructor "+o(function(i){DEL_super(i);var w=this,n=i.processorOptions.bufferSize;w.bufferSize=n,w.buffer=new Float32Array(n*2),w.pos=0,w.port.onmessage=function(O){O.data.kill&&(w.kill=!0,$C.log("$RA kill call"))},$C.log("$RA .ctor call",i)}),f+="process "+o(function(i,w,n){var O=this,u=O.bufferSize,_=O.buffer,v=O.pos;if(i=(i[0]||[])[0]||[],i.length){_.set(i,v),v+=i.length;var b=~~(v/u)*u;if(b){this.port.postMessage({val:_.slice(0,b)});var B=_.subarray(b,v);_=new Float32Array(u*2),_.set(B),v=B.length,O.buffer=_}O.pos=v}return!O.kill}),f+='}try{registerProcessor("'+p+'", '+p+')}catch(e){$C.error("'+ae+' Reg Error",e)}',f=f.replace(/\$C\./g,"console."),"data:text/javascript;base64,"+btoa(unescape(encodeURIComponent(f)))},l=function(){return Ue&&t._na},m=t._na=function(){Ie!==""&&(clearTimeout(Ie),Ie=setTimeout(function(){Ie=0,l()&&(Xe(me("MxX1::{1}未返回任何音频，恢复使用{2}",0,y,H),3),I&&x())},500))},C=function(){if(l()){var o=t._n=new A(D,p,{processorOptions:{bufferSize:E}});s0(o),o.port.onmessage=function(f){Ie&&(clearTimeout(Ie),Ie=""),l()?g(f.data.val,Z):Ue||Xe(me("XUap::{1}多余回调",0,y),3)},Xe(me("yOta::Connect采用{1}，设置{2}可恢复老式{3}",0,y,ne+"."+Fe+"=false",H)+Ke+K,3)}},h=function(){if(l()){if(D[p]){C();return}var o=e();D[y].addModule(o).then(function(f){l()&&(D[p]=1,C(),Ie&&m())})[q](function(f){Xe(y+".addModule Error",1,f),l()&&x()})}};j(D,function(){return l()},h,h)},R=function(){var A=window[T],e="ondataavailable",l="audio/webm; codecs=pcm";He=t.isWebM=d[Ve];var m=A&&e in A.prototype&&A.isTypeSupported(l);if(Ke=m?"":me("VwPd::（此浏览器不支持{1}）",0,$),!He||!m){J();return}var C=function(){return He&&t._ra};t._ra=function(){Ie!==""&&(clearTimeout(Ie),Ie=setTimeout(function(){C()&&(Xe(me("vHnb::{1}未返回任何音频，降级使用{2}",0,T,y),3),J())},500))};var h=Object.assign({mimeType:l},d.ConnectWebMOptions),o=t._r=new A(t,h),f=t._rd={};o[e]=function(i){var w=new FileReader;w.onloadend=function(){if(C()){var n=B0(new Uint8Array(w.result),f);if(!n)return;if(n==-1){J();return}Ie&&(clearTimeout(Ie),Ie=""),g(n,f.webmSR)}else He||Xe(me("O9P7::{1}多余回调",0,T),3)},w.readAsArrayBuffer(i.data)},o.start(~~(E/48)),Xe(me("LMEm::Connect采用{1}，设置{2}可恢复使用{3}或老式{4}",0,$,ne+"."+Ve+"=false",y,H))};R()},Ye=function(S){S._na&&S._na(),S._ra&&S._ra()},v0=function(S){S._na=null,S._n&&(S._n.port.postMessage({kill:!0}),S._n.disconnect(),S._n=null)},ge=function(S){if(S._ra=null,S._r){try{S._r.stop()}catch(E){Xe("mr stop err",1,E)}S._r=null}},Me=function(S){S=S||d;var E=S==d,t=S.Stream;t&&(t._m&&(t._m.disconnect(),t._m=null),!t._RC&&t._c&&d.CloseNewCtx(t._c),t._RC=null,t._c=null,t._d&&(N(t._d.stream),t._d=null),t._p&&(t._p.disconnect(),t._p.onaudioprocess=t._p=null),v0(t),ge(t),E&&N(t)),S.Stream=0},N=d.StopS_=function(S){for(var E=u0(S),t=0;t<E.length;t++){var D=E[t];D.stop&&D.stop()}S.stop&&S.stop()},u0=function(S){var E=0,t=0,D=[];S.getAudioTracks&&(E=S.getAudioTracks(),t=S.getVideoTracks()),E||(E=S.audioTracks,t=S.videoTracks);for(var Z=0,le=E?E.length:0;Z<le;Z++)D.push(E[Z]);for(var Z=0,le=t?t.length:0;Z<le;Z++)D.push(t[Z]);return D};d.SampleData=function(S,E,t,D,Z){var le="SampleData";D||(D={});var se=D.index||0,Te=D.offset||0,Re=D.raisePrev||0,Be=D.filter;if(Be&&Be.fn&&(Be.sr&&Be.sr!=E||Be.srn&&Be.srn!=t)&&(Be=null,Xe(me("d48C::{1}的filter采样率变了，重设滤波",0,le),3)),!Be)if(t<=E){var be=t>E*3/4?0:t/2*3/4;Be={fn:be?d.IIRFilter(!0,E,be):0}}else{var be=E>t*3/4?0:E/2*3/4;Be={fn:be?d.IIRFilter(!0,t,be):0}}Be.sr=E,Be.srn=t;var s0=Be.fn,He=D.frameNext||[];Z||(Z={});var Ue=Z.frameSize||1;Z.frameType&&(Ue=Z.frameType=="mp3"?1152:1);var Ie=Z._sum,Ke=0,c=S.length;se>c+1&&Xe(me("tlbC::{1}似乎传入了未重置chunk {2}",0,le,se+">"+c),3);for(var g=0,H=se;H<c;H++)g+=S[H].length;var y=E/t;if(y>1)g=Math.max(0,g-Math.floor(Te)),g=Math.floor(g/y);else if(y<1){var ae=1/y;g=Math.floor(g*ae)}g+=He.length;for(var p=new Int16Array(g),T=0,H=0;H<He.length;H++)p[T]=He[H],T++;for(;se<c;se++){var $=S[se],I=$ instanceof Float32Array,H=Te,K=$.length,x=s0&&s0.Embed,J=0,R=0,A=0,e=0;if(y<1){for(var l=T+H,m=Re,C=0;C<K;C++){var h=$[C];I&&(h=Math.max(-1,Math.min(1,h)),h=h<0?h*32768:h*32767);var o=Math.floor(l);l+=ae;for(var f=Math.floor(l),i=(h-m)/(f-o),w=1;o<f;o++,w++){var n=Math.floor(m+w*i);x?(A=n,e=x.b0*A+x.b1*x.x1+x.b0*x.x2-x.a1*x.y1-x.a2*x.y2,x.x2=x.x1,x.x1=A,x.y2=x.y1,x.y1=e,n=e):n=s0?s0(n):n,n>32767?n=32767:n<-32768&&(n=-32768),Ie&&(Ke+=Math.abs(n)),p[o]=n,T++}m=Re=h,H+=ae}Te=H%1;continue}for(var C=0,O=0;C<K;C++,O++){if(O<K){var h=$[O];I&&(h=Math.max(-1,Math.min(1,h)),h=h<0?h*32768:h*32767),x?(A=h,e=x.b0*A+x.b1*x.x1+x.b0*x.x2-x.a1*x.y1-x.a2*x.y2,x.x2=x.x1,x.x1=A,x.y2=x.y1,x.y1=e):e=s0?s0(h):h}if(J=R,R=e,O==0){C--;continue}var u=Math.floor(H);if(C==u){var _=Math.ceil(H),v=H-u,b=J,B=_<K?R:b,a=b+(B-b)*v;a>32767?a=32767:a<-32768&&(a=-32768),Ie&&(Ke+=Math.abs(a)),p[T]=a,T++,H+=y}}Te=Math.max(0,H-K)}y<1&&T+1==g&&(g--,p=new Int16Array(p.buffer.slice(0,g*2))),T-1!=g&&T!=g&&Xe(le+" idx:"+T+" != size:"+g,3),He=null;var s=g%Ue;if(s>0){var G=(g-s)*2;He=new Int16Array(p.buffer.slice(G)),p=new Int16Array(p.buffer.slice(0,G))}var L={index:se,offset:Te,raisePrev:Re,filter:Be,frameNext:He,sampleRate:t,data:p};return Ie&&(L._sum=Ke),L},d.IIRFilter=function(S,E,t){var D=2*Math.PI*t/E,Z=Math.sin(D),le=Math.cos(D),se=Z/2,Te=1+se,Re=-2*le/Te,Be=(1-se)/Te;if(S)var be=(1-le)/2/Te,s0=(1-le)/Te;else var be=(1+le)/2/Te,s0=-(1+le)/Te;var He=0,Ue=0,Ie=0,Ke=0,c=0,g=function(H){return Ie=be*H+s0*He+be*Ue-Re*Ke-Be*c,Ue=He,He=H,c=Ke,Ke=Ie,Ie};return g.Embed={x1:0,x2:0,y1:0,y2:0,b0:be,b1:s0,a1:Re,a2:Be},g},d.PowerLevel=function(S,E){var t=S/E||0,D;return t<1251?D=Math.round(t/1250*10):D=Math.round(Math.min(100,Math.max(0,(1+Math.log(t/1e4)/Math.log(10))*100))),D},d.PowerDBFS=function(S){var E=Math.max(.1,S||0),t=32767;return E=Math.min(E,t),E=20*Math.log(E/t)/Math.log(10),Math.max(-100,Math.round(E))},d.CLog=function(S,E){if(typeof console=="object"){var t=new Date,D=("0"+t.getMinutes()).substr(-2)+":"+("0"+t.getSeconds()).substr(-2)+"."+("00"+t.getMilliseconds()).substr(-3),Z=this&&this.envIn&&this.envCheck&&this.id,le=["["+D+" "+ne+(Z?":"+Z:"")+"]"+S],se=arguments,Te=d.CLog,Re=2,Be=Te.log||console.log;for(oe(E)?Be=E==1?Te.error||console.error:E==3?Te.warn||console.warn:Be:Re=1;Re<se.length;Re++)le.push(se[Re]);qe?Be&&Be("[IsLoser]"+le[0],le.length>1?le:""):Be.apply(console,le)}};var Xe=function(){d.CLog.apply(this,arguments)},qe=!0;try{qe=!console.log.apply}catch{}var R0=0;function m0(S){var E=this;E.id=++R0,Z0();var t={type:"mp3",onProcess:V};for(var D in S)t[D]=S[D];E.set=t;var Z=t[pe],le=t[fe];(Z&&!oe(Z)||le&&!oe(le))&&E.CLog(me.G("IllegalArgs-1",[me("VtS4::{1}和{2}必须是数值",0,fe,pe)]),1,S),t[pe]=+Z||16,t[fe]=+le||16e3,E.state=0,E._S=9,E.Sync={O:9,C:9}}d.Sync={O:9,C:9},d.prototype=m0.prototype={CLog:Xe,_streamStore:function(){return this.set.sourceStream?this:d},_streamGet:function(){return this._streamStore().Stream},_streamCtx:function(){var S=this._streamGet();return S&&S._c},open:function(S,E){var t=this,D=t.set,Z=t._streamStore(),le=0;S=S||V;var se=function(T,$){$=!!$,t.CLog(me("5tWi::录音open失败：")+T+",isUserNotAllow:"+$,1),le&&d.CloseNewCtx(le),E&&E(T,$)};t._streamTag=_e;var Te=function(){t.CLog("open ok, id:"+t.id+" stream:"+t._streamTag),S(),t._SO=0},Re=Z.Sync,Be=++Re.O,be=Re.C;t._O=t._O_=Be,t._SO=t._S;var s0=function(){if(be!=Re.C||!t._O){var T=me("dFm8::open被取消");return Be==Re.O?t.close():T=me("VtJO::open被中断"),se(T),!0}};if(!Q){se(me.G("NonBrowser-1",["open"])+me("EMJq::，可尝试使用RecordApp解决方案")+"("+ue+"/tree/master/app-support-sample)");return}var He=t.envCheck({envName:"H5",canProcess:!0});if(He){se(me("A5bm::不能录音：")+He);return}var Ue,Ie=function(){Ue=D.runningContext,Ue||(Ue=le=d.GetContext(!0))};if(D.sourceStream){if(t._streamTag="set.sourceStream",!d.GetContext()){se(me("1iU7::不支持此浏览器从流中获取录音"));return}Ie(),Me(Z);var Ke=t.Stream=D.sourceStream;Ke._c=Ue,Ke._RC=D.runningContext,Ke._call={};try{o0(Z)}catch(T){Me(Z),se(me("BTW2::从流中打开录音失败：")+T.message);return}Te();return}var c=function(T,$){try{window.top.a}catch{se(me("Nclz::无权录音(跨域，请尝试给iframe添加麦克风访问策略，如{1})",0,'allow="camera;microphone"'));return}g(1,T)&&(/Found/i.test(T)?se($+me("jBa9::，无可用麦克风")):se($))},g=function(T,$){if(/Permission|Allow/i.test($))T&&se(me("gyO5::用户拒绝了录音权限"),!0);else if(window.isSecureContext===!1)T&&se(me("oWNo::浏览器禁止不安全页面录音，可开启https解决"));else return 1};if(d.IsOpen()){Te();return}if(!d.Support()){c("",me("COxc::此浏览器不支持录音"));return}Ie();var H=function(T){setTimeout(function(){T._call={};var $=d.Stream;$&&(Me(),T._call=$._call),d.Stream=T,T._c=Ue,T._RC=D.runningContext,!s0()&&(d.IsOpen()?($&&t.CLog(me("upb8::发现同时多次调用open"),1),o0(Z),Te()):se(me("Q1GA::录音功能无效：无音频流")))},100)},y=function(T){var $=T.name||T.message||T.code+":"+T,I="";ae==1&&g(0,$)&&(I=me("KxE2::，将尝试禁用回声消除后重试")),t.CLog(me("xEQR::请求录音权限错误")+I+"|"+T,I?3:1,T),I?p(1):c($,me("bDOG::无法录音：")+T)},ae=0,p=function(T){ae++;var $="audioTrackSet",I="autoGainControl",K="echoCancellation",x="noiseSuppression",J=$+":{"+K+","+x+","+I+"}",R=JSON.parse(Ae(D[$]||!0));t.CLog("open... "+ae+" "+$+":"+Ae(R)),T&&(typeof R!="object"&&(R={}),R[I]=!1,R[K]=!1,R[x]=!1),R[fe]&&t.CLog(me("IjL3::注意：已配置{1}参数，可能会出现浏览器不能正确选用麦克风、移动端无法启用回声消除等现象",0,$+"."+fe),3);var A={audio:R,video:D.videoTrackSet||!1};try{var e=d.Scope[_e](A,H,y)}catch(l){t.CLog(_e,3,l),A={audio:!0,video:!1},e=d.Scope[_e](A,H,y)}t.CLog(_e+"("+Ae(A)+") "+De(Ue)+me("RiWe::，未配置 {1} 时浏览器可能会自动启用回声消除，移动端未禁用回声消除时可能会降低系统播放音量（关闭录音后可恢复）和仅提供16k采样率的音频流（不需要回声消除时可明确配置成禁用来获得48k高音质的流），请参阅文档中{2}配置",0,J,$)+"("+ue+") LM:"+P+" UA:"+navigator.userAgent),e&&e.then&&e.then(H)[q](y)};p()},close:function(S){S=S||V;var E=this,t=E._streamStore();E._stop();var D=" stream:"+E._streamTag,Z=t.Sync;if(E._O=0,E._O_!=Z.O){E.CLog(me("hWVz::close被忽略（因为同时open了多个rec，只有最后一个会真正close）")+D,3),S();return}Z.C++,Me(t),E.CLog("close,"+D),S()},mock:function(S,E){var t=this;return t._stop(),t.isMock=1,t.mockEnvInfo=null,t.buffers=[S],t.recSize=S.length,t._setSrcSR(E),t._streamTag="mock",t},_setSrcSR:function(S){var E=this,t=E.set,D=t[fe];D>S?t[fe]=S:D=0,E[Ee]=S,E.CLog(Ee+": "+S+" set."+fe+": "+t[fe]+(D?" "+me("UHvm::忽略")+": "+D:""),D?3:0)},envCheck:function(S){var E,t=this,D=t.set,Z="CPU_BE";if(!E&&!d[Z]&&typeof Int8Array=="function"&&!new Int8Array(new Int32Array([1]).buffer)[0]&&(Z0(Z),E=me("Essp::不支持{1}架构",0,Z)),!E){var le=D.type,se=t[le+"_envCheck"];D.takeoffEncodeChunk&&(se?S.canProcess||(E=me("7uMV::{1}环境不支持实时处理",0,S.envName)):E=me("2XBl::{1}类型不支持设置takeoffEncodeChunk",0,le)+(t[le]?"":me("LG7e::(未加载编码器)"))),!E&&se&&(E=t[le+"_envCheck"](S,D))}return E||""},envStart:function(S,E){var t=this,D=t.set;if(t.isMock=S?1:0,t.mockEnvInfo=S,t.buffers=[],t.recSize=0,S&&(t._streamTag="env$"+S.envName),t.state=1,t.envInLast=0,t.envInFirst=0,t.envInFix=0,t.envInFixTs=[],t._setSrcSR(E),t.engineCtx=0,t[D.type+"_start"]){var Z=t.engineCtx=t[D.type+"_start"](D);Z&&(Z.pcmDatas=[],Z.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(S,E){var t=this,D=t.set,Z=t.engineCtx;if(t.state!=1){t.state||t.CLog("envIn at state=0",3);return}var le=t[Ee],se=S.length,Te=d.PowerLevel(E,se),Re=t.buffers,Be=Re.length;Re.push(S);var be=Re,s0=Be,He=Date.now(),Ue=Math.round(se/le*1e3);t.envInLast=He,t.buffers.length==1&&(t.envInFirst=He-Ue);var Ie=t.envInFixTs;Ie.splice(0,0,{t:He,d:Ue});for(var Ke=He,c=0,g=0;g<Ie.length;g++){var H=Ie[g];if(He-H.t>3e3){Ie.length=g;break}Ke=H.t,c+=H.d}var y=Ie[1],ae=He-Ke,p=ae-c;if(p>ae/3&&(y&&ae>1e3||Ie.length>=6)){var T=He-y.t-Ue;if(T>Ue/5){var $=!D.disableEnvInFix;if(t.CLog("["+He+"]"+b0.get(me($?"4Kfd::补偿{1}ms":"bM5i::未补偿{1}ms",1),[T]),3),t.envInFix+=T,$){var I=new Int16Array(T*le/1e3);se+=I.length,Re.push(I)}}}var K=t.recSize,x=se,J=K+x;if(t.recSize=J,Z){var R=d.SampleData(Re,le,D[fe],Z.chunkInfo);Z.chunkInfo=R,K=Z.pcmSize,x=R.data.length,J=K+x,Z.pcmSize=J,Re=Z.pcmDatas,Be=Re.length,Re.push(R.data),le=R[fe]}var A=Math.round(J/le*1e3),e=Re.length,l=be.length,m=function(){for(var i=C?0:-x,w=Re[0]==null,n=Be;n<e;n++){var O=Re[n];O==null?w=1:(i+=O.length,Z&&O.length&&t[D.type+"_encode"](Z,O))}if(w&&Z){var n=s0;for(be[0]&&(n=0);n<l;n++)be[n]=null}w&&(i=C?x:0,Re[0]=null),Z?Z.pcmSize+=i:t.recSize+=i},C=0,h="rec.set.onProcess";try{C=D.onProcess(Re,Te,A,le,Be,m)}catch(i){console.error(h+me("gFUF::回调出错是不允许的，需保证不会抛异常"),i)}var o=Date.now()-He;if(o>10&&t.envInFirst-He>1e3&&t.CLog(h+me("2ghS::低性能，耗时{1}ms",0,o),3),C===!0){for(var f=0,g=Be;g<e;g++)Re[g]==null?f=1:Re[g]=new Int16Array(0);f?t.CLog(me("ufqH::未进入异步前不能清除buffers"),3):Z?Z.pcmSize-=x:t.recSize-=x}else m()},start:function(){var S=this,E=1;if(S.set.sourceStream?S.Stream||(E=0):d.IsOpen()||(E=0),!E){S.CLog(me("6WmN::start失败：未open"),1);return}var t=S._streamCtx();if(S.CLog(me("kLDN::start 开始录音，")+De(t)+" stream:"+S._streamTag),S._stop(),S.envStart(null,t[fe]),S.state=3,S._SO&&S._SO+1!=S._S){S.CLog(me("Bp2y::start被中断"),3);return}S._SO=0;var D=function(){S.state==3&&(S.state=1,S.resume())},Z="AudioContext resume: ",le=S._streamGet();le._call[S.id]=function(){S.CLog(Z+t.state+"|stream ok"),D()},j(t,function(se){return se&&S.CLog(Z+"wait..."),S.state==3},function(se){se&&S.CLog(Z+t.state),D()},function(se){S.CLog(Z+t.state+me("upkE::，可能无法录音：")+se,1),D()})},pause:function(){var S=this,E=S._streamGet();S.state&&(S.state=2,S.CLog("pause"),E&&delete E._call[S.id])},resume:function(){var S=this,E=S._streamGet(),t="resume",D=t+"(wait ctx)";if(S.state==3)S.CLog(D);else if(S.state){S.state=1,S.CLog(t),S.envResume(),E&&(E._call[S.id]=function(le,se){S.state==1&&S.envIn(le,se)},Ye(E));var Z=S._streamCtx();Z&&j(Z,function(le){return le&&S.CLog(D+"..."),S.state==1},function(le){le&&S.CLog(D+Z.state),Ye(E)},function(le){S.CLog(D+Z.state+"[err]"+le,1)})}},_stop:function(S){var E=this,t=E.set;E.isMock||E._S++,E.state&&(E.pause(),E.state=0),!S&&E[t.type+"_stop"]&&(E[t.type+"_stop"](E.engineCtx),E.engineCtx=0)},stop:function(S,E,t){var D=this,Z=D.set,le,se=D.envInLast-D.envInFirst,Te=se&&D.buffers.length;D.CLog(me("Xq4s::stop 和start时差:")+(se?se+"ms "+me("3CQP::补偿:")+D.envInFix+"ms envIn:"+Te+" fps:"+(Te/se*1e3).toFixed(1):"-")+" stream:"+D._streamTag+" ("+ue+") LM:"+P);var Re=function(){D._stop(),t&&D.close()},Be=function(H){D.CLog(me("u8JG::结束录音失败：")+H,1),E&&E(H),Re()},be=function(H,y,ae){var p="blob",T="arraybuffer",$="dataType",I="DefaultDataType",K=D[$]||d[I]||p,x=$+"="+K,J=H instanceof ArrayBuffer,R=0,A=J?H.byteLength:H.size;if(K==T?J||(R=1):K==p?typeof Blob!="function"?R=me.G("NonBrowser-1",[x])+me("1skY::，请设置{1}",0,ne+"."+I+'="'+T+'"'):(J&&(H=new Blob([H],{type:y})),H instanceof Blob||(R=1),y=H.type||y):R=me.G("NotSupport-1",[x]),D.CLog(me("Wv7l::结束录音 编码花{1}ms 音频时长{2}ms 文件大小{3}b",0,Date.now()-le,ae,A)+" "+x+","+y),R){Be(R!=1?R:me("Vkbd::{1}编码器返回的不是{2}",0,Z.type,K)+", "+x);return}if(Z.takeoffEncodeChunk)D.CLog(me("QWnr::启用takeoffEncodeChunk后stop返回的blob长度为0不提供音频数据"),3);else if(A<Math.max(50,ae/5)){Be(me("Sz2H::生成的{1}无效",0,Z.type));return}S&&S(H,ae,y),Re()};if(!D.isMock){var s0=D.state==3;if(!D.state||s0){Be(me("wf9t::未开始录音")+(s0?me("Dl2c::，开始录音前无用户交互导致AudioContext未运行"):""));return}}D._stop(!0);var He=D.recSize;if(!He){Be(me("Ltz3::未采集到录音"));return}if(!D[Z.type]){Be(me("xGuI::未加载{1}编码器，请尝试到{2}的src/engine内找到{1}的编码器并加载",0,Z.type,ne));return}if(D.isMock){var Ue=D.envCheck(D.mockEnvInfo||{envName:"mock",canProcess:!1});if(Ue){Be(me("AxOH::录音错误：")+Ue);return}}var Ie=D.engineCtx;if(D[Z.type+"_complete"]&&Ie){var g=Math.round(Ie.pcmSize/Z[fe]*1e3);le=Date.now(),D[Z.type+"_complete"](Ie,function(y,ae){be(y,ae,g)},Be);return}if(le=Date.now(),!D.buffers[0]){Be(me("xkKd::音频buffers被释放"));return}var Ke=d.SampleData(D.buffers,D[Ee],Z[fe]);Z[fe]=Ke[fe];var c=Ke.data,g=Math.round(c.length/Z[fe]*1e3);D.CLog(me("CxeT::采样:{1} 花:{2}ms",0,He+"->"+c.length,Date.now()-le)),setTimeout(function(){le=Date.now(),D[Z.type](c,function(H,y){be(H,y,g)},function(H){Be(H)})})}};var B0=function(S,E){E.pos||(E.pos=[0],E.tracks={},E.bytes=[]);var t=E.tracks,D=[E.pos[0]],Z=function(){E.pos[0]=D[0]},le=E.bytes.length,se=new Uint8Array(le+S.length);if(se.set(E.bytes),se.set(S,le),E.bytes=se,!E._ht){if(Je(se,D),I0(se,D),!x0(Je(se,D),[24,83,128,103]))return;for(Je(se,D);D[0]<se.length;){var Te=Je(se,D),Re=I0(se,D),Be=[0],be=0;if(!Re)return;if(x0(Te,[22,84,174,107])){for(;Be[0]<Re.length;){var s0=Je(Re,Be),He=I0(Re,Be),Ue=[0],Ie={channels:0,sampleRate:0};if(x0(s0,[174]))for(;Ue[0]<He.length;){var Ke=Je(He,Ue),c=I0(He,Ue),g=[0];if(x0(Ke,[215])){var H=n0(c);Ie.number=H,t[H]=Ie}else if(x0(Ke,[131])){var H=n0(c);H==1?Ie.type="video":H==2?(Ie.type="audio",be||(E.track0=Ie),Ie.idx=be++):Ie.type="Type-"+H}else if(x0(Ke,[134])){for(var y="",ae=0;ae<c.length;ae++)y+=String.fromCharCode(c[ae]);Ie.codec=y}else if(x0(Ke,[225]))for(;g[0]<c.length;){var p=Je(c,g),T=I0(c,g);if(x0(p,[181])){var H=0,$=new Uint8Array(T.reverse()).buffer;T.length==4?H=new Float32Array($)[0]:T.length==8?H=new Float64Array($)[0]:Xe("WebM Track !Float",1,T),Ie[fe]=Math.round(H)}else x0(p,[98,100])?Ie.bitDepth=n0(T):x0(p,[159])&&(Ie.channels=n0(T))}}}E._ht=1,Xe("WebM Tracks",t),Z();break}}}var I=E.track0;if(I){var K=I[fe];if(E.webmSR=K,I.bitDepth==16&&/FLOAT/i.test(I.codec)&&(I.bitDepth=32,Xe("WebM 16->32 bit",3)),K<8e3||I.bitDepth!=32||I.channels<1||!/(\b|_)PCM\b/i.test(I.codec))return E.bytes=[],E.bad||Xe("WebM Track Unexpected",3,E),E.bad=1,-1;for(var x=[],J=0;D[0]<se.length;){var s0=Je(se,D),He=I0(se,D);if(!He)break;if(x0(s0,[163])){var R=He[0]&15,Ie=t[R];if(!Ie)Xe("WebM !Track"+R,1,t);else if(Ie.idx===0){for(var A=new Uint8Array(He.length-4),ae=4;ae<He.length;ae++)A[ae-4]=He[ae];x.push(A),J+=A.length}}Z()}if(J){var e=new Uint8Array(se.length-E.pos[0]);e.set(se.subarray(E.pos[0])),E.bytes=e,E.pos[0]=0;for(var A=new Uint8Array(J),ae=0,l=0;ae<x.length;ae++)A.set(x[ae],l),l+=x[ae].length;var $=new Float32Array(A.buffer);if(I.channels>1){for(var m=[],ae=0;ae<$.length;)m.push($[ae]),ae+=I.channels;$=new Float32Array(m)}return $}}},x0=function(S,E){if(!S||S.length!=E.length)return!1;if(S.length==1)return S[0]==E[0];for(var t=0;t<S.length;t++)if(S[t]!=E[t])return!1;return!0},n0=function(S){for(var E="",t=0;t<S.length;t++){var D=S[t];E+=(D<16?"0":"")+D.toString(16)}return parseInt(E,16)||0},Je=function(S,E,t){var D=E[0];if(!(D>=S.length)){var Z=S[D],le=("0000000"+Z.toString(2)).substr(-8),se=/^(0*1)(\d*)$/.exec(le);if(se){var Te=se[1].length,Re=[];if(!(D+Te>S.length)){for(var Be=0;Be<Te;Be++)Re[Be]=S[D],D++;return t&&(Re[0]=parseInt(se[2]||"0",2)),E[0]=D,Re}}}},I0=function(S,E){var t=Je(S,E,1);if(t){var D=n0(t),Z=E[0],le=[];if(D<2147483647){if(Z+D>S.length)return;for(var se=0;se<D;se++)le[se]=S[Z],Z++}return E[0]=Z,le}},b0=d.i18n={lang:"zh-CN",alias:{"zh-CN":"zh","en-US":"en"},locales:{},data:{},put:function(S,E){var t=ne+".i18n.put: ",D=S.overwrite;D=D==null||D;var Z=S.lang;if(Z=b0.alias[Z]||Z,!Z)throw new Error(t+"set.lang?");var le=b0.locales[Z];le||(le={},b0.locales[Z]=le);for(var se=/^([\w\-]+):/,Te,Re=0;Re<E.length;Re++){var be=E[Re];if(Te=se.exec(be),!Te){Xe(t+"'key:'? "+be,3,S);continue}var Be=Te[1],be=be.substr(Be.length+1);!D&&le[Be]||(le[Be]=be)}},get:function(){return b0.v_G.apply(null,arguments)},v_G:function(S,E,t){E=E||[],t=t||b0.lang,t=b0.alias[t]||t;var D=b0.locales[t],Z=D&&D[S]||"";return!Z&&t!="zh"?t=="en"?b0.v_G(S,E,"zh"):b0.v_G(S,E,"en"):(b0.lastLang=t,Z=="=Empty"?"":Z.replace(/\{(\d+)(\!?)\}/g,function(le,se,Te){return se=+se||0,le=E[se-1],(se<1||se>E.length)&&(le="{?}",Xe("i18n["+S+"] no {"+se+"}: "+Z,3)),Te?"":le}))},$T:function(){return b0.v_T.apply(null,arguments)},v_T:function(){for(var S=arguments,E="",t=[],D=0,Z=ne+".i18n.$T:",le=/^([\w\-]*):/,se,Te=0;Te<S.length;Te++){var Re=S[Te];if(Te==0){if(se=le.exec(Re),E=se&&se[1],!E)throw new Error(Z+"0 'key:'?");Re=Re.substr(E.length+1)}if(D===-1)t.push(Re);else{if(D)throw new Error(Z+" bad args");if(Re===0)D=-1;else if(oe(Re)){if(Re<1)throw new Error(Z+" bad args");D=Re}else{var Be=Te==1?"en":Te?"":"zh";if(se=le.exec(Re),se&&(Be=se[1]||Be,Re=Re.substr(se[1].length+1)),!se||!Be)throw new Error(Z+Te+" 'lang:'?");b0.put({lang:Be,overwrite:!1},[E+":"+Re])}}}return E?D>0?E:b0.v_G(E,t):""}},me=b0.$T;me.G=b0.get,me("NonBrowser-1::非浏览器环境，不支持{1}",1),me("IllegalArgs-1::参数错误：{1}",1),me("NeedImport-2::调用{1}需要先导入{2}",2),me("NotSupport-1::不支持：{1}",1),d.TrafficImgUrl="//ia.51.la/go1?id=20469973&pvFlag=1";var Z0=d.Traffic=function(S){if(Q){S=S?"/"+ne+"/Report/"+S:"";var E=d.TrafficImgUrl;if(E){var t=d.Traffic,D=/^(https?:..[^\/#]*\/?)[^#]*/i.exec(location.href)||[],Z=D[1]||"http://file/",le=(D[0]||Z)+S;if(E.indexOf("//")==0&&(/^https:/i.test(le)?E="https:"+E:E="http:"+E),S&&(E=E+"&cu="+encodeURIComponent(Z+S)),!t[le]){t[le]=1;var se=new Image;se.src=E,Xe("Traffic Analysis Image: "+(S||ne+".TrafficImgUrl="+d.TrafficImgUrl))}}}};Y&&(Xe(me("8HO5::覆盖导入{1}",0,ne),1),Y.Destroy()),X[ne]=d})})(R1);var gr=R1.exports;const Or=pt(gr);(function(r){var X=typeof window=="object"&&!!window.document,Q=X?window:Object,V=Q.Recorder,oe=V.i18n;r(V,oe,oe.$T,X)})(function(r,X,Q,V){var oe="48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000",Ae="8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, 192, 224, 256, 320";r.prototype.enc_mp3={stable:!0,takeEC:"full",getTestMsg:function(){return Q("Zm7L::采样率范围：{1}；比特率范围：{2}（不同比特率支持的采样率范围不同，小于32kbps时采样率需小于32000）",0,oe,Ae)}};var d=function(q){var Y=q.bitRate,re=q.sampleRate,Le=re;if((" "+Ae+",").indexOf(" "+Y+",")==-1&&r.CLog(Q("eGB9::{1}不在mp3支持的取值范围：{2}",0,"bitRate="+Y,Ae),3),(" "+oe+",").indexOf(" "+re+",")==-1){for(var j=oe.split(", "),ke=[],De=0;De<j.length;De++)ke.push({v:+j[De],s:Math.abs(j[De]-re)});ke.sort(function(Ve,Fe){return Ve.s-Fe.s}),Le=ke[0].v,q.sampleRate=Le,r.CLog(Q("zLTa::sampleRate已更新为{1}，因为{2}不在mp3支持的取值范围：{3}",0,Le,re,oe),3)}},P=function(){return Q.G("NeedImport-2",["mp3.js","src/engine/mp3-engine.js"])},ue=V&&typeof Worker=="function";r.prototype.mp3=function(q,Y,re){var Le=this,j=Le.set,ke=q.length;if(!r.lamejs){re(P());return}if(ue){var De=Le.mp3_start(j);if(De){if(De.isW){Le.mp3_encode(De,q),Le.mp3_complete(De,Y,re,1);return}Le.mp3_stop(De)}}d(j);var Ve=new r.lamejs.Mp3Encoder(1,j.sampleRate,j.bitRate),Fe=57600,o0=new Int8Array(5e5),Ye=0,v0=0,ge=0,Me=function(){try{if(v0<ke)var N=Ve.encodeBuffer(q.subarray(v0,v0+Fe));else{ge=1;var N=Ve.flush()}}catch(m0){if(console.error(m0),!ge)try{Ve.flush()}catch(B0){console.error(B0)}re("MP3 Encoder: "+m0.message);return}var u0=N.length;if(u0>0){if(Ye+u0>o0.length){var Xe=new Int8Array(o0.length+Math.max(5e5,u0));Xe.set(o0.subarray(0,Ye)),o0=Xe}o0.set(N,Ye),Ye+=u0}if(v0<ke)v0+=Fe,setTimeout(Me);else{var qe=[o0.buffer.slice(0,Ye)],R0=fe.fn(qe,Ye,ke,j.sampleRate);pe(R0,j),Y(qe[0]||new ArrayBuffer(0),"audio/mp3")}};Me()};var ne;r.BindDestroy("mp3Worker",function(){ne&&(r.CLog("mp3Worker Destroy"),ne.terminate(),ne=null)}),r.prototype.mp3_envCheck=function(q,Y){var re="";return Y.takeoffEncodeChunk&&(Ee()||(re=Q("yhUs::当前浏览器版本太低，无法实时处理"))),!re&&!r.lamejs&&(re=P()),re},r.prototype.mp3_start=function(q){return Ee(q)};var _e={id:0},Ee=function(q,Y){var re=function(ge){var Me=ge.data,N=ke.wkScope.wk_ctxs,u0=ke.wkScope.wk_lame,Xe=ke.wkScope.wk_mp3TrimFix,qe=N[Me.id];if(Me.action=="init")N[Me.id]={sampleRate:Me.sampleRate,bitRate:Me.bitRate,takeoff:Me.takeoff,pcmSize:0,memory:new Int8Array(5e5),mOffset:0,encObj:new u0.Mp3Encoder(1,Me.sampleRate,Me.bitRate)};else if(!qe)return;var R0=function(n0){var Je=n0.length;if(qe.mOffset+Je>qe.memory.length){var I0=new Int8Array(qe.memory.length+Math.max(5e5,Je));I0.set(qe.memory.subarray(0,qe.mOffset)),qe.memory=I0}qe.memory.set(n0,qe.mOffset),qe.mOffset+=Je};switch(Me.action){case"stop":if(!qe.isCp)try{qe.encObj.flush()}catch(n0){console.error(n0)}qe.encObj=null,delete N[Me.id];break;case"encode":if(qe.isCp)break;qe.pcmSize+=Me.pcm.length;try{var m0=qe.encObj.encodeBuffer(Me.pcm)}catch(n0){qe.err=n0,console.error(n0)}m0&&m0.length>0&&(qe.takeoff?De.onmessage({action:"takeoff",id:Me.id,chunk:m0}):R0(m0));break;case"complete":qe.isCp=1;try{var m0=qe.encObj.flush()}catch(n0){qe.err=n0,console.error(n0)}if(m0&&m0.length>0&&(qe.takeoff?De.onmessage({action:"takeoff",id:Me.id,chunk:m0}):R0(m0)),qe.err){De.onmessage({action:Me.action,id:Me.id,err:"MP3 Encoder: "+qe.err.message});break}var B0=[qe.memory.buffer.slice(0,qe.mOffset)],x0=Xe.fn(B0,qe.mOffset,qe.pcmSize,qe.sampleRate);De.onmessage({action:Me.action,id:Me.id,blob:B0[0]||new ArrayBuffer(0),meta:x0});break}},Le=function(ge){De.onmessage=function(Me){var N=Me;ge&&(N=Me.data);var u0=_e[N.id];u0&&(N.action=="takeoff"?u0.set.takeoffEncodeChunk(new Uint8Array(N.chunk.buffer)):(u0.call&&u0.call(N),u0.call=null))}},j=function(){var ge={worker:De,set:q};return q?(ge.id=++_e.id,_e[ge.id]=ge,d(q),De.postMessage({action:"init",id:ge.id,sampleRate:q.sampleRate,bitRate:q.bitRate,takeoff:!!q.takeoffEncodeChunk,x:new Int16Array(5)})):De.postMessage({x:new Int16Array(5)}),ge},ke,De=ne;if(Y||!ue)return r.CLog(Q("k9PT::当前环境不支持Web Worker，mp3实时编码器运行在主线程中"),3),De={postMessage:function(ge){re({data:ge})}},ke={wkScope:{wk_ctxs:{},wk_lame:r.lamejs,wk_mp3TrimFix:fe}},Le(),j();try{if(!De){var Ve=(re+"").replace(/[\w\$]+\.onmessage/g,"self.postMessage");Ve=Ve.replace(/[\w\$]+\.wkScope/g,"wkScope");var Fe=");wk_lame();self.onmessage="+Ve;Fe+=";var wkScope={ wk_ctxs:{},wk_lame:wk_lame",Fe+=",wk_mp3TrimFix:{rm:"+fe.rm+",fn:"+fe.fn+"} }";var o0=r.lamejs.toString(),Ye=(window.URL||webkitURL).createObjectURL(new Blob(["var wk_lame=(",o0,Fe],{type:"text/javascript"}));De=new Worker(Ye),setTimeout(function(){(window.URL||webkitURL).revokeObjectURL(Ye)},1e4),Le(1)}var v0=j();return v0.isW=1,ne=De,v0}catch(ge){return De&&De.terminate(),console.error(ge),Ee(q,1)}};r.prototype.mp3_stop=function(q){if(q&&q.worker){q.worker.postMessage({action:"stop",id:q.id}),q.worker=null,delete _e[q.id];var Y=-1;for(var re in _e)Y++;Y&&r.CLog(Q("fT6M::mp3 worker剩{1}个未stop",0,Y),3)}},r.prototype.mp3_encode=function(q,Y){q&&q.worker&&q.worker.postMessage({action:"encode",id:q.id,pcm:Y})},r.prototype.mp3_complete=function(q,Y,re,Le){var j=this;q&&q.worker?(q.call=function(ke){Le&&j.mp3_stop(q),ke.err?re(ke.err):(pe(ke.meta,q.set),Y(ke.blob,"audio/mp3"))},q.worker.postMessage({action:"complete",id:q.id})):re(Q("mPxH::mp3编码器未start"))},r.mp3ReadMeta=function(q,Y){var re=typeof window<"u"&&window.parseInt||typeof self<"u"&&self.parseInt||parseInt,Le=new Uint8Array(q[0]||[]);if(Le.length<4)return null;var j=function(n0,Je){return("0000000"+((Je||Le)[n0]||0).toString(2)).substr(-8)},ke=j(0)+j(1),De=j(2)+j(3);if(!/^1{11}/.test(ke))return null;var Ve={"00":2.5,10:2,11:1}[ke.substr(11,2)],Fe={"01":3}[ke.substr(13,2)],o0={1:[44100,48e3,32e3],2:[22050,24e3,16e3],"2.5":[11025,12e3,8e3]}[Ve];o0&&(o0=o0[re(De.substr(4,2),2)]);var Ye=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320]][Ve==1?1:0][re(De.substr(0,4),2)];if(!Ve||!Fe||!Ye||!o0)return null;for(var v0=Math.round(Y*8/Ye),ge=Fe==1?384:Fe==2||Ve==1?1152:576,Me=ge/o0*1e3,N=Math.floor(ge*Ye/8/o0*1e3),u0=0,Xe=0,qe=0;qe<q.length;qe++){var R0=q[qe];if(Xe+=R0.byteLength,Xe>=N+3){var m0=new Uint8Array(R0),B0=R0.byteLength-(Xe-(N+3)+1),x0=j(B0,m0);u0=x0.charAt(6)=="1";break}}return u0&&N++,{version:Ve,layer:Fe,sampleRate:o0,bitRate:Ye,duration:v0,size:Y,hasPadding:u0,frameSize:N,frameDurationFloat:Me}};var fe={rm:r.mp3ReadMeta,fn:function(q,Y,re,Le){var j=this.rm(q,Y);if(!j)return{size:Y,err:"mp3 unknown format"};var ke=Math.round(re/Le*1e3),De=Math.floor((j.duration-ke)/j.frameDurationFloat);if(De>0){var Ve=De*j.frameSize-(j.hasPadding?1:0);Y-=Ve;for(var Fe=0,o0=[],Ye=0;Ye<q.length;Ye++){var v0=q[Ye];if(Ve<=0)break;Ve>=v0.byteLength?(Ve-=v0.byteLength,o0.push(v0),q.splice(Ye,1),Ye--):(q[Ye]=v0.slice(Ve),Fe=v0,Ve=0)}var ge=this.rm(q,Y);if(!ge){Fe&&(q[0]=Fe);for(var Ye=0;Ye<o0.length;Ye++)q.splice(Ye,0,o0[Ye]);j.err="mp3 fix error: 已还原，错误原因不明"}var Me=j.trimFix={};Me.remove=De,Me.removeDuration=Math.round(De*j.frameDurationFloat),Me.duration=Math.round(Y*8/j.bitRate)}return j}},pe=function(q,Y){var re="MP3 Info: ";(q.sampleRate&&q.sampleRate!=Y.sampleRate||q.bitRate&&q.bitRate!=Y.bitRate)&&(r.CLog(re+Q("uY9i::和设置的不匹配{1}，已更新成{2}",0,"set:"+Y.bitRate+"kbps "+Y.sampleRate+"hz","set:"+q.bitRate+"kbps "+q.sampleRate+"hz"),3,Y),Y.sampleRate=q.sampleRate,Y.bitRate=q.bitRate);var Le=q.trimFix;Le?(re+=Q("iMSm::Fix移除{1}帧",0,Le.remove)+" "+Le.removeDuration+"ms -> "+Le.duration+"ms",Le.remove>2&&(q.err=(q.err?q.err+", ":"")+Q("b9zm::移除帧数过多"))):re+=(q.duration||"-")+"ms",q.err?r.CLog(re,q.size?1:0,q.err,q):r.CLog(re,q)}});(function(r){var X=typeof window=="object"&&!!window.document,Q=X?window:Object,V=Q.Recorder;r(V)})(function(r){function X(){var Q=function(c){return Math.log(c)/Math.log(10)},V=function(c){throw new Error("abort("+c+")")};function oe(c){return new Int8Array(c)}function Ae(c){return new Int16Array(c)}function d(c){return new Int32Array(c)}function P(c){return new Float32Array(c)}function ue(c){return new Float64Array(c)}function ne(c){if(c.length==1)return P(c[0]);var g=c[0];c=c.slice(1);for(var H=[],y=0;y<g;y++)H.push(ne(c));return H}function _e(c){if(c.length==1)return d(c[0]);var g=c[0];c=c.slice(1);for(var H=[],y=0;y<g;y++)H.push(_e(c));return H}function Ee(c){if(c.length==1)return Ae(c[0]);var g=c[0];c=c.slice(1);for(var H=[],y=0;y<g;y++)H.push(Ee(c));return H}function fe(c){if(c.length==1)return new Array(c[0]);var g=c[0];c=c.slice(1);for(var H=[],y=0;y<g;y++)H.push(fe(c));return H}var pe={};pe.fill=function(c,g,H,y){if(arguments.length==2)for(var ae=0;ae<c.length;ae++)c[ae]=arguments[1];else for(var ae=g;ae<H;ae++)c[ae]=y};var q={};q.arraycopy=function(c,g,H,y,ae){for(var p=g+ae;g<p;)H[y++]=c[g++]};var Y={};Y.SQRT2=1.4142135623730951,Y.FAST_LOG10=function(c){return Q(c)},Y.FAST_LOG10_X=function(c,g){return Q(c)*g};function re(c){this.ordinal=c}re.short_block_allowed=new re(0),re.short_block_coupled=new re(1),re.short_block_dispensed=new re(2),re.short_block_forced=new re(3);var Le={};Le.MAX_VALUE=34028235e31;function j(c){this.ordinal=c}j.vbr_off=new j(0),j.vbr_mt=new j(1),j.vbr_rh=new j(2),j.vbr_abr=new j(3),j.vbr_mtrh=new j(4),j.vbr_default=j.vbr_mtrh;function ke(c){var g=c;this.ordinal=function(){return g}}ke.STEREO=new ke(0),ke.JOINT_STEREO=new ke(1),ke.DUAL_CHANNEL=new ke(2),ke.MONO=new ke(3),ke.NOT_SET=new ke(4);function De(){var c=3,g=98,H=4;this.getLameShortVersion=function(){return c+"."+g+"."+H}}function Ve(){var c=null;this.qupvt=null,this.setModules=function(u){this.qupvt=u,c=u};function g(u){this.bits=0|u}var H=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function y(u,_,v,b,B,a){var s=.5946/_;for(u=u>>1;u--!=0;)B[a++]=s>v[b++]?0:1,B[a++]=s>v[b++]?0:1}function ae(u,_,v,b,B,a){u=u>>1;var s=u%2;for(u=u>>1;u--!=0;){var G,L,F,ee,ie,M,W,ve;G=v[b++]*_,L=v[b++]*_,ie=0|G,F=v[b++]*_,M=0|L,ee=v[b++]*_,W=0|F,G+=c.adj43[ie],ve=0|ee,L+=c.adj43[M],B[a++]=0|G,F+=c.adj43[W],B[a++]=0|L,ee+=c.adj43[ve],B[a++]=0|F,B[a++]=0|ee}if(s!=0){var G,L,ie,M;G=v[b++]*_,L=v[b++]*_,ie=0|G,M=0|L,G+=c.adj43[ie],L+=c.adj43[M],B[a++]=0|G,B[a++]=0|L}}function p(u,_,v,b,B){var a,s,G=0,L,F=0,ee=0,ie=0,M=_,W=0,ve=M,xe=0,We=u,a0=0;for(L=B!=null&&b.global_gain==B.global_gain,b.block_type==t.SHORT_TYPE?s=38:s=21,a=0;a<=s;a++){var je=-1;if((L||b.block_type==t.NORM_TYPE)&&(je=b.global_gain-(b.scalefac[a]+(b.preflag!=0?c.pretab[a]:0)<<b.scalefac_scale+1)-b.subblock_gain[b.window[a]]*8),L&&B.step[a]==je)F!=0&&(ae(F,v,We,a0,ve,xe),F=0),ee!=0&&V();else{var t0=b.width[a];if(G+b.width[a]>b.max_nonzero_coeff){var h0;h0=b.max_nonzero_coeff-G+1,pe.fill(_,b.max_nonzero_coeff,576,0),t0=h0,t0<0&&(t0=0),a=s+1}if(F==0&&ee==0&&(ve=M,xe=W,We=u,a0=ie),B!=null&&B.sfb_count1>0&&a>=B.sfb_count1&&B.step[a]>0&&je>=B.step[a]?(F!=0&&(ae(F,v,We,a0,ve,xe),F=0,ve=M,xe=W,We=u,a0=ie),ee+=t0):(ee!=0&&(y(ee,v,We,a0,ve,xe),ee=0,ve=M,xe=W,We=u,a0=ie),F+=t0),t0<=0){ee!=0&&V(),F!=0&&V();break}}a<=s&&(W+=b.width[a],ie+=b.width[a],G+=b.width[a])}F!=0&&(ae(F,v,We,a0,ve,xe),F=0),ee!=0&&V()}function T(u,_,v){var b=0,B=0;do{var a=u[_++],s=u[_++];b<a&&(b=a),B<s&&(B=s)}while(_<v);return b<B&&(b=B),b}function $(u,_,v,b,B,a){var s=N.ht[b].xlen*65536+N.ht[B].xlen,G=0,L;do{var F=u[_++],ee=u[_++];F!=0&&(F>14&&(F=15,G+=s),F*=16),ee!=0&&(ee>14&&(ee=15,G+=s),F+=ee),G+=N.largetbl[F]}while(_<v);return L=G&65535,G>>=16,G>L&&(G=L,b=B),a.bits+=G,b}function I(u,_,v,b){var B=0,a=N.ht[1].hlen;do{var s=u[_+0]*2+u[_+1];_+=2,B+=a[s]}while(_<v);return b.bits+=B,1}function K(u,_,v,b,B){var a=0,s,G=N.ht[b].xlen,L;b==2?L=N.table23:L=N.table56;do{var F=u[_+0]*G+u[_+1];_+=2,a+=L[F]}while(_<v);return s=a&65535,a>>=16,a>s&&(a=s,b++),B.bits+=a,b}function x(u,_,v,b,B){var a=0,s=0,G=0,L=N.ht[b].xlen,F=N.ht[b].hlen,ee=N.ht[b+1].hlen,ie=N.ht[b+2].hlen;do{var M=u[_+0]*L+u[_+1];_+=2,a+=F[M],s+=ee[M],G+=ie[M]}while(_<v);var W=b;return a>s&&(a=s,W++),a>G&&(a=G,W=b+2),B.bits+=a,W}var J=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function R(u,_,v,b){var B=T(u,_,v);switch(B){case 0:return B;case 1:return I(u,_,v,b);case 2:case 3:return K(u,_,v,J[B-1],b);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return x(u,_,v,J[B-1],b);default:B>Je.IXMAX_VAL&&V(),B-=15;var a;for(a=24;a<32&&!(N.ht[a].linmax>=B);a++);var s;for(s=a-8;s<24&&!(N.ht[s].linmax>=B);s++);return $(u,_,v,s,a,b)}}this.noquant_count_bits=function(u,_,v){var b=_.l3_enc,B=Math.min(576,_.max_nonzero_coeff+2>>1<<1);for(v!=null&&(v.sfb_count1=0);B>1&&!(b[B-1]|b[B-2]);B-=2);_.count1=B;for(var a=0,s=0;B>3;B-=4){var G;if(((b[B-1]|b[B-2]|b[B-3]|b[B-4])&2147483647)>1)break;G=((b[B-4]*2+b[B-3])*2+b[B-2])*2+b[B-1],a+=N.t32l[G],s+=N.t33l[G]}var L=a;if(_.count1table_select=0,a>s&&(L=s,_.count1table_select=1),_.count1bits=L,_.big_values=B,B==0)return L;if(_.block_type==t.SHORT_TYPE)a=3*u.scalefac_band.s[3],a>_.big_values&&(a=_.big_values),s=_.big_values;else if(_.block_type==t.NORM_TYPE){if(a=_.region0_count=u.bv_scf[B-2],s=_.region1_count=u.bv_scf[B-1],s=u.scalefac_band.l[a+s+2],a=u.scalefac_band.l[a+1],s<B){var F=new g(L);_.table_select[2]=R(b,s,B,F),L=F.bits}}else _.region0_count=7,_.region1_count=t.SBMAX_l-1-7-1,a=u.scalefac_band.l[8],s=B,a>s&&(a=s);if(a=Math.min(a,B),s=Math.min(s,B),0<a){var F=new g(L);_.table_select[0]=R(b,0,a,F),L=F.bits}if(a<s){var F=new g(L);_.table_select[1]=R(b,a,s,F),L=F.bits}if(u.use_best_huffman==2&&V(),v!=null&&_.block_type==t.NORM_TYPE){for(var ee=0;u.scalefac_band.l[ee]<_.big_values;)ee++;v.sfb_count1=ee}return L},this.count_bits=function(u,_,v,b){var B=v.l3_enc,a=Je.IXMAX_VAL/c.IPOW20(v.global_gain);return v.xrpow_max>a?Je.LARGE_BITS:(p(_,B,c.IPOW20(v.global_gain),v,b),u.substep_shaping&2&&V(),this.noquant_count_bits(u,v,b))};function A(u,_,v,b,B,a,s){for(var G=_.big_values,L=0;L<=22;L++)b[L]=Je.LARGE_BITS;for(var L=0;L<16;L++){var F=u.scalefac_band.l[L+1];if(F>=G)break;var ee=0,ie=new g(ee),M=R(v,0,F,ie);ee=ie.bits;for(var W=0;W<8;W++){var ve=u.scalefac_band.l[L+W+2];if(ve>=G)break;var xe=ee;ie=new g(xe);var We=R(v,F,ve,ie);xe=ie.bits,b[L+W]>xe&&(b[L+W]=xe,B[L+W]=L,a[L+W]=M,s[L+W]=We)}}}function e(u,_,v,b,B,a,s,G){for(var L=_.big_values,F=2;F<t.SBMAX_l+1;F++){var ee=u.scalefac_band.l[F];if(ee>=L)break;var ie=B[F-2]+_.count1bits;if(v.part2_3_length<=ie)break;var M=new g(ie),W=R(b,ee,L,M);ie=M.bits,!(v.part2_3_length<=ie)&&(v.assign(_),v.part2_3_length=ie,v.region0_count=a[F-2],v.region1_count=F-2-a[F-2],v.table_select[0]=s[F-2],v.table_select[1]=G[F-2],v.table_select[2]=W)}}this.best_huffman_divide=function(u,_){var v=new b0,b=_.l3_enc,B=d(23),a=d(23),s=d(23),G=d(23);if(!(_.block_type==t.SHORT_TYPE&&u.mode_gr==1)){v.assign(_),_.block_type==t.NORM_TYPE&&(A(u,_,b,B,a,s,G),e(u,v,_,b,B,a,s,G));var L=v.big_values;if(!(L==0||(b[L-2]|b[L-1])>1)&&(L=_.count1+2,!(L>576))){v.assign(_),v.count1=L;for(var F=0,ee=0;L>v.big_values;L-=4){var ie=((b[L-4]*2+b[L-3])*2+b[L-2])*2+b[L-1];F+=N.t32l[ie],ee+=N.t33l[ie]}if(v.big_values=L,v.count1table_select=0,F>ee&&(F=ee,v.count1table_select=1),v.count1bits=F,v.block_type==t.NORM_TYPE)e(u,v,_,b,B,a,s,G);else{if(v.part2_3_length=F,F=u.scalefac_band.l[8],F>L&&(F=L),F>0){var M=new g(v.part2_3_length);v.table_select[0]=R(b,0,F,M),v.part2_3_length=M.bits}if(L>F){var M=new g(v.part2_3_length);v.table_select[1]=R(b,F,L,M),v.part2_3_length=M.bits}_.part2_3_length>v.part2_3_length&&_.assign(v)}}}};var l=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],m=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],C=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],h=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];Ve.slen1_tab=C,Ve.slen2_tab=h;function o(u,_){for(var v,b=_.tt[1][u],B=_.tt[0][u],a=0;a<N.scfsi_band.length-1;a++){for(v=N.scfsi_band[a];v<N.scfsi_band[a+1]&&!(B.scalefac[v]!=b.scalefac[v]&&b.scalefac[v]>=0);v++);if(v==N.scfsi_band[a+1]){for(v=N.scfsi_band[a];v<N.scfsi_band[a+1];v++)b.scalefac[v]=-1;_.scfsi[u][a]=1}}var s=0,G=0;for(v=0;v<11;v++)b.scalefac[v]!=-1&&(G++,s<b.scalefac[v]&&(s=b.scalefac[v]));for(var L=0,F=0;v<t.SBPSY_l;v++)b.scalefac[v]!=-1&&(F++,L<b.scalefac[v]&&(L=b.scalefac[v]));for(var a=0;a<16;a++)if(s<l[a]&&L<m[a]){var ee=C[a]*G+h[a]*F;b.part2_length>ee&&(b.part2_length=ee,b.scalefac_compress=a)}}this.best_scalefac_store=function(u,_,v,b){var B=b.tt[_][v],a,s,G,L,F=0;for(G=0,a=0;a<B.sfbmax;a++){var ee=B.width[a];for(G+=ee,L=-ee;L<0&&B.l3_enc[L+G]==0;L++);L==0&&(B.scalefac[a]=F=-2)}if(B.scalefac_scale==0&&B.preflag==0){var ie=0;for(a=0;a<B.sfbmax;a++)B.scalefac[a]>0&&(ie|=B.scalefac[a]);if(!(ie&1)&&ie!=0){for(a=0;a<B.sfbmax;a++)B.scalefac[a]>0&&(B.scalefac[a]>>=1);B.scalefac_scale=F=1}}if(B.preflag==0&&B.block_type!=t.SHORT_TYPE&&u.mode_gr==2){for(a=11;a<t.SBPSY_l&&!(B.scalefac[a]<c.pretab[a]&&B.scalefac[a]!=-2);a++);if(a==t.SBPSY_l){for(a=11;a<t.SBPSY_l;a++)B.scalefac[a]>0&&(B.scalefac[a]-=c.pretab[a]);B.preflag=F=1}}for(s=0;s<4;s++)b.scfsi[v][s]=0;for(u.mode_gr==2&&_==1&&b.tt[0][v].block_type!=t.SHORT_TYPE&&b.tt[1][v].block_type!=t.SHORT_TYPE&&(o(v,b),F=0),a=0;a<B.sfbmax;a++)B.scalefac[a]==-2&&(B.scalefac[a]=0);F!=0&&(u.mode_gr==2?this.scale_bitcount(B):this.scale_bitcount_lsf(u,B))};var f=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],i=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],w=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(u){var _,v,b=0,B=0,a,s=u.scalefac;if(u.block_type==t.SHORT_TYPE)a=f,u.mixed_block_flag!=0&&(a=i);else if(a=w,u.preflag==0){for(v=11;v<t.SBPSY_l&&!(s[v]<c.pretab[v]);v++);if(v==t.SBPSY_l)for(u.preflag=1,v=11;v<t.SBPSY_l;v++)s[v]-=c.pretab[v]}for(v=0;v<u.sfbdivide;v++)b<s[v]&&(b=s[v]);for(;v<u.sfbmax;v++)B<s[v]&&(B=s[v]);for(u.part2_length=Je.LARGE_BITS,_=0;_<16;_++)b<l[_]&&B<m[_]&&u.part2_length>a[_]&&(u.part2_length=a[_],u.scalefac_compress=_);return u.part2_length==Je.LARGE_BITS};var n=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(u,_){var v,b,B,a,s,G,L,F,ee=d(4),ie=_.scalefac;for(_.preflag!=0?v=2:v=0,L=0;L<4;L++)ee[L]=0;if(_.block_type==t.SHORT_TYPE){b=1;var M=c.nr_of_sfb_block[v][b];for(F=0,B=0;B<4;B++)for(a=M[B]/3,L=0;L<a;L++,F++)for(s=0;s<3;s++)ie[F*3+s]>ee[B]&&(ee[B]=ie[F*3+s])}else{b=0;var M=c.nr_of_sfb_block[v][b];for(F=0,B=0;B<4;B++)for(a=M[B],L=0;L<a;L++,F++)ie[F]>ee[B]&&(ee[B]=ie[F])}for(G=!1,B=0;B<4;B++)ee[B]>n[v][B]&&(G=!0);if(!G){var W,ve,xe,We;for(_.sfb_partition_table=c.nr_of_sfb_block[v][b],B=0;B<4;B++)_.slen[B]=O[ee[B]];switch(W=_.slen[0],ve=_.slen[1],xe=_.slen[2],We=_.slen[3],v){case 0:_.scalefac_compress=(W*5+ve<<4)+(xe<<2)+We;break;case 1:_.scalefac_compress=400+(W*5+ve<<2)+xe;break;case 2:_.scalefac_compress=500+W*3+ve;break}}if(!G)for(_.part2_length=0,B=0;B<4;B++)_.part2_length+=_.slen[B]*_.sfb_partition_table[B];return G};var O=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(u){for(var _=2;_<=576;_+=2){for(var v=0,b;u.scalefac_band.l[++v]<_;);for(b=H[v][0];u.scalefac_band.l[b+1]>_;)b--;for(b<0&&(b=H[v][0]),u.bv_scf[_-2]=b,b=H[v][1];u.scalefac_band.l[b+u.bv_scf[_-2]+2]>_;)b--;b<0&&(b=H[v][1]),u.bv_scf[_-1]=b}}}Fe.STEPS_per_dB=100,Fe.MAX_dB=120,Fe.GAIN_NOT_ENOUGH_SAMPLES=-24601,Fe.GAIN_ANALYSIS_ERROR=0,Fe.GAIN_ANALYSIS_OK=1,Fe.INIT_GAIN_ANALYSIS_ERROR=0,Fe.INIT_GAIN_ANALYSIS_OK=1,Fe.YULE_ORDER=10,Fe.MAX_ORDER=Fe.YULE_ORDER,Fe.MAX_SAMP_FREQ=48e3,Fe.RMS_WINDOW_TIME_NUMERATOR=1,Fe.RMS_WINDOW_TIME_DENOMINATOR=20,Fe.MAX_SAMPLES_PER_WINDOW=Fe.MAX_SAMP_FREQ*Fe.RMS_WINDOW_TIME_NUMERATOR/Fe.RMS_WINDOW_TIME_DENOMINATOR+1;function Fe(){}function o0(){function c(p,T,$,I,K,x,J,R,A,e,l,m,C,h){this.quant_comp=T,this.quant_comp_s=$,this.safejoint=I,this.nsmsfix=K,this.st_lrm=x,this.st_s=J,this.nsbass=R,this.scale=A,this.masking_adj=e,this.ath_lower=l,this.ath_curve=m,this.interch=C,this.sfscale=h}var g;this.setModules=function(p){g=p};function H(p,T,$){V()}var y=[new c(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new c(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new c(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new c(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new c(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new c(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new c(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new c(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new c(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new c(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new c(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new c(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new c(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new c(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new c(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new c(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new c(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function ae(p,T,$){var I=T,K=g.nearestBitrateFullIndex(T);if(p.VBR=j.vbr_abr,p.VBR_mean_bitrate_kbps=I,p.VBR_mean_bitrate_kbps=Math.min(p.VBR_mean_bitrate_kbps,320),p.VBR_mean_bitrate_kbps=Math.max(p.VBR_mean_bitrate_kbps,8),p.brate=p.VBR_mean_bitrate_kbps,p.VBR_mean_bitrate_kbps>320&&(p.disable_reservoir=!0),y[K].safejoint>0&&(p.exp_nspsytune=p.exp_nspsytune|2),y[K].sfscale>0&&(p.internal_flags.noise_shaping=2),Math.abs(y[K].nsbass)>0){var x=int(y[K].nsbass*4);x<0&&(x+=64),p.exp_nspsytune=p.exp_nspsytune|x<<2}return $!=0?p.quant_comp=y[K].quant_comp:Math.abs(p.quant_comp- -1)>0||(p.quant_comp=y[K].quant_comp),$!=0?p.quant_comp_short=y[K].quant_comp_s:Math.abs(p.quant_comp_short- -1)>0||(p.quant_comp_short=y[K].quant_comp_s),$!=0?p.msfix=y[K].nsmsfix:Math.abs(p.msfix- -1)>0||(p.msfix=y[K].nsmsfix),$!=0?p.internal_flags.nsPsy.attackthre=y[K].st_lrm:Math.abs(p.internal_flags.nsPsy.attackthre- -1)>0||(p.internal_flags.nsPsy.attackthre=y[K].st_lrm),$!=0?p.internal_flags.nsPsy.attackthre_s=y[K].st_s:Math.abs(p.internal_flags.nsPsy.attackthre_s- -1)>0||(p.internal_flags.nsPsy.attackthre_s=y[K].st_s),$!=0?p.scale=y[K].scale:Math.abs(p.scale- -1)>0||(p.scale=y[K].scale),$!=0?p.maskingadjust=y[K].masking_adj:Math.abs(p.maskingadjust-0)>0||(p.maskingadjust=y[K].masking_adj),y[K].masking_adj>0?$!=0?p.maskingadjust_short=y[K].masking_adj*.9:Math.abs(p.maskingadjust_short-0)>0||(p.maskingadjust_short=y[K].masking_adj*.9):$!=0?p.maskingadjust_short=y[K].masking_adj*1.1:Math.abs(p.maskingadjust_short-0)>0||(p.maskingadjust_short=y[K].masking_adj*1.1),$!=0?p.ATHlower=-y[K].ath_lower/10:Math.abs(-p.ATHlower*10-0)>0||(p.ATHlower=-y[K].ath_lower/10),$!=0?p.ATHcurve=y[K].ath_curve:Math.abs(p.ATHcurve- -1)>0||(p.ATHcurve=y[K].ath_curve),$!=0?p.interChRatio=y[K].interch:Math.abs(p.interChRatio- -1)>0||(p.interChRatio=y[K].interch),T}this.apply_preset=function(p,T,$){switch(T){case be.R3MIX:{T=be.V3,p.VBR=j.vbr_mtrh;break}case be.MEDIUM:{T=be.V4,p.VBR=j.vbr_rh;break}case be.MEDIUM_FAST:{T=be.V4,p.VBR=j.vbr_mtrh;break}case be.STANDARD:{T=be.V2,p.VBR=j.vbr_rh;break}case be.STANDARD_FAST:{T=be.V2,p.VBR=j.vbr_mtrh;break}case be.EXTREME:{T=be.V0,p.VBR=j.vbr_rh;break}case be.EXTREME_FAST:{T=be.V0,p.VBR=j.vbr_mtrh;break}case be.INSANE:return T=320,p.preset=T,ae(p,T,$),p.VBR=j.vbr_off,T}switch(p.preset=T,T){case be.V9:return H(),T;case be.V8:return H(),T;case be.V7:return H(),T;case be.V6:return H(),T;case be.V5:return H(),T;case be.V4:return H(),T;case be.V3:return H(),T;case be.V2:return H(),T;case be.V1:return H(),T;case be.V0:return H(),T}return 8<=T&&T<=320?ae(p,T,$):(p.preset=0,T)}}function Ye(){var c;this.setModules=function(g){c=g},this.ResvFrameBegin=function(g,H){var y=g.internal_flags,ae,p=y.l3_side,T=c.getframebits(g);H.bits=(T-y.sideinfo_len*8)/y.mode_gr;var $=8*256*y.mode_gr-8;g.brate>320?V():(ae=8*1440,g.strict_ISO&&V()),y.ResvMax=ae-T,y.ResvMax>$&&(y.ResvMax=$),(y.ResvMax<0||g.disable_reservoir)&&(y.ResvMax=0);var I=H.bits*y.mode_gr+Math.min(y.ResvSize,y.ResvMax);return I>ae&&(I=ae),p.resvDrain_pre=0,y.pinfo!=null&&V(),I},this.ResvMaxBits=function(g,H,y,ae){var p=g.internal_flags,T,$=p.ResvSize,I=p.ResvMax;ae!=0&&($+=H),p.substep_shaping&1&&(I*=.9),y.bits=H,$*10>I*9?(T=$-I*9/10,y.bits+=T,p.substep_shaping|=128):(T=0,p.substep_shaping&=127,!g.disable_reservoir&&!(p.substep_shaping&1)&&(y.bits-=.1*H));var K=$<p.ResvMax*6/10?$:p.ResvMax*6/10;return K-=T,K<0&&(K=0),K},this.ResvAdjust=function(g,H){g.ResvSize-=H.part2_3_length+H.part2_length},this.ResvFrameEnd=function(g,H){var y,ae=g.l3_side;g.ResvSize+=H*g.mode_gr;var p=0;ae.resvDrain_post=0,ae.resvDrain_pre=0,(y=g.ResvSize%8)!=0&&(p+=y),y=g.ResvSize-p-g.ResvMax,y>0&&(p+=y);{var T=Math.min(ae.main_data_begin*8,p)/8;ae.resvDrain_pre+=8*T,p-=8*T,g.ResvSize-=8*T,ae.main_data_begin-=T}ae.resvDrain_post+=p,g.ResvSize-=p}}v0.NUMTOCENTRIES=100,v0.MAXFRAMESIZE=2880;function v0(){this.setModules=function(H,y,ae){};var c=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function g(H,y){var ae=y^H;return y=y>>8^c[ae&255],y}this.updateMusicCRC=function(H,y,ae,p){for(var T=0;T<p;++T)H[0]=g(y[ae+T],H[0])}}ge.EQ=function(c,g){return Math.abs(c)>Math.abs(g)?Math.abs(c-g)<=Math.abs(c)*1e-6:Math.abs(c-g)<=Math.abs(g)*1e-6},ge.NEQ=function(c,g){return!ge.EQ(c,g)};function ge(){var c=this,g=null,H=null;this.setModules=function(o,f,i,w){g=i,H=w};var y=null,ae=0,p=0,T=0;this.getframebits=function(o){var f=o.internal_flags,i;f.bitrate_index!=0?i=N.bitrate_table[o.version][f.bitrate_index]:i=o.brate;var w=0|(o.version+1)*72e3*i/o.out_samplerate+f.padding;return 8*w};function $(o){q.arraycopy(o.header[o.w_ptr].buf,0,y,p,o.sideinfo_len),p+=o.sideinfo_len,ae+=o.sideinfo_len*8,o.w_ptr=o.w_ptr+1&Te.MAX_HEADER_BUF-1}function I(o,f,i){for(;i>0;){var w;T==0&&(T=8,p++,o.header[o.w_ptr].write_timing==ae&&$(o),y[p]=0),w=Math.min(i,T),i-=w,T-=w,y[p]|=f>>i<<T,ae+=w}}function K(o,f){var i=o.internal_flags,w;if(f>=8&&(I(i,76,8),f-=8),f>=8&&(I(i,65,8),f-=8),f>=8&&(I(i,77,8),f-=8),f>=8&&(I(i,69,8),f-=8),f>=32){var n=g.getLameShortVersion();if(f>=32)for(w=0;w<n.length&&f>=8;++w)f-=8,I(i,n.charCodeAt(w),8)}for(;f>=1;f-=1)I(i,i.ancillary_flag,1),i.ancillary_flag^=o.disable_reservoir?0:1}function x(o,f,i){for(var w=o.header[o.h_ptr].ptr;i>0;){var n=Math.min(i,8-(w&7));i-=n,o.header[o.h_ptr].buf[w>>3]|=f>>i<<8-(w&7)-n,w+=n}o.header[o.h_ptr].ptr=w}function J(o,f){var i=o.internal_flags,w,n,O;if(w=i.l3_side,i.header[i.h_ptr].ptr=0,pe.fill(i.header[i.h_ptr].buf,0,i.sideinfo_len,0),o.out_samplerate<16e3?x(i,4094,12):x(i,4095,12),x(i,o.version,1),x(i,1,2),x(i,o.error_protection?0:1,1),x(i,i.bitrate_index,4),x(i,i.samplerate_index,2),x(i,i.padding,1),x(i,o.extension,1),x(i,o.mode.ordinal(),2),x(i,i.mode_ext,2),x(i,o.copyright,1),x(i,o.original,1),x(i,o.emphasis,2),o.error_protection&&x(i,0,16),o.version==1){for(x(i,w.main_data_begin,9),i.channels_out==2?x(i,w.private_bits,3):x(i,w.private_bits,5),O=0;O<i.channels_out;O++){var u;for(u=0;u<4;u++)x(i,w.scfsi[O][u],1)}for(n=0;n<2;n++)for(O=0;O<i.channels_out;O++){var _=w.tt[n][O];x(i,_.part2_3_length+_.part2_length,12),x(i,_.big_values/2,9),x(i,_.global_gain,8),x(i,_.scalefac_compress,4),_.block_type!=t.NORM_TYPE?(x(i,1,1),x(i,_.block_type,2),x(i,_.mixed_block_flag,1),_.table_select[0]==14&&(_.table_select[0]=16),x(i,_.table_select[0],5),_.table_select[1]==14&&(_.table_select[1]=16),x(i,_.table_select[1],5),x(i,_.subblock_gain[0],3),x(i,_.subblock_gain[1],3),x(i,_.subblock_gain[2],3)):(x(i,0,1),_.table_select[0]==14&&(_.table_select[0]=16),x(i,_.table_select[0],5),_.table_select[1]==14&&(_.table_select[1]=16),x(i,_.table_select[1],5),_.table_select[2]==14&&(_.table_select[2]=16),x(i,_.table_select[2],5),x(i,_.region0_count,4),x(i,_.region1_count,3)),x(i,_.preflag,1),x(i,_.scalefac_scale,1),x(i,_.count1table_select,1)}}else for(x(i,w.main_data_begin,8),x(i,w.private_bits,i.channels_out),n=0,O=0;O<i.channels_out;O++){var _=w.tt[n][O];x(i,_.part2_3_length+_.part2_length,12),x(i,_.big_values/2,9),x(i,_.global_gain,8),x(i,_.scalefac_compress,9),_.block_type!=t.NORM_TYPE?(x(i,1,1),x(i,_.block_type,2),x(i,_.mixed_block_flag,1),_.table_select[0]==14&&(_.table_select[0]=16),x(i,_.table_select[0],5),_.table_select[1]==14&&(_.table_select[1]=16),x(i,_.table_select[1],5),x(i,_.subblock_gain[0],3),x(i,_.subblock_gain[1],3),x(i,_.subblock_gain[2],3)):(x(i,0,1),_.table_select[0]==14&&(_.table_select[0]=16),x(i,_.table_select[0],5),_.table_select[1]==14&&(_.table_select[1]=16),x(i,_.table_select[1],5),_.table_select[2]==14&&(_.table_select[2]=16),x(i,_.table_select[2],5),x(i,_.region0_count,4),x(i,_.region1_count,3)),x(i,_.scalefac_scale,1),x(i,_.count1table_select,1)}o.error_protection&&V();{var v=i.h_ptr;i.h_ptr=v+1&Te.MAX_HEADER_BUF-1,i.header[i.h_ptr].write_timing=i.header[v].write_timing+f,i.h_ptr==i.w_ptr}}function R(o,f){var i=N.ht[f.count1table_select+32],w,n=0,O=f.big_values,u=f.big_values;for(w=(f.count1-f.big_values)/4;w>0;--w){var _=0,v=0,b;b=f.l3_enc[O+0],b!=0&&(v+=8,f.xr[u+0]<0&&_++),b=f.l3_enc[O+1],b!=0&&(v+=4,_*=2,f.xr[u+1]<0&&_++),b=f.l3_enc[O+2],b!=0&&(v+=2,_*=2,f.xr[u+2]<0&&_++),b=f.l3_enc[O+3],b!=0&&(v++,_*=2,f.xr[u+3]<0&&_++),O+=4,u+=4,I(o,_+i.table[v],i.hlen[v]),n+=i.hlen[v]}return n}function A(o,f,i,w,n){var O=N.ht[f],u=0;if(f==0)return u;for(var _=i;_<w;_+=2){var v=0,b=0,B=O.xlen,a=O.xlen,s=0,G=n.l3_enc[_],L=n.l3_enc[_+1];if(G!=0&&(n.xr[_]<0&&s++,v--),f>15){if(G>14){var F=G-15;s|=F<<1,b=B,G=15}if(L>14){var ee=L-15;s<<=B,s|=ee,b+=B,L=15}a=16}L!=0&&(s<<=1,n.xr[_+1]<0&&s++,v--),G=G*a+L,b-=v,v+=O.hlen[G],I(o,O.table[G],v),I(o,s,b),u+=v+b}return u}function e(o,f){var i=3*o.scalefac_band.s[3];i>f.big_values&&(i=f.big_values);var w=A(o,f.table_select[0],0,i,f);return w+=A(o,f.table_select[1],i,f.big_values,f),w}function l(o,f){var i,w,n,O;i=f.big_values;var u=f.region0_count+1;return n=o.scalefac_band.l[u],u+=f.region1_count+1,O=o.scalefac_band.l[u],n>i&&(n=i),O>i&&(O=i),w=A(o,f.table_select[0],0,n,f),w+=A(o,f.table_select[1],n,O,f),w+=A(o,f.table_select[2],O,i,f),w}function m(o){var f,i,w,n,O=0,u=o.internal_flags,_=u.l3_side;if(o.version==1)for(f=0;f<2;f++)for(i=0;i<u.channels_out;i++){var v=_.tt[f][i],b=Ve.slen1_tab[v.scalefac_compress],B=Ve.slen2_tab[v.scalefac_compress];for(n=0,w=0;w<v.sfbdivide;w++)v.scalefac[w]!=-1&&(I(u,v.scalefac[w],b),n+=b);for(;w<v.sfbmax;w++)v.scalefac[w]!=-1&&(I(u,v.scalefac[w],B),n+=B);v.block_type==t.SHORT_TYPE?n+=e(u,v):n+=l(u,v),n+=R(u,v),O+=n}else for(f=0,i=0;i<u.channels_out;i++){var v=_.tt[f][i],a,s,G=0;if(n=0,w=0,s=0,v.block_type==t.SHORT_TYPE){for(;s<4;s++){var L=v.sfb_partition_table[s]/3,F=v.slen[s];for(a=0;a<L;a++,w++)I(u,Math.max(v.scalefac[w*3+0],0),F),I(u,Math.max(v.scalefac[w*3+1],0),F),I(u,Math.max(v.scalefac[w*3+2],0),F),G+=3*F}n+=e(u,v)}else{for(;s<4;s++){var L=v.sfb_partition_table[s],F=v.slen[s];for(a=0;a<L;a++,w++)I(u,Math.max(v.scalefac[w],0),F),G+=F}n+=l(u,v)}n+=R(u,v),O+=G+n}return O}function C(){this.total=0}function h(o,f){var i=o.internal_flags,w,n,O;return i.w_ptr,O=i.h_ptr-1,O==-1&&(O=Te.MAX_HEADER_BUF-1),w=i.header[O].write_timing-ae,f.total=w,w>=0&&V(),n=c.getframebits(o),w+=n,f.total+=n,f.total%8!=0?f.total=1+f.total/8:f.total=f.total/8,f.total+=p+1,w}this.flush_bitstream=function(o){var f=o.internal_flags,i,w;f.h_ptr-1,i=f.l3_side,!((w=h(o,new C))<0)&&(K(o,w),f.ResvSize=0,i.main_data_begin=0,f.findReplayGain&&V(),f.findPeakSample&&V())},this.format_bitstream=function(o){var f=o.internal_flags,i;i=f.l3_side;var w=this.getframebits(o);K(o,i.resvDrain_pre),J(o,w);var n=8*f.sideinfo_len;if(n+=m(o),K(o,i.resvDrain_post),n+=i.resvDrain_post,i.main_data_begin+=(w-n)/8,h(o,new C)!=f.ResvSize,i.main_data_begin*8!=f.ResvSize&&(f.ResvSize=i.main_data_begin*8),ae>1e9){var O;for(O=0;O<Te.MAX_HEADER_BUF;++O)f.header[O].write_timing-=ae;ae=0}return 0},this.copy_buffer=function(o,f,i,w,n){var O=p+1;if(O<=0)return 0;if(w!=0&&O>w)return-1;if(q.arraycopy(y,0,f,i,O),p=-1,T=0,n!=0){var u=d(1);u[0]=o.nMusicCRC,H.updateMusicCRC(u,f,i,O),o.nMusicCRC=u[0],O>0&&(o.VBR_seek_table.nBytesWritten+=O),o.decode_on_the_fly&&V()}return O},this.init_bit_stream_w=function(o){y=oe(be.LAME_MAXMP3BUFFER),o.h_ptr=o.w_ptr=0,o.header[o.h_ptr].write_timing=0,p=-1,T=0,ae=0}}function Me(c,g,H,y){this.xlen=c,this.linmax=g,this.table=H,this.hlen=y}var N={};N.t1HB=[1,1,1,0],N.t2HB=[1,2,1,3,1,1,3,2,0],N.t3HB=[3,2,1,1,1,1,3,2,0],N.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],N.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],N.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],N.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],N.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],N.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],N.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],N.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],N.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],N.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],N.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],N.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],N.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],N.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],N.t1l=[1,4,3,5],N.t2l=[1,4,7,4,5,7,6,7,8],N.t3l=[2,3,7,4,4,7,6,7,8],N.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],N.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],N.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],N.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],N.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],N.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],N.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],N.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],N.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],N.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],N.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],N.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],N.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],N.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],N.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],N.ht=[new Me(0,0,null,null),new Me(2,0,N.t1HB,N.t1l),new Me(3,0,N.t2HB,N.t2l),new Me(3,0,N.t3HB,N.t3l),new Me(0,0,null,null),new Me(4,0,N.t5HB,N.t5l),new Me(4,0,N.t6HB,N.t6l),new Me(6,0,N.t7HB,N.t7l),new Me(6,0,N.t8HB,N.t8l),new Me(6,0,N.t9HB,N.t9l),new Me(8,0,N.t10HB,N.t10l),new Me(8,0,N.t11HB,N.t11l),new Me(8,0,N.t12HB,N.t12l),new Me(16,0,N.t13HB,N.t13l),new Me(0,0,null,N.t16_5l),new Me(16,0,N.t15HB,N.t15l),new Me(1,1,N.t16HB,N.t16l),new Me(2,3,N.t16HB,N.t16l),new Me(3,7,N.t16HB,N.t16l),new Me(4,15,N.t16HB,N.t16l),new Me(6,63,N.t16HB,N.t16l),new Me(8,255,N.t16HB,N.t16l),new Me(10,1023,N.t16HB,N.t16l),new Me(13,8191,N.t16HB,N.t16l),new Me(4,15,N.t24HB,N.t24l),new Me(5,31,N.t24HB,N.t24l),new Me(6,63,N.t24HB,N.t24l),new Me(7,127,N.t24HB,N.t24l),new Me(8,255,N.t24HB,N.t24l),new Me(9,511,N.t24HB,N.t24l),new Me(11,2047,N.t24HB,N.t24l),new Me(13,8191,N.t24HB,N.t24l),new Me(0,0,N.t32HB,N.t32l),new Me(0,0,N.t33HB,N.t33l)],N.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],N.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],N.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],N.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],N.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],N.scfsi_band=[0,6,11,16,21];function u0(c){this.bits=c}function Xe(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}function qe(){this.setModules=function(c,g){}}function R0(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=P(t.SBMAX_l),this.s=P(t.SBMAX_s),this.psfb21=P(t.PSFB21),this.psfb12=P(t.PSFB12),this.cb_l=P(t.CBANDS),this.cb_s=P(t.CBANDS),this.eql_w=P(t.BLKSIZE/2)}function m0(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=ke.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}function B0(c){var g=c;this.quantize=g,this.iteration_loop=function(H,y,ae,p){var T=H.internal_flags,$=P(me.SFBMAX),I=P(576),K=d(2),x=0,J=T.l3_side,R=new u0(x);this.quantize.rv.ResvFrameBegin(H,R),x=R.bits;for(var A=0;A<T.mode_gr;A++){this.quantize.qupvt.on_pe(H,y,K,x,A,A),T.mode_ext==t.MPG_MD_MS_LR&&V();for(var e=0;e<T.channels_out;e++){var l,m,C=J.tt[A][e];C.block_type!=t.SHORT_TYPE?(l=0,m=T.PSY.mask_adjust-l):(l=0,m=T.PSY.mask_adjust_short-l),T.masking_lower=Math.pow(10,m*.1),this.quantize.init_outer_loop(T,C),this.quantize.init_xrpow(T,C,I)&&(this.quantize.qupvt.calc_xmin(H,p[A][e],C,$),this.quantize.outer_loop(H,C,$,I,e,K[e])),this.quantize.iteration_finish_one(T,A,e)}}this.quantize.rv.ResvFrameEnd(T,x)}}function x0(){}function n0(c,g,H,y){this.l=d(1+t.SBMAX_l),this.s=d(1+t.SBMAX_s),this.psfb21=d(1+t.PSFB21),this.psfb12=d(1+t.PSFB12);var ae=this.l,p=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],q.arraycopy(this.arrL,0,ae,0,Math.min(this.arrL.length,this.l.length)),q.arraycopy(this.arrS,0,p,0,Math.min(this.arrS.length,this.s.length)),q.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),q.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}Je.Q_MAX=257,Je.Q_MAX2=116,Je.LARGE_BITS=1e5,Je.IXMAX_VAL=8206;function Je(){var c=null,g=null,H=null;this.setModules=function(h,o,f){c=h,g=o,H=f};function y(h){return J[h+Je.Q_MAX2]}this.IPOW20=function(h){return R[h]};var ae=2220446049250313e-31,p=Je.IXMAX_VAL,T=p+2,$=Je.Q_MAX,I=Je.Q_MAX2,K=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var x=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=x,this.sfBandIndex=[new n0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n0([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n0([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n0([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n0([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n0([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var J=P($+I+1),R=P($),A=P(T),e=P(T);this.adj43=e;function l(h,o){var f=H.ATHformula(o,h);return f-=K,f=Math.pow(10,f/10+h.ATHlower),f}function m(h){for(var o=h.internal_flags.ATH.l,f=h.internal_flags.ATH.psfb21,i=h.internal_flags.ATH.s,w=h.internal_flags.ATH.psfb12,n=h.internal_flags,O=h.out_samplerate,u=0;u<t.SBMAX_l;u++){var _=n.scalefac_band.l[u],v=n.scalefac_band.l[u+1];o[u]=Le.MAX_VALUE;for(var b=_;b<v;b++){var B=b*O/1152,a=l(h,B);o[u]=Math.min(o[u],a)}}for(var u=0;u<t.PSFB21;u++){var _=n.scalefac_band.psfb21[u],v=n.scalefac_band.psfb21[u+1];f[u]=Le.MAX_VALUE;for(var b=_;b<v;b++){var B=b*O/1152,a=l(h,B);f[u]=Math.min(f[u],a)}}for(var u=0;u<t.SBMAX_s;u++){var _=n.scalefac_band.s[u],v=n.scalefac_band.s[u+1];i[u]=Le.MAX_VALUE;for(var b=_;b<v;b++){var B=b*O/384,a=l(h,B);i[u]=Math.min(i[u],a)}i[u]*=n.scalefac_band.s[u+1]-n.scalefac_band.s[u]}for(var u=0;u<t.PSFB12;u++){var _=n.scalefac_band.psfb12[u],v=n.scalefac_band.psfb12[u+1];w[u]=Le.MAX_VALUE;for(var b=_;b<v;b++){var B=b*O/384,a=l(h,B);w[u]=Math.min(w[u],a)}w[u]*=n.scalefac_band.s[13]-n.scalefac_band.s[12]}h.noATH&&V(),n.ATH.floor=10*Q(l(h,-1))}this.iteration_init=function(h){var o=h.internal_flags,f=o.l3_side,i;if(o.iteration_init_init==0){for(o.iteration_init_init=1,f.main_data_begin=0,m(h),A[0]=0,i=1;i<T;i++)A[i]=Math.pow(i,4/3);for(i=0;i<T-1;i++)e[i]=i+1-Math.pow(.5*(A[i]+A[i+1]),.75);for(e[i]=.5,i=0;i<$;i++)R[i]=Math.pow(2,(i-210)*-.1875);for(i=0;i<=$+I;i++)J[i]=Math.pow(2,(i-210-I)*.25);c.huffman_init(o);{var w,n,O,u;for(i=h.exp_nspsytune>>2&63,i>=32&&(i-=64),w=Math.pow(10,i/4/10),i=h.exp_nspsytune>>8&63,i>=32&&(i-=64),n=Math.pow(10,i/4/10),i=h.exp_nspsytune>>14&63,i>=32&&(i-=64),O=Math.pow(10,i/4/10),i=h.exp_nspsytune>>20&63,i>=32&&(i-=64),u=O*Math.pow(10,i/4/10),i=0;i<t.SBMAX_l;i++){var _;i<=6?_=w:i<=13?_=n:i<=20?_=O:_=u,o.nsPsy.longfact[i]=_}for(i=0;i<t.SBMAX_s;i++){var _;i<=5?_=w:i<=10?_=n:i<=11?_=O:_=u,o.nsPsy.shortfact[i]=_}}}},this.on_pe=function(h,o,f,i,w,n){var O=h.internal_flags,u=0,_,v=d(2),b,B=new u0(u),a=g.ResvMaxBits(h,i,B,n);u=B.bits;var s=u+a;for(s>Te.MAX_BITS_PER_GRANULE&&(s=Te.MAX_BITS_PER_GRANULE),_=0,b=0;b<O.channels_out;++b)f[b]=Math.min(Te.MAX_BITS_PER_CHANNEL,u/O.channels_out),v[b]=0|f[b]*o[w][b]/700-f[b],v[b]>i*3/4&&(v[b]=i*3/4),v[b]<0&&(v[b]=0),v[b]+f[b]>Te.MAX_BITS_PER_CHANNEL&&(v[b]=Math.max(0,Te.MAX_BITS_PER_CHANNEL-f[b])),_+=v[b];if(_>a)for(b=0;b<O.channels_out;++b)v[b]=a*v[b]/_;for(b=0;b<O.channels_out;++b)f[b]+=v[b],a-=v[b];for(_=0,b=0;b<O.channels_out;++b)_+=f[b];return _>Te.MAX_BITS_PER_GRANULE&&V(),s},this.athAdjust=function(h,o,f){var i=90.30873362,w=94.82444863,n=Y.FAST_LOG10_X(o,10),O=h*h,u=0;return n-=f,O>1e-20&&(u=1+Y.FAST_LOG10_X(O,10/i)),u<0&&(u=0),n*=u,n+=f+i-w,Math.pow(10,.1*n)},this.calc_xmin=function(h,o,f,i){var w=0,n=h.internal_flags,O,u=0,_=0,v=n.ATH,b=f.xr,B=h.VBR==j.vbr_mtrh?1:0,a=n.masking_lower;for((h.VBR==j.vbr_mtrh||h.VBR==j.vbr_mt)&&(a=1),O=0;O<f.psy_lmax;O++){var s,G,L,F,ee,ie;h.VBR==j.vbr_rh||h.VBR==j.vbr_mtrh?G=athAdjust(v.adjust,v.l[O],v.floor):G=v.adjust*v.l[O],ee=f.width[O],L=G/ee,F=ae,ie=ee>>1,s=0;do{var M,W;M=b[u]*b[u],s+=M,F+=M<L?M:L,u++,W=b[u]*b[u],s+=W,F+=W<L?W:L,u++}while(--ie>0);if(s>G&&_++,O==t.SBPSY_l&&V(),B!=0&&(G=F),!h.ATHonly){var ve=o.en.l[O];if(ve>0){var xe;xe=s*o.thm.l[O]*a/ve,B!=0&&(xe*=n.nsPsy.longfact[O]),G<xe&&(G=xe)}}B!=0?i[w++]=G:i[w++]=G*n.nsPsy.longfact[O]}var We=575;if(f.block_type!=t.SHORT_TYPE)for(var a0=576;a0--!=0&&ge.EQ(b[a0],0);)We=a0;f.max_nonzero_coeff=We;for(var je=f.sfb_smin;O<f.psymax;je++,O+=3){var ee,t0,h0;for(h.VBR==j.vbr_rh||h.VBR==j.vbr_mtrh?h0=athAdjust(v.adjust,v.s[je],v.floor):h0=v.adjust*v.s[je],ee=f.width[O],t0=0;t0<3;t0++){var s=0,G,L,F,ie=ee>>1;L=h0/ee,F=ae;do{var M,W;M=b[u]*b[u],s+=M,F+=M<L?M:L,u++,W=b[u]*b[u],s+=W,F+=W<L?W:L,u++}while(--ie>0);if(s>h0&&_++,je==t.SBPSY_s&&V(),B!=0?G=F:G=h0,!h.ATHonly&&!h.ATHshort){var ve=o.en.s[je][t0];if(ve>0){var xe;xe=s*o.thm.s[je][t0]*a/ve,B!=0&&(xe*=n.nsPsy.shortfact[je]),G<xe&&(G=xe)}}B!=0?i[w++]=G:i[w++]=G*n.nsPsy.shortfact[je]}h.useTemporal&&(i[w-3]>i[w-3+1]&&(i[w-3+1]+=(i[w-3]-i[w-3+1])*n.decay),i[w-3+1]>i[w-3+2]&&(i[w-3+2]+=(i[w-3+1]-i[w-3+2])*n.decay))}return _};function C(h){this.s=h}this.calc_noise_core=function(h,o,f,i){var w=0,n=o.s,O=h.l3_enc;if(n>h.count1)for(;f--!=0;){var u;u=h.xr[n],n++,w+=u*u,u=h.xr[n],n++,w+=u*u}else if(n>h.big_values){var _=P(2);for(_[0]=0,_[1]=i;f--!=0;){var u;u=Math.abs(h.xr[n])-_[O[n]],n++,w+=u*u,u=Math.abs(h.xr[n])-_[O[n]],n++,w+=u*u}}else for(;f--!=0;){var u;u=Math.abs(h.xr[n])-A[O[n]]*i,n++,w+=u*u,u=Math.abs(h.xr[n])-A[O[n]]*i,n++,w+=u*u}return o.s=n,w},this.calc_noise=function(h,o,f,i,w){var n=0,O=0,u,_,v=0,b=0,B=0,a=-20,s=0,G=h.scalefac,L=0;for(i.over_SSD=0,u=0;u<h.psymax;u++){var F=h.global_gain-(G[L++]+(h.preflag!=0?x[u]:0)<<h.scalefac_scale+1)-h.subblock_gain[h.window[u]]*8,ee=0;if(w!=null&&w.step[u]==F)ee=w.noise[u],s+=h.width[u],f[n++]=ee/o[O++],ee=w.noise_log[u];else{var ie=y(F);if(_=h.width[u]>>1,s+h.width[u]>h.max_nonzero_coeff){var M;M=h.max_nonzero_coeff-s+1,M>0?_=M>>1:_=0}var W=new C(s);ee=this.calc_noise_core(h,W,_,ie),s=W.s,w!=null&&(w.step[u]=F,w.noise[u]=ee),ee=f[n++]=ee/o[O++],ee=Y.FAST_LOG10(Math.max(ee,1e-20)),w!=null&&(w.noise_log[u]=ee)}if(w!=null&&(w.global_gain=h.global_gain),B+=ee,ee>0){var ve;ve=Math.max(0|ee*10+.5,1),i.over_SSD+=ve*ve,v++,b+=ee}a=Math.max(a,ee)}return i.over_count=v,i.tot_noise=B,i.over_noise=b,i.max_noise=a,v}}function I0(){this.global_gain=0,this.sfb_count1=0,this.step=d(39),this.noise=P(39),this.noise_log=P(39)}function b0(){this.xr=P(576),this.l3_enc=d(576),this.scalefac=d(me.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=d(3),this.subblock_gain=d(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=d(me.SFBMAX),this.window=d(me.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=d(4),this.max_nonzero_coeff=0;var c=this;function g(y){return new Int32Array(y)}function H(y){return new Float32Array(y)}this.assign=function(y){c.xr=H(y.xr),c.l3_enc=g(y.l3_enc),c.scalefac=g(y.scalefac),c.xrpow_max=y.xrpow_max,c.part2_3_length=y.part2_3_length,c.big_values=y.big_values,c.count1=y.count1,c.global_gain=y.global_gain,c.scalefac_compress=y.scalefac_compress,c.block_type=y.block_type,c.mixed_block_flag=y.mixed_block_flag,c.table_select=g(y.table_select),c.subblock_gain=g(y.subblock_gain),c.region0_count=y.region0_count,c.region1_count=y.region1_count,c.preflag=y.preflag,c.scalefac_scale=y.scalefac_scale,c.count1table_select=y.count1table_select,c.part2_length=y.part2_length,c.sfb_lmax=y.sfb_lmax,c.sfb_smin=y.sfb_smin,c.psy_lmax=y.psy_lmax,c.sfbmax=y.sfbmax,c.psymax=y.psymax,c.sfbdivide=y.sfbdivide,c.width=g(y.width),c.window=g(y.window),c.count1bits=y.count1bits,c.sfb_partition_table=y.sfb_partition_table.slice(0),c.slen=g(y.slen),c.max_nonzero_coeff=y.max_nonzero_coeff}}var me={};me.SFBMAX=t.SBMAX_s*3;function Z0(){this.rv=null;var c;this.qupvt=null;var g,H=new qe,y;this.setModules=function(e,l,m,C){c=l,this.rv=l,g=m,this.qupvt=m,y=C,H.setModules(g,y)};function ae(e,l,m,C){C=0;for(var h=0;h<=m;++h){var o=Math.abs(e.xr[h]);C+=o,l[h]=Math.sqrt(o*Math.sqrt(o)),l[h]>e.xrpow_max&&(e.xrpow_max=l[h])}return C}this.init_xrpow=function(e,l,m){var C=0,h=0|l.max_nonzero_coeff;if(l.xrpow_max=0,pe.fill(m,h,576,0),C=ae(l,m,h,C),C>1e-20){var o=0;e.substep_shaping&2&&(o=1);for(var f=0;f<l.psymax;f++)e.pseudohalf[f]=o;return!0}return pe.fill(l.l3_enc,0,576,0),!1};function p(e,l){var m=e.ATH,C=l.xr;if(l.block_type!=t.SHORT_TYPE)for(var h=!1,o=t.PSFB21-1;o>=0&&!h;o--){var f=e.scalefac_band.psfb21[o],i=e.scalefac_band.psfb21[o+1],w=g.athAdjust(m.adjust,m.psfb21[o],m.floor);e.nsPsy.longfact[21]>1e-12&&(w*=e.nsPsy.longfact[21]);for(var n=i-1;n>=f;n--)if(Math.abs(C[n])<w)C[n]=0;else{h=!0;break}}else for(var O=0;O<3;O++)for(var h=!1,o=t.PSFB12-1;o>=0&&!h;o--){var f=e.scalefac_band.s[12]*3+(e.scalefac_band.s[13]-e.scalefac_band.s[12])*O+(e.scalefac_band.psfb12[o]-e.scalefac_band.psfb12[0]),i=f+(e.scalefac_band.psfb12[o+1]-e.scalefac_band.psfb12[o]),u=g.athAdjust(m.adjust,m.psfb12[o],m.floor);e.nsPsy.shortfact[12]>1e-12&&(u*=e.nsPsy.shortfact[12]);for(var n=i-1;n>=f;n--)if(Math.abs(C[n])<u)C[n]=0;else{h=!0;break}}}this.init_outer_loop=function(e,l){l.part2_3_length=0,l.big_values=0,l.count1=0,l.global_gain=210,l.scalefac_compress=0,l.table_select[0]=0,l.table_select[1]=0,l.table_select[2]=0,l.subblock_gain[0]=0,l.subblock_gain[1]=0,l.subblock_gain[2]=0,l.subblock_gain[3]=0,l.region0_count=0,l.region1_count=0,l.preflag=0,l.scalefac_scale=0,l.count1table_select=0,l.part2_length=0,l.sfb_lmax=t.SBPSY_l,l.sfb_smin=t.SBPSY_s,l.psy_lmax=e.sfb21_extra?t.SBMAX_l:t.SBPSY_l,l.psymax=l.psy_lmax,l.sfbmax=l.sfb_lmax,l.sfbdivide=11;for(var m=0;m<t.SBMAX_l;m++)l.width[m]=e.scalefac_band.l[m+1]-e.scalefac_band.l[m],l.window[m]=3;if(l.block_type==t.SHORT_TYPE){var C=P(576);l.sfb_smin=0,l.sfb_lmax=0,l.mixed_block_flag!=0&&V(),l.psymax=l.sfb_lmax+3*((e.sfb21_extra?t.SBMAX_s:t.SBPSY_s)-l.sfb_smin),l.sfbmax=l.sfb_lmax+3*(t.SBPSY_s-l.sfb_smin),l.sfbdivide=l.sfbmax-18,l.psy_lmax=l.sfb_lmax;var h=e.scalefac_band.l[l.sfb_lmax];q.arraycopy(l.xr,0,C,0,576);for(var m=l.sfb_smin;m<t.SBMAX_s;m++)for(var o=e.scalefac_band.s[m],f=e.scalefac_band.s[m+1],i=0;i<3;i++)for(var w=o;w<f;w++)l.xr[h++]=C[3*w+i];for(var n=l.sfb_lmax,m=l.sfb_smin;m<t.SBMAX_s;m++)l.width[n]=l.width[n+1]=l.width[n+2]=e.scalefac_band.s[m+1]-e.scalefac_band.s[m],l.window[n]=0,l.window[n+1]=1,l.window[n+2]=2,n+=3}l.count1bits=0,l.sfb_partition_table=g.nr_of_sfb_block[0][0],l.slen[0]=0,l.slen[1]=0,l.slen[2]=0,l.slen[3]=0,l.max_nonzero_coeff=575,pe.fill(l.scalefac,0),p(e,l)};function T(e){this.ordinal=e}T.BINSEARCH_NONE=new T(0),T.BINSEARCH_UP=new T(1),T.BINSEARCH_DOWN=new T(2);function $(e,l,m,C,h){var o,f=e.CurrentStep[C],i=!1,w=e.OldValue[C],n=T.BINSEARCH_NONE;for(l.global_gain=w,m-=l.part2_length;;){var O;if(o=y.count_bits(e,h,l,null),f==1||o==m)break;o>m?(n==T.BINSEARCH_DOWN&&(i=!0),i&&(f/=2),n=T.BINSEARCH_UP,O=f):(n==T.BINSEARCH_UP&&(i=!0),i&&(f/=2),n=T.BINSEARCH_DOWN,O=-f),l.global_gain+=O,l.global_gain<0&&V(),l.global_gain>255&&V()}for(;o>m&&l.global_gain<255;)l.global_gain++,o=y.count_bits(e,h,l,null);return e.CurrentStep[C]=w-l.global_gain>=4?4:2,e.OldValue[C]=l.global_gain,l.part2_3_length=o,o}function I(e){for(var l=0;l<e.sfbmax;l++)if(e.scalefac[l]+e.subblock_gain[e.window[l]]==0)return!1;return!0}function K(e,l,m,C,h){var o;switch(e){default:case 9:{l.over_count>0?(o=m.over_SSD<=l.over_SSD,m.over_SSD==l.over_SSD&&(o=m.bits<l.bits)):o=m.max_noise<0&&m.max_noise*10+m.bits<=l.max_noise*10+l.bits;break}case 0:o=m.over_count<l.over_count||m.over_count==l.over_count&&m.over_noise<l.over_noise||m.over_count==l.over_count&&ge.EQ(m.over_noise,l.over_noise)&&m.tot_noise<l.tot_noise;break;case 8:V();case 1:o=m.max_noise<l.max_noise;break;case 2:o=m.tot_noise<l.tot_noise;break;case 3:o=m.tot_noise<l.tot_noise&&m.max_noise<l.max_noise;break;case 4:o=m.max_noise<=0&&l.max_noise>.2||m.max_noise<=0&&l.max_noise<0&&l.max_noise>m.max_noise-.2&&m.tot_noise<l.tot_noise||m.max_noise<=0&&l.max_noise>0&&l.max_noise>m.max_noise-.2&&m.tot_noise<l.tot_noise+l.over_noise||m.max_noise>0&&l.max_noise>-.05&&l.max_noise>m.max_noise-.1&&m.tot_noise+m.over_noise<l.tot_noise+l.over_noise||m.max_noise>0&&l.max_noise>-.1&&l.max_noise>m.max_noise-.15&&m.tot_noise+m.over_noise+m.over_noise<l.tot_noise+l.over_noise+l.over_noise;break;case 5:o=m.over_noise<l.over_noise||ge.EQ(m.over_noise,l.over_noise)&&m.tot_noise<l.tot_noise;break;case 6:o=m.over_noise<l.over_noise||ge.EQ(m.over_noise,l.over_noise)&&(m.max_noise<l.max_noise||ge.EQ(m.max_noise,l.max_noise)&&m.tot_noise<=l.tot_noise);break;case 7:o=m.over_count<l.over_count||m.over_noise<l.over_noise;break}return l.over_count==0&&(o=o&&m.bits<l.bits),o}function x(e,l,m,C,h){var o=e.internal_flags,f;l.scalefac_scale==0?f=1.2968395546510096:f=1.6817928305074292;for(var i=0,w=0;w<l.sfbmax;w++)i<m[w]&&(i=m[w]);var n=o.noise_shaping_amp;switch(n==3&&V(),n){case 2:break;case 1:i>1?i=Math.pow(i,.5):i*=.95;break;case 0:default:i>1?i=1:i*=.95;break}for(var O=0,w=0;w<l.sfbmax;w++){var u=l.width[w],_;if(O+=u,!(m[w]<i)){for(o.substep_shaping&2&&V(),l.scalefac[w]++,_=-u;_<0;_++)C[O+_]*=f,C[O+_]>l.xrpow_max&&(l.xrpow_max=C[O+_]);if(o.noise_shaping_amp==2)return}}}function J(e,l){for(var m=1.2968395546510096,C=0,h=0;h<e.sfbmax;h++){var o=e.width[h],f=e.scalefac[h];if(e.preflag!=0&&(f+=g.pretab[h]),C+=o,f&1){f++;for(var i=-o;i<0;i++)l[C+i]*=m,l[C+i]>e.xrpow_max&&(e.xrpow_max=l[C+i])}e.scalefac[h]=f>>1}e.preflag=0,e.scalefac_scale=1}function R(e,l,m){var C,h=l.scalefac;for(C=0;C<l.sfb_lmax;C++)if(h[C]>=16)return!0;for(var o=0;o<3;o++){var f=0,i=0;for(C=l.sfb_lmax+o;C<l.sfbdivide;C+=3)f<h[C]&&(f=h[C]);for(;C<l.sfbmax;C+=3)i<h[C]&&(i=h[C]);if(!(f<16&&i<8)){if(l.subblock_gain[o]>=7)return!0;l.subblock_gain[o]++;var w=e.scalefac_band.l[l.sfb_lmax];for(C=l.sfb_lmax+o;C<l.sfbmax;C+=3){var n,O=l.width[C],u=h[C];if(u=u-(4>>l.scalefac_scale),u>=0){h[C]=u,w+=O*3;continue}h[C]=0;{var _=210+(u<<l.scalefac_scale+1);n=g.IPOW20(_)}w+=O*(o+1);for(var v=-O;v<0;v++)m[w+v]*=n,m[w+v]>l.xrpow_max&&(l.xrpow_max=m[w+v]);w+=O*(3-o-1)}{var n=g.IPOW20(202);w+=l.width[C]*(o+1);for(var v=-l.width[C];v<0;v++)m[w+v]*=n,m[w+v]>l.xrpow_max&&(l.xrpow_max=m[w+v])}}}return!1}function A(e,l,m,C,h){var o=e.internal_flags;x(e,l,m,C);var f=I(l);return f?!1:(o.mode_gr==2?f=y.scale_bitcount(l):f=y.scale_bitcount_lsf(o,l),f?(o.noise_shaping>1&&(pe.fill(o.pseudohalf,0),l.scalefac_scale==0?(J(l,C),f=!1):l.block_type==t.SHORT_TYPE&&o.subblock_gain>0&&(f=R(o,l,C)||I(l))),f||(o.mode_gr==2?f=y.scale_bitcount(l):f=y.scale_bitcount_lsf(o,l)),!f):!0)}this.outer_loop=function(e,l,m,C,h,o){var f=e.internal_flags,i=new b0,w=P(576),n=P(me.SFBMAX),O=new Xe,u,_=new I0,v=9999999,b=!1,B=!1,a=0;if($(f,l,o,h,C),f.noise_shaping==0)return 100;g.calc_noise(l,m,n,O,_),O.bits=l.part2_3_length,i.assign(l);var s=0;for(q.arraycopy(C,0,w,0,576);!b;){do{var G=new Xe,L,F=255;if(f.substep_shaping&2?L=20:L=3,f.sfb21_extra&&V(),!A(e,i,n,C))break;i.scalefac_scale!=0&&(F=254);var ee=o-i.part2_length;if(ee<=0)break;for(;(i.part2_3_length=y.count_bits(f,C,i,_))>ee&&i.global_gain<=F;)i.global_gain++;if(i.global_gain>F)break;if(O.over_count==0){for(;(i.part2_3_length=y.count_bits(f,C,i,_))>v&&i.global_gain<=F;)i.global_gain++;if(i.global_gain>F)break}if(g.calc_noise(i,m,n,G,_),G.bits=i.part2_3_length,l.block_type!=t.SHORT_TYPE?u=e.quant_comp:u=e.quant_comp_short,u=K(u,O,G)?1:0,u!=0)v=l.part2_3_length,O=G,l.assign(i),s=0,q.arraycopy(C,0,w,0,576);else if(f.full_outer_loop==0&&(++s>L&&O.over_count==0||f.noise_shaping_amp==3&&B&&s>30||f.noise_shaping_amp==3&&B&&i.global_gain-a>15))break}while(i.global_gain+i.scalefac_scale<255);f.noise_shaping_amp==3?V():b=!0}return e.VBR==j.vbr_rh||e.VBR==j.vbr_mtrh?q.arraycopy(w,0,C,0,576):f.substep_shaping&1&&V(),O.over_count},this.iteration_finish_one=function(e,l,m){var C=e.l3_side,h=C.tt[l][m];y.best_scalefac_store(e,l,m,C),e.use_best_huffman==1&&y.best_huffman_divide(e,h),c.ResvAdjust(e,h)}}function S(){var c=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*Y.SQRT2*.5/2384e-9,.017876148*Y.SQRT2*.5/2384e-9,.003134727*Y.SQRT2*.5/2384e-9,.002457142*Y.SQRT2*.5/2384e-9,971317e-9*Y.SQRT2*.5/2384e-9,218868e-9*Y.SQRT2*.5/2384e-9,101566e-9*Y.SQRT2*.5/2384e-9,13828e-9*Y.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],g=12,H=36,y=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],ae=y[t.SHORT_TYPE],p=y[t.SHORT_TYPE],T=y[t.SHORT_TYPE],$=y[t.SHORT_TYPE],I=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function K(R,A,e){for(var l=10,m=A+238-14-286,C=-15;C<0;C++){var h,o,f;h=c[l+-10],o=R[m+-224]*h,f=R[A+224]*h,h=c[l+-9],o+=R[m+-160]*h,f+=R[A+160]*h,h=c[l+-8],o+=R[m+-96]*h,f+=R[A+96]*h,h=c[l+-7],o+=R[m+-32]*h,f+=R[A+32]*h,h=c[l+-6],o+=R[m+32]*h,f+=R[A+-32]*h,h=c[l+-5],o+=R[m+96]*h,f+=R[A+-96]*h,h=c[l+-4],o+=R[m+160]*h,f+=R[A+-160]*h,h=c[l+-3],o+=R[m+224]*h,f+=R[A+-224]*h,h=c[l+-2],o+=R[A+-256]*h,f-=R[m+256]*h,h=c[l+-1],o+=R[A+-192]*h,f-=R[m+192]*h,h=c[l+0],o+=R[A+-128]*h,f-=R[m+128]*h,h=c[l+1],o+=R[A+-64]*h,f-=R[m+64]*h,h=c[l+2],o+=R[A+0]*h,f-=R[m+0]*h,h=c[l+3],o+=R[A+64]*h,f-=R[m+-64]*h,h=c[l+4],o+=R[A+128]*h,f-=R[m+-128]*h,h=c[l+5],o+=R[A+192]*h,f-=R[m+-192]*h,o*=c[l+6],h=f-o,e[30+C*2]=f+o,e[31+C*2]=c[l+7]*h,l+=18,A--,m++}{var o,f,i,w;f=R[A+-16]*c[l+-10],o=R[A+-32]*c[l+-2],f+=(R[A+-48]-R[A+16])*c[l+-9],o+=R[A+-96]*c[l+-1],f+=(R[A+-80]+R[A+48])*c[l+-8],o+=R[A+-160]*c[l+0],f+=(R[A+-112]-R[A+80])*c[l+-7],o+=R[A+-224]*c[l+1],f+=(R[A+-144]+R[A+112])*c[l+-6],o-=R[A+32]*c[l+2],f+=(R[A+-176]-R[A+144])*c[l+-5],o-=R[A+96]*c[l+3],f+=(R[A+-208]+R[A+176])*c[l+-4],o-=R[A+160]*c[l+4],f+=(R[A+-240]-R[A+208])*c[l+-3],o-=R[A+224],i=o-f,w=o+f,f=e[14],o=e[15]-f,e[31]=w+f,e[30]=i+o,e[15]=i-o,e[14]=w-f}{var n;n=e[28]-e[0],e[0]+=e[28],e[28]=n*c[l+-2*18+7],n=e[29]-e[1],e[1]+=e[29],e[29]=n*c[l+-2*18+7],n=e[26]-e[2],e[2]+=e[26],e[26]=n*c[l+-4*18+7],n=e[27]-e[3],e[3]+=e[27],e[27]=n*c[l+-4*18+7],n=e[24]-e[4],e[4]+=e[24],e[24]=n*c[l+-6*18+7],n=e[25]-e[5],e[5]+=e[25],e[25]=n*c[l+-6*18+7],n=e[22]-e[6],e[6]+=e[22],e[22]=n*Y.SQRT2,n=e[23]-e[7],e[7]+=e[23],e[23]=n*Y.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],n=e[6],e[6]=e[31]-n,e[31]=e[31]+n,n=e[7],e[7]=e[30]-n,e[30]=e[30]+n,n=e[22],e[22]=e[15]-n,e[15]=e[15]+n,n=e[23],e[23]=e[14]-n,e[14]=e[14]+n,n=e[20]-e[8],e[8]+=e[20],e[20]=n*c[l+-10*18+7],n=e[21]-e[9],e[9]+=e[21],e[21]=n*c[l+-10*18+7],n=e[18]-e[10],e[10]+=e[18],e[18]=n*c[l+-12*18+7],n=e[19]-e[11],e[11]+=e[19],e[19]=n*c[l+-12*18+7],n=e[16]-e[12],e[12]+=e[16],e[16]=n*c[l+-14*18+7],n=e[17]-e[13],e[13]+=e[17],e[17]=n*c[l+-14*18+7],n=-e[20]+e[24],e[20]+=e[24],e[24]=n*c[l+-12*18+7],n=-e[21]+e[25],e[21]+=e[25],e[25]=n*c[l+-12*18+7],n=e[4]-e[8],e[4]+=e[8],e[8]=n*c[l+-12*18+7],n=e[5]-e[9],e[5]+=e[9],e[9]=n*c[l+-12*18+7],n=e[0]-e[12],e[0]+=e[12],e[12]=n*c[l+-4*18+7],n=e[1]-e[13],e[1]+=e[13],e[13]=n*c[l+-4*18+7],n=e[16]-e[28],e[16]+=e[28],e[28]=n*c[l+-4*18+7],n=-e[17]+e[29],e[17]+=e[29],e[29]=n*c[l+-4*18+7],n=Y.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=n,n=Y.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=n,n=Y.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=n-e[18],n=Y.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=n-e[19],n=e[2],e[19]-=e[3],e[3]-=n,e[2]=e[31]-n,e[31]+=n,n=e[3],e[11]-=e[19],e[18]-=n,e[3]=e[30]-n,e[30]+=n,n=e[18],e[27]-=e[11],e[19]-=n,e[18]=e[15]-n,e[15]+=n,n=e[19],e[10]-=n,e[19]=e[14]-n,e[14]+=n,n=e[10],e[11]-=n,e[10]=e[23]-n,e[23]+=n,n=e[11],e[26]-=n,e[11]=e[22]-n,e[22]+=n,n=e[26],e[27]-=n,e[26]=e[7]-n,e[7]+=n,n=e[27],e[27]=e[6]-n,e[6]+=n,n=Y.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=n,n=Y.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=n,n=Y.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=n,n=Y.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=n,n=-Y.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=n-e[8],n=-Y.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=n-e[9],n=-Y.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=n-e[25],n=-Y.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=n-e[24],n=e[24]-e[16],e[24]=n,n=e[20]-n,e[20]=n,n=e[28]-n,e[28]=n,n=e[25]-e[17],e[25]=n,n=e[21]-n,e[21]=n,n=e[29]-n,e[29]=n,n=e[17]-e[1],e[17]=n,n=e[9]-n,e[9]=n,n=e[25]-n,e[25]=n,n=e[5]-n,e[5]=n,n=e[21]-n,e[21]=n,n=e[13]-n,e[13]=n,n=e[29]-n,e[29]=n,n=e[1]-e[0],e[1]=n,n=e[16]-n,e[16]=n,n=e[17]-n,e[17]=n,n=e[8]-n,e[8]=n,n=e[9]-n,e[9]=n,n=e[24]-n,e[24]=n,n=e[25]-n,e[25]=n,n=e[4]-n,e[4]=n,n=e[5]-n,e[5]=n,n=e[20]-n,e[20]=n,n=e[21]-n,e[21]=n,n=e[12]-n,e[12]=n,n=e[13]-n,e[13]=n,n=e[28]-n,e[28]=n,n=e[29]-n,e[29]=n,n=e[0],e[0]+=e[31],e[31]-=n,n=e[1],e[1]+=e[30],e[30]-=n,n=e[16],e[16]+=e[15],e[15]-=n,n=e[17],e[17]+=e[14],e[14]-=n,n=e[8],e[8]+=e[23],e[23]-=n,n=e[9],e[9]+=e[22],e[22]-=n,n=e[24],e[24]+=e[7],e[7]-=n,n=e[25],e[25]+=e[6],e[6]-=n,n=e[4],e[4]+=e[27],e[27]-=n,n=e[5],e[5]+=e[26],e[26]-=n,n=e[20],e[20]+=e[11],e[11]-=n,n=e[21],e[21]+=e[10],e[10]-=n,n=e[12],e[12]+=e[19],e[19]-=n,n=e[13],e[13]+=e[18],e[18]-=n,n=e[28],e[28]+=e[3],e[3]-=n,n=e[29],e[29]+=e[2],e[2]-=n}}function x(R,A){for(var e=0;e<3;e++){var l,m,C,h,o,f;h=R[A+2*3]*y[t.SHORT_TYPE][0]-R[A+5*3],l=R[A+0*3]*y[t.SHORT_TYPE][2]-R[A+3*3],m=h+l,C=h-l,h=R[A+5*3]*y[t.SHORT_TYPE][0]+R[A+2*3],l=R[A+3*3]*y[t.SHORT_TYPE][2]+R[A+0*3],o=h+l,f=-h+l,l=(R[A+1*3]*y[t.SHORT_TYPE][1]-R[A+4*3])*2069978111953089e-26,h=(R[A+4*3]*y[t.SHORT_TYPE][1]+R[A+1*3])*2069978111953089e-26,R[A+3*0]=m*190752519173728e-25+l,R[A+3*5]=-o*190752519173728e-25+h,C=C*.8660254037844387*1907525191737281e-26,o=o*.5*1907525191737281e-26+h,R[A+3*1]=C-o,R[A+3*2]=C+o,m=m*.5*1907525191737281e-26-l,f=f*.8660254037844387*1907525191737281e-26,R[A+3*3]=m+f,R[A+3*4]=m-f,A++}}function J(R,A,e){var l,m;{var C,h,o,f,i,w,n,O;C=e[17]-e[9],o=e[15]-e[11],f=e[14]-e[12],i=e[0]+e[8],w=e[1]+e[7],n=e[2]+e[6],O=e[3]+e[5],R[A+17]=i+n-O-(w-e[4]),m=(i+n-O)*p[19]+(w-e[4]),l=(C-o-f)*p[18],R[A+5]=l+m,R[A+6]=l-m,h=(e[16]-e[10])*p[18],w=w*p[19]+e[4],l=C*p[12]+h+o*p[13]+f*p[14],m=-i*p[16]+w-n*p[17]+O*p[15],R[A+1]=l+m,R[A+2]=l-m,l=C*p[13]-h-o*p[14]+f*p[12],m=-i*p[17]+w-n*p[15]+O*p[16],R[A+9]=l+m,R[A+10]=l-m,l=C*p[14]-h+o*p[12]-f*p[13],m=i*p[15]-w+n*p[16]-O*p[17],R[A+13]=l+m,R[A+14]=l-m}{var u,_,v,b,B,a,s,G;u=e[8]-e[0],v=e[6]-e[2],b=e[5]-e[3],B=e[17]+e[9],a=e[16]+e[10],s=e[15]+e[11],G=e[14]+e[12],R[A+0]=B+s+G+(a+e[13]),l=(B+s+G)*p[19]-(a+e[13]),m=(u-v+b)*p[18],R[A+11]=l+m,R[A+12]=l-m,_=(e[7]-e[1])*p[18],a=e[13]-a*p[19],l=B*p[15]-a+s*p[16]+G*p[17],m=u*p[14]+_+v*p[12]+b*p[13],R[A+3]=l+m,R[A+4]=l-m,l=-B*p[17]+a-s*p[15]-G*p[16],m=u*p[13]+_-v*p[14]-b*p[12],R[A+7]=l+m,R[A+8]=l-m,l=-B*p[16]+a-s*p[17]-G*p[15],m=u*p[12]-_+v*p[13]-b*p[14],R[A+15]=l+m,R[A+16]=l-m}}this.mdct_sub48=function(R,A,e){for(var l=A,m=286,C=0;C<R.channels_out;C++){for(var h=0;h<R.mode_gr;h++){for(var o,f=R.l3_side.tt[h][C],i=f.xr,w=0,n=R.sb_sample[C][1-h],O=0,u=0;u<18/2;u++)for(K(l,m,n[O]),K(l,m+32,n[O+1]),O+=2,m+=64,o=1;o<32;o+=2)n[O-1][o]*=-1;for(o=0;o<32;o++,w+=18){var _=f.block_type,v=R.sb_sample[C][h],b=R.sb_sample[C][1-h];if(f.mixed_block_flag!=0&&o<2&&(_=0),R.amp_filter[o]<1e-12)pe.fill(i,w+0,w+18,0);else if(R.amp_filter[o]<1&&V(),_==t.SHORT_TYPE){for(var u=-g/4;u<0;u++){var B=y[t.SHORT_TYPE][u+3];i[w+u*3+9]=v[9+u][I[o]]*B-v[8-u][I[o]],i[w+u*3+18]=v[14-u][I[o]]*B+v[15+u][I[o]],i[w+u*3+10]=v[15+u][I[o]]*B-v[14-u][I[o]],i[w+u*3+19]=b[2-u][I[o]]*B+b[3+u][I[o]],i[w+u*3+11]=b[3+u][I[o]]*B-b[2-u][I[o]],i[w+u*3+20]=b[8-u][I[o]]*B+b[9+u][I[o]]}x(i,w)}else{for(var a=P(18),u=-H/4;u<0;u++){var s,G;s=y[_][u+27]*b[u+9][I[o]]+y[_][u+36]*b[8-u][I[o]],G=y[_][u+9]*v[u+9][I[o]]-y[_][u+18]*v[8-u][I[o]],a[u+9]=s-G*ae[3+u+9],a[u+18]=s*ae[3+u+9]+G}J(i,w,a)}if(_!=t.SHORT_TYPE&&o!=0)for(var u=7;u>=0;--u){var L,F;L=i[w+u]*T[20+u]+i[w+-1-u]*$[28+u],F=i[w+u]*$[28+u]-i[w+-1-u]*T[20+u],i[w+-1-u]=L,i[w+u]=F}}}if(l=e,m=286,R.mode_gr==1)for(var ee=0;ee<18;ee++)q.arraycopy(R.sb_sample[C][1][ee],0,R.sb_sample[C][0][ee],0,32)}}}function E(){this.thm=new le,this.en=new le}t.ENCDELAY=576,t.POSTDELAY=1152,t.MDCTDELAY=48,t.FFTOFFSET=224+t.MDCTDELAY,t.DECDELAY=528,t.SBLIMIT=32,t.CBANDS=64,t.SBPSY_l=21,t.SBPSY_s=12,t.SBMAX_l=22,t.SBMAX_s=13,t.PSFB21=6,t.PSFB12=6,t.BLKSIZE=1024,t.HBLKSIZE=t.BLKSIZE/2+1,t.BLKSIZE_s=256,t.HBLKSIZE_s=t.BLKSIZE_s/2+1,t.NORM_TYPE=0,t.START_TYPE=1,t.SHORT_TYPE=2,t.STOP_TYPE=3,t.MPG_MD_LR_LR=0,t.MPG_MD_LR_I=1,t.MPG_MD_MS_LR=2,t.MPG_MD_MS_I=3,t.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function t(){var c=t.MPG_MD_MS_LR,g=null;this.psy=null;var H=null,y=null;this.setModules=function(I,K,x,J){g=I,this.psy=K,H=K,y=J};var ae=new S;function p(I){var K,x;if(I.ATH.useAdjust==0){I.ATH.adjust=1;return}if(x=I.loudness_sq[0][0],K=I.loudness_sq[1][0],I.channels_out==2?V():(x+=x,K+=K),I.mode_gr==2&&(x=Math.max(x,K)),x*=.5,x*=I.ATH.aaSensitivityP,x>.03125)I.ATH.adjust>=1?I.ATH.adjust=1:I.ATH.adjust<I.ATH.adjustLimit&&(I.ATH.adjust=I.ATH.adjustLimit),I.ATH.adjustLimit=1;else{var J=31.98*x+625e-6;I.ATH.adjust>=J?(I.ATH.adjust*=J*.075+.925,I.ATH.adjust<J&&(I.ATH.adjust=J)):I.ATH.adjustLimit>=J?I.ATH.adjust=J:I.ATH.adjust<I.ATH.adjustLimit&&(I.ATH.adjust=I.ATH.adjustLimit),I.ATH.adjustLimit=J}}function T(I){var K,x;for(I.bitrate_stereoMode_Hist[I.bitrate_index][4]++,I.bitrate_stereoMode_Hist[15][4]++,I.channels_out==2&&V(),K=0;K<I.mode_gr;++K)for(x=0;x<I.channels_out;++x){var J=I.l3_side.tt[K][x].block_type|0;I.l3_side.tt[K][x].mixed_block_flag!=0&&(J=4),I.bitrate_blockType_Hist[I.bitrate_index][J]++,I.bitrate_blockType_Hist[I.bitrate_index][5]++,I.bitrate_blockType_Hist[15][J]++,I.bitrate_blockType_Hist[15][5]++}}function $(I,K){var x=I.internal_flags,J,R;if(x.lame_encode_frame_init==0){var A,e,l=P(2014),m=P(2014);for(x.lame_encode_frame_init=1,A=0,e=0;A<286+576*(1+x.mode_gr);++A)A<576*x.mode_gr?(l[A]=0,x.channels_out==2&&(m[A]=0)):(l[A]=K[0][e],x.channels_out==2&&(m[A]=K[1][e]),++e);for(R=0;R<x.mode_gr;R++)for(J=0;J<x.channels_out;J++)x.l3_side.tt[R][J].block_type=t.SHORT_TYPE;ae.mdct_sub48(x,l,m)}}this.lame_encode_mp3_frame=function(I,K,x,J,R,A){var e,l=fe([2,2]);l[0][0]=new E,l[0][1]=new E,l[1][0]=new E,l[1][1]=new E;var m=fe([2,2]);m[0][0]=new E,m[0][1]=new E,m[1][0]=new E,m[1][1]=new E;var C,h=[null,null],o=I.internal_flags,f=ne([2,4]),i=[.5,.5],w=[[0,0],[0,0]],n=[[0,0],[0,0]],O,u,_;if(h[0]=K,h[1]=x,o.lame_encode_frame_init==0&&$(I,h),o.padding=0,(o.slot_lag-=o.frac_SpF)<0&&(o.slot_lag+=I.out_samplerate,o.padding=1),o.psymodel!=0){var v,b=[null,null],B=0,a=d(2);for(_=0;_<o.mode_gr;_++){for(u=0;u<o.channels_out;u++)b[u]=h[u],B=576+_*576-t.FFTOFFSET;if(I.VBR==j.vbr_mtrh||I.VBR==j.vbr_mt?V():v=H.L3psycho_anal_ns(I,b,B,_,l,m,w[_],n[_],f[_],a),v!=0)return-4;for(I.mode==ke.JOINT_STEREO&&V(),u=0;u<o.channels_out;u++){var s=o.l3_side.tt[_][u];s.block_type=a[u],s.mixed_block_flag=0}}}else V();if(p(o),ae.mdct_sub48(o,h[0],h[1]),o.mode_ext=t.MPG_MD_LR_LR,I.force_ms?o.mode_ext=t.MPG_MD_MS_LR:I.mode==ke.JOINT_STEREO&&V(),o.mode_ext==c?(C=m,O=n):(C=l,O=w),I.analysis&&o.pinfo!=null&&V(),I.VBR==j.vbr_off||I.VBR==j.vbr_abr){var G,L;for(G=0;G<18;G++)o.nsPsy.pefirbuf[G]=o.nsPsy.pefirbuf[G+1];for(L=0,_=0;_<o.mode_gr;_++)for(u=0;u<o.channels_out;u++)L+=O[_][u];for(o.nsPsy.pefirbuf[18]=L,L=o.nsPsy.pefirbuf[9],G=0;G<9;G++)L+=(o.nsPsy.pefirbuf[G]+o.nsPsy.pefirbuf[18-G])*t.fircoef[G];for(L=670*5*o.mode_gr*o.channels_out/L,_=0;_<o.mode_gr;_++)for(u=0;u<o.channels_out;u++)O[_][u]*=L}return o.iteration_loop.iteration_loop(I,O,i,C),g.format_bitstream(I),e=g.copy_buffer(o,J,R,A,1),I.bWriteVbrTag&&y.addVbrFrame(I),I.analysis&&o.pinfo!=null&&V(),T(o),e}}function D(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}function Z(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[d(4),d(4)];for(var c=0;c<2;c++)for(var g=0;g<2;g++)this.tt[c][g]=new b0}function le(){this.l=P(t.SBMAX_l),this.s=ne([t.SBMAX_s,3]);var c=this;this.assign=function(g){q.arraycopy(g.l,0,c.l,0,t.SBMAX_l);for(var H=0;H<t.SBMAX_s;H++)for(var y=0;y<3;y++)c.s[H][y]=g.s[H][y]}}function se(){this.last_en_subshort=ne([4,9]),this.lastAttacks=d(4),this.pefirbuf=P(19),this.longfact=P(t.SBMAX_l),this.shortfact=P(t.SBMAX_s),this.attackthre=0,this.attackthre_s=0}Te.MFSIZE=3*1152+t.ENCDELAY-t.MDCTDELAY,Te.MAX_HEADER_BUF=256,Te.MAX_BITS_PER_CHANNEL=4095,Te.MAX_BITS_PER_GRANULE=7680,Te.BPC=320;function Te(){var c=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=ne([2,Te.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new Z,this.ms_ratio=P(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=d(2),this.CurrentStep=d(2),this.masking_lower=0,this.bv_scf=d(576),this.pseudohalf=d(me.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Te.BPC+1),this.itime=ue(2),this.sideinfo_len=0,this.sb_sample=ne([2,2,18,t.SBLIMIT]),this.amp_filter=P(32);function g(){this.write_timing=0,this.ptr=0,this.buf=oe(c)}this.header=new Array(Te.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new n0,this.minval_l=P(t.CBANDS),this.minval_s=P(t.CBANDS),this.nb_1=ne([4,t.CBANDS]),this.nb_2=ne([4,t.CBANDS]),this.nb_s1=ne([4,t.CBANDS]),this.nb_s2=ne([4,t.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=P(4),this.loudness_sq=ne([2,2]),this.loudness_sq_save=P(2),this.mld_l=P(t.SBMAX_l),this.mld_s=P(t.SBMAX_s),this.bm_l=d(t.SBMAX_l),this.bo_l=d(t.SBMAX_l),this.bm_s=d(t.SBMAX_s),this.bo_s=d(t.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=_e([t.CBANDS,2]),this.s3ind_s=_e([t.CBANDS,2]),this.numlines_s=d(t.CBANDS),this.numlines_l=d(t.CBANDS),this.rnumlines_l=P(t.CBANDS),this.mld_cb_l=P(t.CBANDS),this.mld_cb_s=P(t.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=P(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=d(2),this.nsPsy=new se,this.VBR_seek_table=new D,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=_e([16,5]),this.bitrate_blockType_Hist=_e([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var H=0;H<this.en.length;H++)this.en[H]=new le;for(var H=0;H<this.thm.length;H++)this.thm[H]=new le;for(var H=0;H<this.header.length;H++)this.header[H]=new g}function Re(){var c=P(t.BLKSIZE),g=P(t.BLKSIZE_s/2),H=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function y(p,T,$){var I=0,K,x,J;$<<=1;var R=T+$;K=4;do{var A,e,l,m,C,h,o;o=K>>1,m=K,C=K<<1,h=C+m,K=C<<1,x=T,J=x+o;do{var f,i,w,n;i=p[x+0]-p[x+m],f=p[x+0]+p[x+m],n=p[x+C]-p[x+h],w=p[x+C]+p[x+h],p[x+C]=f-w,p[x+0]=f+w,p[x+h]=i-n,p[x+m]=i+n,i=p[J+0]-p[J+m],f=p[J+0]+p[J+m],n=Y.SQRT2*p[J+h],w=Y.SQRT2*p[J+C],p[J+C]=f-w,p[J+0]=f+w,p[J+h]=i-n,p[J+m]=i+n,J+=K,x+=K}while(x<R);for(e=H[I+0],A=H[I+1],l=1;l<o;l++){var O,u;O=1-2*A*A,u=2*A*e,x=T+l,J=T+m-l;do{var _,v,b,f,i,B,w,a,n,s;v=u*p[x+m]-O*p[J+m],_=O*p[x+m]+u*p[J+m],i=p[x+0]-_,f=p[x+0]+_,B=p[J+0]-v,b=p[J+0]+v,v=u*p[x+h]-O*p[J+h],_=O*p[x+h]+u*p[J+h],n=p[x+C]-_,w=p[x+C]+_,s=p[J+C]-v,a=p[J+C]+v,v=A*w-e*s,_=e*w+A*s,p[x+C]=f-_,p[x+0]=f+_,p[J+h]=B-v,p[J+m]=B+v,v=e*a-A*n,_=A*a+e*n,p[J+C]=b-_,p[J+0]=b+_,p[x+h]=i-v,p[x+m]=i+v,J+=K,x+=K}while(x<R);O=e,e=O*H[I+0]-A*H[I+1],A=O*H[I+1]+A*H[I+0]}I+=2}while(K<$)}var ae=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(p,T,$,I,K){for(var x=0;x<3;x++){var J=t.BLKSIZE_s/2,R=65535&576/3*(x+1),A=t.BLKSIZE_s/8-1;do{var e,l,m,C,h,o=ae[A<<2]&255;e=g[o]*I[$][K+o+R],h=g[127-o]*I[$][K+o+R+128],l=e-h,e=e+h,m=g[o+64]*I[$][K+o+R+64],h=g[63-o]*I[$][K+o+R+192],C=m-h,m=m+h,J-=4,T[x][J+0]=e+m,T[x][J+2]=e-m,T[x][J+1]=l+C,T[x][J+3]=l-C,e=g[o+1]*I[$][K+o+R+1],h=g[126-o]*I[$][K+o+R+129],l=e-h,e=e+h,m=g[o+65]*I[$][K+o+R+65],h=g[62-o]*I[$][K+o+R+193],C=m-h,m=m+h,T[x][J+t.BLKSIZE_s/2+0]=e+m,T[x][J+t.BLKSIZE_s/2+2]=e-m,T[x][J+t.BLKSIZE_s/2+1]=l+C,T[x][J+t.BLKSIZE_s/2+3]=l-C}while(--A>=0);y(T[x],J,t.BLKSIZE_s/2)}},this.fft_long=function(p,T,$,I,K){var x=t.BLKSIZE/8-1,J=t.BLKSIZE/2;do{var R,A,e,l,m,C=ae[x]&255;R=c[C]*I[$][K+C],m=c[C+512]*I[$][K+C+512],A=R-m,R=R+m,e=c[C+256]*I[$][K+C+256],m=c[C+768]*I[$][K+C+768],l=e-m,e=e+m,J-=4,T[J+0]=R+e,T[J+2]=R-e,T[J+1]=A+l,T[J+3]=A-l,R=c[C+1]*I[$][K+C+1],m=c[C+513]*I[$][K+C+513],A=R-m,R=R+m,e=c[C+257]*I[$][K+C+257],m=c[C+769]*I[$][K+C+769],l=e-m,e=e+m,T[J+t.BLKSIZE/2+0]=R+e,T[J+t.BLKSIZE/2+2]=R-e,T[J+t.BLKSIZE/2+1]=A+l,T[J+t.BLKSIZE/2+3]=A-l}while(--x>=0);y(T,J,t.BLKSIZE/2)},this.init_fft=function(p){for(var T=0;T<t.BLKSIZE;T++)c[T]=.42-.5*Math.cos(2*Math.PI*(T+.5)/t.BLKSIZE)+.08*Math.cos(4*Math.PI*(T+.5)/t.BLKSIZE);for(var T=0;T<t.BLKSIZE_s/2;T++)g[T]=.5*(1-Math.cos(2*Math.PI*(T+.5)/t.BLKSIZE_s))}}function Be(){var c=new Re,g=2.302585092994046,H=2,y=16,ae=2,p=16,T=.34,$=1/(14752*14752)/(t.BLKSIZE/2),I=.01,K=.8,x=.6,J=.3,R=3.5,A=21,e=.2302585093;function l(z,k){for(var U=0,Se=0;Se<t.BLKSIZE/2;++Se)U+=z[Se]*k.ATH.eql_w[Se];return U*=$,U}function m(z,k,U,Se,de,te,ce,he,we,Pe,ye){var _0=z.internal_flags;we<2?(c.fft_long(_0,Se[de],we,Pe,ye),c.fft_short(_0,te[ce],we,Pe,ye)):we==2&&V(),k[0]=Se[de+0][0],k[0]*=k[0];for(var ze=t.BLKSIZE/2-1;ze>=0;--ze){var i0=Se[de+0][t.BLKSIZE/2-ze],c0=Se[de+0][t.BLKSIZE/2+ze];k[t.BLKSIZE/2-ze]=(i0*i0+c0*c0)*.5}for(var Qe=2;Qe>=0;--Qe){U[Qe][0]=te[ce+0][Qe][0],U[Qe][0]*=U[Qe][0];for(var ze=t.BLKSIZE_s/2-1;ze>=0;--ze){var i0=te[ce+0][Qe][t.BLKSIZE_s/2-ze],c0=te[ce+0][Qe][t.BLKSIZE_s/2+ze];U[Qe][t.BLKSIZE_s/2-ze]=(i0*i0+c0*c0)*.5}}{for(var Ne=0,ze=11;ze<t.HBLKSIZE;ze++)Ne+=k[ze];_0.tot_ener[we]=Ne}z.analysis&&V(),z.athaa_loudapprox==2&&we<2&&(_0.loudness_sq[he][we]=_0.loudness_sq_save[we],_0.loudness_sq_save[we]=l(k,_0))}var C=8,h=23,o=15,f,i,w,n=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function O(){f=Math.pow(10,(C+1)/16),i=Math.pow(10,(h+1)/16),w=Math.pow(10,o/10)}var u=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],_=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],v=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function b(z,k,U,Se,de,te){var ce;if(k>z)if(k<z*i)ce=k/z;else return z+k;else{if(z>=k*i)return z+k;ce=z/k}if(z+=k,Se+3<=6){if(ce>=f)return z;var he=0|Y.FAST_LOG10_X(ce,16);return z*_[he]}var he=0|Y.FAST_LOG10_X(ce,16);if(k=de.ATH.cb_l[U]*de.ATH.adjust,z<w*k){if(z>k){var we,Pe;return we=1,he<=13&&(we=v[he]),Pe=Y.FAST_LOG10_X(z/k,10/15),z*((u[he]-we)*Pe+we)}return he>13?z:z*v[he]}return z*u[he]}function B(z,k,U,Se,de){var te,ce,he=0,we=0;for(te=ce=0;te<t.SBMAX_s;++ce,++te){for(var Pe=z.bo_s[te],ye=z.npart_s,_0=Pe<ye?Pe:ye;ce<_0;)he+=k[ce],we+=U[ce],ce++;if(z.en[Se].s[te][de]=he,z.thm[Se].s[te][de]=we,ce>=ye){++te;break}{var ze=z.PSY.bo_s_weight[te],i0=1-ze;he=ze*k[ce],we=ze*U[ce],z.en[Se].s[te][de]+=he,z.thm[Se].s[te][de]+=we,he=i0*k[ce],we=i0*U[ce]}}for(;te<t.SBMAX_s;++te)z.en[Se].s[te][de]=0,z.thm[Se].s[te][de]=0}function a(z,k,U,Se){var de,te,ce=0,he=0;for(de=te=0;de<t.SBMAX_l;++te,++de){for(var we=z.bo_l[de],Pe=z.npart_l,ye=we<Pe?we:Pe;te<ye;)ce+=k[te],he+=U[te],te++;if(z.en[Se].l[de]=ce,z.thm[Se].l[de]=he,te>=Pe){++de;break}{var _0=z.PSY.bo_l_weight[de],ze=1-_0;ce=_0*k[te],he=_0*U[te],z.en[Se].l[de]+=ce,z.thm[Se].l[de]+=he,ce=ze*k[te],he=ze*U[te]}}for(;de<t.SBMAX_l;++de)z.en[Se].l[de]=0,z.thm[Se].l[de]=0}function s(z,k,U,Se,de,te){var ce=z.internal_flags,he,we;for(we=he=0;we<ce.npart_s;++we){for(var Pe=0,ye=ce.numlines_s[we],_0=0;_0<ye;++_0,++he){var ze=k[te][he];Pe+=ze}U[we]=Pe}for(he=we=0;we<ce.npart_s;we++){var i0=ce.s3ind_s[we][0],c0=ce.s3_ss[he++]*U[i0];for(++i0;i0<=ce.s3ind_s[we][1];)c0+=ce.s3_ss[he]*U[i0],++he,++i0;{var Qe=ae*ce.nb_s1[de][we];Se[we]=Math.min(c0,Qe)}if(ce.blocktype_old[de&1]==t.SHORT_TYPE){var Qe=p*ce.nb_s2[de][we],Ne=Se[we];Se[we]=Math.min(Qe,Ne)}ce.nb_s2[de][we]=ce.nb_s1[de][we],ce.nb_s1[de][we]=c0}for(;we<=t.CBANDS;++we)U[we]=0,Se[we]=0}function G(z,k,U,Se){var de=z.internal_flags;z.short_blocks==re.short_block_coupled&&!(k[0]!=0&&k[1]!=0)&&(k[0]=k[1]=0);for(var te=0;te<de.channels_out;te++)Se[te]=t.NORM_TYPE,z.short_blocks==re.short_block_dispensed&&(k[te]=1),z.short_blocks==re.short_block_forced&&(k[te]=0),k[te]!=0?de.blocktype_old[te]==t.SHORT_TYPE&&(Se[te]=t.STOP_TYPE):(Se[te]=t.SHORT_TYPE,de.blocktype_old[te]==t.NORM_TYPE&&(de.blocktype_old[te]=t.START_TYPE),de.blocktype_old[te]==t.STOP_TYPE&&(de.blocktype_old[te]=t.SHORT_TYPE)),U[te]=de.blocktype_old[te],de.blocktype_old[te]=Se[te]}function L(z,k,U){return U>=1?z:U<=0?k:k>0?Math.pow(z/k,U)*k:0}var F=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function ee(z,k){for(var U=309.07,Se=0;Se<t.SBMAX_s-1;Se++)for(var de=0;de<3;de++){var te=z.thm.s[Se][de];if(te>0){var ce=te*k,he=z.en.s[Se][de];he>ce&&(he>ce*1e10?U+=F[Se]*(10*g):U+=F[Se]*Y.FAST_LOG10(he/ce))}}return U}var ie=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function M(z,k){for(var U=281.0575,Se=0;Se<t.SBMAX_l-1;Se++){var de=z.thm.l[Se];if(de>0){var te=de*k,ce=z.en.l[Se];ce>te&&(ce>te*1e10?U+=ie[Se]*(10*g):U+=ie[Se]*Y.FAST_LOG10(ce/te))}}return U}function W(z,k,U,Se,de){var te,ce;for(te=ce=0;te<z.npart_l;++te){var he=0,we=0,Pe;for(Pe=0;Pe<z.numlines_l[te];++Pe,++ce){var ye=k[ce];he+=ye,we<ye&&(we=ye)}U[te]=he,Se[te]=we,de[te]=he*z.rnumlines_l[te]}}function ve(z,k,U,Se){var de=n.length-1,te=0,ce=U[te]+U[te+1];if(ce>0){var he=k[te];he<k[te+1]&&(he=k[te+1]),ce=20*(he*2-ce)/(ce*(z.numlines_l[te]+z.numlines_l[te+1]-1));var we=0|ce;we>de&&(we=de),Se[te]=we}else Se[te]=0;for(te=1;te<z.npart_l-1;te++)if(ce=U[te-1]+U[te]+U[te+1],ce>0){var he=k[te-1];he<k[te]&&(he=k[te]),he<k[te+1]&&(he=k[te+1]),ce=20*(he*3-ce)/(ce*(z.numlines_l[te-1]+z.numlines_l[te]+z.numlines_l[te+1]-1));var we=0|ce;we>de&&(we=de),Se[te]=we}else Se[te]=0;if(ce=U[te-1]+U[te],ce>0){var he=k[te-1];he<k[te]&&(he=k[te]),ce=20*(he*2-ce)/(ce*(z.numlines_l[te-1]+z.numlines_l[te]-1));var we=0|ce;we>de&&(we=de),Se[te]=we}else Se[te]=0}var xe=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(z,k,U,Se,de,te,ce,he,we,Pe){var ye=z.internal_flags,_0=ne([2,t.BLKSIZE]),ze=ne([2,3,t.BLKSIZE_s]),i0=P(t.CBANDS+1),c0=P(t.CBANDS+1),Qe=P(t.CBANDS+2),Ne=d(2),r0=d(2),y0,Ce,Ge,Oe,f0,F0,C0,e0,va=ne([2,576]),k0,q0=d(t.CBANDS+2),Q0=d(t.CBANDS+2);for(pe.fill(Q0,0),y0=ye.channels_out,z.mode==ke.JOINT_STEREO&&(y0=4),z.VBR==j.vbr_off?k0=ye.ResvMax==0?0:ye.ResvSize/ye.ResvMax*.5:z.VBR==j.vbr_rh||z.VBR==j.vbr_mtrh||z.VBR==j.vbr_mt?k0=.6:k0=1,Ce=0;Ce<ye.channels_out;Ce++){var sa=k[Ce],ia=U+576-350-A+192;for(Oe=0;Oe<576;Oe++){var Ca,La;for(Ca=sa[ia+Oe+10],La=0,f0=0;f0<(A-1)/2-1;f0+=2)Ca+=xe[f0]*(sa[ia+Oe+f0]+sa[ia+Oe+A-f0]),La+=xe[f0+1]*(sa[ia+Oe+f0+1]+sa[ia+Oe+A-f0-1]);va[Ce][Oe]=Ca+La}de[Se][Ce].en.assign(ye.en[Ce]),de[Se][Ce].thm.assign(ye.thm[Ce]),y0>2&&V()}for(Ce=0;Ce<y0;Ce++){var Ya,qa,g0=P(12),P0=[0,0,0,0],Ia=P(12),Wa=1,za,Ka=P(t.CBANDS),ja=P(t.CBANDS),p0=[0,0,0,0],$a=P(t.HBLKSIZE),Za=ne([3,t.HBLKSIZE_s]);for(Oe=0;Oe<3;Oe++)g0[Oe]=ye.nsPsy.last_en_subshort[Ce][Oe+6],Ia[Oe]=g0[Oe]/ye.nsPsy.last_en_subshort[Ce][Oe+4],P0[0]+=g0[Oe];Ce==2&&V();{var Qa=va[Ce&1],la=0;for(Oe=0;Oe<9;Oe++){for(var B1=la+64,A0=1;la<B1;la++)A0<Math.abs(Qa[la])&&(A0=Math.abs(Qa[la]));ye.nsPsy.last_en_subshort[Ce][Oe]=g0[Oe+3]=A0,P0[1+Oe/3]+=A0,A0>g0[Oe+3-2]?A0=A0/g0[Oe+3-2]:g0[Oe+3-2]>A0*10?A0=g0[Oe+3-2]/(A0*10):A0=0,Ia[Oe+3]=A0}}for(z.analysis&&V(),za=Ce==3?ye.nsPsy.attackthre_s:ye.nsPsy.attackthre,Oe=0;Oe<12;Oe++)p0[Oe/3]==0&&Ia[Oe]>za&&(p0[Oe/3]=Oe%3+1);for(Oe=1;Oe<4;Oe++){var ka;P0[Oe-1]>P0[Oe]?ka=P0[Oe-1]/P0[Oe]:ka=P0[Oe]/P0[Oe-1],ka<1.7&&(p0[Oe]=0,Oe==1&&(p0[0]=0))}for(p0[0]!=0&&ye.nsPsy.lastAttacks[Ce]!=0&&(p0[0]=0),(ye.nsPsy.lastAttacks[Ce]==3||p0[0]+p0[1]+p0[2]+p0[3]!=0)&&(Wa=0,p0[1]!=0&&p0[0]!=0&&(p0[1]=0),p0[2]!=0&&p0[1]!=0&&(p0[2]=0),p0[3]!=0&&p0[2]!=0&&(p0[3]=0)),Ce<2?r0[Ce]=Wa:V(),we[Ce]=ye.tot_ener[Ce],qa=ze,Ya=_0,m(z,$a,Za,Ya,Ce&1,qa,Ce&1,Se,Ce,k,U),W(ye,$a,i0,Ka,ja),ve(ye,Ka,ja,q0),e0=0;e0<3;e0++){var ga,L0;for(s(z,Za,c0,Qe,Ce,e0),B(ye,c0,Qe,Ce,e0),C0=0;C0<t.SBMAX_s;C0++){if(L0=ye.thm[Ce].s[C0][e0],L0*=K,p0[e0]>=2||p0[e0+1]==1){var oa=e0!=0?e0-1:2,A0=L(ye.thm[Ce].s[C0][oa],L0,x*k0);L0=Math.min(L0,A0)}if(p0[e0]==1){var oa=e0!=0?e0-1:2,A0=L(ye.thm[Ce].s[C0][oa],L0,J*k0);L0=Math.min(L0,A0)}else if(e0!=0&&p0[e0-1]==3||e0==0&&ye.nsPsy.lastAttacks[Ce]==3){var oa=e0!=2?e0+1:0,A0=L(ye.thm[Ce].s[C0][oa],L0,J*k0);L0=Math.min(L0,A0)}ga=g0[e0*3+3]+g0[e0*3+4]+g0[e0*3+5],g0[e0*3+5]*6<ga&&(L0*=.5,g0[e0*3+4]*6<ga&&(L0*=.5)),ye.thm[Ce].s[C0][e0]=L0}}for(ye.nsPsy.lastAttacks[Ce]=p0[2],F0=0,Ge=0;Ge<ye.npart_l;Ge++){for(var W0=ye.s3ind[Ge][0],Oa=i0[W0]*n[q0[W0]],z0=ye.s3_ll[F0++]*Oa;++W0<=ye.s3ind[Ge][1];)Oa=i0[W0]*n[q0[W0]],z0=b(z0,ye.s3_ll[F0++]*Oa,W0,W0-Ge,ye);z0*=.158489319246111,ye.blocktype_old[Ce&1]==t.SHORT_TYPE?Qe[Ge]=z0:Qe[Ge]=L(Math.min(z0,Math.min(H*ye.nb_1[Ce][Ge],y*ye.nb_2[Ce][Ge])),z0,k0),ye.nb_2[Ce][Ge]=ye.nb_1[Ce][Ge],ye.nb_1[Ce][Ge]=z0}for(;Ge<=t.CBANDS;++Ge)i0[Ge]=0,Qe[Ge]=0;a(ye,i0,Qe,Ce)}for((z.mode==ke.STEREO||z.mode==ke.JOINT_STEREO)&&V(),z.mode==ke.JOINT_STEREO&&V(),G(z,r0,Pe,Ne),Ce=0;Ce<y0;Ce++){var ca,ha=0,Ja,Da;Ce>1?V():(ca=ce,ha=0,Ja=Pe[Ce],Da=de[Se][Ce]),Ja==t.SHORT_TYPE?ca[ha+Ce]=ee(Da,ye.masking_lower):ca[ha+Ce]=M(Da,ye.masking_lower),z.analysis&&(ye.pinfo.pe[Se][Ce]=ca[ha+Ce])}return 0};function We(z){var k,U,Se,de;return k=z,k>=0?k*=3:k*=1.5,k>=.5&&k<=2.5?(de=k-.5,U=8*(de*de-2*de)):U=0,k+=.474,Se=15.811389+7.5*k-17.5*Math.sqrt(1+k*k),Se<=-60?0:(k=Math.exp((U+Se)*e),k/=.6609193,k)}function a0(z){return z<0&&(z=0),z=z*.001,13*Math.atan(.76*z)+3.5*Math.atan(z*z/(7.5*7.5))}function je(z,k,U,Se,de,te,ce,he,we,Pe,ye,_0){var ze=P(t.CBANDS+1),i0=he/(_0>15?2*576:2*192),c0=d(t.HBLKSIZE),Qe;he/=we;var Ne=0,r0=0;for(Qe=0;Qe<t.CBANDS;Qe++){var y0,Ce;for(y0=a0(he*Ne),ze[Qe]=he*Ne,Ce=Ne;a0(he*Ce)-y0<T&&Ce<=we/2;Ce++);for(z[Qe]=Ce-Ne,r0=Qe+1;Ne<Ce;)c0[Ne++]=Qe;if(Ne>we/2){Ne=we/2,++Qe;break}}ze[Qe]=he*Ne;for(var Ge=0;Ge<_0;Ge++){var Oe,f0,F0,C0,e0;F0=Pe[Ge],C0=Pe[Ge+1],Oe=0|Math.floor(.5+ye*(F0-.5)),Oe<0&&(Oe=0),f0=0|Math.floor(.5+ye*(C0-.5)),f0>we/2&&(f0=we/2),U[Ge]=(c0[Oe]+c0[f0])/2,k[Ge]=c0[f0];var va=i0*C0;ce[Ge]=(va-ze[k[Ge]])/(ze[k[Ge]+1]-ze[k[Ge]]),ce[Ge]<0?ce[Ge]=0:ce[Ge]>1&&(ce[Ge]=1),e0=a0(he*Pe[Ge]*ye),e0=Math.min(e0,15.5)/15.5,te[Ge]=Math.pow(10,1.25*(1-Math.cos(Math.PI*e0))-2.5)}Ne=0;for(var k0=0;k0<r0;k0++){var q0=z[k0],y0,Q0;y0=a0(he*Ne),Q0=a0(he*(Ne+q0-1)),Se[k0]=.5*(y0+Q0),y0=a0(he*(Ne-.5)),Q0=a0(he*(Ne+q0-.5)),de[k0]=Q0-y0,Ne+=q0}return r0}function t0(z,k,U,Se,de,te){var ce=ne([t.CBANDS,t.CBANDS]),he,we=0;if(te)for(var Pe=0;Pe<k;Pe++)for(he=0;he<k;he++){var ye=We(U[Pe]-U[he])*Se[he];ce[Pe][he]=ye*de[Pe]}else V();for(var Pe=0;Pe<k;Pe++){for(he=0;he<k&&!(ce[Pe][he]>0);he++);for(z[Pe][0]=he,he=k-1;he>0&&!(ce[Pe][he]>0);he--);z[Pe][1]=he,we+=z[Pe][1]-z[Pe][0]+1}for(var _0=P(we),ze=0,Pe=0;Pe<k;Pe++)for(he=z[Pe][0];he<=z[Pe][1];he++)_0[ze++]=ce[Pe][he];return _0}function h0(z){var k=a0(z);return k=Math.min(k,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*k))-2.5)}this.psymodel_init=function(z){var k=z.internal_flags,U,Se=!0,de=13,te=24,ce=0,he=0,we=-8.25,Pe=-4.5,ye=P(t.CBANDS),_0=P(t.CBANDS),ze=P(t.CBANDS),i0=z.out_samplerate;switch(z.experimentalZ){default:case 0:Se=!0;break;case 1:Se=!(z.VBR==j.vbr_mtrh||z.VBR==j.vbr_mt);break;case 2:Se=!1;break;case 3:de=8,ce=-1.75,he=-.0125,we=-8.25,Pe=-2.25;break}for(k.ms_ener_ratio_old=.25,k.blocktype_old[0]=k.blocktype_old[1]=t.NORM_TYPE,U=0;U<4;++U){for(var Ne=0;Ne<t.CBANDS;++Ne)k.nb_1[U][Ne]=1e20,k.nb_2[U][Ne]=1e20,k.nb_s1[U][Ne]=k.nb_s2[U][Ne]=1;for(var c0=0;c0<t.SBMAX_l;c0++)k.en[U].l[c0]=1e20,k.thm[U].l[c0]=1e20;for(var Ne=0;Ne<3;++Ne){for(var c0=0;c0<t.SBMAX_s;c0++)k.en[U].s[c0][Ne]=1e20,k.thm[U].s[c0][Ne]=1e20;k.nsPsy.lastAttacks[U]=0}for(var Ne=0;Ne<9;Ne++)k.nsPsy.last_en_subshort[U][Ne]=10}for(k.loudness_sq_save[0]=k.loudness_sq_save[1]=0,k.npart_l=je(k.numlines_l,k.bo_l,k.bm_l,ye,_0,k.mld_l,k.PSY.bo_l_weight,i0,t.BLKSIZE,k.scalefac_band.l,t.BLKSIZE/(2*576),t.SBMAX_l),U=0;U<k.npart_l;U++){var Qe=ce;ye[U]>=de&&(Qe=he*(ye[U]-de)/(te-de)+ce*(te-ye[U])/(te-de)),ze[U]=Math.pow(10,Qe/10),k.numlines_l[U]>0?k.rnumlines_l[U]=1/k.numlines_l[U]:k.rnumlines_l[U]=0}k.s3_ll=t0(k.s3ind,k.npart_l,ye,_0,ze,Se);var Ne=0;for(U=0;U<k.npart_l;U++){var r0;r0=Le.MAX_VALUE;for(var y0=0;y0<k.numlines_l[U];y0++,Ne++){var Ce=i0*Ne/(1e3*t.BLKSIZE),Ge;Ge=this.ATHformula(Ce*1e3,z)-20,Ge=Math.pow(10,.1*Ge),Ge*=k.numlines_l[U],r0>Ge&&(r0=Ge)}k.ATH.cb_l[U]=r0,r0=-20+ye[U]*20/10,r0>6&&(r0=100),r0<-15&&(r0=-15),r0-=8,k.minval_l[U]=Math.pow(10,r0/10)*k.numlines_l[U]}for(k.npart_s=je(k.numlines_s,k.bo_s,k.bm_s,ye,_0,k.mld_s,k.PSY.bo_s_weight,i0,t.BLKSIZE_s,k.scalefac_band.s,t.BLKSIZE_s/(2*192),t.SBMAX_s),Ne=0,U=0;U<k.npart_s;U++){var r0,Qe=we;ye[U]>=de&&(Qe=Pe*(ye[U]-de)/(te-de)+we*(te-ye[U])/(te-de)),ze[U]=Math.pow(10,Qe/10),r0=Le.MAX_VALUE;for(var y0=0;y0<k.numlines_s[U];y0++,Ne++){var Ce=i0*Ne/(1e3*t.BLKSIZE_s),Ge;Ge=this.ATHformula(Ce*1e3,z)-20,Ge=Math.pow(10,.1*Ge),Ge*=k.numlines_s[U],r0>Ge&&(r0=Ge)}k.ATH.cb_s[U]=r0,r0=-7+ye[U]*7/12,ye[U]>12&&(r0*=1+Math.log(1+r0)*3.1),ye[U]<12&&(r0*=1+Math.log(1-r0)*2.3),r0<-15&&(r0=-15),r0-=8,k.minval_s[U]=Math.pow(10,r0/10)*k.numlines_s[U]}k.s3_ss=t0(k.s3ind_s,k.npart_s,ye,_0,ze,Se),O(),c.init_fft(k),k.decay=Math.exp(-1*g/(I*i0/192));{var Oe;Oe=R,z.exp_nspsytune&2&&(Oe=1),Math.abs(z.msfix)>0&&(Oe=z.msfix),z.msfix=Oe;for(var f0=0;f0<k.npart_l;f0++)k.s3ind[f0][1]>k.npart_l-1&&(k.s3ind[f0][1]=k.npart_l-1)}var F0=576*k.mode_gr/i0;if(k.ATH.decay=Math.pow(10,-12/10*F0),k.ATH.adjust=.01,k.ATH.adjustLimit=1,z.ATHtype!=-1){var Ce,C0=z.out_samplerate/t.BLKSIZE,e0=0;for(Ce=0,U=0;U<t.BLKSIZE/2;++U)Ce+=C0,k.ATH.eql_w[U]=1/Math.pow(10,this.ATHformula(Ce,z)/10),e0+=k.ATH.eql_w[U];for(e0=1/e0,U=t.BLKSIZE/2;--U>=0;)k.ATH.eql_w[U]*=e0}{for(var f0=Ne=0;f0<k.npart_s;++f0)for(U=0;U<k.numlines_s[f0];++U)++Ne;for(var f0=Ne=0;f0<k.npart_l;++f0)for(U=0;U<k.numlines_l[f0];++U)++Ne}for(Ne=0,U=0;U<k.npart_l;U++){var Ce=i0*(Ne+k.numlines_l[U]/2)/(1*t.BLKSIZE);k.mld_cb_l[U]=h0(Ce),Ne+=k.numlines_l[U]}for(;U<t.CBANDS;++U)k.mld_cb_l[U]=1;for(Ne=0,U=0;U<k.npart_s;U++){var Ce=i0*(Ne+k.numlines_s[U]/2)/(1*t.BLKSIZE_s);k.mld_cb_s[U]=h0(Ce),Ne+=k.numlines_s[U]}for(;U<t.CBANDS;++U)k.mld_cb_s[U]=1;return 0};function H0(z,k){z<-.3&&(z=3410),z/=1e3,z=Math.max(.1,z);var U=3.64*Math.pow(z,-.8)-6.8*Math.exp(-.6*Math.pow(z-3.4,2))+6*Math.exp(-.15*Math.pow(z-8.7,2))+(.6+.04*k)*.001*Math.pow(z,4);return U}this.ATHformula=function(z,k){var U;switch(k.ATHtype){case 0:U=H0(z,9);break;case 1:U=H0(z,-1);break;case 2:U=H0(z,0);break;case 3:U=H0(z,1)+6;break;case 4:U=H0(z,k.ATHcurve);break;default:U=H0(z,0);break}return U}}function be(){var c=this,g=128*1024;be.V9=410,be.V8=420,be.V7=430,be.V6=440,be.V5=450,be.V4=460,be.V3=470,be.V2=480,be.V1=490,be.V0=500,be.R3MIX=1e3,be.STANDARD=1001,be.EXTREME=1002,be.INSANE=1003,be.STANDARD_FAST=1004,be.EXTREME_FAST=1005,be.MEDIUM=1006,be.MEDIUM_FAST=1007;var H=16384+g;be.LAME_MAXMP3BUFFER=H;var y,ae,p,T,$,I=new Be,K,x;this.enc=new t,this.setModules=function(a,s,G,L,F,ee,ie,M,W){y=a,ae=s,p=G,T=L,$=F,K=ee,x=M,this.enc.setModules(ae,I,T,K)};function J(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=P(t.SBMAX_l),this.bo_s_weight=P(t.SBMAX_s)}function R(){this.lowerlimit=0}function A(a,s){this.lowpass=s}var e=4294479419;function l(a){var s;return a.class_id=e,s=a.internal_flags=new Te,a.mode=ke.NOT_SET,a.original=1,a.in_samplerate=44100,a.num_channels=2,a.num_samples=-1,a.bWriteVbrTag=!0,a.quality=-1,a.short_blocks=null,s.subblock_gain=-1,a.lowpassfreq=0,a.highpassfreq=0,a.lowpasswidth=-1,a.highpasswidth=-1,a.VBR=j.vbr_off,a.VBR_q=4,a.ATHcurve=-1,a.VBR_mean_bitrate_kbps=128,a.VBR_min_bitrate_kbps=0,a.VBR_max_bitrate_kbps=0,a.VBR_hard_min=0,s.VBR_min_bitrate=1,s.VBR_max_bitrate=13,a.quant_comp=-1,a.quant_comp_short=-1,a.msfix=-1,s.resample_ratio=1,s.OldValue[0]=180,s.OldValue[1]=180,s.CurrentStep[0]=4,s.CurrentStep[1]=4,s.masking_lower=1,s.nsPsy.attackthre=-1,s.nsPsy.attackthre_s=-1,a.scale=-1,a.athaa_type=-1,a.ATHtype=-1,a.athaa_loudapprox=-1,a.athaa_sensitivity=0,a.useTemporal=null,a.interChRatio=-1,s.mf_samples_to_encode=t.ENCDELAY+t.POSTDELAY,a.encoder_padding=0,s.mf_size=t.ENCDELAY-t.MDCTDELAY,a.findReplayGain=!1,a.decode_on_the_fly=!1,s.decode_on_the_fly=!1,s.findReplayGain=!1,s.findPeakSample=!1,s.RadioGain=0,s.AudiophileGain=0,s.noclipGainChange=0,s.noclipScale=-1,a.preset=0,a.write_id3tag_automatic=!0,0}this.lame_init=function(){var a=new m0;return l(a),a.lame_allocated_gfp=1,a};function m(a){return a>1?0:a<=0?1:Math.cos(Math.PI/2*a)}this.nearestBitrateFullIndex=function(a){var s=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],G=0,L=0,F=0,ee=0;ee=s[16],F=16,L=s[16],G=16;for(var ie=0;ie<16;ie++)if(Math.max(a,s[ie+1])!=a){ee=s[ie+1],F=ie+1,L=s[ie],G=ie;break}return ee-a>a-L?G:F};function C(a,s){switch(a){case 44100:return s.version=1,0;case 48e3:return s.version=1,1;case 32e3:return s.version=1,2;case 22050:return s.version=0,0;case 24e3:return s.version=0,1;case 16e3:return s.version=0,2;case 11025:return s.version=0,0;case 12e3:return s.version=0,1;case 8e3:return s.version=0,2;default:return s.version=0,-1}}function h(a,s,G){G<16e3&&(s=2);for(var L=N.bitrate_table[s][1],F=2;F<=14;F++)N.bitrate_table[s][F]>0&&Math.abs(N.bitrate_table[s][F]-a)<Math.abs(L-a)&&(L=N.bitrate_table[s][F]);return L}function o(a,s,G){G<16e3&&(s=2);for(var L=0;L<=14;L++)if(N.bitrate_table[s][L]>0&&N.bitrate_table[s][L]==a)return L;return-1}function f(a,s){var G=[new A(8,2e3),new A(16,3700),new A(24,3900),new A(32,5500),new A(40,7e3),new A(48,7500),new A(56,1e4),new A(64,11e3),new A(80,13500),new A(96,15100),new A(112,15600),new A(128,17e3),new A(160,17500),new A(192,18600),new A(224,19400),new A(256,19700),new A(320,20500)],L=c.nearestBitrateFullIndex(s);a.lowerlimit=G[L].lowpass}function i(a){var s=a.internal_flags,G=32;if(s.lowpass1>0){for(var L=999,F=0;F<=31;F++){var ee=F/31;ee>=s.lowpass2&&(G=Math.min(G,F)),s.lowpass1<ee&&ee<s.lowpass2&&(L=Math.min(L,F))}L==999?s.lowpass1=(G-.75)/31:s.lowpass1=(L-.75)/31,s.lowpass2=G/31}s.highpass2>0&&V(),s.highpass2>0&&V();for(var F=0;F<32;F++){var ie,M,ee=F/31;s.highpass2>s.highpass1?V():ie=1,s.lowpass2>s.lowpass1?M=m((ee-s.lowpass1)/(s.lowpass2-s.lowpass1+1e-20)):M=1,s.amp_filter[F]=ie*M}}function w(a){var s=a.internal_flags;switch(a.quality){default:case 9:s.psymodel=0,s.noise_shaping=0,s.noise_shaping_amp=0,s.noise_shaping_stop=0,s.use_best_huffman=0,s.full_outer_loop=0;break;case 8:a.quality=7;case 7:s.psymodel=1,s.noise_shaping=0,s.noise_shaping_amp=0,s.noise_shaping_stop=0,s.use_best_huffman=0,s.full_outer_loop=0;break;case 6:s.psymodel=1,s.noise_shaping==0&&(s.noise_shaping=1),s.noise_shaping_amp=0,s.noise_shaping_stop=0,s.subblock_gain==-1&&(s.subblock_gain=1),s.use_best_huffman=0,s.full_outer_loop=0;break;case 5:s.psymodel=1,s.noise_shaping==0&&(s.noise_shaping=1),s.noise_shaping_amp=0,s.noise_shaping_stop=0,s.subblock_gain==-1&&(s.subblock_gain=1),s.use_best_huffman=0,s.full_outer_loop=0;break;case 4:s.psymodel=1,s.noise_shaping==0&&(s.noise_shaping=1),s.noise_shaping_amp=0,s.noise_shaping_stop=0,s.subblock_gain==-1&&(s.subblock_gain=1),s.use_best_huffman=1,s.full_outer_loop=0;break;case 3:s.psymodel=1,s.noise_shaping==0&&(s.noise_shaping=1),s.noise_shaping_amp=1,s.noise_shaping_stop=1,s.subblock_gain==-1&&(s.subblock_gain=1),s.use_best_huffman=1,s.full_outer_loop=0;break;case 2:s.psymodel=1,s.noise_shaping==0&&(s.noise_shaping=1),s.substep_shaping==0&&(s.substep_shaping=2),s.noise_shaping_amp=1,s.noise_shaping_stop=1,s.subblock_gain==-1&&(s.subblock_gain=1),s.use_best_huffman=1,s.full_outer_loop=0;break;case 1:s.psymodel=1,s.noise_shaping==0&&(s.noise_shaping=1),s.substep_shaping==0&&(s.substep_shaping=2),s.noise_shaping_amp=2,s.noise_shaping_stop=1,s.subblock_gain==-1&&(s.subblock_gain=1),s.use_best_huffman=1,s.full_outer_loop=0;break;case 0:s.psymodel=1,s.noise_shaping==0&&(s.noise_shaping=1),s.substep_shaping==0&&(s.substep_shaping=2),s.noise_shaping_amp=2,s.noise_shaping_stop=1,s.subblock_gain==-1&&(s.subblock_gain=1),s.use_best_huffman=1,s.full_outer_loop=0;break}}function n(a){var s=a.internal_flags;a.frameNum=0,a.write_id3tag_automatic&&x.id3tag_write_v2(a),s.bitrate_stereoMode_Hist=_e([16,5]),s.bitrate_blockType_Hist=_e([16,6]),s.PeakSample=0,a.bWriteVbrTag&&K.InitVbrTag(a)}this.lame_init_params=function(a){var s=a.internal_flags;if(s.Class_ID=0,s.ATH==null&&(s.ATH=new R0),s.PSY==null&&(s.PSY=new J),s.rgdata==null&&(s.rgdata=new x0),s.channels_in=a.num_channels,s.channels_in==1&&(a.mode=ke.MONO),s.channels_out=a.mode==ke.MONO?1:2,s.mode_ext=t.MPG_MD_MS_LR,a.mode==ke.MONO&&(a.force_ms=!1),a.VBR==j.vbr_off&&a.VBR_mean_bitrate_kbps!=128&&a.brate==0&&(a.brate=a.VBR_mean_bitrate_kbps),a.VBR==j.vbr_off||a.VBR==j.vbr_mtrh||a.VBR==j.vbr_mt||(a.free_format=!1),a.VBR==j.vbr_off&&a.brate==0&&V(),a.VBR==j.vbr_off&&a.compression_ratio>0&&V(),a.out_samplerate!=0&&(a.out_samplerate<16e3?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,64)):a.out_samplerate<32e3?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,160)):(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,32),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,320))),a.lowpassfreq==0){var G=16e3;switch(a.VBR){case j.vbr_off:{var L=new R;f(L,a.brate),G=L.lowerlimit;break}case j.vbr_abr:{var L=new R;f(L,a.VBR_mean_bitrate_kbps),G=L.lowerlimit;break}case j.vbr_rh:V();default:V()}a.mode==ke.MONO&&(a.VBR==j.vbr_off||a.VBR==j.vbr_abr)&&(G*=1.5),a.lowpassfreq=G|0}switch(a.out_samplerate==0&&V(),a.lowpassfreq=Math.min(20500,a.lowpassfreq),a.lowpassfreq=Math.min(a.out_samplerate/2,a.lowpassfreq),a.VBR==j.vbr_off&&(a.compression_ratio=a.out_samplerate*16*s.channels_out/(1e3*a.brate)),a.VBR==j.vbr_abr&&V(),a.bWriteVbrTag||(a.findReplayGain=!1,a.decode_on_the_fly=!1,s.findPeakSample=!1),s.findReplayGain=a.findReplayGain,s.decode_on_the_fly=a.decode_on_the_fly,s.decode_on_the_fly&&(s.findPeakSample=!0),s.findReplayGain&&V(),s.decode_on_the_fly&&!a.decode_only&&V(),s.mode_gr=a.out_samplerate<=24e3?1:2,a.framesize=576*s.mode_gr,a.encoder_delay=t.ENCDELAY,s.resample_ratio=a.in_samplerate/a.out_samplerate,a.VBR){case j.vbr_mt:case j.vbr_rh:case j.vbr_mtrh:{var F=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];a.compression_ratio=F[a.VBR_q]}break;case j.vbr_abr:a.compression_ratio=a.out_samplerate*16*s.channels_out/(1e3*a.VBR_mean_bitrate_kbps);break;default:a.compression_ratio=a.out_samplerate*16*s.channels_out/(1e3*a.brate);break}a.mode==ke.NOT_SET&&(a.mode=ke.JOINT_STEREO),a.highpassfreq>0?V():(s.highpass1=0,s.highpass2=0),a.lowpassfreq>0?(s.lowpass2=2*a.lowpassfreq,a.lowpasswidth>=0?V():s.lowpass1=1*2*a.lowpassfreq,s.lowpass1/=a.out_samplerate,s.lowpass2/=a.out_samplerate):V(),i(a),s.samplerate_index=C(a.out_samplerate,a),s.samplerate_index<0&&V(),a.VBR==j.vbr_off?a.free_format?s.bitrate_index=0:(a.brate=h(a.brate,a.version,a.out_samplerate),s.bitrate_index=o(a.brate,a.version,a.out_samplerate),s.bitrate_index<=0&&V()):s.bitrate_index=1,a.analysis&&(a.bWriteVbrTag=!1),s.pinfo!=null&&(a.bWriteVbrTag=!1),ae.init_bit_stream_w(s);for(var ee=s.samplerate_index+3*a.version+6*(a.out_samplerate<16e3?1:0),ie=0;ie<t.SBMAX_l+1;ie++)s.scalefac_band.l[ie]=T.sfBandIndex[ee].l[ie];for(var ie=0;ie<t.PSFB21+1;ie++){var M=(s.scalefac_band.l[22]-s.scalefac_band.l[21])/t.PSFB21,W=s.scalefac_band.l[21]+ie*M;s.scalefac_band.psfb21[ie]=W}s.scalefac_band.psfb21[t.PSFB21]=576;for(var ie=0;ie<t.SBMAX_s+1;ie++)s.scalefac_band.s[ie]=T.sfBandIndex[ee].s[ie];for(var ie=0;ie<t.PSFB12+1;ie++){var M=(s.scalefac_band.s[13]-s.scalefac_band.s[12])/t.PSFB12,W=s.scalefac_band.s[12]+ie*M;s.scalefac_band.psfb12[ie]=W}s.scalefac_band.psfb12[t.PSFB12]=192,a.version==1?s.sideinfo_len=s.channels_out==1?21:36:s.sideinfo_len=s.channels_out==1?13:21,a.error_protection&&(s.sideinfo_len+=2),n(a),s.Class_ID=e;{var ve;for(ve=0;ve<19;ve++)s.nsPsy.pefirbuf[ve]=700*s.mode_gr*s.channels_out;a.ATHtype==-1&&(a.ATHtype=4)}switch(a.VBR){case j.vbr_mt:a.VBR=j.vbr_mtrh;case j.vbr_mtrh:{a.useTemporal==null&&(a.useTemporal=!1),p.apply_preset(a,500-a.VBR_q*10,0),a.quality<0&&(a.quality=LAME_DEFAULT_QUALITY),a.quality<5&&(a.quality=0),a.quality>5&&(a.quality=5),s.PSY.mask_adjust=a.maskingadjust,s.PSY.mask_adjust_short=a.maskingadjust_short,a.experimentalY?s.sfb21_extra=!1:s.sfb21_extra=a.out_samplerate>44e3,s.iteration_loop=new VBRNewIterationLoop($);break}case j.vbr_rh:{p.apply_preset(a,500-a.VBR_q*10,0),s.PSY.mask_adjust=a.maskingadjust,s.PSY.mask_adjust_short=a.maskingadjust_short,a.experimentalY?s.sfb21_extra=!1:s.sfb21_extra=a.out_samplerate>44e3,a.quality>6&&(a.quality=6),a.quality<0&&(a.quality=LAME_DEFAULT_QUALITY),s.iteration_loop=new VBROldIterationLoop($);break}default:{var xe;s.sfb21_extra=!1,a.quality<0&&(a.quality=LAME_DEFAULT_QUALITY),xe=a.VBR,xe==j.vbr_off&&(a.VBR_mean_bitrate_kbps=a.brate),p.apply_preset(a,a.VBR_mean_bitrate_kbps,0),a.VBR=xe,s.PSY.mask_adjust=a.maskingadjust,s.PSY.mask_adjust_short=a.maskingadjust_short,xe==j.vbr_off?s.iteration_loop=new B0($):V();break}}return a.VBR!=j.vbr_off&&V(),a.tune&&V(),w(a),a.athaa_type<0?s.ATH.useAdjust=3:s.ATH.useAdjust=a.athaa_type,s.ATH.aaSensitivityP=Math.pow(10,a.athaa_sensitivity/-10),a.short_blocks==null&&(a.short_blocks=re.short_block_allowed),a.short_blocks==re.short_block_allowed&&(a.mode==ke.JOINT_STEREO||a.mode==ke.STEREO)&&(a.short_blocks=re.short_block_coupled),a.quant_comp<0&&(a.quant_comp=1),a.quant_comp_short<0&&(a.quant_comp_short=0),a.msfix<0&&(a.msfix=0),a.exp_nspsytune=a.exp_nspsytune|1,a.internal_flags.nsPsy.attackthre<0&&(a.internal_flags.nsPsy.attackthre=Be.NSATTACKTHRE),a.internal_flags.nsPsy.attackthre_s<0&&(a.internal_flags.nsPsy.attackthre_s=Be.NSATTACKTHRE_S),a.scale<0&&(a.scale=1),a.ATHtype<0&&(a.ATHtype=4),a.ATHcurve<0&&(a.ATHcurve=4),a.athaa_loudapprox<0&&(a.athaa_loudapprox=2),a.interChRatio<0&&(a.interChRatio=0),a.useTemporal==null&&(a.useTemporal=!0),s.slot_lag=s.frac_SpF=0,a.VBR==j.vbr_off&&(s.slot_lag=s.frac_SpF=(a.version+1)*72e3*a.brate%a.out_samplerate|0),T.iteration_init(a),I.psymodel_init(a),0};function O(a,s){(a.in_buffer_0==null||a.in_buffer_nsamples<s)&&(a.in_buffer_0=P(s),a.in_buffer_1=P(s),a.in_buffer_nsamples=s)}this.lame_encode_flush=function(a,s,G,L){var F=a.internal_flags,ee=Ee([2,1152]),ie=0,M,W,ve,xe,We=F.mf_samples_to_encode-t.POSTDELAY,a0=u(a);if(F.mf_samples_to_encode<1)return 0;for(M=0,a.in_samplerate!=a.out_samplerate&&V(),ve=a.framesize-We%a.framesize,ve<576&&(ve+=a.framesize),a.encoder_padding=ve,xe=(We+ve)/a.framesize;xe>0&&ie>=0;){var je=a0-F.mf_size,t0=a.frameNum;je*=a.in_samplerate,je/=a.out_samplerate,je>1152&&(je=1152),je<1&&(je=1),W=L-M,L==0&&(W=0),ie=this.lame_encode_buffer(a,ee[0],ee[1],je,s,G,W),G+=ie,M+=ie,xe-=t0!=a.frameNum?1:0}return F.mf_samples_to_encode=0,ie<0||(W=L-M,L==0&&(W=0),ae.flush_bitstream(a),ie=ae.copy_buffer(F,s,G,W,1),ie<0)?ie:(G+=ie,M+=ie,W=L-M,L==0&&(W=0),a.write_id3tag_automatic&&V(),M)},this.lame_encode_buffer=function(a,s,G,L,F,ee,ie){var M=a.internal_flags,W=[null,null];if(M.Class_ID!=e)return-3;if(L==0)return 0;O(M,L),W[0]=M.in_buffer_0,W[1]=M.in_buffer_1;for(var ve=0;ve<L;ve++)W[0][ve]=s[ve],M.channels_in>1&&(W[1][ve]=G[ve]);return _(a,W[0],W[1],L,F,ee,ie)};function u(a){var s=t.BLKSIZE+a.framesize-t.FFTOFFSET;return s=Math.max(s,512+a.framesize-32),s}function _(a,s,G,L,F,ee,ie){var M=a.internal_flags,W=0,ve,xe,We,a0,je,t0=[null,null],h0=[null,null];if(M.Class_ID!=e)return-3;if(L==0)return 0;if(je=ae.copy_buffer(M,F,ee,ie,0),je<0)return je;if(ee+=je,W+=je,h0[0]=s,h0[1]=G,ge.NEQ(a.scale,0)&&ge.NEQ(a.scale,1))for(xe=0;xe<L;++xe)h0[0][xe]*=a.scale,M.channels_out==2&&(h0[1][xe]*=a.scale);if(ge.NEQ(a.scale_left,0)&&ge.NEQ(a.scale_left,1))for(xe=0;xe<L;++xe)h0[0][xe]*=a.scale_left;if(ge.NEQ(a.scale_right,0)&&ge.NEQ(a.scale_right,1))for(xe=0;xe<L;++xe)h0[1][xe]*=a.scale_right;a.num_channels==2&&M.channels_out==1&&V(),a0=u(a),t0[0]=M.mfbuf[0],t0[1]=M.mfbuf[1];for(var H0=0;L>0;){var z=[null,null],k=0,U=0;z[0]=h0[0],z[1]=h0[1];var Se=new b;if(B(a,t0,z,H0,L,Se),k=Se.n_in,U=Se.n_out,M.findReplayGain&&!M.decode_on_the_fly&&y.AnalyzeSamples(M.rgdata,t0[0],M.mf_size,t0[1],M.mf_size,U,M.channels_out)==Fe.GAIN_ANALYSIS_ERROR)return-6;if(L-=k,H0+=k,M.channels_out==2,M.mf_size+=U,M.mf_samples_to_encode<1&&V(),M.mf_samples_to_encode+=U,M.mf_size>=a0){var de=ie-W;if(ie==0&&(de=0),ve=v(a,t0[0],t0[1],F,ee,de),ve<0)return ve;for(ee+=ve,W+=ve,M.mf_size-=a.framesize,M.mf_samples_to_encode-=a.framesize,We=0;We<M.channels_out;We++)for(xe=0;xe<M.mf_size;xe++)t0[We][xe]=t0[We][xe+a.framesize]}}return W}function v(a,s,G,L,F,ee){var ie=c.enc.lame_encode_mp3_frame(a,s,G,L,F,ee);return a.frameNum++,ie}function b(){this.n_in=0,this.n_out=0}function B(a,s,G,L,F,ee){var ie=a.internal_flags;if(ie.resample_ratio<.9999||ie.resample_ratio>1.0001)V();else{ee.n_out=Math.min(a.framesize,F),ee.n_in=ee.n_out;for(var M=0;M<ee.n_out;++M)s[0][ie.mf_size+M]=G[0][L+M],ie.channels_out==2&&(s[1][ie.mf_size+M]=G[1][L+M])}}}function s0(){this.setModules=function(c,g){}}function He(){this.setModules=function(c,g,H){}}function Ue(){}function Ie(){this.setModules=function(c,g){}}function Ke(c,g,H){c!=1&&V("fix cc: only supports mono");var y=new be,ae=new s0,p=new Fe,T=new ge,$=new o0,I=new Je,K=new Z0,x=new v0,J=new De,R=new Ie,A=new Ye,e=new Ve,l=new He,m=new Ue;y.setModules(p,T,$,I,K,x,J,R,m),T.setModules(p,m,J,x),R.setModules(T,J),$.setModules(y),K.setModules(T,A,I,e),I.setModules(e,A,y.enc.psy),A.setModules(T),e.setModules(I),x.setModules(y,T,J),ae.setModules(l,m),l.setModules(J,R,$);var C=y.lame_init();C.num_channels=c,C.in_samplerate=g,C.out_samplerate=g,C.brate=H,C.mode=ke.STEREO,C.quality=3,C.bWriteVbrTag=!1,C.disable_reservoir=!0,C.write_id3tag_automatic=!1,y.lame_init_params(C);var h=1152,o=0|1.25*h+7200,f=oe(o);this.encodeBuffer=function(i,w){c==1&&(w=i),i.length>h&&(h=i.length,o=0|1.25*h+7200,f=oe(o));var n=y.lame_encode_buffer(C,i,w,i.length,f,0,o);return new Int8Array(f.subarray(0,n))},this.flush=function(){var i=y.lame_encode_flush(C,f,0,o);return new Int8Array(f.subarray(0,i))}}me.SFBMAX=t.SBMAX_s*3,X.Mp3Encoder=Ke}X(),r.lamejs=X});(function(r){var X=typeof window=="object"&&!!window.document,Q=X?window:Object,V=Q.Recorder,oe=V.i18n;r(V,oe,oe.$T,X)})(function(r,X,Q,V){var oe=function(P){return new d(P)},Ae="WaveView",d=function(P){var ue=this,ne={scale:2,speed:9,phase:21.8,fps:20,keep:!0,lineWidth:3,linear1:[0,"rgba(150,96,238,1)",.2,"rgba(170,79,249,1)",1,"rgba(53,199,253,1)"],linear2:[0,"rgba(209,130,255,0.6)",1,"rgba(53,199,255,0.6)"],linearBg:[0,"rgba(255,255,255,0.2)",1,"rgba(54,197,252,0.2)"]};for(var _e in P)ne[_e]=P[_e];ue.set=P=ne;var Ee="compatibleCanvas";if(P[Ee])var fe=ue.canvas=P[Ee];else{if(!V)throw new Error(Q.G("NonBrowser-1",[Ae]));var pe=P.elem;pe&&(typeof pe=="string"?pe=document.querySelector(pe):pe.length&&(pe=pe[0])),pe&&(P.width=pe.offsetWidth,P.height=pe.offsetHeight);var q=ue.elem=document.createElement("div");q.style.fontSize=0,q.innerHTML='<canvas style="width:100%;height:100%;"/>';var fe=ue.canvas=q.querySelector("canvas");pe&&(pe.innerHTML="",pe.appendChild(q))}var Y=P.scale,re=P.width*Y,Le=P.height*Y;if(!re||!Le)throw new Error(Q.G("IllegalArgs-1",[Ae+" width=0 height=0"]));fe.width=re,fe.height=Le;var j=ue.ctx=fe.getContext("2d");ue.linear1=ue.genLinear(j,re,P.linear1),ue.linear2=ue.genLinear(j,re,P.linear2),ue.linearBg=ue.genLinear(j,Le,P.linearBg,!0),ue._phase=0};d.prototype=oe.prototype={genLinear:function(P,ue,ne,_e){for(var Ee=P.createLinearGradient(0,0,_e?0:ue,_e?ue:0),fe=0;fe<ne.length;)Ee.addColorStop(ne[fe++],ne[fe++]);return Ee},genPath:function(P,ue,ne){for(var _e=[],Ee=this,fe=Ee.set,pe=fe.scale,q=fe.width*pe,Y=fe.height*pe/2,re=0;re<=q;re+=pe){var Le=(1+Math.cos(Math.PI+re/q*2*Math.PI))/2,j=Le*Y*ue*Math.sin(2*Math.PI*(re/q)*P+ne)+Y;_e.push(j)}return _e},input:function(P,ue,ne){var _e=this;_e.sampleRate=ne,_e.pcmData=P,_e.pcmPos=0,_e.inputTime=Date.now(),_e.schedule()},schedule:function(){var P=this,ue=P.set,ne=Math.floor(1e3/ue.fps);P.timer||(P.timer=setInterval(function(){P.schedule()},ne));var _e=Date.now(),Ee=P.drawTime||0;if(!(_e-Ee<ne)){P.drawTime=_e;for(var fe=P.sampleRate/ue.fps,pe=P.pcmData,q=P.pcmPos,Y=Math.max(0,Math.min(fe,pe.length-q)),re=0,Le=0;Le<Y;Le++,q++)re+=Math.abs(pe[q]);P.pcmPos=q,(Y||!ue.keep)&&P.draw(r.PowerLevel(re,Y)),!Y&&_e-P.inputTime>1300&&(clearInterval(P.timer),P.timer=0)}},draw:function(P){var ue=this,ne=ue.set,_e=ue.ctx,Ee=ne.scale,fe=ne.width*Ee,pe=ne.height*Ee,q=ne.speed/ne.fps,Y=ue._phase-=q,re=Y+q*ne.phase,Le=P/100,j=ue.genPath(2,Le,Y),ke=ue.genPath(1.8,Le,re);_e.clearRect(0,0,fe,pe),_e.beginPath();for(var De=0,Ve=0;Ve<=fe;De++,Ve+=Ee)Ve==0?_e.moveTo(Ve,j[De]):_e.lineTo(Ve,j[De]);De--;for(var Ve=fe-1;Ve>=0;De--,Ve-=Ee)_e.lineTo(Ve,ke[De]);_e.closePath(),_e.fillStyle=ue.linearBg,_e.fill(),ue.drawPath(ke,ue.linear2),ue.drawPath(j,ue.linear1)},drawPath:function(P,ue){var ne=this,_e=ne.set,Ee=ne.ctx,fe=_e.scale,pe=_e.width*fe;Ee.beginPath();for(var q=0,Y=0;Y<=pe;q++,Y+=fe)Y==0?Ee.moveTo(Y,P[q]):Ee.lineTo(Y,P[q]);Ee.lineWidth=_e.lineWidth*fe,Ee.strokeStyle=ue,Ee.stroke()}},r[Ae]=oe});const Dr={class:"w-full h-full overflow-hidden flex flex-col gap-4"},Hr={class:"flex-1 w-full overflow-auto"},Nr={key:0,class:"text-xs text-left"},Vr={class:"flex items-center w-full gap-2"},Fr={class:"w-20 shrink-0"},Pr={class:"flex-1"},Gr={class:"flex items-center cursor-pointer gap-2"},Ur=na({__name:"SpeechGenerate",setup(r){const X=St(),Q=w0(!1),V=w0([]),oe=ra({prompt:"",voiceUrl:""}),Ae=w0(""),d=w0(null),P=w0(),ue=w0(!1),ne=()=>{d.value=Or({type:"mp3",sampleRate:16e3,bitRate:16}),d.value.open(()=>{console.log("录音已打开"),d.value.start(),ue.value=!0,console.log("已开始录音")},(Y,re)=>{console.log((re?"UserNotAllow，":"")+"无法录音:"+Y)})},_e=()=>{if(!d.value){console.error("未打开录音");return}d.value.stop((Y,re)=>{ue.value=!1,P.value=Y;var Le=(window.URL||webkitURL).createObjectURL(Y);console.log("录音成功",Y,Le,"时长:"+re+"ms"),d.value.close(),d.value=null},Y=>{console.error("结束录音出错："+Y),d.value.close(),d.value=null})},Ee=()=>{var Y=URL.createObjectURL(P.value),re=document.createElement("audio");re.controls=!0,document.body.appendChild(re),re.src=Y,re.play(),setTimeout(()=>{URL.revokeObjectURL(re.src)},5e3)},fe=()=>{if(!Ae.value){ba.error("请先填写音色名称");return}ba.info("前端模式下暂不支持音色克隆功能")},pe=()=>{if(!oe.prompt){ba.error("请输入文字描述");return}ba.info("前端模式下暂不支持AI语音生成功能")},q=()=>{V.value=[{voiceName:"默认音色1",voiceUrl:"default1"},{voiceName:"默认音色2",voiceUrl:"default2"}],V.value.push({voiceName:"自定义",voiceUrl:"custom"}),oe.voiceUrl=V.value[0].voiceUrl};return Ea(()=>{q()}),(Y,re)=>{const Le=U0("ResourceList"),j=kr,ke=Ir,De=wt,Ve=Mt,Fe=S1,o0=xt;return Ze(),S0("div",Dr,[d0("div",Hr,[D0(Le,{"list-data":wa(X).speechList,type:"speech"},null,8,["list-data"])]),oe.voiceUrl==="custom"?(Ze(),S0("div",Nr," 朗读内容：清晨的阳光透过窗帘洒在桌上，温暖而明亮 ")):T0("",!0),ta((Ze(),S0("div",Vr,[d0("div",Fr,[D0(ke,{modelValue:oe.voiceUrl,"onUpdate:modelValue":re[0]||(re[0]=Ye=>oe.voiceUrl=Ye),placeholder:"音色"},{default:M0(()=>[(Ze(!0),S0(_a,null,Fa(V.value,(Ye,v0)=>(Ze(),O0(j,{key:v0,value:Ye.voiceUrl,label:Ye.voiceName},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),oe.voiceUrl!=="custom"?(Ze(),S0(_a,{key:0},[d0("div",Pr,[D0(De,{modelValue:oe.prompt,"onUpdate:modelValue":re[1]||(re[1]=Ye=>oe.prompt=Ye),placeholder:"请输入提示词",onKeyup:ea(pe,["enter"])},null,8,["modelValue"])]),d0("div",null,[D0(Ve,{class:"dark:bg-purple-heavy",circle:"",onClick:pe},{default:M0(()=>re[3]||(re[3]=[d0("i",{class:"i-mdi-send"},null,-1)])),_:1})])],64)):(Ze(),S0(_a,{key:1},[D0(De,{modelValue:Ae.value,"onUpdate:modelValue":re[2]||(re[2]=Ye=>Ae.value=Ye),placeholder:"请输入音色名称"},null,8,["modelValue"]),d0("div",Gr,[ue.value?(Ze(),O0(Fe,{key:1,content:"停止录音"},{default:M0(()=>[d0("i",{class:"i-mdi-stop",style:{"font-size":"18px",cursor:"pointer"},onClick:_e})]),_:1})):(Ze(),O0(Fe,{key:0,content:"开始/重新录音"},{default:M0(()=>[d0("i",{class:"i-mdi-microphone",style:{"font-size":"18px",cursor:"pointer"},onClick:ne})]),_:1})),P.value?(Ze(),O0(Fe,{key:2,content:"试听录音"},{default:M0(()=>[d0("i",{class:"i-mdi-volume-high",style:{"font-size":"18px",cursor:"pointer"},onClick:Ee})]),_:1})):T0("",!0),P.value?(Ze(),O0(Fe,{key:3,content:"克隆录音"},{default:M0(()=>[D0(Ve,{type:"primary",circle:"",onClick:fe},{default:M0(()=>re[4]||(re[4]=[d0("i",{class:"i-mdi-download"},null,-1)])),_:1})]),_:1})):T0("",!0)])],64))])),[[o0,Q.value]])])}}}),Xr=yt(Ur,[["__scopeId","data-v-002aca90"]]),jr=Object.freeze(Object.defineProperty({__proto__:null,default:Xr},Symbol.toStringTag,{value:"Module"}));export{Xr as S,jr as a,xa as i};
