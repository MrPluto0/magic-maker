import{ae as B,C as K,O,E as R,d as P,D as v,r as j,B as I,g as V,k as w,f as n,w as g,L as k,i as X,e as $,u as p,aJ as Y,a as J,o as q,z as A,F as G,H as Q}from"./index-DnwN-RZ1.js";import{h as r}from"./hotkeys.esm-BfWqkGRU.js";import{_ as Z}from"./AttributeContainer.vue_vue_type_script_setup_true_lang-BV1qLVRU.js";import{_ as ee}from"./CanvasPlayer.vue_vue_type_script_setup_true_lang-By23BD0G.js";import{_ as te}from"./TrackContainer.vue_vue_type_script_setup_true_lang-4mW71D5T.js";import{_ as oe}from"./GenerateContainer.vue_vue_type_script_setup_true_lang-4GQSBIrh.js";import ae from"./UploadContainer-C_q3Li9R.js";import"./el-empty-CvpF37s0.js";import"./VideoAttr.vue_vue_type_script_setup_true_lang-CzoLuQ0c.js";/* empty css                   */import"./el-input-number-B0Rv-z3B.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-tag-DEIq6Q_k.js";import"./AttrCol.vue_vue_type_script_setup_true_lang-BmiH_ioP.js";import"./ImageAttr.vue_vue_type_script_setup_true_lang-BygoV0Um.js";import"./AudioAttr-y3Cq7_wL.js";import"./position-BWqsR9Iq.js";import"./index-BpqpVcoO.js";import"./Player.vue_vue_type_script_setup_true_lang-Dw9ts5rc.js";import"./PlayerMoveable.vue_vue_type_style_index_0_lang-DlYliXUj.js";import"./constant-BL1G5PhE.js";import"./PlayerControl.vue_vue_type_script_setup_true_lang-BfMN58aN.js";import"./TrackControl.vue_vue_type_script_setup_true_lang-Bx9DEVYO.js";import"./TrackList.vue_vue_type_script_setup_true_lang-CNWQ1Lws.js";import"./TimeLine.vue_vue_type_script_setup_true_lang-BzExzWQM.js";import"./canvasUtil-Cql1jrBt.js";import"./TrackLine-Bloh6xLC.js";import"./TrackItem.vue_vue_type_script_setup_true_lang-uH4Zah7C.js";import"./TrackHandler.vue_vue_type_script_setup_true_lang-BzFcWIdM.js";import"./VideoItem.vue_vue_type_style_index_0_scope_true_lang-BuOlkvtH.js";import"./Loading-BP_LpVh7.js";import"./AudioItem.vue_vue_type_script_setup_true_lang-6Ea_9PBZ.js";import"./TextItem.vue_vue_type_script_setup_true_lang-DGxb2uAH.js";import"./ImageItem.vue_vue_type_script_setup_true_lang-7L8oV0Nj.js";import"./TrackListIcon.vue_vue_type_script_setup_true_lang-4Bd_sYzJ.js";import"./TrackPlayPoint-DMLb0pkJ.js";import"./menu-tuslb90-.js";import"./TextGenerate-C0dJ6KfY.js";import"./index-Cp1P3COd.js";import"./ImageGenerate-C3hL89KL.js";import"./ResourceList.vue_vue_type_script_setup_true_lang-BaMXrFHy.js";import"./ResourceItem.vue_vue_type_script_setup_true_lang-YO6-l35D.js";import"./el-popover-DGnhGXBk.js";import"./el-image-viewer-CAyj13Vk.js";import"./AudioGenerate-yjVgkqax.js";import"./el-select-BJzq19TE.js";import"./VideoGenerate-HRkLzpJE.js";import"./SpeechGenerate-D_qyCS3Y.js";const re=B(),a=K(),h=O(),ne=()=>{r("backspace,delete",(e,t)=>{a.removeTrack(),e.preventDefault()}),r("space",(e,t)=>{h.isPause=!h.isPause,e.preventDefault()}),r("right",(e,t)=>{h.forward(),e.preventDefault()}),r("left",(e,t)=>{h.backward(),e.preventDefault()}),r("t|T",(e,t)=>{a.addText(),e.preventDefault()}),r("l",(e,t)=>{a.leftLink(),e.preventDefault()}),r("s",(e,t)=>{a.splitTrack(),e.preventDefault()}),r("ctrl+c",(e,t)=>{a.selectTrack&&(a.copyData=a.selectTrack,e.preventDefault())}),r("ctrl+v",(e,t)=>{(async()=>{if(a.copyData){const o=await a.copyTrack(a.copyData),i=o.end-o.start;o.start=h.playStartFrame,o.end=o.start+i,a.addTrack(o),e.preventDefault()}})()}),r("ctrl+s",(e,t)=>{re.saveProject().then(()=>{R.success("保存成功")}),e.preventDefault()}),r("ctrl+z",(e,t)=>{a._undo(),e.preventDefault()}),r("ctrl+shift+z",(e,t)=>{a._redo(),e.preventDefault()})},ie=()=>{r.deleteScope("all")},C=P({__name:"SplitLine",props:{disabled:{type:Boolean,default:!1},newWidth:{type:Number,default:0},newHeight:{type:Number,default:0},direction:{type:String,default:"horizontal"},limitSize:{type:Object,default(){return{minHeight:0,maxHeight:999999,minWidth:0,maxWidth:999999}}}},emits:{"update:newWidth":e=>e!==null,"update:newHeight":e=>e!==null},setup(e,{emit:t}){const o=e,i=t,d=v({get(){return o.newWidth},set(m){i("update:newWidth",m)}}),x=v({get(){return o.newHeight},set(m){i("update:newHeight",m)}}),l=j(),_=I(),s=v(()=>o.direction==="vertical"),u=v(()=>_.isDark?"#E5E7EB":"#1F2937"),f={left:0,top:0};let y=!1;function L(){if(o.disabled)return;const{left:m,top:H}=l.value.getBoundingClientRect();f.left=parseInt(m),f.top=parseInt(H),y=!0,document.onmousemove=b=>{if(!y)return;const{pageX:D,pageY:z}=b,{top:M,left:N}=f,{minHeight:S,maxHeight:W,minWidth:T,maxWidth:E}=o.limitSize,U=D-N,F=z-M;if(f.left=D,f.top=z,s.value){const c=d.value-U;d.value=c>E?E:c<T?T:c}else{const c=x.value-F;x.value=c>W?W:c<S?S:c}},document.onmouseup=()=>{y=!1,document.onmouseup=null,document.onmousemove=null}}return(m,H)=>{const b=X;return $(),V("div",{ref_key:"lineElement",ref:l,class:k(["flex justify-center items-center",[e.disabled?"cursor-no-drop":s.value?"cursor-c-resize":"cursor-r-resize",s.value?"w-2 h-full flex-col":"h-2 w-full flex-row"]]),onMousedown:L},[w("span",{class:k(["absolute flex z-10 dark:bg-gray-800 bg-gray-200",s.value?"h-8 w-4 flex-col":"w-8 h-4 flex-row"])},[n(b,{class:k(["flex-auto",s.value?"rotate-90":""]),color:u.value},{default:g(()=>[n(p(Y))]),_:1},8,["class","color"])],2)],34)}}}),le={class:"flex flex-1 overflow-hidden gap-4 p-4 h-full"},se={class:"w-[370px] flex flex-col rounded overflow-hidden"},ce={class:"flex flex-1 flex-col overflow-hidden gap-2"},pe={class:"flex flex-1 flex-row flex-nowrap container-box gap-2"},nt=P({__name:"index",setup(e){const t=I(),o=B(),i=j(),d=J({minHeight:200,maxHeight:document.body.getBoundingClientRect().height-200,minWidth:300,maxWidth:600});return q(()=>{ne(),i.value=setInterval(async()=>{await o.saveProject()},30*1e3)}),A(()=>{ie(),clearInterval(i.value)}),(x,l)=>{const _=Q,s=G;return $(),V("div",le,[w("div",se,[n(s,{type:"border-card",class:"flex-1 overflow-hidden"},{default:g(()=>[n(_,{class:"h-full",label:"生成区"},{default:g(()=>[n(oe)]),_:1}),n(_,{class:"h-full",label:"上传区"},{default:g(()=>[n(ae)]),_:1})]),_:1})]),w("div",ce,[w("div",pe,[n(ee),n(C,{"new-width":p(t).attrWidth,"onUpdate:newWidth":l[0]||(l[0]=u=>p(t).attrWidth=u),direction:"vertical","limit-size":p(d)},null,8,["new-width","limit-size"]),n(Z)]),n(C,{"new-height":p(t).trackHeight,"onUpdate:newHeight":l[1]||(l[1]=u=>p(t).trackHeight=u),direction:"horizontal","limit-size":p(d)},null,8,["new-height","limit-size"]),n(te)])])}}});export{nt as default};
