import{bO as Sa,b as Ft,V as aa,S as D0,bY as Ta,bS as Pt,cf as it,cg as bt,bQ as Y0,a as X0,t as ka,u as Ut,H as C0,a2 as at,bI as Ea,e as x0,bM as Vt,b9 as Ba,ch as Wa,I as pt,an as la,ci as $a,o as Oe,f as r0,ao as lt,g as J,n as B0,R as W0,h as Lt,y as Ie,B as qe,A as V0,bV as Qa,cb as Ja,E as tt,i as I0,cj as e1,cc as t1,ck as a1,ac as Ht,M as ct,k as oa,cl as Ra,bw as ra,$ as Nt,cm as r1,w as Va,d as mt,bW as La,J as xt,D as n1,bp as Ot,b8 as ya,bq as J0,at as Dt,bD as na,s as s0,x as j0,bZ as Ia,j as ut,a0 as s1,bi as i1,bJ as l1,Z as o1,K as H0,L as K0,C as u1,ag as Mt,ce as c1,cn as _1,co as f1,a4 as z0,cp as v1,cq as Ha,cr as gt,a6 as At,aq as Ct,ah as Tt,cs as Na,ct as Oa,cu as d1,c9 as h1,a3 as m1,cv as b1,cw as p1,cx as x1,cy as w1}from"./index-tyqlcWpJ.js";import{c as Da,E as zt,a as Xt,u as S1,_ as Kt,d as ua}from"./ResourceList.vue_vue_type_script_setup_true_lang-DpGQDJxr.js";const y1=100,M1=600,Ma={beforeMount(u,A){const K=A.value,{interval:m=y1,delay:P=M1}=Sa(K)?{}:K;let Q,T;const y=()=>Sa(K)?K():K.handler(),se=()=>{T&&(clearTimeout(T),T=void 0),Q&&(clearInterval(Q),Q=void 0)};u.addEventListener("mousedown",ee=>{ee.button===0&&(se(),y(),document.addEventListener("mouseup",()=>se(),{once:!0}),T=setTimeout(()=>{Q=setInterval(()=>{y()},m)},P))})}},g1=Ft({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:aa,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:u=>u===null||D0(u)||["min","max"].includes(u),default:null},name:String,placeholder:String,precision:{type:Number,validator:u=>u>=0&&u===Number.parseInt(`${u}`,10)},validateEvent:{type:Boolean,default:!0},...Ta(["ariaLabel"])}),A1={[Pt]:(u,A)=>A!==u,blur:u=>u instanceof FocusEvent,focus:u=>u instanceof FocusEvent,[it]:u=>D0(u)||bt(u),[Y0]:u=>D0(u)||bt(u)},C1=X0({name:"ElInputNumber"}),T1=X0({...C1,props:g1,emits:A1,setup(u,{expose:A,emit:K}){const m=u,{t:P}=ka(),Q=Ut("input-number"),T=C0(),y=at({currentValue:m.modelValue,userInput:null}),{formItem:se}=Ea(),ee=x0(()=>D0(m.modelValue)&&m.modelValue<=m.min),oe=x0(()=>D0(m.modelValue)&&m.modelValue>=m.max),fe=x0(()=>{const W=ye(m.step);return Vt(m.precision)?Math.max(ye(m.modelValue),W):(W>m.precision,m.precision)}),me=x0(()=>m.controls&&m.controlsPosition==="right"),ge=Ba(),j=Wa(),G=x0(()=>{if(y.userInput!==null)return y.userInput;let W=y.currentValue;if(bt(W))return"";if(D0(W)){if(Number.isNaN(W))return"";Vt(m.precision)||(W=W.toFixed(m.precision))}return W}),ie=(W,De)=>{if(Vt(De)&&(De=fe.value),De===0)return Math.round(W);let Ue=String(W);const u0=Ue.indexOf(".");if(u0===-1||!Ue.replace(".","").split("")[u0+De])return W;const Qe=Ue.length;return Ue.charAt(Qe-1)==="5"&&(Ue=`${Ue.slice(0,Math.max(0,Qe-1))}6`),Number.parseFloat(Number(Ue).toFixed(De))},ye=W=>{if(bt(W))return 0;const De=W.toString(),Ue=De.indexOf(".");let u0=0;return Ue!==-1&&(u0=De.length-Ue-1),u0},Y=(W,De=1)=>D0(W)?ie(W+m.step*De):y.currentValue,he=()=>{if(m.readonly||j.value||oe.value)return;const W=Number(G.value)||0,De=Y(W);ke(De),K(it,y.currentValue),$e()},Ae=()=>{if(m.readonly||j.value||ee.value)return;const W=Number(G.value)||0,De=Y(W,-1);ke(De),K(it,y.currentValue),$e()},Pe=(W,De)=>{const{max:Ue,min:u0,step:Ze,precision:Ye,stepStrictly:Qe,valueOnClear:e0}=m;Ue<u0&&Ra("InputNumber","min should not be greater than max.");let ze=Number(W);if(bt(W)||Number.isNaN(ze))return null;if(W===""){if(e0===null)return null;ze=ra(e0)?{min:u0,max:Ue}[e0]:e0}return Qe&&(ze=ie(Math.round(ze/Ze)*Ze,Ye),ze!==W&&De&&K(Y0,ze)),Vt(Ye)||(ze=ie(ze,Ye)),(ze>Ue||ze<u0)&&(ze=ze>Ue?Ue:u0,De&&K(Y0,ze)),ze},ke=(W,De=!0)=>{var Ue;const u0=y.currentValue,Ze=Pe(W);if(!De){K(Y0,Ze);return}u0===Ze&&W||(y.userInput=null,K(Y0,Ze),u0!==Ze&&K(Pt,Ze,u0),m.validateEvent&&((Ue=se==null?void 0:se.validate)==null||Ue.call(se,"change").catch(Ye=>Nt())),y.currentValue=Ze)},i0=W=>{y.userInput=W;const De=W===""?null:Number(W);K(it,De),ke(De,!1)},a0=W=>{const De=W!==""?Number(W):"";(D0(De)&&!Number.isNaN(De)||W==="")&&ke(De),$e(),y.userInput=null},l0=()=>{var W,De;(De=(W=T.value)==null?void 0:W.focus)==null||De.call(W)},Le=()=>{var W,De;(De=(W=T.value)==null?void 0:W.blur)==null||De.call(W)},we=W=>{K("focus",W)},E=W=>{var De,Ue;y.userInput=null,r1()&&y.currentValue===null&&((De=T.value)!=null&&De.input)&&(T.value.input.value=""),K("blur",W),m.validateEvent&&((Ue=se==null?void 0:se.validate)==null||Ue.call(se,"blur").catch(u0=>Nt()))},$e=()=>{y.currentValue!==m.modelValue&&(y.currentValue=m.modelValue)},He=W=>{document.activeElement===W.target&&W.preventDefault()};return pt(()=>m.modelValue,(W,De)=>{const Ue=Pe(W,!0);y.userInput===null&&Ue!==De&&(y.currentValue=Ue)},{immediate:!0}),la(()=>{var W;const{min:De,max:Ue,modelValue:u0}=m,Ze=(W=T.value)==null?void 0:W.input;if(Ze.setAttribute("role","spinbutton"),Number.isFinite(Ue)?Ze.setAttribute("aria-valuemax",String(Ue)):Ze.removeAttribute("aria-valuemax"),Number.isFinite(De)?Ze.setAttribute("aria-valuemin",String(De)):Ze.removeAttribute("aria-valuemin"),Ze.setAttribute("aria-valuenow",y.currentValue||y.currentValue===0?String(y.currentValue):""),Ze.setAttribute("aria-disabled",String(j.value)),!D0(u0)&&u0!=null){let Ye=Number(u0);Number.isNaN(Ye)&&(Ye=null),K(Y0,Ye)}Ze.addEventListener("wheel",He,{passive:!1})}),$a(()=>{var W,De;const Ue=(W=T.value)==null?void 0:W.input;Ue==null||Ue.setAttribute("aria-valuenow",`${(De=y.currentValue)!=null?De:""}`)}),A({focus:l0,blur:Le}),(W,De)=>(Oe(),r0("div",{class:B0([J(Q).b(),J(Q).m(J(ge)),J(Q).is("disabled",J(j)),J(Q).is("without-controls",!W.controls),J(Q).is("controls-right",J(me))]),onDragstart:Ht(()=>{},["prevent"])},[W.controls?lt((Oe(),r0("span",{key:0,role:"button","aria-label":J(P)("el.inputNumber.decrease"),class:B0([J(Q).e("decrease"),J(Q).is("disabled",J(ee))]),onKeydown:W0(Ae,["enter"])},[Lt(W.$slots,"decrease-icon",{},()=>[Ie(J(tt),null,{default:qe(()=>[J(me)?(Oe(),V0(J(Qa),{key:0})):(Oe(),V0(J(Ja),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[J(Ma),Ae]]):I0("v-if",!0),W.controls?lt((Oe(),r0("span",{key:1,role:"button","aria-label":J(P)("el.inputNumber.increase"),class:B0([J(Q).e("increase"),J(Q).is("disabled",J(oe))]),onKeydown:W0(he,["enter"])},[Lt(W.$slots,"increase-icon",{},()=>[Ie(J(tt),null,{default:qe(()=>[J(me)?(Oe(),V0(J(e1),{key:0})):(Oe(),V0(J(t1),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[J(Ma),he]]):I0("v-if",!0),Ie(J(ct),{id:W.id,ref_key:"input",ref:T,type:"number",step:W.step,"model-value":J(G),placeholder:W.placeholder,readonly:W.readonly,disabled:J(j),size:J(ge),max:W.max,min:W.min,name:W.name,"aria-label":W.ariaLabel,"validate-event":!1,onKeydown:[W0(Ht(he,["prevent"]),["up"]),W0(Ht(Ae,["prevent"]),["down"])],onBlur:E,onFocus:we,onInput:i0,onChange:a0},a1({_:2},[W.$slots.prefix?{name:"prefix",fn:qe(()=>[Lt(W.$slots,"prefix")])}:void 0,W.$slots.suffix?{name:"suffix",fn:qe(()=>[Lt(W.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var k1=oa(T1,[["__file","input-number.vue"]]);const E1=Va(k1),Fa=Symbol("sliderContextKey"),B1=Ft({modelValue:{type:mt([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:aa,inputSize:aa,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:mt(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:mt(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:La,default:"top"},marks:{type:mt(Object)},validateEvent:{type:Boolean,default:!0},...Ta(["ariaLabel"])}),Qt=u=>D0(u)||xt(u)&&u.every(D0),R1={[Y0]:Qt,[it]:Qt,[Pt]:Qt},V1=Ft({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:La,default:"top"}}),L1={[Y0]:u=>D0(u)},I1=(u,A,K)=>{const m=C0(),P=C0(!1),Q=x0(()=>A.value instanceof Function),T=x0(()=>Q.value&&A.value(u.modelValue)||u.modelValue),y=ya(()=>{K.value&&(P.value=!0)},50),se=ya(()=>{K.value&&(P.value=!1)},50);return{tooltip:m,tooltipVisible:P,formatValue:T,displayTooltip:y,hideTooltip:se}},H1=(u,A,K)=>{const{disabled:m,min:P,max:Q,step:T,showTooltip:y,precision:se,sliderSize:ee,formatTooltip:oe,emitChange:fe,resetSize:me,updateDragging:ge}=n1(Fa),{tooltip:j,tooltipVisible:G,formatValue:ie,displayTooltip:ye,hideTooltip:Y}=I1(u,oe,y),he=C0(),Ae=x0(()=>`${(u.modelValue-P.value)/(Q.value-P.value)*100}%`),Pe=x0(()=>u.vertical?{bottom:Ae.value}:{left:Ae.value}),ke=()=>{A.hovering=!0,ye()},i0=()=>{A.hovering=!1,A.dragging||Y()},a0=e0=>{m.value||(e0.preventDefault(),u0(e0),window.addEventListener("mousemove",Ze),window.addEventListener("touchmove",Ze),window.addEventListener("mouseup",Ye),window.addEventListener("touchend",Ye),window.addEventListener("contextmenu",Ye),he.value.focus())},l0=e0=>{m.value||(A.newPosition=Number.parseFloat(Ae.value)+e0/(Q.value-P.value)*100,Qe(A.newPosition),fe())},Le=()=>{l0(-T.value)},we=()=>{l0(T.value)},E=()=>{l0(-T.value*4)},$e=()=>{l0(T.value*4)},He=()=>{m.value||(Qe(0),fe())},W=()=>{m.value||(Qe(100),fe())},De=e0=>{let ze=!0;switch(e0.code){case J0.left:case J0.down:Le();break;case J0.right:case J0.up:we();break;case J0.home:He();break;case J0.end:W();break;case J0.pageDown:E();break;case J0.pageUp:$e();break;default:ze=!1;break}ze&&e0.preventDefault()},Ue=e0=>{let ze,ve;return e0.type.startsWith("touch")?(ve=e0.touches[0].clientY,ze=e0.touches[0].clientX):(ve=e0.clientY,ze=e0.clientX),{clientX:ze,clientY:ve}},u0=e0=>{A.dragging=!0,A.isClick=!0;const{clientX:ze,clientY:ve}=Ue(e0);u.vertical?A.startY=ve:A.startX=ze,A.startPosition=Number.parseFloat(Ae.value),A.newPosition=A.startPosition},Ze=e0=>{if(A.dragging){A.isClick=!1,ye(),me();let ze;const{clientX:ve,clientY:F0}=Ue(e0);u.vertical?(A.currentY=F0,ze=(A.startY-A.currentY)/ee.value*100):(A.currentX=ve,ze=(A.currentX-A.startX)/ee.value*100),A.newPosition=A.startPosition+ze,Qe(A.newPosition)}},Ye=()=>{A.dragging&&(setTimeout(()=>{A.dragging=!1,A.hovering||Y(),A.isClick||Qe(A.newPosition),fe()},0),window.removeEventListener("mousemove",Ze),window.removeEventListener("touchmove",Ze),window.removeEventListener("mouseup",Ye),window.removeEventListener("touchend",Ye),window.removeEventListener("contextmenu",Ye))},Qe=async e0=>{if(e0===null||Number.isNaN(+e0))return;e0<0?e0=0:e0>100&&(e0=100);const ze=100/((Q.value-P.value)/T.value);let F0=Math.round(e0/ze)*ze*(Q.value-P.value)*.01+P.value;F0=Number.parseFloat(F0.toFixed(se.value)),F0!==u.modelValue&&K(Y0,F0),!A.dragging&&u.modelValue!==A.oldValue&&(A.oldValue=u.modelValue),await Dt(),A.dragging&&ye(),j.value.updatePopper()};return pt(()=>A.dragging,e0=>{ge(e0)}),Ot(he,"touchstart",a0,{passive:!1}),{disabled:m,button:he,tooltip:j,tooltipVisible:G,showTooltip:y,wrapperStyle:Pe,formatValue:ie,handleMouseEnter:ke,handleMouseLeave:i0,onButtonDown:a0,onKeyDown:De,setPosition:Qe}},N1=X0({name:"ElSliderButton"}),O1=X0({...N1,props:V1,emits:L1,setup(u,{expose:A,emit:K}){const m=u,P=Ut("slider"),Q=at({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:m.modelValue}),{disabled:T,button:y,tooltip:se,showTooltip:ee,tooltipVisible:oe,wrapperStyle:fe,formatValue:me,handleMouseEnter:ge,handleMouseLeave:j,onButtonDown:G,onKeyDown:ie,setPosition:ye}=H1(m,Q,K),{hovering:Y,dragging:he}=na(Q);return A({onButtonDown:G,onKeyDown:ie,setPosition:ye,hovering:Y,dragging:he}),(Ae,Pe)=>(Oe(),r0("div",{ref_key:"button",ref:y,class:B0([J(P).e("button-wrapper"),{hover:J(Y),dragging:J(he)}]),style:ut(J(fe)),tabindex:J(T)?-1:0,onMouseenter:J(ge),onMouseleave:J(j),onMousedown:J(G),onFocus:J(ge),onBlur:J(j),onKeydown:J(ie)},[Ie(J(Ia),{ref_key:"tooltip",ref:se,visible:J(oe),placement:Ae.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":Ae.tooltipClass,disabled:!J(ee),persistent:J(ee)},{content:qe(()=>[s0("span",null,j0(J(me)),1)]),default:qe(()=>[s0("div",{class:B0([J(P).e("button"),{hover:J(Y),dragging:J(he)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var ga=oa(O1,[["__file","button.vue"]]);const D1=Ft({mark:{type:mt([String,Object]),default:void 0}});var F1=X0({name:"ElSliderMarker",props:D1,setup(u){const A=Ut("slider"),K=x0(()=>ra(u.mark)?u.mark:u.mark.label),m=x0(()=>ra(u.mark)?void 0:u.mark.style);return()=>s1("div",{class:A.e("marks-text"),style:m.value},K.value)}});const P1=(u,A,K)=>{const{form:m,formItem:P}=Ea(),Q=i1(),T=C0(),y=C0(),se={firstButton:T,secondButton:y},ee=x0(()=>u.disabled||(m==null?void 0:m.disabled)||!1),oe=x0(()=>Math.min(A.firstValue,A.secondValue)),fe=x0(()=>Math.max(A.firstValue,A.secondValue)),me=x0(()=>u.range?`${100*(fe.value-oe.value)/(u.max-u.min)}%`:`${100*(A.firstValue-u.min)/(u.max-u.min)}%`),ge=x0(()=>u.range?`${100*(oe.value-u.min)/(u.max-u.min)}%`:"0%"),j=x0(()=>u.vertical?{height:u.height}:{}),G=x0(()=>u.vertical?{height:me.value,bottom:ge.value}:{width:me.value,left:ge.value}),ie=()=>{Q.value&&(A.sliderSize=Q.value[`client${u.vertical?"Height":"Width"}`])},ye=E=>{const $e=u.min+E*(u.max-u.min)/100;if(!u.range)return T;let He;return Math.abs(oe.value-$e)<Math.abs(fe.value-$e)?He=A.firstValue<A.secondValue?"firstButton":"secondButton":He=A.firstValue>A.secondValue?"firstButton":"secondButton",se[He]},Y=E=>{const $e=ye(E);return $e.value.setPosition(E),$e},he=E=>{A.firstValue=E??u.min,Pe(u.range?[oe.value,fe.value]:E??u.min)},Ae=E=>{A.secondValue=E,u.range&&Pe([oe.value,fe.value])},Pe=E=>{K(Y0,E),K(it,E)},ke=async()=>{await Dt(),K(Pt,u.range?[oe.value,fe.value]:u.modelValue)},i0=E=>{var $e,He,W,De,Ue,u0;if(ee.value||A.dragging)return;ie();let Ze=0;if(u.vertical){const Ye=(W=(He=($e=E.touches)==null?void 0:$e.item(0))==null?void 0:He.clientY)!=null?W:E.clientY;Ze=(Q.value.getBoundingClientRect().bottom-Ye)/A.sliderSize*100}else{const Ye=(u0=(Ue=(De=E.touches)==null?void 0:De.item(0))==null?void 0:Ue.clientX)!=null?u0:E.clientX,Qe=Q.value.getBoundingClientRect().left;Ze=(Ye-Qe)/A.sliderSize*100}if(!(Ze<0||Ze>100))return Y(Ze)};return{elFormItem:P,slider:Q,firstButton:T,secondButton:y,sliderDisabled:ee,minValue:oe,maxValue:fe,runwayStyle:j,barStyle:G,resetSize:ie,setPosition:Y,emitChange:ke,onSliderWrapperPrevent:E=>{var $e,He;(($e=se.firstButton.value)!=null&&$e.dragging||(He=se.secondButton.value)!=null&&He.dragging)&&E.preventDefault()},onSliderClick:E=>{i0(E)&&ke()},onSliderDown:async E=>{const $e=i0(E);$e&&(await Dt(),$e.value.onButtonDown(E))},onSliderMarkerDown:E=>{ee.value||A.dragging||Y(E)},setFirstValue:he,setSecondValue:Ae}},U1=(u,A,K,m)=>({stops:x0(()=>{if(!u.showStops||u.min>u.max)return[];if(u.step===0)return[];const T=(u.max-u.min)/u.step,y=100*u.step/(u.max-u.min),se=Array.from({length:T-1}).map((ee,oe)=>(oe+1)*y);return u.range?se.filter(ee=>ee<100*(K.value-u.min)/(u.max-u.min)||ee>100*(m.value-u.min)/(u.max-u.min)):se.filter(ee=>ee>100*(A.firstValue-u.min)/(u.max-u.min))}),getStopStyle:T=>u.vertical?{bottom:`${T}%`}:{left:`${T}%`}}),z1=u=>x0(()=>u.marks?Object.keys(u.marks).map(Number.parseFloat).sort((K,m)=>K-m).filter(K=>K<=u.max&&K>=u.min).map(K=>({point:K,position:(K-u.min)*100/(u.max-u.min),mark:u.marks[K]})):[]),X1=(u,A,K,m,P,Q)=>{const T=ee=>{P(Y0,ee),P(it,ee)},y=()=>u.range?![K.value,m.value].every((ee,oe)=>ee===A.oldValue[oe]):u.modelValue!==A.oldValue,se=()=>{var ee,oe;u.min>u.max&&Ra("Slider","min should not be greater than max.");const fe=u.modelValue;u.range&&xt(fe)?fe[1]<u.min?T([u.min,u.min]):fe[0]>u.max?T([u.max,u.max]):fe[0]<u.min?T([u.min,fe[1]]):fe[1]>u.max?T([fe[0],u.max]):(A.firstValue=fe[0],A.secondValue=fe[1],y()&&(u.validateEvent&&((ee=Q==null?void 0:Q.validate)==null||ee.call(Q,"change").catch(me=>Nt())),A.oldValue=fe.slice())):!u.range&&D0(fe)&&!Number.isNaN(fe)&&(fe<u.min?T(u.min):fe>u.max?T(u.max):(A.firstValue=fe,y()&&(u.validateEvent&&((oe=Q==null?void 0:Q.validate)==null||oe.call(Q,"change").catch(me=>Nt())),A.oldValue=fe)))};se(),pt(()=>A.dragging,ee=>{ee||se()}),pt(()=>u.modelValue,(ee,oe)=>{A.dragging||xt(ee)&&xt(oe)&&ee.every((fe,me)=>fe===oe[me])&&A.firstValue===ee[0]&&A.secondValue===ee[1]||se()},{deep:!0}),pt(()=>[u.min,u.max],()=>{se()})},K1=(u,A,K)=>{const m=C0();return la(async()=>{u.range?(xt(u.modelValue)?(A.firstValue=Math.max(u.min,u.modelValue[0]),A.secondValue=Math.min(u.max,u.modelValue[1])):(A.firstValue=u.min,A.secondValue=u.max),A.oldValue=[A.firstValue,A.secondValue]):(!D0(u.modelValue)||Number.isNaN(u.modelValue)?A.firstValue=u.min:A.firstValue=Math.min(u.max,Math.max(u.min,u.modelValue)),A.oldValue=A.firstValue),Ot(window,"resize",K),await Dt(),K()}),{sliderWrapper:m}},Y1=X0({name:"ElSlider"}),j1=X0({...Y1,props:B1,emits:R1,setup(u,{expose:A,emit:K}){const m=u,P=Ut("slider"),{t:Q}=ka(),T=at({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:y,slider:se,firstButton:ee,secondButton:oe,sliderDisabled:fe,minValue:me,maxValue:ge,runwayStyle:j,barStyle:G,resetSize:ie,emitChange:ye,onSliderWrapperPrevent:Y,onSliderClick:he,onSliderDown:Ae,onSliderMarkerDown:Pe,setFirstValue:ke,setSecondValue:i0}=P1(m,T,K),{stops:a0,getStopStyle:l0}=U1(m,T,me,ge),{inputId:Le,isLabeledByFormItem:we}=l1(m,{formItemContext:y}),E=Ba(),$e=x0(()=>m.inputSize||E.value),He=x0(()=>m.ariaLabel||Q("el.slider.defaultLabel",{min:m.min,max:m.max})),W=x0(()=>m.range?m.rangeStartLabel||Q("el.slider.defaultRangeStartLabel"):He.value),De=x0(()=>m.formatValueText?m.formatValueText(ze.value):`${ze.value}`),Ue=x0(()=>m.rangeEndLabel||Q("el.slider.defaultRangeEndLabel")),u0=x0(()=>m.formatValueText?m.formatValueText(ve.value):`${ve.value}`),Ze=x0(()=>[P.b(),P.m(E.value),P.is("vertical",m.vertical),{[P.m("with-input")]:m.showInput}]),Ye=z1(m);X1(m,T,me,ge,K,y);const Qe=x0(()=>{const x=[m.min,m.max,m.step].map(a=>{const O=`${a}`.split(".")[1];return O?O.length:0});return Math.max.apply(null,x)}),{sliderWrapper:e0}=K1(m,T,ie),{firstValue:ze,secondValue:ve,sliderSize:F0}=na(T),w=x=>{T.dragging=x};return Ot(e0,"touchstart",Y,{passive:!1}),Ot(e0,"touchmove",Y,{passive:!1}),o1(Fa,{...na(m),sliderSize:F0,disabled:fe,precision:Qe,emitChange:ye,resetSize:ie,updateDragging:w}),A({onSliderClick:he}),(x,a)=>{var O,$;return Oe(),r0("div",{id:x.range?J(Le):void 0,ref_key:"sliderWrapper",ref:e0,class:B0(J(Ze)),role:x.range?"group":void 0,"aria-label":x.range&&!J(we)?J(He):void 0,"aria-labelledby":x.range&&J(we)?(O=J(y))==null?void 0:O.labelId:void 0},[s0("div",{ref_key:"slider",ref:se,class:B0([J(P).e("runway"),{"show-input":x.showInput&&!x.range},J(P).is("disabled",J(fe))]),style:ut(J(j)),onMousedown:J(Ae),onTouchstartPassive:J(Ae)},[s0("div",{class:B0(J(P).e("bar")),style:ut(J(G))},null,6),Ie(ga,{id:x.range?void 0:J(Le),ref_key:"firstButton",ref:ee,"model-value":J(ze),vertical:x.vertical,"tooltip-class":x.tooltipClass,placement:x.placement,role:"slider","aria-label":x.range||!J(we)?J(W):void 0,"aria-labelledby":!x.range&&J(we)?($=J(y))==null?void 0:$.labelId:void 0,"aria-valuemin":x.min,"aria-valuemax":x.range?J(ve):x.max,"aria-valuenow":J(ze),"aria-valuetext":J(De),"aria-orientation":x.vertical?"vertical":"horizontal","aria-disabled":J(fe),"onUpdate:modelValue":J(ke)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),x.range?(Oe(),V0(ga,{key:0,ref_key:"secondButton",ref:oe,"model-value":J(ve),vertical:x.vertical,"tooltip-class":x.tooltipClass,placement:x.placement,role:"slider","aria-label":J(Ue),"aria-valuemin":J(ze),"aria-valuemax":x.max,"aria-valuenow":J(ve),"aria-valuetext":J(u0),"aria-orientation":x.vertical?"vertical":"horizontal","aria-disabled":J(fe),"onUpdate:modelValue":J(i0)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):I0("v-if",!0),x.showStops?(Oe(),r0("div",{key:1},[(Oe(!0),r0(H0,null,K0(J(a0),(ce,ue)=>(Oe(),r0("div",{key:ue,class:B0(J(P).e("stop")),style:ut(J(l0)(ce))},null,6))),128))])):I0("v-if",!0),J(Ye).length>0?(Oe(),r0(H0,{key:2},[s0("div",null,[(Oe(!0),r0(H0,null,K0(J(Ye),(ce,ue)=>(Oe(),r0("div",{key:ue,style:ut(J(l0)(ce.position)),class:B0([J(P).e("stop"),J(P).e("marks-stop")])},null,6))),128))]),s0("div",{class:B0(J(P).e("marks"))},[(Oe(!0),r0(H0,null,K0(J(Ye),(ce,ue)=>(Oe(),V0(J(F1),{key:ue,mark:ce.mark,style:ut(J(l0)(ce.position)),onMousedown:Ht(Ee=>J(Pe)(ce.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):I0("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),x.showInput&&!x.range?(Oe(),V0(J(E1),{key:0,ref:"input","model-value":J(ze),class:B0(J(P).e("input")),step:x.step,disabled:J(fe),controls:x.showInputControls,min:x.min,max:x.max,precision:J(Qe),debounce:x.debounce,size:J($e),"onUpdate:modelValue":J(ke),onChange:J(ye)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):I0("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var G1=oa(j1,[["__file","slider.vue"]]);const Pn=Va(G1),q1=""+new URL("Animal Style-SPLSx5eZ.jpg",import.meta.url).href,Z1=""+new URL("Photographic-C7RP-Q5A.jpg",import.meta.url).href,W1=""+new URL("Digital Art-ByQ-bzsF.jpg",import.meta.url).href,$1=""+new URL("Comic Book-D976tfHO.jpg",import.meta.url).href,Q1=""+new URL("Fantasy Art-CgrBn785.jpg",import.meta.url).href,J1=""+new URL("Analog Film-DEsGCAVQ.jpg",import.meta.url).href,er=""+new URL("Neon Punk-B0zK9mas.jpg",import.meta.url).href,tr=""+new URL("Isometric-ZSC2MyD6.jpg",import.meta.url).href,ar=""+new URL("Low Poly-Cp7ce7We.jpg",import.meta.url).href,rr=""+new URL("Line Art-Bfum2pMd.jpg",import.meta.url).href,nr=""+new URL("Cinematic-h70DiEqR.jpg",import.meta.url).href,sr=""+new URL("3D Model-D_rqPM5C.jpg",import.meta.url).href,ir=""+new URL("Pixel Art-Gj3olXpc.jpg",import.meta.url).href,lr=""+new URL("Graffiti Style-DDRDX0fW.jpg",import.meta.url).href,or=""+new URL("Advertising Poster-D0B4G4tP.jpg",import.meta.url).href,ur=""+new URL("Craft Clay-BxJ-yc0A.jpg",import.meta.url).href,cr="data:image/svg+xml,%3csvg%20width='17'%20height='33'%20viewBox='0%200%2017%2033'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13.4583%2016.5H12.0416V20.625H9.91659V23.375H13.4583V16.5ZM4.95825%2012.375H7.08325V9.625H3.54159V16.5H4.95825V12.375ZM14.8749%204.125H2.12492C1.34575%204.125%200.708252%205.3625%200.708252%206.875V26.125C0.708252%2027.6375%201.34575%2028.875%202.12492%2028.875H14.8749C15.6541%2028.875%2016.2916%2027.6375%2016.2916%2026.125V6.875C16.2916%205.3625%2015.6541%204.125%2014.8749%204.125ZM14.8749%2026.1388H2.12492V6.86125H14.8749V26.1388Z'%20fill='%23969696'%20/%3e%3c/svg%3e",_r="data:image/svg+xml,%3csvg%20width='23'%20height='33'%20viewBox='0%200%2023%2033'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M18.2083%2016.5H16.2916V20.625H13.4166V23.375H18.2083V16.5ZM6.70825%2012.375H9.58325V9.625H4.79159V16.5H6.70825V12.375ZM20.1249%204.125H2.87492C1.82075%204.125%200.958252%205.3625%200.958252%206.875V26.125C0.958252%2027.6375%201.82075%2028.875%202.87492%2028.875H20.1249C21.1791%2028.875%2022.0416%2027.6375%2022.0416%2026.125V6.875C22.0416%205.3625%2021.1791%204.125%2020.1249%204.125ZM20.1249%2026.1388H2.87492V6.86125H20.1249V26.1388Z'%20fill='%23969696'%20/%3e%3c/svg%3e",fr="data:image/svg+xml,%3csvg%20width='27'%20height='33'%20viewBox='0%200%2027%2033'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21.375%2016.5H19.125V20.625H15.75V23.375H21.375V16.5ZM7.875%2012.375H11.25V9.625H5.625V16.5H7.875V12.375ZM23.625%204.125H3.375C2.1375%204.125%201.125%205.3625%201.125%206.875V26.125C1.125%2027.6375%202.1375%2028.875%203.375%2028.875H23.625C24.8625%2028.875%2025.875%2027.6375%2025.875%2026.125V6.875C25.875%205.3625%2024.8625%204.125%2023.625%204.125ZM23.625%2026.1388H3.375V6.86125H23.625V26.1388Z'%20fill='%23969696'%20/%3e%3c/svg%3e",vr="data:image/svg+xml,%3csvg%20width='26'%20height='22'%20viewBox='0%200%2026%2022'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M20.5833%2011H18.4166V13.75H15.1666V15.5833H20.5833V11ZM7.58325%208.25H10.8333V6.41667H5.41659V11H7.58325V8.25ZM22.7499%202.75H3.24992C2.05825%202.75%201.08325%203.575%201.08325%204.58333V17.4167C1.08325%2018.425%202.05825%2019.25%203.24992%2019.25H22.7499C23.9416%2019.25%2024.9166%2018.425%2024.9166%2017.4167V4.58333C24.9166%203.575%2023.9416%202.75%2022.7499%202.75ZM22.7499%2017.4258H3.24992V4.57417H22.7499V17.4258Z'%20fill='%23969696'%20/%3e%3c/svg%3e",dr="data:image/svg+xml,%3csvg%20width='31'%20height='22'%20viewBox='0%200%2031%2022'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M24.5418%2011H21.9584V13.75H18.0834V15.5833H24.5418V11ZM9.04175%208.25H12.9167V6.41667H6.45842V11H9.04175V8.25ZM27.1251%202.75H3.87508C2.45425%202.75%201.29175%203.575%201.29175%204.58333V17.4167C1.29175%2018.425%202.45425%2019.25%203.87508%2019.25H27.1251C28.5459%2019.25%2029.7084%2018.425%2029.7084%2017.4167V4.58333C29.7084%203.575%2028.5459%202.75%2027.1251%202.75ZM27.1251%2017.4258H3.87508V4.57417H27.1251V17.4258Z'%20fill='%23969696'%20/%3e%3c/svg%3e",hr="data:image/svg+xml,%3csvg%20width='35'%20height='22'%20viewBox='0%200%2035%2022'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M28.6364%2011H25.4545V14.6667H20.6818V17.1111H28.6364V11ZM9.54545%207.33333H14.3182V4.88889H6.36364V11H9.54545V7.33333ZM31.8182%200H3.18182C1.43182%200%200%201.1%200%202.44444V19.5556C0%2020.9%201.43182%2022%203.18182%2022H31.8182C33.5682%2022%2035%2020.9%2035%2019.5556V2.44444C35%201.1%2033.5682%200%2031.8182%200ZM31.8182%2019.5678H3.18182V2.43222H31.8182V19.5678Z'%20fill='%23969696'%20/%3e%3c/svg%3e",Un={draggable:!0,resizable:!1,scalable:!0,dragArea:!1,origin:!1,snappable:!0,stopPropagation:!0,snapThreshold:5,isDisplaySnapDigit:!0,snapGap:!0,snapElement:!0,snapCenter:!0,snapDigit:10,snapVertical:!0,snapHorizontal:!0,throttleDrag:1,throttleResize:1,throttleScale:.01,keepRatio:!0,renderDirections:["nw","ne","se","sw"],rotatable:!1,throttleRotate:.2,elementGuidelines:[],pinchable:!1},mr=[{value:"Anime Style",text:"动画风格",img:q1},{value:"Photographic",text:"照片摄影",img:Z1},{value:"Digital Art",text:"数字艺术",img:W1},{value:"Comic Book",text:"漫画书",img:$1},{value:"Fantasy Ar",text:"奇幻艺术",img:Q1},{value:"Analog Film",text:"模拟胶片",img:J1},{value:"Neon Punk",text:"霓虹朋克",img:er},{value:"Isometric",text:"等轴测投影",img:tr},{value:"Low Poly",text:"低聚物",img:ar},{value:"Line Art",text:"线条艺术",img:rr},{value:"Cinematic",text:"电影风格",img:nr},{value:"3D Model",text:"3D模型",img:sr},{value:"Pixel Art",text:"像素艺术",img:ir},{value:"Graffiti Style",text:"涂鸦风格",img:lr},{value:"Advertising Poster",text:"广告风格",img:or},{value:"Craft Clay",text:"粘土风格",img:ur}],sa=[{text:"9:16",img:cr},{text:"3:4",img:_r},{text:"1:1",img:fr},{text:"4:3",img:vr},{text:"16:9",img:dr},{text:"21:9",img:hr}],br=[{text:"电子音乐",value:"Electronic music"},{text:"小调",value:"Minor music"},{text:"恐怖音乐",value:"Horror music"},{text:"梦幻音乐",value:"Fantasy music"},{text:"鼓点音乐",value:"Drumbeat music"},{text:"电影配乐",value:"Movie score"},{text:"先锋音乐",value:"Pioneer Music"},{text:"伤感风",value:"Sad music "},{text:"爵士",value:"Jazz"},{text:"摇滚乐",value:"Rock music"},{text:"极简主义",value:"Minimalist music"},{text:"钢琴曲",value:"Piano"}],pr=[90,60,30,16,8,4],zn=[{value:"#b80000",label:"深红色"},{value:"#db3e00",label:"橙红色"},{value:"#fccb00",label:"亮黄色"},{value:"#008b02",label:"深绿色"},{value:"#006b76",label:"深青色"},{value:"#1273de",label:"蓝色"},{value:"#004dcf",label:"深蓝色"},{value:"#5300eb",label:"深紫色"},{value:"#eb9694",label:"浅粉色"},{value:"#fad0c3",label:"浅肉色"},{value:"#fef3bd",label:"浅黄色"},{value:"#c1e1c5",label:"浅草绿色"},{value:"#bedadc",label:"浅蓝绿色"},{value:"#c4def6",label:"浅蓝色"},{value:"#bed3f3",label:"浅蓝紫色"}],xr=["动画风格","照片摄影","数字艺术","漫画书","奇幻艺术","模拟胶片","霓虹朋克","等轴测投影","低聚物","线条艺术","电影风格","3D模型","像素艺术","涂鸦风格","广告风格","粘土风格"],wr={class:"flex items-center gap-2 w-full"},Sr=["onClick"],Xn=X0({__name:"MenuList",props:{activeIndex:{},menu:{}},emits:["update:activeIndex"],setup(u,{emit:A}){const K=A;function m(P){K("update:activeIndex",P)}return(P,Q)=>{const T=tt;return Oe(),r0("ul",wr,[(Oe(!0),r0(H0,null,K0(P.menu,(y,se)=>(Oe(),r0("li",{key:y.key,class:"flex items-center p-2 cursor-pointer hover:dark:bg-gray-700 hover:bg-gray-200",onClick:ee=>m(se)},[Ie(T,{color:se===P.activeIndex?"#1473e6":"",size:y.iconSize??14,class:"flex-auto mr-1"},{default:qe(()=>[(Oe(),V0(u1(y.icon)))]),_:2},1032,["color","size"]),s0("span",{class:B0(["ml-0.5 select-none text-xs font-bold",se===P.activeIndex?"text-[#1473e6]":"dark:text-gray-300 text-gray-500"])},j0(y.title),3)],8,Sr))),128))])}}}),yr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='44'%20height='44'%20viewBox='0%200%2044%2044'%20fill='none'%3e%3cpath%20d='M22%204C19.6362%204%2017.2956%204.46558%2015.1117%205.37017C12.9278%206.27475%2010.9435%207.60062%209.27208%209.27208C7.60062%2010.9435%206.27475%2012.9278%205.37017%2015.1117C4.46558%2017.2956%204%2019.6362%204%2022C4%2024.3638%204.46558%2026.7044%205.37017%2028.8883C6.27475%2031.0722%207.60062%2033.0565%209.27208%2034.7279C10.9435%2036.3994%2012.9278%2037.7253%2015.1117%2038.6298C17.2956%2039.5344%2019.6362%2040%2022%2040C26.7739%2040%2031.3523%2038.1036%2034.7279%2034.7279C38.1036%2031.3523%2040%2026.7739%2040%2022C40%2017.2261%2038.1036%2012.6477%2034.7279%209.27208C31.3523%205.89642%2026.7739%204%2022%204ZM0%2022C0%209.85%209.85%200%2022%200C34.15%200%2044%209.85%2044%2022C44%2034.15%2034.15%2044%2022%2044C9.85%2044%200%2034.15%200%2022ZM16%2014V22H12V14H16ZM32%2014V22H28V14H32ZM31.436%2025.56L30.936%2027.5C30.398%2029.59%2029.35%2031.29%2027.71%2032.434C26.098%2033.56%2024.126%2034%2022%2034H20V30H22C23.6%2030%2024.686%2029.666%2025.42%2029.154C26.126%2028.662%2026.714%2027.862%2027.064%2026.502L27.562%2024.564L31.436%2025.56Z'%20fill='%234D5FFF'/%3e%3c/svg%3e",Mr=""+new URL("thinking-CeJ7EOuC.gif",import.meta.url).href,gr={class:"w-full h-full overflow-hidden flex flex-col items-center gap-4"},Ar={ref:"contentChatText",class:"flex-1 w-full flex flex-col mt-4 overflow-auto gap-4"},Cr={class:"avatar"},Tr={key:0,src:yr},kr={key:1,src:Mr},Er={class:"chat-textbox"},Br=["onClick"],Rr={key:2,class:"flex items-center mt-2 gap-3"},Vr=["onClick"],Lr=["onClick"],Ir={class:"w-full"},Hr={class:"flex items-center w-full gap-2"},Nr={class:"w-22"},Or={class:"flex-1"},Dr=X0({__name:"TextGenerate",setup(u){const{toClipboard:A}=S1();Mt();const K=C0(!1),m=C0(""),P=C0(null),Q=C0(),T=C0(""),y=at({style:"Promotional video",messages:[]}),se=()=>{var j;(j=P.value)==null||j.click()},ee=j=>{var ye;const ie=(ye=j.target.files)==null?void 0:ye[0];ie&&(Q.value=ie,T.value=ie.name)},oe=()=>{if(!Q.value&&!m.value){z0.warning("请输入文字或上传文件");return}m.value?y.messages.push({role:"user",content:m.value}):y.messages.push({role:"user",content:"请解析该文件并扩写"}),y.messages.push({role:"system",content:"这是一个扩写后的文本内容示例。在前端模式下，暂不支持AI生成功能。",loading:0}),m.value="",Q.value=null,T.value=""},fe=j=>{y.messages.push({role:"user",content:"请输出分镜头脚本"}),y.messages.push({role:"system",content:"这是一个分镜头脚本示例。在前端模式下，暂不支持AI分镜头脚本生成功能。",loading:0})},me=async j=>{try{await A(j),z0.success("复制成功")}catch(G){console.error(G)}},ge=()=>{y.messages.pop(),oe()};return(j,G)=>{const ie=v1,ye=tt,Y=ct,he=Da,Ae=zt,Pe=Xt,ke=Ha,i0=gt,a0=At,l0=Ct;return Oe(),r0("div",gr,[s0("div",Ar,[(Oe(!0),r0(H0,null,K0(y.messages,(Le,we)=>(Oe(),r0("div",{key:we,class:B0(["chat-item text-sm","chat-item-"+Le.role])},[s0("div",Cr,[Le.role==="system"&&!Le.loading?(Oe(),r0("img",Tr)):I0("",!0),Le.role==="system"&&Le.loading?(Oe(),r0("img",kr)):I0("",!0),Le.role==="user"?(Oe(),V0(ye,{key:2,size:"20",class:"mt-[-2px]"},{default:qe(()=>[Ie(ie)]),_:1})):I0("",!0)]),s0("div",Er,[Le.edit?(Oe(),V0(Y,{key:1,type:"textarea",modelValue:Le.content,"onUpdate:modelValue":E=>Le.content=E,autosize:"",onMouseleave:E=>Le.edit=!1,class:"text-xs text-white w-[250px]"},null,8,["modelValue","onUpdate:modelValue","onMouseleave"])):(Oe(),r0("div",{key:0,class:"text-xs select-text text-white",onClick:E=>Le.edit=!0},j0(Le.content),9,Br)),Le.role==="system"?(Oe(),r0("div",Rr,[s0("button",{onClick:()=>me(Le.content)},[Ie(ye,{color:"white"},{default:qe(()=>[Ie(J(c1))]),_:1})],8,Vr),we===y.messages.length-1?(Oe(),r0("button",{key:0,onClick:G[0]||(G[0]=()=>ge())},[Ie(ye,{color:"white"},{default:qe(()=>[Ie(J(_1))]),_:1})])):I0("",!0),s0("button",{onClick:()=>fe(Le.content)},[Ie(ye,{color:"white"},{default:qe(()=>[Ie(J(f1))]),_:1})],8,Lr)])):I0("",!0)])],2))),128))],512),s0("div",Ir,[Q.value?(Oe(),V0(he,{key:0,type:"primary",class:"my-2 text-xs dark:text-white",closable:"",onClose:G[1]||(G[1]=Le=>Q.value=null)},{default:qe(()=>[s0("span",null,"上传文件："+j0(T.value),1)]),_:1})):I0("",!0),lt((Oe(),r0("div",Hr,[s0("div",Nr,[Ie(Pe,{modelValue:y.style,"onUpdate:modelValue":G[2]||(G[2]=Le=>y.style=Le),placeholder:"风格"},{default:qe(()=>[Ie(Ae,{value:"Promotional video",label:"宣传片"}),Ie(Ae,{value:"Movie",label:"电影"}),Ie(Ae,{value:"Ad",label:"广告"}),Ie(Ae,{value:"E-commerce",label:"电商"}),Ie(Ae,{value:"Custom",label:"自定义"})]),_:1},8,["modelValue"])]),s0("div",Or,[Ie(Y,{modelValue:m.value,"onUpdate:modelValue":G[3]||(G[3]=Le=>m.value=Le),class:"mr-4",placeholder:Q.value?`上传文件：${T.value}`:"输入提示词",disabled:Q.value,onKeyup:W0(oe,["enter"])},{suffix:qe(()=>[Ie(ye,{class:"cursor-pointer",size:"18",onClick:se},{default:qe(()=>[Ie(ke)]),_:1}),s0("input",{ref_key:"fileInputRef",ref:P,class:"file-input",type:"file",name:"file",accept:".txt, .pdf, .doc, .docx",hidden:"",onChange:ee},null,544)]),_:1},8,["modelValue","placeholder","disabled"])]),Ie(a0,{class:"dark:bg-purple-heavy",circle:"",onClick:oe},{default:qe(()=>[Ie(i0)]),_:1})])),[[l0,K.value]])])])}}}),Fr=Tt(Dr,[["__scopeId","data-v-4a71f24c"]]),Pr={class:"w-full h-full overflow-hidden flex flex-col items-center gap-4"},Ur={class:"flex-1 w-full overflow-auto"},zr={class:"flex items-center w-full gap-2"},Xr={class:"w-32"},Kr={class:"grid-container2"},Yr=["onClick"],jr={class:"grid-container"},Gr=["onClick"],qr=["src"],Zr=X0({__name:"ImageGenerate",setup(u){const A=Mt(),{getResourcesByType:K}=A,m=C0(!1),P=at({prompt:"",keywords:[],model:"doubao",size:""}),Q=()=>{if(!P.prompt){z0.error("请输入文字描述");return}z0.info("前端模式下暂不支持AI图片生成功能")},T=y=>{P.keywords.includes(y)?P.keywords=P.keywords.filter(se=>se!=y):P.keywords.push(y)};return(y,se)=>{const ee=zt,oe=Xt,fe=Na,me=tt,ge=ua,j=Oa,G=ct,ie=gt,ye=At,Y=Ct;return Oe(),r0("div",Pr,[s0("div",Ur,[Ie(Kt,{"list-data":J(K)("image").value,type:"image"},null,8,["list-data"])]),lt((Oe(),r0("div",zr,[s0("div",Xr,[Ie(oe,{modelValue:P.model,"onUpdate:modelValue":se[0]||(se[0]=he=>P.model=he),placeholder:""},{default:qe(()=>[Ie(ee,{value:"即梦",label:"doubao"})]),_:1},8,["modelValue"])]),Ie(G,{modelValue:P.prompt,"onUpdate:modelValue":se[1]||(se[1]=he=>P.prompt=he),placeholder:"请输入提示词",onKeyup:W0(Q,["enter"])},{suffix:qe(()=>[Ie(ge,{trigger:"click",width:"280"},{reference:qe(()=>[Ie(me,{size:18,class:"cursor-pointer mr-2"},{default:qe(()=>[Ie(fe)]),_:1})]),default:qe(()=>[s0("div",Kr,[(Oe(!0),r0(H0,null,K0(J(xr),(he,Ae)=>(Oe(),r0("div",{key:Ae,class:"item",onClick:Pe=>T(he)},[s0("span",{class:B0(["text",{active:P.keywords.includes(he)}])},j0(he),3)],8,Yr))),128))])]),_:1}),Ie(ge,{trigger:"click"},{reference:qe(()=>[Ie(me,{size:18,class:"cursor-pointer"},{default:qe(()=>[Ie(j)]),_:1})]),default:qe(()=>[s0("div",jr,[(Oe(!0),r0(H0,null,K0(J(sa),(he,Ae)=>(Oe(),r0("div",{key:Ae,class:"item",onClick:Pe=>P.size=he.text},[s0("img",{class:"icon",src:he.img},null,8,qr),s0("span",{class:B0(["text",{active:he.text==P.size}])},j0(he.text),3)],8,Gr))),128))])]),_:1})]),_:1},8,["modelValue"]),Ie(ye,{class:"dark:bg-purple-heavy",circle:"",onClick:Q},{default:qe(()=>[Ie(ie)]),_:1})])),[[Y,m.value]])])}}}),Pa=Tt(Zr,[["__scopeId","data-v-69d5a2ee"]]),Wr={class:"w-full flex-1 overflow-hidden flex flex-col items-center gap-4"},$r={class:"flex-1 w-full overflow-auto"},Qr={class:"flex items-center w-full gap-2"},Jr={class:"w-20"},en={class:"flex-1"},tn=["onClick"],an=X0({__name:"MusicGenerate",setup(u){const A=Mt(),{getResourcesByType:K}=A,m=C0(!1),P=at({prompt:"",style:"Electronic music",len:4}),Q=()=>{if(!P.prompt){z0.error("请输入文字描述");return}z0.info("前端模式下暂不支持AI音乐生成功能")};return(T,y)=>{const se=Kt,ee=zt,oe=Xt,fe=d1,me=tt,ge=ua,j=ct,G=gt,ie=At,ye=Ct;return Oe(),r0("div",Wr,[s0("div",$r,[Ie(se,{"list-data":J(K)("audio").value,type:"audio"},null,8,["list-data"])]),lt((Oe(),r0("div",Qr,[s0("div",Jr,[Ie(oe,{modelValue:P.style,"onUpdate:modelValue":y[0]||(y[0]=Y=>P.style=Y),placeholder:"风格"},{default:qe(()=>[(Oe(!0),r0(H0,null,K0(J(br),(Y,he)=>(Oe(),V0(ee,{key:he,value:Y.value,label:Y.text},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),s0("div",en,[Ie(j,{modelValue:P.prompt,"onUpdate:modelValue":y[1]||(y[1]=Y=>P.prompt=Y),placeholder:"请输入提示词",onKeyup:W0(Q,["enter"])},{suffix:qe(()=>[Ie(ge,{trigger:"click",width:80},{reference:qe(()=>[Ie(me,{size:18,class:"cursor-pointer"},{default:qe(()=>[Ie(fe)]),_:1})]),default:qe(()=>[s0("div",null,[(Oe(!0),r0(H0,null,K0(J(pr),(Y,he)=>(Oe(),r0("div",{class:B0(["time-text m-2 cursor-pointer",{active:Y==P.len}]),key:he,onClick:Ae=>P.len=Y},j0(Y)+"s ",11,tn))),128))])]),_:1})]),_:1},8,["modelValue"])]),Ie(ie,{class:"dark:bg-purple-heavy",circle:"",onClick:Q},{default:qe(()=>[Ie(G)]),_:1})])),[[ye,m.value]])])}}}),Ua=Tt(an,[["__scopeId","data-v-38d15245"]]),rn={class:"w-full h-full overflow-hidden flex flex-col items-center gap-4"},nn={class:"flex-1 w-full overflow-auto"},sn={class:"w-full"},ln=["title"],on={class:"flex items-center w-full gap-2"},un={class:"grid-container2"},cn=["onClick"],_n=["src"],fn={class:"grid-container"},vn=["onClick"],dn=["src"],hn=X0({__name:"VideoGenerate",setup(u){const A=Mt(),K=C0(!1),m=C0(null),P=C0(""),Q=at({prompt:"",imageUrl:"",sizeStr:sa[0].value,style:"Anime Style"}),T=()=>{var ee;(ee=m.value)==null||ee.click()},y=ee=>{var me;const fe=(me=ee.target.files)==null?void 0:me[0];fe&&(P.value=fe.name,Q.imageUrl=URL.createObjectURL(fe))},se=()=>{if(!Q.prompt){z0.error("请输入文字描述");return}Q.imageUrl?z0.info("前端模式下暂不支持图片生成视频功能"):z0.info("前端模式下暂不支持文字生成视频功能")};return(ee,oe)=>{const fe=Kt,me=Da,ge=Ha,j=tt,G=Na,ie=ua,ye=Oa,Y=ct,he=gt,Ae=At,Pe=Ct;return Oe(),r0("div",rn,[s0("div",nn,[Ie(fe,{"list-data":J(A).videoList,type:"video"},null,8,["list-data"])]),s0("div",sn,[J(Q).imageUrl?(Oe(),V0(me,{key:0,type:"primary",class:"my-2 text-xs dark:text-white",closable:"",onClose:oe[0]||(oe[0]=ke=>J(Q).imageUrl="")},{default:qe(()=>[s0("span",{title:J(P),class:"inline-block max-w-[300px] overflow-ellipsis overflow-hidden whitespace-nowrap"},"上传文件："+j0(J(P)),9,ln)]),_:1})):I0("",!0),lt((Oe(),r0("div",on,[Ie(Y,{modelValue:J(Q).prompt,"onUpdate:modelValue":oe[1]||(oe[1]=ke=>J(Q).prompt=ke),placeholder:"请输入提示词",onKeyup:W0(se,["enter"])},{suffix:qe(()=>[Ie(j,{class:"cursor-pointer mr-2",size:"18",onClick:T},{default:qe(()=>[Ie(ge)]),_:1}),s0("input",{ref_key:"fileInputRef",ref:m,class:"file-input",type:"file",name:"file",accept:"image/*",hidden:"",onChange:y},null,544),Ie(ie,{trigger:"click",width:"325"},{reference:qe(()=>[Ie(j,{size:18,class:"cursor-pointer mr-2"},{default:qe(()=>[Ie(G)]),_:1})]),default:qe(()=>[s0("div",un,[(Oe(!0),r0(H0,null,K0(J(mr),(ke,i0)=>(Oe(),r0("div",{key:i0,class:"item",onClick:a0=>J(Q).style=ke.value},[s0("img",{class:"img",src:ke.img},null,8,_n),s0("span",{class:B0(["text",{active:ke.value==J(Q).style}])},j0(ke.text),3)],8,cn))),128))])]),_:1}),Ie(ie,{trigger:"click"},{reference:qe(()=>[Ie(j,{size:18,class:"cursor-pointer"},{default:qe(()=>[Ie(ye)]),_:1})]),default:qe(()=>[s0("div",fn,[(Oe(!0),r0(H0,null,K0(J(sa),(ke,i0)=>(Oe(),r0("div",{key:i0,class:"item",onClick:a0=>J(Q).sizeStr=ke.value},[s0("img",{class:"icon",src:ke.img},null,8,dn),s0("span",{class:B0(["text",{active:ke.value==J(Q).sizeStr}])},j0(ke.text),3)],8,vn))),128))])]),_:1})]),_:1},8,["modelValue"]),Ie(Ae,{class:"dark:bg-purple-heavy",circle:"",onClick:se},{default:qe(()=>[Ie(he)]),_:1})])),[[Pe,J(K)]])])])}}}),za=Tt(hn,[["__scopeId","data-v-e6b42667"]]);var Xa={exports:{}};(function(u){(function(A){var K=typeof window=="object"&&!!window.document,m=K?window:Object;A(m,K),u.exports&&(u.exports=m.Recorder)})(function(A,K){var m=function(){},P=function(w){return typeof w=="number"},Q=function(w){return JSON.stringify(w)},T=function(w){return new Ue(w)},y=T.LM="2024-10-20 22:15",se="https://github.com/xiangyuecn/Recorder",ee="Recorder",oe="getUserMedia",fe="srcSampleRate",me="sampleRate",ge="bitRate",j="catch",G=A[ee];if(G&&G.LM==y){G.CLog(G.i18n.$T("K8zP::重复导入{1}",0,ee),3);return}T.IsOpen=function(){var w=T.Stream;if(w){var x=$e(w),a=x[0];if(a){var O=a.readyState;return O=="live"||O==a.LIVE}}return!1},T.BufferSize=4096,T.Destroy=function(){He(ee+" Destroy"),we();for(var w in ie)ie[w]()};var ie={};T.BindDestroy=function(w,x){ie[w]=x},T.Support=function(){if(!K)return!1;var w=navigator.mediaDevices||{};return w[oe]||(w=navigator,w[oe]||(w[oe]=w.webkitGetUserMedia||w.mozGetUserMedia||w.msGetUserMedia)),!(!w[oe]||(T.Scope=w,!T.GetContext()))},T.GetContext=function(w){if(!K)return null;var x=window.AudioContext;if(x||(x=window.webkitAudioContext),!x)return null;var a=T.Ctx,O=0;return a||(a=T.Ctx=new x,O=1,T.NewCtxs=T.NewCtxs||[],T.BindDestroy("Ctx",function(){var $=T.Ctx;$&&$.close&&(ye($),T.Ctx=0);var ce=T.NewCtxs;T.NewCtxs=[];for(var ue=0;ue<ce.length;ue++)ye(ce[ue])})),w&&a.close&&(O||(a._useC||ye(a),a=new x),a._useC=1,T.NewCtxs.push(a)),a},T.CloseNewCtx=function(w){if(w&&w.close){ye(w);for(var x=T.NewCtxs||[],a=x.length,O=0;O<x.length;O++)if(x[O]==w){x.splice(O,1);break}He(ve("mSxV::剩{1}个GetContext未close",0,a+"-1="+x.length),x.length?3:0)}};var ye=function(w){if(w&&w.close&&!w._isC&&(w._isC=1,w.state!="closed"))try{w.close()}catch(x){He("ctx close err",1,x)}},Y=T.ResumeCtx=function(w,x,a,O){var $=0,ce=0,ue=0,Ee=0,Be="EventListener",Re="ResumeCtx ",Se=function(n0,Fe){ce&&h0(),$||($=1,n0&&O(n0,Ee),Fe&&a(Ee)),Fe&&(!w._LsSC&&w["add"+Be]&&w["add"+Be]("statechange",Je),w._LsSC=1,ue=1)},h0=function(n0){if(!(n0&&ce)){ce=n0?1:0;for(var Fe=["focus","mousedown","mouseup","touchstart","touchend"],_0=0;_0<Fe.length;_0++)window[(n0?"add":"remove")+Be](Fe[_0],Je,!0)}},Je=function(){var n0=w.state,Fe=he(n0);if(!$&&!x(Fe?++Ee:Ee))return Se();Fe?(ue&&He(Re+"sc "+n0,3),h0(1),w.resume().then(function(){ue&&He(Re+"sc "+w.state),Se(0,1)})[j](function(_0){He(Re+"error",1,_0),he(w.state)||Se(_0.message||"error")})):n0=="closed"?(ue&&!w._isC&&He(Re+"sc "+n0,1),Se("ctx closed")):Se(0,1)};Je()},he=T.CtxSpEnd=function(w){return w=="suspended"||w=="interrupted"},Ae=function(w){var x=w.state,a="ctx.state="+x;return he(x)&&(a+=ve("nMIy::（注意：ctx不是running状态，rec.open和start至少要有一个在用户操作(触摸、点击等)时进行调用，否则将在rec.start时尝试进行ctx.resume，可能会产生兼容性问题(仅iOS)，请参阅文档中runningContext配置）")),a},Pe="ConnectEnableWebM";T[Pe]=!0;var ke="ConnectEnableWorklet";T[ke]=!1;var i0=function(w){var x=w.BufferSize||T.BufferSize,a=w.Stream,O=a._c,$=O[me],ce={},ue=$e(a),Ee=ue[0],Be=null,Re="";if(Ee&&Ee.getSettings){Be=Ee.getSettings();var Se=Be[me];Se&&Se!=$&&(Re=ve("eS8i::Stream的采样率{1}不等于{2}，将进行采样率转换（注意：音质不会变好甚至可能变差），主要在移动端未禁用回声消除时会产生此现象，浏览器有回声消除时可能只会返回16k采样率的音频数据，",0,Se,$))}a._ts=Be,He(Re+"Stream TrackSet: "+Q(Be),Re?3:0);var h0=function(C){var e=a._m=O.createMediaStreamSource(a),i=O.destination,h="createMediaStreamDestination";O[h]&&(i=a._d=O[h]()),e.connect(C),C.connect(i)},Je,n0,Fe,_0="",v=a._call,N=function(C,e){for(var i in v){if(e!=$){ce.index=0,ce=T.SampleData([C],e,$,ce,{_sum:1});var h=ce.data,V=ce._sum}else{ce={};for(var d=C.length,h=new Int16Array(d),V=0,l=0;l<d;l++){var _=Math.max(-1,Math.min(1,C[l]));_=_<0?_*32768:_*32767,h[l]=_,V+=Math.abs(_)}}for(var s in v)v[s](h,V);return}},F="ScriptProcessor",g="audioWorklet",le=ee+" "+g,p="RecProc",k="MediaRecorder",te=k+".WebM.PCM",I=O.createScriptProcessor||O.createJavaScriptNode,Z=ve("ZGlf::。由于{1}内部1秒375次回调，在移动端可能会有性能问题导致回调丢失录音变短，PC端无影响，暂不建议开启{1}。",0,g),M=function(){n0=a.isWorklet=!1,l0(a),He(ve("7TU0::Connect采用老的{1}，",0,F)+ze.get(T[ke]?ve("JwCL::但已设置{1}尝试启用{2}",2):ve("VGjB::可设置{1}尝试启用{2}",2),[ee+"."+ke+"=true",g])+_0+Z,3);var C=a._p=I.call(O,x,1,1);h0(C),C.onaudioprocess=function(e){var i=e.inputBuffer.getChannelData(0);N(i,$)}},ae=function(){Je=a.isWebM=!1,Le(a),n0=a.isWorklet=!I||T[ke];var C=window.AudioWorkletNode;if(!(n0&&O[g]&&C)){M();return}var e=function(){var l=function(s){return s.toString().replace(/^function|DEL_/g,"").replace(/\$RA/g,le)},_="class "+p+" extends AudioWorkletProcessor{";return _+="constructor "+l(function(s){DEL_super(s);var S=this,r=s.processorOptions.bufferSize;S.bufferSize=r,S.buffer=new Float32Array(r*2),S.pos=0,S.port.onmessage=function(D){D.data.kill&&(S.kill=!0,$C.log("$RA kill call"))},$C.log("$RA .ctor call",s)}),_+="process "+l(function(s,S,r){var D=this,o=D.bufferSize,c=D.buffer,f=D.pos;if(s=(s[0]||[])[0]||[],s.length){c.set(s,f),f+=s.length;var b=~~(f/o)*o;if(b){this.port.postMessage({val:c.slice(0,b)});var R=c.subarray(b,f);c=new Float32Array(o*2),c.set(R),f=R.length,D.buffer=c}D.pos=f}return!D.kill}),_+='}try{registerProcessor("'+p+'", '+p+')}catch(e){$C.error("'+le+' Reg Error",e)}',_=_.replace(/\$C\./g,"console."),"data:text/javascript;base64,"+btoa(unescape(encodeURIComponent(_)))},i=function(){return n0&&a._na},h=a._na=function(){Fe!==""&&(clearTimeout(Fe),Fe=setTimeout(function(){Fe=0,i()&&(He(ve("MxX1::{1}未返回任何音频，恢复使用{2}",0,g,F),3),I&&M())},500))},V=function(){if(i()){var l=a._n=new C(O,p,{processorOptions:{bufferSize:x}});h0(l),l.port.onmessage=function(_){Fe&&(clearTimeout(Fe),Fe=""),i()?N(_.data.val,$):n0||He(ve("XUap::{1}多余回调",0,g),3)},He(ve("yOta::Connect采用{1}，设置{2}可恢复老式{3}",0,g,ee+"."+ke+"=false",F)+_0+Z,3)}},d=function(){if(i()){if(O[p]){V();return}var l=e();O[g].addModule(l).then(function(_){i()&&(O[p]=1,V(),Fe&&h())})[j](function(_){He(g+".addModule Error",1,_),i()&&M()})}};Y(O,function(){return i()},d,d)},B=function(){var C=window[k],e="ondataavailable",i="audio/webm; codecs=pcm";Je=a.isWebM=T[Pe];var h=C&&e in C.prototype&&C.isTypeSupported(i);if(_0=h?"":ve("VwPd::（此浏览器不支持{1}）",0,te),!Je||!h){ae();return}var V=function(){return Je&&a._ra};a._ra=function(){Fe!==""&&(clearTimeout(Fe),Fe=setTimeout(function(){V()&&(He(ve("vHnb::{1}未返回任何音频，降级使用{2}",0,k,g),3),ae())},500))};var d=Object.assign({mimeType:i},T.ConnectWebMOptions),l=a._r=new C(a,d),_=a._rd={};l[e]=function(s){var S=new FileReader;S.onloadend=function(){if(V()){var r=u0(new Uint8Array(S.result),_);if(!r)return;if(r==-1){ae();return}Fe&&(clearTimeout(Fe),Fe=""),N(r,_.webmSR)}else Je||He(ve("O9P7::{1}多余回调",0,k),3)},S.readAsArrayBuffer(s.data)},l.start(~~(x/48)),He(ve("LMEm::Connect采用{1}，设置{2}可恢复使用{3}或老式{4}",0,te,ee+"."+Pe+"=false",g,F))};B()},a0=function(w){w._na&&w._na(),w._ra&&w._ra()},l0=function(w){w._na=null,w._n&&(w._n.port.postMessage({kill:!0}),w._n.disconnect(),w._n=null)},Le=function(w){if(w._ra=null,w._r){try{w._r.stop()}catch(x){He("mr stop err",1,x)}w._r=null}},we=function(w){w=w||T;var x=w==T,a=w.Stream;a&&(a._m&&(a._m.disconnect(),a._m=null),!a._RC&&a._c&&T.CloseNewCtx(a._c),a._RC=null,a._c=null,a._d&&(E(a._d.stream),a._d=null),a._p&&(a._p.disconnect(),a._p.onaudioprocess=a._p=null),l0(a),Le(a),x&&E(a)),w.Stream=0},E=T.StopS_=function(w){for(var x=$e(w),a=0;a<x.length;a++){var O=x[a];O.stop&&O.stop()}w.stop&&w.stop()},$e=function(w){var x=0,a=0,O=[];w.getAudioTracks&&(x=w.getAudioTracks(),a=w.getVideoTracks()),x||(x=w.audioTracks,a=w.videoTracks);for(var $=0,ce=x?x.length:0;$<ce;$++)O.push(x[$]);for(var $=0,ce=a?a.length:0;$<ce;$++)O.push(a[$]);return O};T.SampleData=function(w,x,a,O,$){var ce="SampleData";O||(O={});var ue=O.index||0,Ee=O.offset||0,Be=O.raisePrev||0,Re=O.filter;if(Re&&Re.fn&&(Re.sr&&Re.sr!=x||Re.srn&&Re.srn!=a)&&(Re=null,He(ve("d48C::{1}的filter采样率变了，重设滤波",0,ce),3)),!Re)if(a<=x){var Se=a>x*3/4?0:a/2*3/4;Re={fn:Se?T.IIRFilter(!0,x,Se):0}}else{var Se=x>a*3/4?0:x/2*3/4;Re={fn:Se?T.IIRFilter(!0,a,Se):0}}Re.sr=x,Re.srn=a;var h0=Re.fn,Je=O.frameNext||[];$||($={});var n0=$.frameSize||1;$.frameType&&(n0=$.frameType=="mp3"?1152:1);var Fe=$._sum,_0=0,v=w.length;ue>v+1&&He(ve("tlbC::{1}似乎传入了未重置chunk {2}",0,ce,ue+">"+v),3);for(var N=0,F=ue;F<v;F++)N+=w[F].length;var g=x/a;if(g>1)N=Math.max(0,N-Math.floor(Ee)),N=Math.floor(N/g);else if(g<1){var le=1/g;N=Math.floor(N*le)}N+=Je.length;for(var p=new Int16Array(N),k=0,F=0;F<Je.length;F++)p[k]=Je[F],k++;for(;ue<v;ue++){var te=w[ue],I=te instanceof Float32Array,F=Ee,Z=te.length,M=h0&&h0.Embed,ae=0,B=0,C=0,e=0;if(g<1){for(var i=k+F,h=Be,V=0;V<Z;V++){var d=te[V];I&&(d=Math.max(-1,Math.min(1,d)),d=d<0?d*32768:d*32767);var l=Math.floor(i);i+=le;for(var _=Math.floor(i),s=(d-h)/(_-l),S=1;l<_;l++,S++){var r=Math.floor(h+S*s);M?(C=r,e=M.b0*C+M.b1*M.x1+M.b0*M.x2-M.a1*M.y1-M.a2*M.y2,M.x2=M.x1,M.x1=C,M.y2=M.y1,M.y1=e,r=e):r=h0?h0(r):r,r>32767?r=32767:r<-32768&&(r=-32768),Fe&&(_0+=Math.abs(r)),p[l]=r,k++}h=Be=d,F+=le}Ee=F%1;continue}for(var V=0,D=0;V<Z;V++,D++){if(D<Z){var d=te[D];I&&(d=Math.max(-1,Math.min(1,d)),d=d<0?d*32768:d*32767),M?(C=d,e=M.b0*C+M.b1*M.x1+M.b0*M.x2-M.a1*M.y1-M.a2*M.y2,M.x2=M.x1,M.x1=C,M.y2=M.y1,M.y1=e):e=h0?h0(d):d}if(ae=B,B=e,D==0){V--;continue}var o=Math.floor(F);if(V==o){var c=Math.ceil(F),f=F-o,b=ae,R=c<Z?B:b,t=b+(R-b)*f;t>32767?t=32767:t<-32768&&(t=-32768),Fe&&(_0+=Math.abs(t)),p[k]=t,k++,F+=g}}Ee=Math.max(0,F-Z)}g<1&&k+1==N&&(N--,p=new Int16Array(p.buffer.slice(0,N*2))),k-1!=N&&k!=N&&He(ce+" idx:"+k+" != size:"+N,3),Je=null;var n=N%n0;if(n>0){var z=(N-n)*2;Je=new Int16Array(p.buffer.slice(z)),p=new Int16Array(p.buffer.slice(0,z))}var L={index:ue,offset:Ee,raisePrev:Be,filter:Re,frameNext:Je,sampleRate:a,data:p};return Fe&&(L._sum=_0),L},T.IIRFilter=function(w,x,a){var O=2*Math.PI*a/x,$=Math.sin(O),ce=Math.cos(O),ue=$/2,Ee=1+ue,Be=-2*ce/Ee,Re=(1-ue)/Ee;if(w)var Se=(1-ce)/2/Ee,h0=(1-ce)/Ee;else var Se=(1+ce)/2/Ee,h0=-(1+ce)/Ee;var Je=0,n0=0,Fe=0,_0=0,v=0,N=function(F){return Fe=Se*F+h0*Je+Se*n0-Be*_0-Re*v,n0=Je,Je=F,v=_0,_0=Fe,Fe};return N.Embed={x1:0,x2:0,y1:0,y2:0,b0:Se,b1:h0,a1:Be,a2:Re},N},T.PowerLevel=function(w,x){var a=w/x||0,O;return a<1251?O=Math.round(a/1250*10):O=Math.round(Math.min(100,Math.max(0,(1+Math.log(a/1e4)/Math.log(10))*100))),O},T.PowerDBFS=function(w){var x=Math.max(.1,w||0),a=32767;return x=Math.min(x,a),x=20*Math.log(x/a)/Math.log(10),Math.max(-100,Math.round(x))},T.CLog=function(w,x){if(typeof console=="object"){var a=new Date,O=("0"+a.getMinutes()).substr(-2)+":"+("0"+a.getSeconds()).substr(-2)+"."+("00"+a.getMilliseconds()).substr(-3),$=this&&this.envIn&&this.envCheck&&this.id,ce=["["+O+" "+ee+($?":"+$:"")+"]"+w],ue=arguments,Ee=T.CLog,Be=2,Re=Ee.log||console.log;for(P(x)?Re=x==1?Ee.error||console.error:x==3?Ee.warn||console.warn:Re:Be=1;Be<ue.length;Be++)ce.push(ue[Be]);W?Re&&Re("[IsLoser]"+ce[0],ce.length>1?ce:""):Re.apply(console,ce)}};var He=function(){T.CLog.apply(this,arguments)},W=!0;try{W=!console.log.apply}catch{}var De=0;function Ue(w){var x=this;x.id=++De,F0();var a={type:"mp3",onProcess:m};for(var O in w)a[O]=w[O];x.set=a;var $=a[ge],ce=a[me];($&&!P($)||ce&&!P(ce))&&x.CLog(ve.G("IllegalArgs-1",[ve("VtS4::{1}和{2}必须是数值",0,me,ge)]),1,w),a[ge]=+$||16,a[me]=+ce||16e3,x.state=0,x._S=9,x.Sync={O:9,C:9}}T.Sync={O:9,C:9},T.prototype=Ue.prototype={CLog:He,_streamStore:function(){return this.set.sourceStream?this:T},_streamGet:function(){return this._streamStore().Stream},_streamCtx:function(){var w=this._streamGet();return w&&w._c},open:function(w,x){var a=this,O=a.set,$=a._streamStore(),ce=0;w=w||m;var ue=function(k,te){te=!!te,a.CLog(ve("5tWi::录音open失败：")+k+",isUserNotAllow:"+te,1),ce&&T.CloseNewCtx(ce),x&&x(k,te)};a._streamTag=oe;var Ee=function(){a.CLog("open ok, id:"+a.id+" stream:"+a._streamTag),w(),a._SO=0},Be=$.Sync,Re=++Be.O,Se=Be.C;a._O=a._O_=Re,a._SO=a._S;var h0=function(){if(Se!=Be.C||!a._O){var k=ve("dFm8::open被取消");return Re==Be.O?a.close():k=ve("VtJO::open被中断"),ue(k),!0}};if(!K){ue(ve.G("NonBrowser-1",["open"])+ve("EMJq::，可尝试使用RecordApp解决方案")+"("+se+"/tree/master/app-support-sample)");return}var Je=a.envCheck({envName:"H5",canProcess:!0});if(Je){ue(ve("A5bm::不能录音：")+Je);return}var n0,Fe=function(){n0=O.runningContext,n0||(n0=ce=T.GetContext(!0))};if(O.sourceStream){if(a._streamTag="set.sourceStream",!T.GetContext()){ue(ve("1iU7::不支持此浏览器从流中获取录音"));return}Fe(),we($);var _0=a.Stream=O.sourceStream;_0._c=n0,_0._RC=O.runningContext,_0._call={};try{i0($)}catch(k){we($),ue(ve("BTW2::从流中打开录音失败：")+k.message);return}Ee();return}var v=function(k,te){try{window.top.a}catch{ue(ve("Nclz::无权录音(跨域，请尝试给iframe添加麦克风访问策略，如{1})",0,'allow="camera;microphone"'));return}N(1,k)&&(/Found/i.test(k)?ue(te+ve("jBa9::，无可用麦克风")):ue(te))},N=function(k,te){if(/Permission|Allow/i.test(te))k&&ue(ve("gyO5::用户拒绝了录音权限"),!0);else if(window.isSecureContext===!1)k&&ue(ve("oWNo::浏览器禁止不安全页面录音，可开启https解决"));else return 1};if(T.IsOpen()){Ee();return}if(!T.Support()){v("",ve("COxc::此浏览器不支持录音"));return}Fe();var F=function(k){setTimeout(function(){k._call={};var te=T.Stream;te&&(we(),k._call=te._call),T.Stream=k,k._c=n0,k._RC=O.runningContext,!h0()&&(T.IsOpen()?(te&&a.CLog(ve("upb8::发现同时多次调用open"),1),i0($),Ee()):ue(ve("Q1GA::录音功能无效：无音频流")))},100)},g=function(k){var te=k.name||k.message||k.code+":"+k,I="";le==1&&N(0,te)&&(I=ve("KxE2::，将尝试禁用回声消除后重试")),a.CLog(ve("xEQR::请求录音权限错误")+I+"|"+k,I?3:1,k),I?p(1):v(te,ve("bDOG::无法录音：")+k)},le=0,p=function(k){le++;var te="audioTrackSet",I="autoGainControl",Z="echoCancellation",M="noiseSuppression",ae=te+":{"+Z+","+M+","+I+"}",B=JSON.parse(Q(O[te]||!0));a.CLog("open... "+le+" "+te+":"+Q(B)),k&&(typeof B!="object"&&(B={}),B[I]=!1,B[Z]=!1,B[M]=!1),B[me]&&a.CLog(ve("IjL3::注意：已配置{1}参数，可能会出现浏览器不能正确选用麦克风、移动端无法启用回声消除等现象",0,te+"."+me),3);var C={audio:B,video:O.videoTrackSet||!1};try{var e=T.Scope[oe](C,F,g)}catch(i){a.CLog(oe,3,i),C={audio:!0,video:!1},e=T.Scope[oe](C,F,g)}a.CLog(oe+"("+Q(C)+") "+Ae(n0)+ve("RiWe::，未配置 {1} 时浏览器可能会自动启用回声消除，移动端未禁用回声消除时可能会降低系统播放音量（关闭录音后可恢复）和仅提供16k采样率的音频流（不需要回声消除时可明确配置成禁用来获得48k高音质的流），请参阅文档中{2}配置",0,ae,te)+"("+se+") LM:"+y+" UA:"+navigator.userAgent),e&&e.then&&e.then(F)[j](g)};p()},close:function(w){w=w||m;var x=this,a=x._streamStore();x._stop();var O=" stream:"+x._streamTag,$=a.Sync;if(x._O=0,x._O_!=$.O){x.CLog(ve("hWVz::close被忽略（因为同时open了多个rec，只有最后一个会真正close）")+O,3),w();return}$.C++,we(a),x.CLog("close,"+O),w()},mock:function(w,x){var a=this;return a._stop(),a.isMock=1,a.mockEnvInfo=null,a.buffers=[w],a.recSize=w.length,a._setSrcSR(x),a._streamTag="mock",a},_setSrcSR:function(w){var x=this,a=x.set,O=a[me];O>w?a[me]=w:O=0,x[fe]=w,x.CLog(fe+": "+w+" set."+me+": "+a[me]+(O?" "+ve("UHvm::忽略")+": "+O:""),O?3:0)},envCheck:function(w){var x,a=this,O=a.set,$="CPU_BE";if(!x&&!T[$]&&typeof Int8Array=="function"&&!new Int8Array(new Int32Array([1]).buffer)[0]&&(F0($),x=ve("Essp::不支持{1}架构",0,$)),!x){var ce=O.type,ue=a[ce+"_envCheck"];O.takeoffEncodeChunk&&(ue?w.canProcess||(x=ve("7uMV::{1}环境不支持实时处理",0,w.envName)):x=ve("2XBl::{1}类型不支持设置takeoffEncodeChunk",0,ce)+(a[ce]?"":ve("LG7e::(未加载编码器)"))),!x&&ue&&(x=a[ce+"_envCheck"](w,O))}return x||""},envStart:function(w,x){var a=this,O=a.set;if(a.isMock=w?1:0,a.mockEnvInfo=w,a.buffers=[],a.recSize=0,w&&(a._streamTag="env$"+w.envName),a.state=1,a.envInLast=0,a.envInFirst=0,a.envInFix=0,a.envInFixTs=[],a._setSrcSR(x),a.engineCtx=0,a[O.type+"_start"]){var $=a.engineCtx=a[O.type+"_start"](O);$&&($.pcmDatas=[],$.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(w,x){var a=this,O=a.set,$=a.engineCtx;if(a.state!=1){a.state||a.CLog("envIn at state=0",3);return}var ce=a[fe],ue=w.length,Ee=T.PowerLevel(x,ue),Be=a.buffers,Re=Be.length;Be.push(w);var Se=Be,h0=Re,Je=Date.now(),n0=Math.round(ue/ce*1e3);a.envInLast=Je,a.buffers.length==1&&(a.envInFirst=Je-n0);var Fe=a.envInFixTs;Fe.splice(0,0,{t:Je,d:n0});for(var _0=Je,v=0,N=0;N<Fe.length;N++){var F=Fe[N];if(Je-F.t>3e3){Fe.length=N;break}_0=F.t,v+=F.d}var g=Fe[1],le=Je-_0,p=le-v;if(p>le/3&&(g&&le>1e3||Fe.length>=6)){var k=Je-g.t-n0;if(k>n0/5){var te=!O.disableEnvInFix;if(a.CLog("["+Je+"]"+ze.get(ve(te?"4Kfd::补偿{1}ms":"bM5i::未补偿{1}ms",1),[k]),3),a.envInFix+=k,te){var I=new Int16Array(k*ce/1e3);ue+=I.length,Be.push(I)}}}var Z=a.recSize,M=ue,ae=Z+M;if(a.recSize=ae,$){var B=T.SampleData(Be,ce,O[me],$.chunkInfo);$.chunkInfo=B,Z=$.pcmSize,M=B.data.length,ae=Z+M,$.pcmSize=ae,Be=$.pcmDatas,Re=Be.length,Be.push(B.data),ce=B[me]}var C=Math.round(ae/ce*1e3),e=Be.length,i=Se.length,h=function(){for(var s=V?0:-M,S=Be[0]==null,r=Re;r<e;r++){var D=Be[r];D==null?S=1:(s+=D.length,$&&D.length&&a[O.type+"_encode"]($,D))}if(S&&$){var r=h0;for(Se[0]&&(r=0);r<i;r++)Se[r]=null}S&&(s=V?M:0,Be[0]=null),$?$.pcmSize+=s:a.recSize+=s},V=0,d="rec.set.onProcess";try{V=O.onProcess(Be,Ee,C,ce,Re,h)}catch(s){console.error(d+ve("gFUF::回调出错是不允许的，需保证不会抛异常"),s)}var l=Date.now()-Je;if(l>10&&a.envInFirst-Je>1e3&&a.CLog(d+ve("2ghS::低性能，耗时{1}ms",0,l),3),V===!0){for(var _=0,N=Re;N<e;N++)Be[N]==null?_=1:Be[N]=new Int16Array(0);_?a.CLog(ve("ufqH::未进入异步前不能清除buffers"),3):$?$.pcmSize-=M:a.recSize-=M}else h()},start:function(){var w=this,x=1;if(w.set.sourceStream?w.Stream||(x=0):T.IsOpen()||(x=0),!x){w.CLog(ve("6WmN::start失败：未open"),1);return}var a=w._streamCtx();if(w.CLog(ve("kLDN::start 开始录音，")+Ae(a)+" stream:"+w._streamTag),w._stop(),w.envStart(null,a[me]),w.state=3,w._SO&&w._SO+1!=w._S){w.CLog(ve("Bp2y::start被中断"),3);return}w._SO=0;var O=function(){w.state==3&&(w.state=1,w.resume())},$="AudioContext resume: ",ce=w._streamGet();ce._call[w.id]=function(){w.CLog($+a.state+"|stream ok"),O()},Y(a,function(ue){return ue&&w.CLog($+"wait..."),w.state==3},function(ue){ue&&w.CLog($+a.state),O()},function(ue){w.CLog($+a.state+ve("upkE::，可能无法录音：")+ue,1),O()})},pause:function(){var w=this,x=w._streamGet();w.state&&(w.state=2,w.CLog("pause"),x&&delete x._call[w.id])},resume:function(){var w=this,x=w._streamGet(),a="resume",O=a+"(wait ctx)";if(w.state==3)w.CLog(O);else if(w.state){w.state=1,w.CLog(a),w.envResume(),x&&(x._call[w.id]=function(ce,ue){w.state==1&&w.envIn(ce,ue)},a0(x));var $=w._streamCtx();$&&Y($,function(ce){return ce&&w.CLog(O+"..."),w.state==1},function(ce){ce&&w.CLog(O+$.state),a0(x)},function(ce){w.CLog(O+$.state+"[err]"+ce,1)})}},_stop:function(w){var x=this,a=x.set;x.isMock||x._S++,x.state&&(x.pause(),x.state=0),!w&&x[a.type+"_stop"]&&(x[a.type+"_stop"](x.engineCtx),x.engineCtx=0)},stop:function(w,x,a){var O=this,$=O.set,ce,ue=O.envInLast-O.envInFirst,Ee=ue&&O.buffers.length;O.CLog(ve("Xq4s::stop 和start时差:")+(ue?ue+"ms "+ve("3CQP::补偿:")+O.envInFix+"ms envIn:"+Ee+" fps:"+(Ee/ue*1e3).toFixed(1):"-")+" stream:"+O._streamTag+" ("+se+") LM:"+y);var Be=function(){O._stop(),a&&O.close()},Re=function(F){O.CLog(ve("u8JG::结束录音失败：")+F,1),x&&x(F),Be()},Se=function(F,g,le){var p="blob",k="arraybuffer",te="dataType",I="DefaultDataType",Z=O[te]||T[I]||p,M=te+"="+Z,ae=F instanceof ArrayBuffer,B=0,C=ae?F.byteLength:F.size;if(Z==k?ae||(B=1):Z==p?typeof Blob!="function"?B=ve.G("NonBrowser-1",[M])+ve("1skY::，请设置{1}",0,ee+"."+I+'="'+k+'"'):(ae&&(F=new Blob([F],{type:g})),F instanceof Blob||(B=1),g=F.type||g):B=ve.G("NotSupport-1",[M]),O.CLog(ve("Wv7l::结束录音 编码花{1}ms 音频时长{2}ms 文件大小{3}b",0,Date.now()-ce,le,C)+" "+M+","+g),B){Re(B!=1?B:ve("Vkbd::{1}编码器返回的不是{2}",0,$.type,Z)+", "+M);return}if($.takeoffEncodeChunk)O.CLog(ve("QWnr::启用takeoffEncodeChunk后stop返回的blob长度为0不提供音频数据"),3);else if(C<Math.max(50,le/5)){Re(ve("Sz2H::生成的{1}无效",0,$.type));return}w&&w(F,le,g),Be()};if(!O.isMock){var h0=O.state==3;if(!O.state||h0){Re(ve("wf9t::未开始录音")+(h0?ve("Dl2c::，开始录音前无用户交互导致AudioContext未运行"):""));return}}O._stop(!0);var Je=O.recSize;if(!Je){Re(ve("Ltz3::未采集到录音"));return}if(!O[$.type]){Re(ve("xGuI::未加载{1}编码器，请尝试到{2}的src/engine内找到{1}的编码器并加载",0,$.type,ee));return}if(O.isMock){var n0=O.envCheck(O.mockEnvInfo||{envName:"mock",canProcess:!1});if(n0){Re(ve("AxOH::录音错误：")+n0);return}}var Fe=O.engineCtx;if(O[$.type+"_complete"]&&Fe){var N=Math.round(Fe.pcmSize/$[me]*1e3);ce=Date.now(),O[$.type+"_complete"](Fe,function(g,le){Se(g,le,N)},Re);return}if(ce=Date.now(),!O.buffers[0]){Re(ve("xkKd::音频buffers被释放"));return}var _0=T.SampleData(O.buffers,O[fe],$[me]);$[me]=_0[me];var v=_0.data,N=Math.round(v.length/$[me]*1e3);O.CLog(ve("CxeT::采样:{1} 花:{2}ms",0,Je+"->"+v.length,Date.now()-ce)),setTimeout(function(){ce=Date.now(),O[$.type](v,function(F,g){Se(F,g,N)},function(F){Re(F)})})}};var u0=function(w,x){x.pos||(x.pos=[0],x.tracks={},x.bytes=[]);var a=x.tracks,O=[x.pos[0]],$=function(){x.pos[0]=O[0]},ce=x.bytes.length,ue=new Uint8Array(ce+w.length);if(ue.set(x.bytes),ue.set(w,ce),x.bytes=ue,!x._ht){if(Qe(ue,O),e0(ue,O),!Ze(Qe(ue,O),[24,83,128,103]))return;for(Qe(ue,O);O[0]<ue.length;){var Ee=Qe(ue,O),Be=e0(ue,O),Re=[0],Se=0;if(!Be)return;if(Ze(Ee,[22,84,174,107])){for(;Re[0]<Be.length;){var h0=Qe(Be,Re),Je=e0(Be,Re),n0=[0],Fe={channels:0,sampleRate:0};if(Ze(h0,[174]))for(;n0[0]<Je.length;){var _0=Qe(Je,n0),v=e0(Je,n0),N=[0];if(Ze(_0,[215])){var F=Ye(v);Fe.number=F,a[F]=Fe}else if(Ze(_0,[131])){var F=Ye(v);F==1?Fe.type="video":F==2?(Fe.type="audio",Se||(x.track0=Fe),Fe.idx=Se++):Fe.type="Type-"+F}else if(Ze(_0,[134])){for(var g="",le=0;le<v.length;le++)g+=String.fromCharCode(v[le]);Fe.codec=g}else if(Ze(_0,[225]))for(;N[0]<v.length;){var p=Qe(v,N),k=e0(v,N);if(Ze(p,[181])){var F=0,te=new Uint8Array(k.reverse()).buffer;k.length==4?F=new Float32Array(te)[0]:k.length==8?F=new Float64Array(te)[0]:He("WebM Track !Float",1,k),Fe[me]=Math.round(F)}else Ze(p,[98,100])?Fe.bitDepth=Ye(k):Ze(p,[159])&&(Fe.channels=Ye(k))}}}x._ht=1,He("WebM Tracks",a),$();break}}}var I=x.track0;if(I){var Z=I[me];if(x.webmSR=Z,I.bitDepth==16&&/FLOAT/i.test(I.codec)&&(I.bitDepth=32,He("WebM 16->32 bit",3)),Z<8e3||I.bitDepth!=32||I.channels<1||!/(\b|_)PCM\b/i.test(I.codec))return x.bytes=[],x.bad||He("WebM Track Unexpected",3,x),x.bad=1,-1;for(var M=[],ae=0;O[0]<ue.length;){var h0=Qe(ue,O),Je=e0(ue,O);if(!Je)break;if(Ze(h0,[163])){var B=Je[0]&15,Fe=a[B];if(!Fe)He("WebM !Track"+B,1,a);else if(Fe.idx===0){for(var C=new Uint8Array(Je.length-4),le=4;le<Je.length;le++)C[le-4]=Je[le];M.push(C),ae+=C.length}}$()}if(ae){var e=new Uint8Array(ue.length-x.pos[0]);e.set(ue.subarray(x.pos[0])),x.bytes=e,x.pos[0]=0;for(var C=new Uint8Array(ae),le=0,i=0;le<M.length;le++)C.set(M[le],i),i+=M[le].length;var te=new Float32Array(C.buffer);if(I.channels>1){for(var h=[],le=0;le<te.length;)h.push(te[le]),le+=I.channels;te=new Float32Array(h)}return te}}},Ze=function(w,x){if(!w||w.length!=x.length)return!1;if(w.length==1)return w[0]==x[0];for(var a=0;a<w.length;a++)if(w[a]!=x[a])return!1;return!0},Ye=function(w){for(var x="",a=0;a<w.length;a++){var O=w[a];x+=(O<16?"0":"")+O.toString(16)}return parseInt(x,16)||0},Qe=function(w,x,a){var O=x[0];if(!(O>=w.length)){var $=w[O],ce=("0000000"+$.toString(2)).substr(-8),ue=/^(0*1)(\d*)$/.exec(ce);if(ue){var Ee=ue[1].length,Be=[];if(!(O+Ee>w.length)){for(var Re=0;Re<Ee;Re++)Be[Re]=w[O],O++;return a&&(Be[0]=parseInt(ue[2]||"0",2)),x[0]=O,Be}}}},e0=function(w,x){var a=Qe(w,x,1);if(a){var O=Ye(a),$=x[0],ce=[];if(O<2147483647){if($+O>w.length)return;for(var ue=0;ue<O;ue++)ce[ue]=w[$],$++}return x[0]=$,ce}},ze=T.i18n={lang:"zh-CN",alias:{"zh-CN":"zh","en-US":"en"},locales:{},data:{},put:function(w,x){var a=ee+".i18n.put: ",O=w.overwrite;O=O==null||O;var $=w.lang;if($=ze.alias[$]||$,!$)throw new Error(a+"set.lang?");var ce=ze.locales[$];ce||(ce={},ze.locales[$]=ce);for(var ue=/^([\w\-]+):/,Ee,Be=0;Be<x.length;Be++){var Se=x[Be];if(Ee=ue.exec(Se),!Ee){He(a+"'key:'? "+Se,3,w);continue}var Re=Ee[1],Se=Se.substr(Re.length+1);!O&&ce[Re]||(ce[Re]=Se)}},get:function(){return ze.v_G.apply(null,arguments)},v_G:function(w,x,a){x=x||[],a=a||ze.lang,a=ze.alias[a]||a;var O=ze.locales[a],$=O&&O[w]||"";return!$&&a!="zh"?a=="en"?ze.v_G(w,x,"zh"):ze.v_G(w,x,"en"):(ze.lastLang=a,$=="=Empty"?"":$.replace(/\{(\d+)(\!?)\}/g,function(ce,ue,Ee){return ue=+ue||0,ce=x[ue-1],(ue<1||ue>x.length)&&(ce="{?}",He("i18n["+w+"] no {"+ue+"}: "+$,3)),Ee?"":ce}))},$T:function(){return ze.v_T.apply(null,arguments)},v_T:function(){for(var w=arguments,x="",a=[],O=0,$=ee+".i18n.$T:",ce=/^([\w\-]*):/,ue,Ee=0;Ee<w.length;Ee++){var Be=w[Ee];if(Ee==0){if(ue=ce.exec(Be),x=ue&&ue[1],!x)throw new Error($+"0 'key:'?");Be=Be.substr(x.length+1)}if(O===-1)a.push(Be);else{if(O)throw new Error($+" bad args");if(Be===0)O=-1;else if(P(Be)){if(Be<1)throw new Error($+" bad args");O=Be}else{var Re=Ee==1?"en":Ee?"":"zh";if(ue=ce.exec(Be),ue&&(Re=ue[1]||Re,Be=Be.substr(ue[1].length+1)),!ue||!Re)throw new Error($+Ee+" 'lang:'?");ze.put({lang:Re,overwrite:!1},[x+":"+Be])}}}return x?O>0?x:ze.v_G(x,a):""}},ve=ze.$T;ve.G=ze.get,ve("NonBrowser-1::非浏览器环境，不支持{1}",1),ve("IllegalArgs-1::参数错误：{1}",1),ve("NeedImport-2::调用{1}需要先导入{2}",2),ve("NotSupport-1::不支持：{1}",1),T.TrafficImgUrl="//ia.51.la/go1?id=20469973&pvFlag=1";var F0=T.Traffic=function(w){if(K){w=w?"/"+ee+"/Report/"+w:"";var x=T.TrafficImgUrl;if(x){var a=T.Traffic,O=/^(https?:..[^\/#]*\/?)[^#]*/i.exec(location.href)||[],$=O[1]||"http://file/",ce=(O[0]||$)+w;if(x.indexOf("//")==0&&(/^https:/i.test(ce)?x="https:"+x:x="http:"+x),w&&(x=x+"&cu="+encodeURIComponent($+w)),!a[ce]){a[ce]=1;var ue=new Image;ue.src=x,He("Traffic Analysis Image: "+(w||ee+".TrafficImgUrl="+T.TrafficImgUrl))}}}};G&&(He(ve("8HO5::覆盖导入{1}",0,ee),1),G.Destroy()),A[ee]=T})})(Xa);var mn=Xa.exports;const bn=h1(mn);(function(u){var A=typeof window=="object"&&!!window.document,K=A?window:Object,m=K.Recorder,P=m.i18n;u(m,P,P.$T,A)})(function(u,A,K,m){var P="48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000",Q="8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, 192, 224, 256, 320";u.prototype.enc_mp3={stable:!0,takeEC:"full",getTestMsg:function(){return K("Zm7L::采样率范围：{1}；比特率范围：{2}（不同比特率支持的采样率范围不同，小于32kbps时采样率需小于32000）",0,P,Q)}};var T=function(j){var G=j.bitRate,ie=j.sampleRate,ye=ie;if((" "+Q+",").indexOf(" "+G+",")==-1&&u.CLog(K("eGB9::{1}不在mp3支持的取值范围：{2}",0,"bitRate="+G,Q),3),(" "+P+",").indexOf(" "+ie+",")==-1){for(var Y=P.split(", "),he=[],Ae=0;Ae<Y.length;Ae++)he.push({v:+Y[Ae],s:Math.abs(Y[Ae]-ie)});he.sort(function(Pe,ke){return Pe.s-ke.s}),ye=he[0].v,j.sampleRate=ye,u.CLog(K("zLTa::sampleRate已更新为{1}，因为{2}不在mp3支持的取值范围：{3}",0,ye,ie,P),3)}},y=function(){return K.G("NeedImport-2",["mp3.js","src/engine/mp3-engine.js"])},se=m&&typeof Worker=="function";u.prototype.mp3=function(j,G,ie){var ye=this,Y=ye.set,he=j.length;if(!u.lamejs){ie(y());return}if(se){var Ae=ye.mp3_start(Y);if(Ae){if(Ae.isW){ye.mp3_encode(Ae,j),ye.mp3_complete(Ae,G,ie,1);return}ye.mp3_stop(Ae)}}T(Y);var Pe=new u.lamejs.Mp3Encoder(1,Y.sampleRate,Y.bitRate),ke=57600,i0=new Int8Array(5e5),a0=0,l0=0,Le=0,we=function(){try{if(l0<he)var E=Pe.encodeBuffer(j.subarray(l0,l0+ke));else{Le=1;var E=Pe.flush()}}catch(Ue){if(console.error(Ue),!Le)try{Pe.flush()}catch(u0){console.error(u0)}ie("MP3 Encoder: "+Ue.message);return}var $e=E.length;if($e>0){if(a0+$e>i0.length){var He=new Int8Array(i0.length+Math.max(5e5,$e));He.set(i0.subarray(0,a0)),i0=He}i0.set(E,a0),a0+=$e}if(l0<he)l0+=ke,setTimeout(we);else{var W=[i0.buffer.slice(0,a0)],De=me.fn(W,a0,he,Y.sampleRate);ge(De,Y),G(W[0]||new ArrayBuffer(0),"audio/mp3")}};we()};var ee;u.BindDestroy("mp3Worker",function(){ee&&(u.CLog("mp3Worker Destroy"),ee.terminate(),ee=null)}),u.prototype.mp3_envCheck=function(j,G){var ie="";return G.takeoffEncodeChunk&&(fe()||(ie=K("yhUs::当前浏览器版本太低，无法实时处理"))),!ie&&!u.lamejs&&(ie=y()),ie},u.prototype.mp3_start=function(j){return fe(j)};var oe={id:0},fe=function(j,G){var ie=function(Le){var we=Le.data,E=he.wkScope.wk_ctxs,$e=he.wkScope.wk_lame,He=he.wkScope.wk_mp3TrimFix,W=E[we.id];if(we.action=="init")E[we.id]={sampleRate:we.sampleRate,bitRate:we.bitRate,takeoff:we.takeoff,pcmSize:0,memory:new Int8Array(5e5),mOffset:0,encObj:new $e.Mp3Encoder(1,we.sampleRate,we.bitRate)};else if(!W)return;var De=function(Ye){var Qe=Ye.length;if(W.mOffset+Qe>W.memory.length){var e0=new Int8Array(W.memory.length+Math.max(5e5,Qe));e0.set(W.memory.subarray(0,W.mOffset)),W.memory=e0}W.memory.set(Ye,W.mOffset),W.mOffset+=Qe};switch(we.action){case"stop":if(!W.isCp)try{W.encObj.flush()}catch(Ye){console.error(Ye)}W.encObj=null,delete E[we.id];break;case"encode":if(W.isCp)break;W.pcmSize+=we.pcm.length;try{var Ue=W.encObj.encodeBuffer(we.pcm)}catch(Ye){W.err=Ye,console.error(Ye)}Ue&&Ue.length>0&&(W.takeoff?Ae.onmessage({action:"takeoff",id:we.id,chunk:Ue}):De(Ue));break;case"complete":W.isCp=1;try{var Ue=W.encObj.flush()}catch(Ye){W.err=Ye,console.error(Ye)}if(Ue&&Ue.length>0&&(W.takeoff?Ae.onmessage({action:"takeoff",id:we.id,chunk:Ue}):De(Ue)),W.err){Ae.onmessage({action:we.action,id:we.id,err:"MP3 Encoder: "+W.err.message});break}var u0=[W.memory.buffer.slice(0,W.mOffset)],Ze=He.fn(u0,W.mOffset,W.pcmSize,W.sampleRate);Ae.onmessage({action:we.action,id:we.id,blob:u0[0]||new ArrayBuffer(0),meta:Ze});break}},ye=function(Le){Ae.onmessage=function(we){var E=we;Le&&(E=we.data);var $e=oe[E.id];$e&&(E.action=="takeoff"?$e.set.takeoffEncodeChunk(new Uint8Array(E.chunk.buffer)):($e.call&&$e.call(E),$e.call=null))}},Y=function(){var Le={worker:Ae,set:j};return j?(Le.id=++oe.id,oe[Le.id]=Le,T(j),Ae.postMessage({action:"init",id:Le.id,sampleRate:j.sampleRate,bitRate:j.bitRate,takeoff:!!j.takeoffEncodeChunk,x:new Int16Array(5)})):Ae.postMessage({x:new Int16Array(5)}),Le},he,Ae=ee;if(G||!se)return u.CLog(K("k9PT::当前环境不支持Web Worker，mp3实时编码器运行在主线程中"),3),Ae={postMessage:function(Le){ie({data:Le})}},he={wkScope:{wk_ctxs:{},wk_lame:u.lamejs,wk_mp3TrimFix:me}},ye(),Y();try{if(!Ae){var Pe=(ie+"").replace(/[\w\$]+\.onmessage/g,"self.postMessage");Pe=Pe.replace(/[\w\$]+\.wkScope/g,"wkScope");var ke=");wk_lame();self.onmessage="+Pe;ke+=";var wkScope={ wk_ctxs:{},wk_lame:wk_lame",ke+=",wk_mp3TrimFix:{rm:"+me.rm+",fn:"+me.fn+"} }";var i0=u.lamejs.toString(),a0=(window.URL||webkitURL).createObjectURL(new Blob(["var wk_lame=(",i0,ke],{type:"text/javascript"}));Ae=new Worker(a0),setTimeout(function(){(window.URL||webkitURL).revokeObjectURL(a0)},1e4),ye(1)}var l0=Y();return l0.isW=1,ee=Ae,l0}catch(Le){return Ae&&Ae.terminate(),console.error(Le),fe(j,1)}};u.prototype.mp3_stop=function(j){if(j&&j.worker){j.worker.postMessage({action:"stop",id:j.id}),j.worker=null,delete oe[j.id];var G=-1;for(var ie in oe)G++;G&&u.CLog(K("fT6M::mp3 worker剩{1}个未stop",0,G),3)}},u.prototype.mp3_encode=function(j,G){j&&j.worker&&j.worker.postMessage({action:"encode",id:j.id,pcm:G})},u.prototype.mp3_complete=function(j,G,ie,ye){var Y=this;j&&j.worker?(j.call=function(he){ye&&Y.mp3_stop(j),he.err?ie(he.err):(ge(he.meta,j.set),G(he.blob,"audio/mp3"))},j.worker.postMessage({action:"complete",id:j.id})):ie(K("mPxH::mp3编码器未start"))},u.mp3ReadMeta=function(j,G){var ie=typeof window<"u"&&window.parseInt||typeof self<"u"&&self.parseInt||parseInt,ye=new Uint8Array(j[0]||[]);if(ye.length<4)return null;var Y=function(Ye,Qe){return("0000000"+((Qe||ye)[Ye]||0).toString(2)).substr(-8)},he=Y(0)+Y(1),Ae=Y(2)+Y(3);if(!/^1{11}/.test(he))return null;var Pe={"00":2.5,10:2,11:1}[he.substr(11,2)],ke={"01":3}[he.substr(13,2)],i0={1:[44100,48e3,32e3],2:[22050,24e3,16e3],"2.5":[11025,12e3,8e3]}[Pe];i0&&(i0=i0[ie(Ae.substr(4,2),2)]);var a0=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320]][Pe==1?1:0][ie(Ae.substr(0,4),2)];if(!Pe||!ke||!a0||!i0)return null;for(var l0=Math.round(G*8/a0),Le=ke==1?384:ke==2||Pe==1?1152:576,we=Le/i0*1e3,E=Math.floor(Le*a0/8/i0*1e3),$e=0,He=0,W=0;W<j.length;W++){var De=j[W];if(He+=De.byteLength,He>=E+3){var Ue=new Uint8Array(De),u0=De.byteLength-(He-(E+3)+1),Ze=Y(u0,Ue);$e=Ze.charAt(6)=="1";break}}return $e&&E++,{version:Pe,layer:ke,sampleRate:i0,bitRate:a0,duration:l0,size:G,hasPadding:$e,frameSize:E,frameDurationFloat:we}};var me={rm:u.mp3ReadMeta,fn:function(j,G,ie,ye){var Y=this.rm(j,G);if(!Y)return{size:G,err:"mp3 unknown format"};var he=Math.round(ie/ye*1e3),Ae=Math.floor((Y.duration-he)/Y.frameDurationFloat);if(Ae>0){var Pe=Ae*Y.frameSize-(Y.hasPadding?1:0);G-=Pe;for(var ke=0,i0=[],a0=0;a0<j.length;a0++){var l0=j[a0];if(Pe<=0)break;Pe>=l0.byteLength?(Pe-=l0.byteLength,i0.push(l0),j.splice(a0,1),a0--):(j[a0]=l0.slice(Pe),ke=l0,Pe=0)}var Le=this.rm(j,G);if(!Le){ke&&(j[0]=ke);for(var a0=0;a0<i0.length;a0++)j.splice(a0,0,i0[a0]);Y.err="mp3 fix error: 已还原，错误原因不明"}var we=Y.trimFix={};we.remove=Ae,we.removeDuration=Math.round(Ae*Y.frameDurationFloat),we.duration=Math.round(G*8/Y.bitRate)}return Y}},ge=function(j,G){var ie="MP3 Info: ";(j.sampleRate&&j.sampleRate!=G.sampleRate||j.bitRate&&j.bitRate!=G.bitRate)&&(u.CLog(ie+K("uY9i::和设置的不匹配{1}，已更新成{2}",0,"set:"+G.bitRate+"kbps "+G.sampleRate+"hz","set:"+j.bitRate+"kbps "+j.sampleRate+"hz"),3,G),G.sampleRate=j.sampleRate,G.bitRate=j.bitRate);var ye=j.trimFix;ye?(ie+=K("iMSm::Fix移除{1}帧",0,ye.remove)+" "+ye.removeDuration+"ms -> "+ye.duration+"ms",ye.remove>2&&(j.err=(j.err?j.err+", ":"")+K("b9zm::移除帧数过多"))):ie+=(j.duration||"-")+"ms",j.err?u.CLog(ie,j.size?1:0,j.err,j):u.CLog(ie,j)}});(function(u){var A=typeof window=="object"&&!!window.document,K=A?window:Object,m=K.Recorder;u(m)})(function(u){function A(){var K=function(v){return Math.log(v)/Math.log(10)},m=function(v){throw new Error("abort("+v+")")};function P(v){return new Int8Array(v)}function Q(v){return new Int16Array(v)}function T(v){return new Int32Array(v)}function y(v){return new Float32Array(v)}function se(v){return new Float64Array(v)}function ee(v){if(v.length==1)return y(v[0]);var N=v[0];v=v.slice(1);for(var F=[],g=0;g<N;g++)F.push(ee(v));return F}function oe(v){if(v.length==1)return T(v[0]);var N=v[0];v=v.slice(1);for(var F=[],g=0;g<N;g++)F.push(oe(v));return F}function fe(v){if(v.length==1)return Q(v[0]);var N=v[0];v=v.slice(1);for(var F=[],g=0;g<N;g++)F.push(fe(v));return F}function me(v){if(v.length==1)return new Array(v[0]);var N=v[0];v=v.slice(1);for(var F=[],g=0;g<N;g++)F.push(me(v));return F}var ge={};ge.fill=function(v,N,F,g){if(arguments.length==2)for(var le=0;le<v.length;le++)v[le]=arguments[1];else for(var le=N;le<F;le++)v[le]=g};var j={};j.arraycopy=function(v,N,F,g,le){for(var p=N+le;N<p;)F[g++]=v[N++]};var G={};G.SQRT2=1.4142135623730951,G.FAST_LOG10=function(v){return K(v)},G.FAST_LOG10_X=function(v,N){return K(v)*N};function ie(v){this.ordinal=v}ie.short_block_allowed=new ie(0),ie.short_block_coupled=new ie(1),ie.short_block_dispensed=new ie(2),ie.short_block_forced=new ie(3);var ye={};ye.MAX_VALUE=34028235e31;function Y(v){this.ordinal=v}Y.vbr_off=new Y(0),Y.vbr_mt=new Y(1),Y.vbr_rh=new Y(2),Y.vbr_abr=new Y(3),Y.vbr_mtrh=new Y(4),Y.vbr_default=Y.vbr_mtrh;function he(v){var N=v;this.ordinal=function(){return N}}he.STEREO=new he(0),he.JOINT_STEREO=new he(1),he.DUAL_CHANNEL=new he(2),he.MONO=new he(3),he.NOT_SET=new he(4);function Ae(){var v=3,N=98,F=4;this.getLameShortVersion=function(){return v+"."+N+"."+F}}function Pe(){var v=null;this.qupvt=null,this.setModules=function(o){this.qupvt=o,v=o};function N(o){this.bits=0|o}var F=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function g(o,c,f,b,R,t){var n=.5946/c;for(o=o>>1;o--!=0;)R[t++]=n>f[b++]?0:1,R[t++]=n>f[b++]?0:1}function le(o,c,f,b,R,t){o=o>>1;var n=o%2;for(o=o>>1;o--!=0;){var z,L,U,re,_e,de,Ne,je;z=f[b++]*c,L=f[b++]*c,_e=0|z,U=f[b++]*c,de=0|L,re=f[b++]*c,Ne=0|U,z+=v.adj43[_e],je=0|re,L+=v.adj43[de],R[t++]=0|z,U+=v.adj43[Ne],R[t++]=0|L,re+=v.adj43[je],R[t++]=0|U,R[t++]=0|re}if(n!=0){var z,L,_e,de;z=f[b++]*c,L=f[b++]*c,_e=0|z,de=0|L,z+=v.adj43[_e],L+=v.adj43[de],R[t++]=0|z,R[t++]=0|L}}function p(o,c,f,b,R){var t,n,z=0,L,U=0,re=0,_e=0,de=c,Ne=0,je=de,Xe=0,y0=o,g0=0;for(L=R!=null&&b.global_gain==R.global_gain,b.block_type==a.SHORT_TYPE?n=38:n=21,t=0;t<=n;t++){var m0=-1;if((L||b.block_type==a.NORM_TYPE)&&(m0=b.global_gain-(b.scalefac[t]+(b.preflag!=0?v.pretab[t]:0)<<b.scalefac_scale+1)-b.subblock_gain[b.window[t]]*8),L&&R.step[t]==m0)U!=0&&(le(U,f,y0,g0,je,Xe),U=0),re!=0&&m();else{var w0=b.width[t];if(z+b.width[t]>b.max_nonzero_coeff){var k0;k0=b.max_nonzero_coeff-z+1,ge.fill(c,b.max_nonzero_coeff,576,0),w0=k0,w0<0&&(w0=0),t=n+1}if(U==0&&re==0&&(je=de,Xe=Ne,y0=o,g0=_e),R!=null&&R.sfb_count1>0&&t>=R.sfb_count1&&R.step[t]>0&&m0>=R.step[t]?(U!=0&&(le(U,f,y0,g0,je,Xe),U=0,je=de,Xe=Ne,y0=o,g0=_e),re+=w0):(re!=0&&(g(re,f,y0,g0,je,Xe),re=0,je=de,Xe=Ne,y0=o,g0=_e),U+=w0),w0<=0){re!=0&&m(),U!=0&&m();break}}t<=n&&(Ne+=b.width[t],_e+=b.width[t],z+=b.width[t])}U!=0&&(le(U,f,y0,g0,je,Xe),U=0),re!=0&&m()}function k(o,c,f){var b=0,R=0;do{var t=o[c++],n=o[c++];b<t&&(b=t),R<n&&(R=n)}while(c<f);return b<R&&(b=R),b}function te(o,c,f,b,R,t){var n=E.ht[b].xlen*65536+E.ht[R].xlen,z=0,L;do{var U=o[c++],re=o[c++];U!=0&&(U>14&&(U=15,z+=n),U*=16),re!=0&&(re>14&&(re=15,z+=n),U+=re),z+=E.largetbl[U]}while(c<f);return L=z&65535,z>>=16,z>L&&(z=L,b=R),t.bits+=z,b}function I(o,c,f,b){var R=0,t=E.ht[1].hlen;do{var n=o[c+0]*2+o[c+1];c+=2,R+=t[n]}while(c<f);return b.bits+=R,1}function Z(o,c,f,b,R){var t=0,n,z=E.ht[b].xlen,L;b==2?L=E.table23:L=E.table56;do{var U=o[c+0]*z+o[c+1];c+=2,t+=L[U]}while(c<f);return n=t&65535,t>>=16,t>n&&(t=n,b++),R.bits+=t,b}function M(o,c,f,b,R){var t=0,n=0,z=0,L=E.ht[b].xlen,U=E.ht[b].hlen,re=E.ht[b+1].hlen,_e=E.ht[b+2].hlen;do{var de=o[c+0]*L+o[c+1];c+=2,t+=U[de],n+=re[de],z+=_e[de]}while(c<f);var Ne=b;return t>n&&(t=n,Ne++),t>z&&(t=z,Ne=b+2),R.bits+=t,Ne}var ae=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function B(o,c,f,b){var R=k(o,c,f);switch(R){case 0:return R;case 1:return I(o,c,f,b);case 2:case 3:return Z(o,c,f,ae[R-1],b);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return M(o,c,f,ae[R-1],b);default:R>Qe.IXMAX_VAL&&m(),R-=15;var t;for(t=24;t<32&&!(E.ht[t].linmax>=R);t++);var n;for(n=t-8;n<24&&!(E.ht[n].linmax>=R);n++);return te(o,c,f,n,t,b)}}this.noquant_count_bits=function(o,c,f){var b=c.l3_enc,R=Math.min(576,c.max_nonzero_coeff+2>>1<<1);for(f!=null&&(f.sfb_count1=0);R>1&&!(b[R-1]|b[R-2]);R-=2);c.count1=R;for(var t=0,n=0;R>3;R-=4){var z;if(((b[R-1]|b[R-2]|b[R-3]|b[R-4])&2147483647)>1)break;z=((b[R-4]*2+b[R-3])*2+b[R-2])*2+b[R-1],t+=E.t32l[z],n+=E.t33l[z]}var L=t;if(c.count1table_select=0,t>n&&(L=n,c.count1table_select=1),c.count1bits=L,c.big_values=R,R==0)return L;if(c.block_type==a.SHORT_TYPE)t=3*o.scalefac_band.s[3],t>c.big_values&&(t=c.big_values),n=c.big_values;else if(c.block_type==a.NORM_TYPE){if(t=c.region0_count=o.bv_scf[R-2],n=c.region1_count=o.bv_scf[R-1],n=o.scalefac_band.l[t+n+2],t=o.scalefac_band.l[t+1],n<R){var U=new N(L);c.table_select[2]=B(b,n,R,U),L=U.bits}}else c.region0_count=7,c.region1_count=a.SBMAX_l-1-7-1,t=o.scalefac_band.l[8],n=R,t>n&&(t=n);if(t=Math.min(t,R),n=Math.min(n,R),0<t){var U=new N(L);c.table_select[0]=B(b,0,t,U),L=U.bits}if(t<n){var U=new N(L);c.table_select[1]=B(b,t,n,U),L=U.bits}if(o.use_best_huffman==2&&m(),f!=null&&c.block_type==a.NORM_TYPE){for(var re=0;o.scalefac_band.l[re]<c.big_values;)re++;f.sfb_count1=re}return L},this.count_bits=function(o,c,f,b){var R=f.l3_enc,t=Qe.IXMAX_VAL/v.IPOW20(f.global_gain);return f.xrpow_max>t?Qe.LARGE_BITS:(p(c,R,v.IPOW20(f.global_gain),f,b),o.substep_shaping&2&&m(),this.noquant_count_bits(o,f,b))};function C(o,c,f,b,R,t,n){for(var z=c.big_values,L=0;L<=22;L++)b[L]=Qe.LARGE_BITS;for(var L=0;L<16;L++){var U=o.scalefac_band.l[L+1];if(U>=z)break;var re=0,_e=new N(re),de=B(f,0,U,_e);re=_e.bits;for(var Ne=0;Ne<8;Ne++){var je=o.scalefac_band.l[L+Ne+2];if(je>=z)break;var Xe=re;_e=new N(Xe);var y0=B(f,U,je,_e);Xe=_e.bits,b[L+Ne]>Xe&&(b[L+Ne]=Xe,R[L+Ne]=L,t[L+Ne]=de,n[L+Ne]=y0)}}}function e(o,c,f,b,R,t,n,z){for(var L=c.big_values,U=2;U<a.SBMAX_l+1;U++){var re=o.scalefac_band.l[U];if(re>=L)break;var _e=R[U-2]+c.count1bits;if(f.part2_3_length<=_e)break;var de=new N(_e),Ne=B(b,re,L,de);_e=de.bits,!(f.part2_3_length<=_e)&&(f.assign(c),f.part2_3_length=_e,f.region0_count=t[U-2],f.region1_count=U-2-t[U-2],f.table_select[0]=n[U-2],f.table_select[1]=z[U-2],f.table_select[2]=Ne)}}this.best_huffman_divide=function(o,c){var f=new ze,b=c.l3_enc,R=T(23),t=T(23),n=T(23),z=T(23);if(!(c.block_type==a.SHORT_TYPE&&o.mode_gr==1)){f.assign(c),c.block_type==a.NORM_TYPE&&(C(o,c,b,R,t,n,z),e(o,f,c,b,R,t,n,z));var L=f.big_values;if(!(L==0||(b[L-2]|b[L-1])>1)&&(L=c.count1+2,!(L>576))){f.assign(c),f.count1=L;for(var U=0,re=0;L>f.big_values;L-=4){var _e=((b[L-4]*2+b[L-3])*2+b[L-2])*2+b[L-1];U+=E.t32l[_e],re+=E.t33l[_e]}if(f.big_values=L,f.count1table_select=0,U>re&&(U=re,f.count1table_select=1),f.count1bits=U,f.block_type==a.NORM_TYPE)e(o,f,c,b,R,t,n,z);else{if(f.part2_3_length=U,U=o.scalefac_band.l[8],U>L&&(U=L),U>0){var de=new N(f.part2_3_length);f.table_select[0]=B(b,0,U,de),f.part2_3_length=de.bits}if(L>U){var de=new N(f.part2_3_length);f.table_select[1]=B(b,U,L,de),f.part2_3_length=de.bits}c.part2_3_length>f.part2_3_length&&c.assign(f)}}}};var i=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],h=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],V=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],d=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];Pe.slen1_tab=V,Pe.slen2_tab=d;function l(o,c){for(var f,b=c.tt[1][o],R=c.tt[0][o],t=0;t<E.scfsi_band.length-1;t++){for(f=E.scfsi_band[t];f<E.scfsi_band[t+1]&&!(R.scalefac[f]!=b.scalefac[f]&&b.scalefac[f]>=0);f++);if(f==E.scfsi_band[t+1]){for(f=E.scfsi_band[t];f<E.scfsi_band[t+1];f++)b.scalefac[f]=-1;c.scfsi[o][t]=1}}var n=0,z=0;for(f=0;f<11;f++)b.scalefac[f]!=-1&&(z++,n<b.scalefac[f]&&(n=b.scalefac[f]));for(var L=0,U=0;f<a.SBPSY_l;f++)b.scalefac[f]!=-1&&(U++,L<b.scalefac[f]&&(L=b.scalefac[f]));for(var t=0;t<16;t++)if(n<i[t]&&L<h[t]){var re=V[t]*z+d[t]*U;b.part2_length>re&&(b.part2_length=re,b.scalefac_compress=t)}}this.best_scalefac_store=function(o,c,f,b){var R=b.tt[c][f],t,n,z,L,U=0;for(z=0,t=0;t<R.sfbmax;t++){var re=R.width[t];for(z+=re,L=-re;L<0&&R.l3_enc[L+z]==0;L++);L==0&&(R.scalefac[t]=U=-2)}if(R.scalefac_scale==0&&R.preflag==0){var _e=0;for(t=0;t<R.sfbmax;t++)R.scalefac[t]>0&&(_e|=R.scalefac[t]);if(!(_e&1)&&_e!=0){for(t=0;t<R.sfbmax;t++)R.scalefac[t]>0&&(R.scalefac[t]>>=1);R.scalefac_scale=U=1}}if(R.preflag==0&&R.block_type!=a.SHORT_TYPE&&o.mode_gr==2){for(t=11;t<a.SBPSY_l&&!(R.scalefac[t]<v.pretab[t]&&R.scalefac[t]!=-2);t++);if(t==a.SBPSY_l){for(t=11;t<a.SBPSY_l;t++)R.scalefac[t]>0&&(R.scalefac[t]-=v.pretab[t]);R.preflag=U=1}}for(n=0;n<4;n++)b.scfsi[f][n]=0;for(o.mode_gr==2&&c==1&&b.tt[0][f].block_type!=a.SHORT_TYPE&&b.tt[1][f].block_type!=a.SHORT_TYPE&&(l(f,b),U=0),t=0;t<R.sfbmax;t++)R.scalefac[t]==-2&&(R.scalefac[t]=0);U!=0&&(o.mode_gr==2?this.scale_bitcount(R):this.scale_bitcount_lsf(o,R))};var _=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],s=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],S=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(o){var c,f,b=0,R=0,t,n=o.scalefac;if(o.block_type==a.SHORT_TYPE)t=_,o.mixed_block_flag!=0&&(t=s);else if(t=S,o.preflag==0){for(f=11;f<a.SBPSY_l&&!(n[f]<v.pretab[f]);f++);if(f==a.SBPSY_l)for(o.preflag=1,f=11;f<a.SBPSY_l;f++)n[f]-=v.pretab[f]}for(f=0;f<o.sfbdivide;f++)b<n[f]&&(b=n[f]);for(;f<o.sfbmax;f++)R<n[f]&&(R=n[f]);for(o.part2_length=Qe.LARGE_BITS,c=0;c<16;c++)b<i[c]&&R<h[c]&&o.part2_length>t[c]&&(o.part2_length=t[c],o.scalefac_compress=c);return o.part2_length==Qe.LARGE_BITS};var r=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(o,c){var f,b,R,t,n,z,L,U,re=T(4),_e=c.scalefac;for(c.preflag!=0?f=2:f=0,L=0;L<4;L++)re[L]=0;if(c.block_type==a.SHORT_TYPE){b=1;var de=v.nr_of_sfb_block[f][b];for(U=0,R=0;R<4;R++)for(t=de[R]/3,L=0;L<t;L++,U++)for(n=0;n<3;n++)_e[U*3+n]>re[R]&&(re[R]=_e[U*3+n])}else{b=0;var de=v.nr_of_sfb_block[f][b];for(U=0,R=0;R<4;R++)for(t=de[R],L=0;L<t;L++,U++)_e[U]>re[R]&&(re[R]=_e[U])}for(z=!1,R=0;R<4;R++)re[R]>r[f][R]&&(z=!0);if(!z){var Ne,je,Xe,y0;for(c.sfb_partition_table=v.nr_of_sfb_block[f][b],R=0;R<4;R++)c.slen[R]=D[re[R]];switch(Ne=c.slen[0],je=c.slen[1],Xe=c.slen[2],y0=c.slen[3],f){case 0:c.scalefac_compress=(Ne*5+je<<4)+(Xe<<2)+y0;break;case 1:c.scalefac_compress=400+(Ne*5+je<<2)+Xe;break;case 2:c.scalefac_compress=500+Ne*3+je;break}}if(!z)for(c.part2_length=0,R=0;R<4;R++)c.part2_length+=c.slen[R]*c.sfb_partition_table[R];return z};var D=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(o){for(var c=2;c<=576;c+=2){for(var f=0,b;o.scalefac_band.l[++f]<c;);for(b=F[f][0];o.scalefac_band.l[b+1]>c;)b--;for(b<0&&(b=F[f][0]),o.bv_scf[c-2]=b,b=F[f][1];o.scalefac_band.l[b+o.bv_scf[c-2]+2]>c;)b--;b<0&&(b=F[f][1]),o.bv_scf[c-1]=b}}}ke.STEPS_per_dB=100,ke.MAX_dB=120,ke.GAIN_NOT_ENOUGH_SAMPLES=-24601,ke.GAIN_ANALYSIS_ERROR=0,ke.GAIN_ANALYSIS_OK=1,ke.INIT_GAIN_ANALYSIS_ERROR=0,ke.INIT_GAIN_ANALYSIS_OK=1,ke.YULE_ORDER=10,ke.MAX_ORDER=ke.YULE_ORDER,ke.MAX_SAMP_FREQ=48e3,ke.RMS_WINDOW_TIME_NUMERATOR=1,ke.RMS_WINDOW_TIME_DENOMINATOR=20,ke.MAX_SAMPLES_PER_WINDOW=ke.MAX_SAMP_FREQ*ke.RMS_WINDOW_TIME_NUMERATOR/ke.RMS_WINDOW_TIME_DENOMINATOR+1;function ke(){}function i0(){function v(p,k,te,I,Z,M,ae,B,C,e,i,h,V,d){this.quant_comp=k,this.quant_comp_s=te,this.safejoint=I,this.nsmsfix=Z,this.st_lrm=M,this.st_s=ae,this.nsbass=B,this.scale=C,this.masking_adj=e,this.ath_lower=i,this.ath_curve=h,this.interch=V,this.sfscale=d}var N;this.setModules=function(p){N=p};function F(p,k,te){m()}var g=[new v(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new v(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new v(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new v(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new v(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new v(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new v(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new v(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new v(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new v(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new v(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new v(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new v(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new v(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new v(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new v(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new v(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function le(p,k,te){var I=k,Z=N.nearestBitrateFullIndex(k);if(p.VBR=Y.vbr_abr,p.VBR_mean_bitrate_kbps=I,p.VBR_mean_bitrate_kbps=Math.min(p.VBR_mean_bitrate_kbps,320),p.VBR_mean_bitrate_kbps=Math.max(p.VBR_mean_bitrate_kbps,8),p.brate=p.VBR_mean_bitrate_kbps,p.VBR_mean_bitrate_kbps>320&&(p.disable_reservoir=!0),g[Z].safejoint>0&&(p.exp_nspsytune=p.exp_nspsytune|2),g[Z].sfscale>0&&(p.internal_flags.noise_shaping=2),Math.abs(g[Z].nsbass)>0){var M=int(g[Z].nsbass*4);M<0&&(M+=64),p.exp_nspsytune=p.exp_nspsytune|M<<2}return te!=0?p.quant_comp=g[Z].quant_comp:Math.abs(p.quant_comp- -1)>0||(p.quant_comp=g[Z].quant_comp),te!=0?p.quant_comp_short=g[Z].quant_comp_s:Math.abs(p.quant_comp_short- -1)>0||(p.quant_comp_short=g[Z].quant_comp_s),te!=0?p.msfix=g[Z].nsmsfix:Math.abs(p.msfix- -1)>0||(p.msfix=g[Z].nsmsfix),te!=0?p.internal_flags.nsPsy.attackthre=g[Z].st_lrm:Math.abs(p.internal_flags.nsPsy.attackthre- -1)>0||(p.internal_flags.nsPsy.attackthre=g[Z].st_lrm),te!=0?p.internal_flags.nsPsy.attackthre_s=g[Z].st_s:Math.abs(p.internal_flags.nsPsy.attackthre_s- -1)>0||(p.internal_flags.nsPsy.attackthre_s=g[Z].st_s),te!=0?p.scale=g[Z].scale:Math.abs(p.scale- -1)>0||(p.scale=g[Z].scale),te!=0?p.maskingadjust=g[Z].masking_adj:Math.abs(p.maskingadjust-0)>0||(p.maskingadjust=g[Z].masking_adj),g[Z].masking_adj>0?te!=0?p.maskingadjust_short=g[Z].masking_adj*.9:Math.abs(p.maskingadjust_short-0)>0||(p.maskingadjust_short=g[Z].masking_adj*.9):te!=0?p.maskingadjust_short=g[Z].masking_adj*1.1:Math.abs(p.maskingadjust_short-0)>0||(p.maskingadjust_short=g[Z].masking_adj*1.1),te!=0?p.ATHlower=-g[Z].ath_lower/10:Math.abs(-p.ATHlower*10-0)>0||(p.ATHlower=-g[Z].ath_lower/10),te!=0?p.ATHcurve=g[Z].ath_curve:Math.abs(p.ATHcurve- -1)>0||(p.ATHcurve=g[Z].ath_curve),te!=0?p.interChRatio=g[Z].interch:Math.abs(p.interChRatio- -1)>0||(p.interChRatio=g[Z].interch),k}this.apply_preset=function(p,k,te){switch(k){case Se.R3MIX:{k=Se.V3,p.VBR=Y.vbr_mtrh;break}case Se.MEDIUM:{k=Se.V4,p.VBR=Y.vbr_rh;break}case Se.MEDIUM_FAST:{k=Se.V4,p.VBR=Y.vbr_mtrh;break}case Se.STANDARD:{k=Se.V2,p.VBR=Y.vbr_rh;break}case Se.STANDARD_FAST:{k=Se.V2,p.VBR=Y.vbr_mtrh;break}case Se.EXTREME:{k=Se.V0,p.VBR=Y.vbr_rh;break}case Se.EXTREME_FAST:{k=Se.V0,p.VBR=Y.vbr_mtrh;break}case Se.INSANE:return k=320,p.preset=k,le(p,k,te),p.VBR=Y.vbr_off,k}switch(p.preset=k,k){case Se.V9:return F(),k;case Se.V8:return F(),k;case Se.V7:return F(),k;case Se.V6:return F(),k;case Se.V5:return F(),k;case Se.V4:return F(),k;case Se.V3:return F(),k;case Se.V2:return F(),k;case Se.V1:return F(),k;case Se.V0:return F(),k}return 8<=k&&k<=320?le(p,k,te):(p.preset=0,k)}}function a0(){var v;this.setModules=function(N){v=N},this.ResvFrameBegin=function(N,F){var g=N.internal_flags,le,p=g.l3_side,k=v.getframebits(N);F.bits=(k-g.sideinfo_len*8)/g.mode_gr;var te=8*256*g.mode_gr-8;N.brate>320?m():(le=8*1440,N.strict_ISO&&m()),g.ResvMax=le-k,g.ResvMax>te&&(g.ResvMax=te),(g.ResvMax<0||N.disable_reservoir)&&(g.ResvMax=0);var I=F.bits*g.mode_gr+Math.min(g.ResvSize,g.ResvMax);return I>le&&(I=le),p.resvDrain_pre=0,g.pinfo!=null&&m(),I},this.ResvMaxBits=function(N,F,g,le){var p=N.internal_flags,k,te=p.ResvSize,I=p.ResvMax;le!=0&&(te+=F),p.substep_shaping&1&&(I*=.9),g.bits=F,te*10>I*9?(k=te-I*9/10,g.bits+=k,p.substep_shaping|=128):(k=0,p.substep_shaping&=127,!N.disable_reservoir&&!(p.substep_shaping&1)&&(g.bits-=.1*F));var Z=te<p.ResvMax*6/10?te:p.ResvMax*6/10;return Z-=k,Z<0&&(Z=0),Z},this.ResvAdjust=function(N,F){N.ResvSize-=F.part2_3_length+F.part2_length},this.ResvFrameEnd=function(N,F){var g,le=N.l3_side;N.ResvSize+=F*N.mode_gr;var p=0;le.resvDrain_post=0,le.resvDrain_pre=0,(g=N.ResvSize%8)!=0&&(p+=g),g=N.ResvSize-p-N.ResvMax,g>0&&(p+=g);{var k=Math.min(le.main_data_begin*8,p)/8;le.resvDrain_pre+=8*k,p-=8*k,N.ResvSize-=8*k,le.main_data_begin-=k}le.resvDrain_post+=p,N.ResvSize-=p}}l0.NUMTOCENTRIES=100,l0.MAXFRAMESIZE=2880;function l0(){this.setModules=function(F,g,le){};var v=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function N(F,g){var le=g^F;return g=g>>8^v[le&255],g}this.updateMusicCRC=function(F,g,le,p){for(var k=0;k<p;++k)F[0]=N(g[le+k],F[0])}}Le.EQ=function(v,N){return Math.abs(v)>Math.abs(N)?Math.abs(v-N)<=Math.abs(v)*1e-6:Math.abs(v-N)<=Math.abs(N)*1e-6},Le.NEQ=function(v,N){return!Le.EQ(v,N)};function Le(){var v=this,N=null,F=null;this.setModules=function(l,_,s,S){N=s,F=S};var g=null,le=0,p=0,k=0;this.getframebits=function(l){var _=l.internal_flags,s;_.bitrate_index!=0?s=E.bitrate_table[l.version][_.bitrate_index]:s=l.brate;var S=0|(l.version+1)*72e3*s/l.out_samplerate+_.padding;return 8*S};function te(l){j.arraycopy(l.header[l.w_ptr].buf,0,g,p,l.sideinfo_len),p+=l.sideinfo_len,le+=l.sideinfo_len*8,l.w_ptr=l.w_ptr+1&Ee.MAX_HEADER_BUF-1}function I(l,_,s){for(;s>0;){var S;k==0&&(k=8,p++,l.header[l.w_ptr].write_timing==le&&te(l),g[p]=0),S=Math.min(s,k),s-=S,k-=S,g[p]|=_>>s<<k,le+=S}}function Z(l,_){var s=l.internal_flags,S;if(_>=8&&(I(s,76,8),_-=8),_>=8&&(I(s,65,8),_-=8),_>=8&&(I(s,77,8),_-=8),_>=8&&(I(s,69,8),_-=8),_>=32){var r=N.getLameShortVersion();if(_>=32)for(S=0;S<r.length&&_>=8;++S)_-=8,I(s,r.charCodeAt(S),8)}for(;_>=1;_-=1)I(s,s.ancillary_flag,1),s.ancillary_flag^=l.disable_reservoir?0:1}function M(l,_,s){for(var S=l.header[l.h_ptr].ptr;s>0;){var r=Math.min(s,8-(S&7));s-=r,l.header[l.h_ptr].buf[S>>3]|=_>>s<<8-(S&7)-r,S+=r}l.header[l.h_ptr].ptr=S}function ae(l,_){var s=l.internal_flags,S,r,D;if(S=s.l3_side,s.header[s.h_ptr].ptr=0,ge.fill(s.header[s.h_ptr].buf,0,s.sideinfo_len,0),l.out_samplerate<16e3?M(s,4094,12):M(s,4095,12),M(s,l.version,1),M(s,1,2),M(s,l.error_protection?0:1,1),M(s,s.bitrate_index,4),M(s,s.samplerate_index,2),M(s,s.padding,1),M(s,l.extension,1),M(s,l.mode.ordinal(),2),M(s,s.mode_ext,2),M(s,l.copyright,1),M(s,l.original,1),M(s,l.emphasis,2),l.error_protection&&M(s,0,16),l.version==1){for(M(s,S.main_data_begin,9),s.channels_out==2?M(s,S.private_bits,3):M(s,S.private_bits,5),D=0;D<s.channels_out;D++){var o;for(o=0;o<4;o++)M(s,S.scfsi[D][o],1)}for(r=0;r<2;r++)for(D=0;D<s.channels_out;D++){var c=S.tt[r][D];M(s,c.part2_3_length+c.part2_length,12),M(s,c.big_values/2,9),M(s,c.global_gain,8),M(s,c.scalefac_compress,4),c.block_type!=a.NORM_TYPE?(M(s,1,1),M(s,c.block_type,2),M(s,c.mixed_block_flag,1),c.table_select[0]==14&&(c.table_select[0]=16),M(s,c.table_select[0],5),c.table_select[1]==14&&(c.table_select[1]=16),M(s,c.table_select[1],5),M(s,c.subblock_gain[0],3),M(s,c.subblock_gain[1],3),M(s,c.subblock_gain[2],3)):(M(s,0,1),c.table_select[0]==14&&(c.table_select[0]=16),M(s,c.table_select[0],5),c.table_select[1]==14&&(c.table_select[1]=16),M(s,c.table_select[1],5),c.table_select[2]==14&&(c.table_select[2]=16),M(s,c.table_select[2],5),M(s,c.region0_count,4),M(s,c.region1_count,3)),M(s,c.preflag,1),M(s,c.scalefac_scale,1),M(s,c.count1table_select,1)}}else for(M(s,S.main_data_begin,8),M(s,S.private_bits,s.channels_out),r=0,D=0;D<s.channels_out;D++){var c=S.tt[r][D];M(s,c.part2_3_length+c.part2_length,12),M(s,c.big_values/2,9),M(s,c.global_gain,8),M(s,c.scalefac_compress,9),c.block_type!=a.NORM_TYPE?(M(s,1,1),M(s,c.block_type,2),M(s,c.mixed_block_flag,1),c.table_select[0]==14&&(c.table_select[0]=16),M(s,c.table_select[0],5),c.table_select[1]==14&&(c.table_select[1]=16),M(s,c.table_select[1],5),M(s,c.subblock_gain[0],3),M(s,c.subblock_gain[1],3),M(s,c.subblock_gain[2],3)):(M(s,0,1),c.table_select[0]==14&&(c.table_select[0]=16),M(s,c.table_select[0],5),c.table_select[1]==14&&(c.table_select[1]=16),M(s,c.table_select[1],5),c.table_select[2]==14&&(c.table_select[2]=16),M(s,c.table_select[2],5),M(s,c.region0_count,4),M(s,c.region1_count,3)),M(s,c.scalefac_scale,1),M(s,c.count1table_select,1)}l.error_protection&&m();{var f=s.h_ptr;s.h_ptr=f+1&Ee.MAX_HEADER_BUF-1,s.header[s.h_ptr].write_timing=s.header[f].write_timing+_,s.h_ptr==s.w_ptr}}function B(l,_){var s=E.ht[_.count1table_select+32],S,r=0,D=_.big_values,o=_.big_values;for(S=(_.count1-_.big_values)/4;S>0;--S){var c=0,f=0,b;b=_.l3_enc[D+0],b!=0&&(f+=8,_.xr[o+0]<0&&c++),b=_.l3_enc[D+1],b!=0&&(f+=4,c*=2,_.xr[o+1]<0&&c++),b=_.l3_enc[D+2],b!=0&&(f+=2,c*=2,_.xr[o+2]<0&&c++),b=_.l3_enc[D+3],b!=0&&(f++,c*=2,_.xr[o+3]<0&&c++),D+=4,o+=4,I(l,c+s.table[f],s.hlen[f]),r+=s.hlen[f]}return r}function C(l,_,s,S,r){var D=E.ht[_],o=0;if(_==0)return o;for(var c=s;c<S;c+=2){var f=0,b=0,R=D.xlen,t=D.xlen,n=0,z=r.l3_enc[c],L=r.l3_enc[c+1];if(z!=0&&(r.xr[c]<0&&n++,f--),_>15){if(z>14){var U=z-15;n|=U<<1,b=R,z=15}if(L>14){var re=L-15;n<<=R,n|=re,b+=R,L=15}t=16}L!=0&&(n<<=1,r.xr[c+1]<0&&n++,f--),z=z*t+L,b-=f,f+=D.hlen[z],I(l,D.table[z],f),I(l,n,b),o+=f+b}return o}function e(l,_){var s=3*l.scalefac_band.s[3];s>_.big_values&&(s=_.big_values);var S=C(l,_.table_select[0],0,s,_);return S+=C(l,_.table_select[1],s,_.big_values,_),S}function i(l,_){var s,S,r,D;s=_.big_values;var o=_.region0_count+1;return r=l.scalefac_band.l[o],o+=_.region1_count+1,D=l.scalefac_band.l[o],r>s&&(r=s),D>s&&(D=s),S=C(l,_.table_select[0],0,r,_),S+=C(l,_.table_select[1],r,D,_),S+=C(l,_.table_select[2],D,s,_),S}function h(l){var _,s,S,r,D=0,o=l.internal_flags,c=o.l3_side;if(l.version==1)for(_=0;_<2;_++)for(s=0;s<o.channels_out;s++){var f=c.tt[_][s],b=Pe.slen1_tab[f.scalefac_compress],R=Pe.slen2_tab[f.scalefac_compress];for(r=0,S=0;S<f.sfbdivide;S++)f.scalefac[S]!=-1&&(I(o,f.scalefac[S],b),r+=b);for(;S<f.sfbmax;S++)f.scalefac[S]!=-1&&(I(o,f.scalefac[S],R),r+=R);f.block_type==a.SHORT_TYPE?r+=e(o,f):r+=i(o,f),r+=B(o,f),D+=r}else for(_=0,s=0;s<o.channels_out;s++){var f=c.tt[_][s],t,n,z=0;if(r=0,S=0,n=0,f.block_type==a.SHORT_TYPE){for(;n<4;n++){var L=f.sfb_partition_table[n]/3,U=f.slen[n];for(t=0;t<L;t++,S++)I(o,Math.max(f.scalefac[S*3+0],0),U),I(o,Math.max(f.scalefac[S*3+1],0),U),I(o,Math.max(f.scalefac[S*3+2],0),U),z+=3*U}r+=e(o,f)}else{for(;n<4;n++){var L=f.sfb_partition_table[n],U=f.slen[n];for(t=0;t<L;t++,S++)I(o,Math.max(f.scalefac[S],0),U),z+=U}r+=i(o,f)}r+=B(o,f),D+=z+r}return D}function V(){this.total=0}function d(l,_){var s=l.internal_flags,S,r,D;return s.w_ptr,D=s.h_ptr-1,D==-1&&(D=Ee.MAX_HEADER_BUF-1),S=s.header[D].write_timing-le,_.total=S,S>=0&&m(),r=v.getframebits(l),S+=r,_.total+=r,_.total%8!=0?_.total=1+_.total/8:_.total=_.total/8,_.total+=p+1,S}this.flush_bitstream=function(l){var _=l.internal_flags,s,S;_.h_ptr-1,s=_.l3_side,!((S=d(l,new V))<0)&&(Z(l,S),_.ResvSize=0,s.main_data_begin=0,_.findReplayGain&&m(),_.findPeakSample&&m())},this.format_bitstream=function(l){var _=l.internal_flags,s;s=_.l3_side;var S=this.getframebits(l);Z(l,s.resvDrain_pre),ae(l,S);var r=8*_.sideinfo_len;if(r+=h(l),Z(l,s.resvDrain_post),r+=s.resvDrain_post,s.main_data_begin+=(S-r)/8,d(l,new V)!=_.ResvSize,s.main_data_begin*8!=_.ResvSize&&(_.ResvSize=s.main_data_begin*8),le>1e9){var D;for(D=0;D<Ee.MAX_HEADER_BUF;++D)_.header[D].write_timing-=le;le=0}return 0},this.copy_buffer=function(l,_,s,S,r){var D=p+1;if(D<=0)return 0;if(S!=0&&D>S)return-1;if(j.arraycopy(g,0,_,s,D),p=-1,k=0,r!=0){var o=T(1);o[0]=l.nMusicCRC,F.updateMusicCRC(o,_,s,D),l.nMusicCRC=o[0],D>0&&(l.VBR_seek_table.nBytesWritten+=D),l.decode_on_the_fly&&m()}return D},this.init_bit_stream_w=function(l){g=P(Se.LAME_MAXMP3BUFFER),l.h_ptr=l.w_ptr=0,l.header[l.h_ptr].write_timing=0,p=-1,k=0,le=0}}function we(v,N,F,g){this.xlen=v,this.linmax=N,this.table=F,this.hlen=g}var E={};E.t1HB=[1,1,1,0],E.t2HB=[1,2,1,3,1,1,3,2,0],E.t3HB=[3,2,1,1,1,1,3,2,0],E.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],E.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],E.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],E.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],E.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],E.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],E.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],E.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],E.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],E.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],E.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],E.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],E.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],E.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],E.t1l=[1,4,3,5],E.t2l=[1,4,7,4,5,7,6,7,8],E.t3l=[2,3,7,4,4,7,6,7,8],E.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],E.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],E.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],E.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],E.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],E.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],E.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],E.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],E.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],E.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],E.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],E.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],E.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],E.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],E.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],E.ht=[new we(0,0,null,null),new we(2,0,E.t1HB,E.t1l),new we(3,0,E.t2HB,E.t2l),new we(3,0,E.t3HB,E.t3l),new we(0,0,null,null),new we(4,0,E.t5HB,E.t5l),new we(4,0,E.t6HB,E.t6l),new we(6,0,E.t7HB,E.t7l),new we(6,0,E.t8HB,E.t8l),new we(6,0,E.t9HB,E.t9l),new we(8,0,E.t10HB,E.t10l),new we(8,0,E.t11HB,E.t11l),new we(8,0,E.t12HB,E.t12l),new we(16,0,E.t13HB,E.t13l),new we(0,0,null,E.t16_5l),new we(16,0,E.t15HB,E.t15l),new we(1,1,E.t16HB,E.t16l),new we(2,3,E.t16HB,E.t16l),new we(3,7,E.t16HB,E.t16l),new we(4,15,E.t16HB,E.t16l),new we(6,63,E.t16HB,E.t16l),new we(8,255,E.t16HB,E.t16l),new we(10,1023,E.t16HB,E.t16l),new we(13,8191,E.t16HB,E.t16l),new we(4,15,E.t24HB,E.t24l),new we(5,31,E.t24HB,E.t24l),new we(6,63,E.t24HB,E.t24l),new we(7,127,E.t24HB,E.t24l),new we(8,255,E.t24HB,E.t24l),new we(9,511,E.t24HB,E.t24l),new we(11,2047,E.t24HB,E.t24l),new we(13,8191,E.t24HB,E.t24l),new we(0,0,E.t32HB,E.t32l),new we(0,0,E.t33HB,E.t33l)],E.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],E.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],E.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],E.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],E.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],E.scfsi_band=[0,6,11,16,21];function $e(v){this.bits=v}function He(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}function W(){this.setModules=function(v,N){}}function De(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=y(a.SBMAX_l),this.s=y(a.SBMAX_s),this.psfb21=y(a.PSFB21),this.psfb12=y(a.PSFB12),this.cb_l=y(a.CBANDS),this.cb_s=y(a.CBANDS),this.eql_w=y(a.BLKSIZE/2)}function Ue(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=he.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}function u0(v){var N=v;this.quantize=N,this.iteration_loop=function(F,g,le,p){var k=F.internal_flags,te=y(ve.SFBMAX),I=y(576),Z=T(2),M=0,ae=k.l3_side,B=new $e(M);this.quantize.rv.ResvFrameBegin(F,B),M=B.bits;for(var C=0;C<k.mode_gr;C++){this.quantize.qupvt.on_pe(F,g,Z,M,C,C),k.mode_ext==a.MPG_MD_MS_LR&&m();for(var e=0;e<k.channels_out;e++){var i,h,V=ae.tt[C][e];V.block_type!=a.SHORT_TYPE?(i=0,h=k.PSY.mask_adjust-i):(i=0,h=k.PSY.mask_adjust_short-i),k.masking_lower=Math.pow(10,h*.1),this.quantize.init_outer_loop(k,V),this.quantize.init_xrpow(k,V,I)&&(this.quantize.qupvt.calc_xmin(F,p[C][e],V,te),this.quantize.outer_loop(F,V,te,I,e,Z[e])),this.quantize.iteration_finish_one(k,C,e)}}this.quantize.rv.ResvFrameEnd(k,M)}}function Ze(){}function Ye(v,N,F,g){this.l=T(1+a.SBMAX_l),this.s=T(1+a.SBMAX_s),this.psfb21=T(1+a.PSFB21),this.psfb12=T(1+a.PSFB12);var le=this.l,p=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],j.arraycopy(this.arrL,0,le,0,Math.min(this.arrL.length,this.l.length)),j.arraycopy(this.arrS,0,p,0,Math.min(this.arrS.length,this.s.length)),j.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),j.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}Qe.Q_MAX=257,Qe.Q_MAX2=116,Qe.LARGE_BITS=1e5,Qe.IXMAX_VAL=8206;function Qe(){var v=null,N=null,F=null;this.setModules=function(d,l,_){v=d,N=l,F=_};function g(d){return ae[d+Qe.Q_MAX2]}this.IPOW20=function(d){return B[d]};var le=2220446049250313e-31,p=Qe.IXMAX_VAL,k=p+2,te=Qe.Q_MAX,I=Qe.Q_MAX2,Z=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var M=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=M,this.sfBandIndex=[new Ye([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ye([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ye([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ye([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ye([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ye([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ye([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ye([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Ye([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var ae=y(te+I+1),B=y(te),C=y(k),e=y(k);this.adj43=e;function i(d,l){var _=F.ATHformula(l,d);return _-=Z,_=Math.pow(10,_/10+d.ATHlower),_}function h(d){for(var l=d.internal_flags.ATH.l,_=d.internal_flags.ATH.psfb21,s=d.internal_flags.ATH.s,S=d.internal_flags.ATH.psfb12,r=d.internal_flags,D=d.out_samplerate,o=0;o<a.SBMAX_l;o++){var c=r.scalefac_band.l[o],f=r.scalefac_band.l[o+1];l[o]=ye.MAX_VALUE;for(var b=c;b<f;b++){var R=b*D/1152,t=i(d,R);l[o]=Math.min(l[o],t)}}for(var o=0;o<a.PSFB21;o++){var c=r.scalefac_band.psfb21[o],f=r.scalefac_band.psfb21[o+1];_[o]=ye.MAX_VALUE;for(var b=c;b<f;b++){var R=b*D/1152,t=i(d,R);_[o]=Math.min(_[o],t)}}for(var o=0;o<a.SBMAX_s;o++){var c=r.scalefac_band.s[o],f=r.scalefac_band.s[o+1];s[o]=ye.MAX_VALUE;for(var b=c;b<f;b++){var R=b*D/384,t=i(d,R);s[o]=Math.min(s[o],t)}s[o]*=r.scalefac_band.s[o+1]-r.scalefac_band.s[o]}for(var o=0;o<a.PSFB12;o++){var c=r.scalefac_band.psfb12[o],f=r.scalefac_band.psfb12[o+1];S[o]=ye.MAX_VALUE;for(var b=c;b<f;b++){var R=b*D/384,t=i(d,R);S[o]=Math.min(S[o],t)}S[o]*=r.scalefac_band.s[13]-r.scalefac_band.s[12]}d.noATH&&m(),r.ATH.floor=10*K(i(d,-1))}this.iteration_init=function(d){var l=d.internal_flags,_=l.l3_side,s;if(l.iteration_init_init==0){for(l.iteration_init_init=1,_.main_data_begin=0,h(d),C[0]=0,s=1;s<k;s++)C[s]=Math.pow(s,4/3);for(s=0;s<k-1;s++)e[s]=s+1-Math.pow(.5*(C[s]+C[s+1]),.75);for(e[s]=.5,s=0;s<te;s++)B[s]=Math.pow(2,(s-210)*-.1875);for(s=0;s<=te+I;s++)ae[s]=Math.pow(2,(s-210-I)*.25);v.huffman_init(l);{var S,r,D,o;for(s=d.exp_nspsytune>>2&63,s>=32&&(s-=64),S=Math.pow(10,s/4/10),s=d.exp_nspsytune>>8&63,s>=32&&(s-=64),r=Math.pow(10,s/4/10),s=d.exp_nspsytune>>14&63,s>=32&&(s-=64),D=Math.pow(10,s/4/10),s=d.exp_nspsytune>>20&63,s>=32&&(s-=64),o=D*Math.pow(10,s/4/10),s=0;s<a.SBMAX_l;s++){var c;s<=6?c=S:s<=13?c=r:s<=20?c=D:c=o,l.nsPsy.longfact[s]=c}for(s=0;s<a.SBMAX_s;s++){var c;s<=5?c=S:s<=10?c=r:s<=11?c=D:c=o,l.nsPsy.shortfact[s]=c}}}},this.on_pe=function(d,l,_,s,S,r){var D=d.internal_flags,o=0,c,f=T(2),b,R=new $e(o),t=N.ResvMaxBits(d,s,R,r);o=R.bits;var n=o+t;for(n>Ee.MAX_BITS_PER_GRANULE&&(n=Ee.MAX_BITS_PER_GRANULE),c=0,b=0;b<D.channels_out;++b)_[b]=Math.min(Ee.MAX_BITS_PER_CHANNEL,o/D.channels_out),f[b]=0|_[b]*l[S][b]/700-_[b],f[b]>s*3/4&&(f[b]=s*3/4),f[b]<0&&(f[b]=0),f[b]+_[b]>Ee.MAX_BITS_PER_CHANNEL&&(f[b]=Math.max(0,Ee.MAX_BITS_PER_CHANNEL-_[b])),c+=f[b];if(c>t)for(b=0;b<D.channels_out;++b)f[b]=t*f[b]/c;for(b=0;b<D.channels_out;++b)_[b]+=f[b],t-=f[b];for(c=0,b=0;b<D.channels_out;++b)c+=_[b];return c>Ee.MAX_BITS_PER_GRANULE&&m(),n},this.athAdjust=function(d,l,_){var s=90.30873362,S=94.82444863,r=G.FAST_LOG10_X(l,10),D=d*d,o=0;return r-=_,D>1e-20&&(o=1+G.FAST_LOG10_X(D,10/s)),o<0&&(o=0),r*=o,r+=_+s-S,Math.pow(10,.1*r)},this.calc_xmin=function(d,l,_,s){var S=0,r=d.internal_flags,D,o=0,c=0,f=r.ATH,b=_.xr,R=d.VBR==Y.vbr_mtrh?1:0,t=r.masking_lower;for((d.VBR==Y.vbr_mtrh||d.VBR==Y.vbr_mt)&&(t=1),D=0;D<_.psy_lmax;D++){var n,z,L,U,re,_e;d.VBR==Y.vbr_rh||d.VBR==Y.vbr_mtrh?z=athAdjust(f.adjust,f.l[D],f.floor):z=f.adjust*f.l[D],re=_.width[D],L=z/re,U=le,_e=re>>1,n=0;do{var de,Ne;de=b[o]*b[o],n+=de,U+=de<L?de:L,o++,Ne=b[o]*b[o],n+=Ne,U+=Ne<L?Ne:L,o++}while(--_e>0);if(n>z&&c++,D==a.SBPSY_l&&m(),R!=0&&(z=U),!d.ATHonly){var je=l.en.l[D];if(je>0){var Xe;Xe=n*l.thm.l[D]*t/je,R!=0&&(Xe*=r.nsPsy.longfact[D]),z<Xe&&(z=Xe)}}R!=0?s[S++]=z:s[S++]=z*r.nsPsy.longfact[D]}var y0=575;if(_.block_type!=a.SHORT_TYPE)for(var g0=576;g0--!=0&&Le.EQ(b[g0],0);)y0=g0;_.max_nonzero_coeff=y0;for(var m0=_.sfb_smin;D<_.psymax;m0++,D+=3){var re,w0,k0;for(d.VBR==Y.vbr_rh||d.VBR==Y.vbr_mtrh?k0=athAdjust(f.adjust,f.s[m0],f.floor):k0=f.adjust*f.s[m0],re=_.width[D],w0=0;w0<3;w0++){var n=0,z,L,U,_e=re>>1;L=k0/re,U=le;do{var de,Ne;de=b[o]*b[o],n+=de,U+=de<L?de:L,o++,Ne=b[o]*b[o],n+=Ne,U+=Ne<L?Ne:L,o++}while(--_e>0);if(n>k0&&c++,m0==a.SBPSY_s&&m(),R!=0?z=U:z=k0,!d.ATHonly&&!d.ATHshort){var je=l.en.s[m0][w0];if(je>0){var Xe;Xe=n*l.thm.s[m0][w0]*t/je,R!=0&&(Xe*=r.nsPsy.shortfact[m0]),z<Xe&&(z=Xe)}}R!=0?s[S++]=z:s[S++]=z*r.nsPsy.shortfact[m0]}d.useTemporal&&(s[S-3]>s[S-3+1]&&(s[S-3+1]+=(s[S-3]-s[S-3+1])*r.decay),s[S-3+1]>s[S-3+2]&&(s[S-3+2]+=(s[S-3+1]-s[S-3+2])*r.decay))}return c};function V(d){this.s=d}this.calc_noise_core=function(d,l,_,s){var S=0,r=l.s,D=d.l3_enc;if(r>d.count1)for(;_--!=0;){var o;o=d.xr[r],r++,S+=o*o,o=d.xr[r],r++,S+=o*o}else if(r>d.big_values){var c=y(2);for(c[0]=0,c[1]=s;_--!=0;){var o;o=Math.abs(d.xr[r])-c[D[r]],r++,S+=o*o,o=Math.abs(d.xr[r])-c[D[r]],r++,S+=o*o}}else for(;_--!=0;){var o;o=Math.abs(d.xr[r])-C[D[r]]*s,r++,S+=o*o,o=Math.abs(d.xr[r])-C[D[r]]*s,r++,S+=o*o}return l.s=r,S},this.calc_noise=function(d,l,_,s,S){var r=0,D=0,o,c,f=0,b=0,R=0,t=-20,n=0,z=d.scalefac,L=0;for(s.over_SSD=0,o=0;o<d.psymax;o++){var U=d.global_gain-(z[L++]+(d.preflag!=0?M[o]:0)<<d.scalefac_scale+1)-d.subblock_gain[d.window[o]]*8,re=0;if(S!=null&&S.step[o]==U)re=S.noise[o],n+=d.width[o],_[r++]=re/l[D++],re=S.noise_log[o];else{var _e=g(U);if(c=d.width[o]>>1,n+d.width[o]>d.max_nonzero_coeff){var de;de=d.max_nonzero_coeff-n+1,de>0?c=de>>1:c=0}var Ne=new V(n);re=this.calc_noise_core(d,Ne,c,_e),n=Ne.s,S!=null&&(S.step[o]=U,S.noise[o]=re),re=_[r++]=re/l[D++],re=G.FAST_LOG10(Math.max(re,1e-20)),S!=null&&(S.noise_log[o]=re)}if(S!=null&&(S.global_gain=d.global_gain),R+=re,re>0){var je;je=Math.max(0|re*10+.5,1),s.over_SSD+=je*je,f++,b+=re}t=Math.max(t,re)}return s.over_count=f,s.tot_noise=R,s.over_noise=b,s.max_noise=t,f}}function e0(){this.global_gain=0,this.sfb_count1=0,this.step=T(39),this.noise=y(39),this.noise_log=y(39)}function ze(){this.xr=y(576),this.l3_enc=T(576),this.scalefac=T(ve.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=T(3),this.subblock_gain=T(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=T(ve.SFBMAX),this.window=T(ve.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=T(4),this.max_nonzero_coeff=0;var v=this;function N(g){return new Int32Array(g)}function F(g){return new Float32Array(g)}this.assign=function(g){v.xr=F(g.xr),v.l3_enc=N(g.l3_enc),v.scalefac=N(g.scalefac),v.xrpow_max=g.xrpow_max,v.part2_3_length=g.part2_3_length,v.big_values=g.big_values,v.count1=g.count1,v.global_gain=g.global_gain,v.scalefac_compress=g.scalefac_compress,v.block_type=g.block_type,v.mixed_block_flag=g.mixed_block_flag,v.table_select=N(g.table_select),v.subblock_gain=N(g.subblock_gain),v.region0_count=g.region0_count,v.region1_count=g.region1_count,v.preflag=g.preflag,v.scalefac_scale=g.scalefac_scale,v.count1table_select=g.count1table_select,v.part2_length=g.part2_length,v.sfb_lmax=g.sfb_lmax,v.sfb_smin=g.sfb_smin,v.psy_lmax=g.psy_lmax,v.sfbmax=g.sfbmax,v.psymax=g.psymax,v.sfbdivide=g.sfbdivide,v.width=N(g.width),v.window=N(g.window),v.count1bits=g.count1bits,v.sfb_partition_table=g.sfb_partition_table.slice(0),v.slen=N(g.slen),v.max_nonzero_coeff=g.max_nonzero_coeff}}var ve={};ve.SFBMAX=a.SBMAX_s*3;function F0(){this.rv=null;var v;this.qupvt=null;var N,F=new W,g;this.setModules=function(e,i,h,V){v=i,this.rv=i,N=h,this.qupvt=h,g=V,F.setModules(N,g)};function le(e,i,h,V){V=0;for(var d=0;d<=h;++d){var l=Math.abs(e.xr[d]);V+=l,i[d]=Math.sqrt(l*Math.sqrt(l)),i[d]>e.xrpow_max&&(e.xrpow_max=i[d])}return V}this.init_xrpow=function(e,i,h){var V=0,d=0|i.max_nonzero_coeff;if(i.xrpow_max=0,ge.fill(h,d,576,0),V=le(i,h,d,V),V>1e-20){var l=0;e.substep_shaping&2&&(l=1);for(var _=0;_<i.psymax;_++)e.pseudohalf[_]=l;return!0}return ge.fill(i.l3_enc,0,576,0),!1};function p(e,i){var h=e.ATH,V=i.xr;if(i.block_type!=a.SHORT_TYPE)for(var d=!1,l=a.PSFB21-1;l>=0&&!d;l--){var _=e.scalefac_band.psfb21[l],s=e.scalefac_band.psfb21[l+1],S=N.athAdjust(h.adjust,h.psfb21[l],h.floor);e.nsPsy.longfact[21]>1e-12&&(S*=e.nsPsy.longfact[21]);for(var r=s-1;r>=_;r--)if(Math.abs(V[r])<S)V[r]=0;else{d=!0;break}}else for(var D=0;D<3;D++)for(var d=!1,l=a.PSFB12-1;l>=0&&!d;l--){var _=e.scalefac_band.s[12]*3+(e.scalefac_band.s[13]-e.scalefac_band.s[12])*D+(e.scalefac_band.psfb12[l]-e.scalefac_band.psfb12[0]),s=_+(e.scalefac_band.psfb12[l+1]-e.scalefac_band.psfb12[l]),o=N.athAdjust(h.adjust,h.psfb12[l],h.floor);e.nsPsy.shortfact[12]>1e-12&&(o*=e.nsPsy.shortfact[12]);for(var r=s-1;r>=_;r--)if(Math.abs(V[r])<o)V[r]=0;else{d=!0;break}}}this.init_outer_loop=function(e,i){i.part2_3_length=0,i.big_values=0,i.count1=0,i.global_gain=210,i.scalefac_compress=0,i.table_select[0]=0,i.table_select[1]=0,i.table_select[2]=0,i.subblock_gain[0]=0,i.subblock_gain[1]=0,i.subblock_gain[2]=0,i.subblock_gain[3]=0,i.region0_count=0,i.region1_count=0,i.preflag=0,i.scalefac_scale=0,i.count1table_select=0,i.part2_length=0,i.sfb_lmax=a.SBPSY_l,i.sfb_smin=a.SBPSY_s,i.psy_lmax=e.sfb21_extra?a.SBMAX_l:a.SBPSY_l,i.psymax=i.psy_lmax,i.sfbmax=i.sfb_lmax,i.sfbdivide=11;for(var h=0;h<a.SBMAX_l;h++)i.width[h]=e.scalefac_band.l[h+1]-e.scalefac_band.l[h],i.window[h]=3;if(i.block_type==a.SHORT_TYPE){var V=y(576);i.sfb_smin=0,i.sfb_lmax=0,i.mixed_block_flag!=0&&m(),i.psymax=i.sfb_lmax+3*((e.sfb21_extra?a.SBMAX_s:a.SBPSY_s)-i.sfb_smin),i.sfbmax=i.sfb_lmax+3*(a.SBPSY_s-i.sfb_smin),i.sfbdivide=i.sfbmax-18,i.psy_lmax=i.sfb_lmax;var d=e.scalefac_band.l[i.sfb_lmax];j.arraycopy(i.xr,0,V,0,576);for(var h=i.sfb_smin;h<a.SBMAX_s;h++)for(var l=e.scalefac_band.s[h],_=e.scalefac_band.s[h+1],s=0;s<3;s++)for(var S=l;S<_;S++)i.xr[d++]=V[3*S+s];for(var r=i.sfb_lmax,h=i.sfb_smin;h<a.SBMAX_s;h++)i.width[r]=i.width[r+1]=i.width[r+2]=e.scalefac_band.s[h+1]-e.scalefac_band.s[h],i.window[r]=0,i.window[r+1]=1,i.window[r+2]=2,r+=3}i.count1bits=0,i.sfb_partition_table=N.nr_of_sfb_block[0][0],i.slen[0]=0,i.slen[1]=0,i.slen[2]=0,i.slen[3]=0,i.max_nonzero_coeff=575,ge.fill(i.scalefac,0),p(e,i)};function k(e){this.ordinal=e}k.BINSEARCH_NONE=new k(0),k.BINSEARCH_UP=new k(1),k.BINSEARCH_DOWN=new k(2);function te(e,i,h,V,d){var l,_=e.CurrentStep[V],s=!1,S=e.OldValue[V],r=k.BINSEARCH_NONE;for(i.global_gain=S,h-=i.part2_length;;){var D;if(l=g.count_bits(e,d,i,null),_==1||l==h)break;l>h?(r==k.BINSEARCH_DOWN&&(s=!0),s&&(_/=2),r=k.BINSEARCH_UP,D=_):(r==k.BINSEARCH_UP&&(s=!0),s&&(_/=2),r=k.BINSEARCH_DOWN,D=-_),i.global_gain+=D,i.global_gain<0&&m(),i.global_gain>255&&m()}for(;l>h&&i.global_gain<255;)i.global_gain++,l=g.count_bits(e,d,i,null);return e.CurrentStep[V]=S-i.global_gain>=4?4:2,e.OldValue[V]=i.global_gain,i.part2_3_length=l,l}function I(e){for(var i=0;i<e.sfbmax;i++)if(e.scalefac[i]+e.subblock_gain[e.window[i]]==0)return!1;return!0}function Z(e,i,h,V,d){var l;switch(e){default:case 9:{i.over_count>0?(l=h.over_SSD<=i.over_SSD,h.over_SSD==i.over_SSD&&(l=h.bits<i.bits)):l=h.max_noise<0&&h.max_noise*10+h.bits<=i.max_noise*10+i.bits;break}case 0:l=h.over_count<i.over_count||h.over_count==i.over_count&&h.over_noise<i.over_noise||h.over_count==i.over_count&&Le.EQ(h.over_noise,i.over_noise)&&h.tot_noise<i.tot_noise;break;case 8:m();case 1:l=h.max_noise<i.max_noise;break;case 2:l=h.tot_noise<i.tot_noise;break;case 3:l=h.tot_noise<i.tot_noise&&h.max_noise<i.max_noise;break;case 4:l=h.max_noise<=0&&i.max_noise>.2||h.max_noise<=0&&i.max_noise<0&&i.max_noise>h.max_noise-.2&&h.tot_noise<i.tot_noise||h.max_noise<=0&&i.max_noise>0&&i.max_noise>h.max_noise-.2&&h.tot_noise<i.tot_noise+i.over_noise||h.max_noise>0&&i.max_noise>-.05&&i.max_noise>h.max_noise-.1&&h.tot_noise+h.over_noise<i.tot_noise+i.over_noise||h.max_noise>0&&i.max_noise>-.1&&i.max_noise>h.max_noise-.15&&h.tot_noise+h.over_noise+h.over_noise<i.tot_noise+i.over_noise+i.over_noise;break;case 5:l=h.over_noise<i.over_noise||Le.EQ(h.over_noise,i.over_noise)&&h.tot_noise<i.tot_noise;break;case 6:l=h.over_noise<i.over_noise||Le.EQ(h.over_noise,i.over_noise)&&(h.max_noise<i.max_noise||Le.EQ(h.max_noise,i.max_noise)&&h.tot_noise<=i.tot_noise);break;case 7:l=h.over_count<i.over_count||h.over_noise<i.over_noise;break}return i.over_count==0&&(l=l&&h.bits<i.bits),l}function M(e,i,h,V,d){var l=e.internal_flags,_;i.scalefac_scale==0?_=1.2968395546510096:_=1.6817928305074292;for(var s=0,S=0;S<i.sfbmax;S++)s<h[S]&&(s=h[S]);var r=l.noise_shaping_amp;switch(r==3&&m(),r){case 2:break;case 1:s>1?s=Math.pow(s,.5):s*=.95;break;case 0:default:s>1?s=1:s*=.95;break}for(var D=0,S=0;S<i.sfbmax;S++){var o=i.width[S],c;if(D+=o,!(h[S]<s)){for(l.substep_shaping&2&&m(),i.scalefac[S]++,c=-o;c<0;c++)V[D+c]*=_,V[D+c]>i.xrpow_max&&(i.xrpow_max=V[D+c]);if(l.noise_shaping_amp==2)return}}}function ae(e,i){for(var h=1.2968395546510096,V=0,d=0;d<e.sfbmax;d++){var l=e.width[d],_=e.scalefac[d];if(e.preflag!=0&&(_+=N.pretab[d]),V+=l,_&1){_++;for(var s=-l;s<0;s++)i[V+s]*=h,i[V+s]>e.xrpow_max&&(e.xrpow_max=i[V+s])}e.scalefac[d]=_>>1}e.preflag=0,e.scalefac_scale=1}function B(e,i,h){var V,d=i.scalefac;for(V=0;V<i.sfb_lmax;V++)if(d[V]>=16)return!0;for(var l=0;l<3;l++){var _=0,s=0;for(V=i.sfb_lmax+l;V<i.sfbdivide;V+=3)_<d[V]&&(_=d[V]);for(;V<i.sfbmax;V+=3)s<d[V]&&(s=d[V]);if(!(_<16&&s<8)){if(i.subblock_gain[l]>=7)return!0;i.subblock_gain[l]++;var S=e.scalefac_band.l[i.sfb_lmax];for(V=i.sfb_lmax+l;V<i.sfbmax;V+=3){var r,D=i.width[V],o=d[V];if(o=o-(4>>i.scalefac_scale),o>=0){d[V]=o,S+=D*3;continue}d[V]=0;{var c=210+(o<<i.scalefac_scale+1);r=N.IPOW20(c)}S+=D*(l+1);for(var f=-D;f<0;f++)h[S+f]*=r,h[S+f]>i.xrpow_max&&(i.xrpow_max=h[S+f]);S+=D*(3-l-1)}{var r=N.IPOW20(202);S+=i.width[V]*(l+1);for(var f=-i.width[V];f<0;f++)h[S+f]*=r,h[S+f]>i.xrpow_max&&(i.xrpow_max=h[S+f])}}}return!1}function C(e,i,h,V,d){var l=e.internal_flags;M(e,i,h,V);var _=I(i);return _?!1:(l.mode_gr==2?_=g.scale_bitcount(i):_=g.scale_bitcount_lsf(l,i),_?(l.noise_shaping>1&&(ge.fill(l.pseudohalf,0),i.scalefac_scale==0?(ae(i,V),_=!1):i.block_type==a.SHORT_TYPE&&l.subblock_gain>0&&(_=B(l,i,V)||I(i))),_||(l.mode_gr==2?_=g.scale_bitcount(i):_=g.scale_bitcount_lsf(l,i)),!_):!0)}this.outer_loop=function(e,i,h,V,d,l){var _=e.internal_flags,s=new ze,S=y(576),r=y(ve.SFBMAX),D=new He,o,c=new e0,f=9999999,b=!1,R=!1,t=0;if(te(_,i,l,d,V),_.noise_shaping==0)return 100;N.calc_noise(i,h,r,D,c),D.bits=i.part2_3_length,s.assign(i);var n=0;for(j.arraycopy(V,0,S,0,576);!b;){do{var z=new He,L,U=255;if(_.substep_shaping&2?L=20:L=3,_.sfb21_extra&&m(),!C(e,s,r,V))break;s.scalefac_scale!=0&&(U=254);var re=l-s.part2_length;if(re<=0)break;for(;(s.part2_3_length=g.count_bits(_,V,s,c))>re&&s.global_gain<=U;)s.global_gain++;if(s.global_gain>U)break;if(D.over_count==0){for(;(s.part2_3_length=g.count_bits(_,V,s,c))>f&&s.global_gain<=U;)s.global_gain++;if(s.global_gain>U)break}if(N.calc_noise(s,h,r,z,c),z.bits=s.part2_3_length,i.block_type!=a.SHORT_TYPE?o=e.quant_comp:o=e.quant_comp_short,o=Z(o,D,z)?1:0,o!=0)f=i.part2_3_length,D=z,i.assign(s),n=0,j.arraycopy(V,0,S,0,576);else if(_.full_outer_loop==0&&(++n>L&&D.over_count==0||_.noise_shaping_amp==3&&R&&n>30||_.noise_shaping_amp==3&&R&&s.global_gain-t>15))break}while(s.global_gain+s.scalefac_scale<255);_.noise_shaping_amp==3?m():b=!0}return e.VBR==Y.vbr_rh||e.VBR==Y.vbr_mtrh?j.arraycopy(S,0,V,0,576):_.substep_shaping&1&&m(),D.over_count},this.iteration_finish_one=function(e,i,h){var V=e.l3_side,d=V.tt[i][h];g.best_scalefac_store(e,i,h,V),e.use_best_huffman==1&&g.best_huffman_divide(e,d),v.ResvAdjust(e,d)}}function w(){var v=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*G.SQRT2*.5/2384e-9,.017876148*G.SQRT2*.5/2384e-9,.003134727*G.SQRT2*.5/2384e-9,.002457142*G.SQRT2*.5/2384e-9,971317e-9*G.SQRT2*.5/2384e-9,218868e-9*G.SQRT2*.5/2384e-9,101566e-9*G.SQRT2*.5/2384e-9,13828e-9*G.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],N=12,F=36,g=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],le=g[a.SHORT_TYPE],p=g[a.SHORT_TYPE],k=g[a.SHORT_TYPE],te=g[a.SHORT_TYPE],I=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function Z(B,C,e){for(var i=10,h=C+238-14-286,V=-15;V<0;V++){var d,l,_;d=v[i+-10],l=B[h+-224]*d,_=B[C+224]*d,d=v[i+-9],l+=B[h+-160]*d,_+=B[C+160]*d,d=v[i+-8],l+=B[h+-96]*d,_+=B[C+96]*d,d=v[i+-7],l+=B[h+-32]*d,_+=B[C+32]*d,d=v[i+-6],l+=B[h+32]*d,_+=B[C+-32]*d,d=v[i+-5],l+=B[h+96]*d,_+=B[C+-96]*d,d=v[i+-4],l+=B[h+160]*d,_+=B[C+-160]*d,d=v[i+-3],l+=B[h+224]*d,_+=B[C+-224]*d,d=v[i+-2],l+=B[C+-256]*d,_-=B[h+256]*d,d=v[i+-1],l+=B[C+-192]*d,_-=B[h+192]*d,d=v[i+0],l+=B[C+-128]*d,_-=B[h+128]*d,d=v[i+1],l+=B[C+-64]*d,_-=B[h+64]*d,d=v[i+2],l+=B[C+0]*d,_-=B[h+0]*d,d=v[i+3],l+=B[C+64]*d,_-=B[h+-64]*d,d=v[i+4],l+=B[C+128]*d,_-=B[h+-128]*d,d=v[i+5],l+=B[C+192]*d,_-=B[h+-192]*d,l*=v[i+6],d=_-l,e[30+V*2]=_+l,e[31+V*2]=v[i+7]*d,i+=18,C--,h++}{var l,_,s,S;_=B[C+-16]*v[i+-10],l=B[C+-32]*v[i+-2],_+=(B[C+-48]-B[C+16])*v[i+-9],l+=B[C+-96]*v[i+-1],_+=(B[C+-80]+B[C+48])*v[i+-8],l+=B[C+-160]*v[i+0],_+=(B[C+-112]-B[C+80])*v[i+-7],l+=B[C+-224]*v[i+1],_+=(B[C+-144]+B[C+112])*v[i+-6],l-=B[C+32]*v[i+2],_+=(B[C+-176]-B[C+144])*v[i+-5],l-=B[C+96]*v[i+3],_+=(B[C+-208]+B[C+176])*v[i+-4],l-=B[C+160]*v[i+4],_+=(B[C+-240]-B[C+208])*v[i+-3],l-=B[C+224],s=l-_,S=l+_,_=e[14],l=e[15]-_,e[31]=S+_,e[30]=s+l,e[15]=s-l,e[14]=S-_}{var r;r=e[28]-e[0],e[0]+=e[28],e[28]=r*v[i+-2*18+7],r=e[29]-e[1],e[1]+=e[29],e[29]=r*v[i+-2*18+7],r=e[26]-e[2],e[2]+=e[26],e[26]=r*v[i+-4*18+7],r=e[27]-e[3],e[3]+=e[27],e[27]=r*v[i+-4*18+7],r=e[24]-e[4],e[4]+=e[24],e[24]=r*v[i+-6*18+7],r=e[25]-e[5],e[5]+=e[25],e[25]=r*v[i+-6*18+7],r=e[22]-e[6],e[6]+=e[22],e[22]=r*G.SQRT2,r=e[23]-e[7],e[7]+=e[23],e[23]=r*G.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],r=e[6],e[6]=e[31]-r,e[31]=e[31]+r,r=e[7],e[7]=e[30]-r,e[30]=e[30]+r,r=e[22],e[22]=e[15]-r,e[15]=e[15]+r,r=e[23],e[23]=e[14]-r,e[14]=e[14]+r,r=e[20]-e[8],e[8]+=e[20],e[20]=r*v[i+-10*18+7],r=e[21]-e[9],e[9]+=e[21],e[21]=r*v[i+-10*18+7],r=e[18]-e[10],e[10]+=e[18],e[18]=r*v[i+-12*18+7],r=e[19]-e[11],e[11]+=e[19],e[19]=r*v[i+-12*18+7],r=e[16]-e[12],e[12]+=e[16],e[16]=r*v[i+-14*18+7],r=e[17]-e[13],e[13]+=e[17],e[17]=r*v[i+-14*18+7],r=-e[20]+e[24],e[20]+=e[24],e[24]=r*v[i+-12*18+7],r=-e[21]+e[25],e[21]+=e[25],e[25]=r*v[i+-12*18+7],r=e[4]-e[8],e[4]+=e[8],e[8]=r*v[i+-12*18+7],r=e[5]-e[9],e[5]+=e[9],e[9]=r*v[i+-12*18+7],r=e[0]-e[12],e[0]+=e[12],e[12]=r*v[i+-4*18+7],r=e[1]-e[13],e[1]+=e[13],e[13]=r*v[i+-4*18+7],r=e[16]-e[28],e[16]+=e[28],e[28]=r*v[i+-4*18+7],r=-e[17]+e[29],e[17]+=e[29],e[29]=r*v[i+-4*18+7],r=G.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=r,r=G.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=r,r=G.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=r-e[18],r=G.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=r-e[19],r=e[2],e[19]-=e[3],e[3]-=r,e[2]=e[31]-r,e[31]+=r,r=e[3],e[11]-=e[19],e[18]-=r,e[3]=e[30]-r,e[30]+=r,r=e[18],e[27]-=e[11],e[19]-=r,e[18]=e[15]-r,e[15]+=r,r=e[19],e[10]-=r,e[19]=e[14]-r,e[14]+=r,r=e[10],e[11]-=r,e[10]=e[23]-r,e[23]+=r,r=e[11],e[26]-=r,e[11]=e[22]-r,e[22]+=r,r=e[26],e[27]-=r,e[26]=e[7]-r,e[7]+=r,r=e[27],e[27]=e[6]-r,e[6]+=r,r=G.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=r,r=G.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=r,r=G.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=r,r=G.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=r,r=-G.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=r-e[8],r=-G.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=r-e[9],r=-G.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=r-e[25],r=-G.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=r-e[24],r=e[24]-e[16],e[24]=r,r=e[20]-r,e[20]=r,r=e[28]-r,e[28]=r,r=e[25]-e[17],e[25]=r,r=e[21]-r,e[21]=r,r=e[29]-r,e[29]=r,r=e[17]-e[1],e[17]=r,r=e[9]-r,e[9]=r,r=e[25]-r,e[25]=r,r=e[5]-r,e[5]=r,r=e[21]-r,e[21]=r,r=e[13]-r,e[13]=r,r=e[29]-r,e[29]=r,r=e[1]-e[0],e[1]=r,r=e[16]-r,e[16]=r,r=e[17]-r,e[17]=r,r=e[8]-r,e[8]=r,r=e[9]-r,e[9]=r,r=e[24]-r,e[24]=r,r=e[25]-r,e[25]=r,r=e[4]-r,e[4]=r,r=e[5]-r,e[5]=r,r=e[20]-r,e[20]=r,r=e[21]-r,e[21]=r,r=e[12]-r,e[12]=r,r=e[13]-r,e[13]=r,r=e[28]-r,e[28]=r,r=e[29]-r,e[29]=r,r=e[0],e[0]+=e[31],e[31]-=r,r=e[1],e[1]+=e[30],e[30]-=r,r=e[16],e[16]+=e[15],e[15]-=r,r=e[17],e[17]+=e[14],e[14]-=r,r=e[8],e[8]+=e[23],e[23]-=r,r=e[9],e[9]+=e[22],e[22]-=r,r=e[24],e[24]+=e[7],e[7]-=r,r=e[25],e[25]+=e[6],e[6]-=r,r=e[4],e[4]+=e[27],e[27]-=r,r=e[5],e[5]+=e[26],e[26]-=r,r=e[20],e[20]+=e[11],e[11]-=r,r=e[21],e[21]+=e[10],e[10]-=r,r=e[12],e[12]+=e[19],e[19]-=r,r=e[13],e[13]+=e[18],e[18]-=r,r=e[28],e[28]+=e[3],e[3]-=r,r=e[29],e[29]+=e[2],e[2]-=r}}function M(B,C){for(var e=0;e<3;e++){var i,h,V,d,l,_;d=B[C+2*3]*g[a.SHORT_TYPE][0]-B[C+5*3],i=B[C+0*3]*g[a.SHORT_TYPE][2]-B[C+3*3],h=d+i,V=d-i,d=B[C+5*3]*g[a.SHORT_TYPE][0]+B[C+2*3],i=B[C+3*3]*g[a.SHORT_TYPE][2]+B[C+0*3],l=d+i,_=-d+i,i=(B[C+1*3]*g[a.SHORT_TYPE][1]-B[C+4*3])*2069978111953089e-26,d=(B[C+4*3]*g[a.SHORT_TYPE][1]+B[C+1*3])*2069978111953089e-26,B[C+3*0]=h*190752519173728e-25+i,B[C+3*5]=-l*190752519173728e-25+d,V=V*.8660254037844387*1907525191737281e-26,l=l*.5*1907525191737281e-26+d,B[C+3*1]=V-l,B[C+3*2]=V+l,h=h*.5*1907525191737281e-26-i,_=_*.8660254037844387*1907525191737281e-26,B[C+3*3]=h+_,B[C+3*4]=h-_,C++}}function ae(B,C,e){var i,h;{var V,d,l,_,s,S,r,D;V=e[17]-e[9],l=e[15]-e[11],_=e[14]-e[12],s=e[0]+e[8],S=e[1]+e[7],r=e[2]+e[6],D=e[3]+e[5],B[C+17]=s+r-D-(S-e[4]),h=(s+r-D)*p[19]+(S-e[4]),i=(V-l-_)*p[18],B[C+5]=i+h,B[C+6]=i-h,d=(e[16]-e[10])*p[18],S=S*p[19]+e[4],i=V*p[12]+d+l*p[13]+_*p[14],h=-s*p[16]+S-r*p[17]+D*p[15],B[C+1]=i+h,B[C+2]=i-h,i=V*p[13]-d-l*p[14]+_*p[12],h=-s*p[17]+S-r*p[15]+D*p[16],B[C+9]=i+h,B[C+10]=i-h,i=V*p[14]-d+l*p[12]-_*p[13],h=s*p[15]-S+r*p[16]-D*p[17],B[C+13]=i+h,B[C+14]=i-h}{var o,c,f,b,R,t,n,z;o=e[8]-e[0],f=e[6]-e[2],b=e[5]-e[3],R=e[17]+e[9],t=e[16]+e[10],n=e[15]+e[11],z=e[14]+e[12],B[C+0]=R+n+z+(t+e[13]),i=(R+n+z)*p[19]-(t+e[13]),h=(o-f+b)*p[18],B[C+11]=i+h,B[C+12]=i-h,c=(e[7]-e[1])*p[18],t=e[13]-t*p[19],i=R*p[15]-t+n*p[16]+z*p[17],h=o*p[14]+c+f*p[12]+b*p[13],B[C+3]=i+h,B[C+4]=i-h,i=-R*p[17]+t-n*p[15]-z*p[16],h=o*p[13]+c-f*p[14]-b*p[12],B[C+7]=i+h,B[C+8]=i-h,i=-R*p[16]+t-n*p[17]-z*p[15],h=o*p[12]-c+f*p[13]-b*p[14],B[C+15]=i+h,B[C+16]=i-h}}this.mdct_sub48=function(B,C,e){for(var i=C,h=286,V=0;V<B.channels_out;V++){for(var d=0;d<B.mode_gr;d++){for(var l,_=B.l3_side.tt[d][V],s=_.xr,S=0,r=B.sb_sample[V][1-d],D=0,o=0;o<18/2;o++)for(Z(i,h,r[D]),Z(i,h+32,r[D+1]),D+=2,h+=64,l=1;l<32;l+=2)r[D-1][l]*=-1;for(l=0;l<32;l++,S+=18){var c=_.block_type,f=B.sb_sample[V][d],b=B.sb_sample[V][1-d];if(_.mixed_block_flag!=0&&l<2&&(c=0),B.amp_filter[l]<1e-12)ge.fill(s,S+0,S+18,0);else if(B.amp_filter[l]<1&&m(),c==a.SHORT_TYPE){for(var o=-N/4;o<0;o++){var R=g[a.SHORT_TYPE][o+3];s[S+o*3+9]=f[9+o][I[l]]*R-f[8-o][I[l]],s[S+o*3+18]=f[14-o][I[l]]*R+f[15+o][I[l]],s[S+o*3+10]=f[15+o][I[l]]*R-f[14-o][I[l]],s[S+o*3+19]=b[2-o][I[l]]*R+b[3+o][I[l]],s[S+o*3+11]=b[3+o][I[l]]*R-b[2-o][I[l]],s[S+o*3+20]=b[8-o][I[l]]*R+b[9+o][I[l]]}M(s,S)}else{for(var t=y(18),o=-F/4;o<0;o++){var n,z;n=g[c][o+27]*b[o+9][I[l]]+g[c][o+36]*b[8-o][I[l]],z=g[c][o+9]*f[o+9][I[l]]-g[c][o+18]*f[8-o][I[l]],t[o+9]=n-z*le[3+o+9],t[o+18]=n*le[3+o+9]+z}ae(s,S,t)}if(c!=a.SHORT_TYPE&&l!=0)for(var o=7;o>=0;--o){var L,U;L=s[S+o]*k[20+o]+s[S+-1-o]*te[28+o],U=s[S+o]*te[28+o]-s[S+-1-o]*k[20+o],s[S+-1-o]=L,s[S+o]=U}}}if(i=e,h=286,B.mode_gr==1)for(var re=0;re<18;re++)j.arraycopy(B.sb_sample[V][1][re],0,B.sb_sample[V][0][re],0,32)}}}function x(){this.thm=new ce,this.en=new ce}a.ENCDELAY=576,a.POSTDELAY=1152,a.MDCTDELAY=48,a.FFTOFFSET=224+a.MDCTDELAY,a.DECDELAY=528,a.SBLIMIT=32,a.CBANDS=64,a.SBPSY_l=21,a.SBPSY_s=12,a.SBMAX_l=22,a.SBMAX_s=13,a.PSFB21=6,a.PSFB12=6,a.BLKSIZE=1024,a.HBLKSIZE=a.BLKSIZE/2+1,a.BLKSIZE_s=256,a.HBLKSIZE_s=a.BLKSIZE_s/2+1,a.NORM_TYPE=0,a.START_TYPE=1,a.SHORT_TYPE=2,a.STOP_TYPE=3,a.MPG_MD_LR_LR=0,a.MPG_MD_LR_I=1,a.MPG_MD_MS_LR=2,a.MPG_MD_MS_I=3,a.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function a(){var v=a.MPG_MD_MS_LR,N=null;this.psy=null;var F=null,g=null;this.setModules=function(I,Z,M,ae){N=I,this.psy=Z,F=Z,g=ae};var le=new w;function p(I){var Z,M;if(I.ATH.useAdjust==0){I.ATH.adjust=1;return}if(M=I.loudness_sq[0][0],Z=I.loudness_sq[1][0],I.channels_out==2?m():(M+=M,Z+=Z),I.mode_gr==2&&(M=Math.max(M,Z)),M*=.5,M*=I.ATH.aaSensitivityP,M>.03125)I.ATH.adjust>=1?I.ATH.adjust=1:I.ATH.adjust<I.ATH.adjustLimit&&(I.ATH.adjust=I.ATH.adjustLimit),I.ATH.adjustLimit=1;else{var ae=31.98*M+625e-6;I.ATH.adjust>=ae?(I.ATH.adjust*=ae*.075+.925,I.ATH.adjust<ae&&(I.ATH.adjust=ae)):I.ATH.adjustLimit>=ae?I.ATH.adjust=ae:I.ATH.adjust<I.ATH.adjustLimit&&(I.ATH.adjust=I.ATH.adjustLimit),I.ATH.adjustLimit=ae}}function k(I){var Z,M;for(I.bitrate_stereoMode_Hist[I.bitrate_index][4]++,I.bitrate_stereoMode_Hist[15][4]++,I.channels_out==2&&m(),Z=0;Z<I.mode_gr;++Z)for(M=0;M<I.channels_out;++M){var ae=I.l3_side.tt[Z][M].block_type|0;I.l3_side.tt[Z][M].mixed_block_flag!=0&&(ae=4),I.bitrate_blockType_Hist[I.bitrate_index][ae]++,I.bitrate_blockType_Hist[I.bitrate_index][5]++,I.bitrate_blockType_Hist[15][ae]++,I.bitrate_blockType_Hist[15][5]++}}function te(I,Z){var M=I.internal_flags,ae,B;if(M.lame_encode_frame_init==0){var C,e,i=y(2014),h=y(2014);for(M.lame_encode_frame_init=1,C=0,e=0;C<286+576*(1+M.mode_gr);++C)C<576*M.mode_gr?(i[C]=0,M.channels_out==2&&(h[C]=0)):(i[C]=Z[0][e],M.channels_out==2&&(h[C]=Z[1][e]),++e);for(B=0;B<M.mode_gr;B++)for(ae=0;ae<M.channels_out;ae++)M.l3_side.tt[B][ae].block_type=a.SHORT_TYPE;le.mdct_sub48(M,i,h)}}this.lame_encode_mp3_frame=function(I,Z,M,ae,B,C){var e,i=me([2,2]);i[0][0]=new x,i[0][1]=new x,i[1][0]=new x,i[1][1]=new x;var h=me([2,2]);h[0][0]=new x,h[0][1]=new x,h[1][0]=new x,h[1][1]=new x;var V,d=[null,null],l=I.internal_flags,_=ee([2,4]),s=[.5,.5],S=[[0,0],[0,0]],r=[[0,0],[0,0]],D,o,c;if(d[0]=Z,d[1]=M,l.lame_encode_frame_init==0&&te(I,d),l.padding=0,(l.slot_lag-=l.frac_SpF)<0&&(l.slot_lag+=I.out_samplerate,l.padding=1),l.psymodel!=0){var f,b=[null,null],R=0,t=T(2);for(c=0;c<l.mode_gr;c++){for(o=0;o<l.channels_out;o++)b[o]=d[o],R=576+c*576-a.FFTOFFSET;if(I.VBR==Y.vbr_mtrh||I.VBR==Y.vbr_mt?m():f=F.L3psycho_anal_ns(I,b,R,c,i,h,S[c],r[c],_[c],t),f!=0)return-4;for(I.mode==he.JOINT_STEREO&&m(),o=0;o<l.channels_out;o++){var n=l.l3_side.tt[c][o];n.block_type=t[o],n.mixed_block_flag=0}}}else m();if(p(l),le.mdct_sub48(l,d[0],d[1]),l.mode_ext=a.MPG_MD_LR_LR,I.force_ms?l.mode_ext=a.MPG_MD_MS_LR:I.mode==he.JOINT_STEREO&&m(),l.mode_ext==v?(V=h,D=r):(V=i,D=S),I.analysis&&l.pinfo!=null&&m(),I.VBR==Y.vbr_off||I.VBR==Y.vbr_abr){var z,L;for(z=0;z<18;z++)l.nsPsy.pefirbuf[z]=l.nsPsy.pefirbuf[z+1];for(L=0,c=0;c<l.mode_gr;c++)for(o=0;o<l.channels_out;o++)L+=D[c][o];for(l.nsPsy.pefirbuf[18]=L,L=l.nsPsy.pefirbuf[9],z=0;z<9;z++)L+=(l.nsPsy.pefirbuf[z]+l.nsPsy.pefirbuf[18-z])*a.fircoef[z];for(L=670*5*l.mode_gr*l.channels_out/L,c=0;c<l.mode_gr;c++)for(o=0;o<l.channels_out;o++)D[c][o]*=L}return l.iteration_loop.iteration_loop(I,D,s,V),N.format_bitstream(I),e=N.copy_buffer(l,ae,B,C,1),I.bWriteVbrTag&&g.addVbrFrame(I),I.analysis&&l.pinfo!=null&&m(),k(l),e}}function O(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}function $(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[T(4),T(4)];for(var v=0;v<2;v++)for(var N=0;N<2;N++)this.tt[v][N]=new ze}function ce(){this.l=y(a.SBMAX_l),this.s=ee([a.SBMAX_s,3]);var v=this;this.assign=function(N){j.arraycopy(N.l,0,v.l,0,a.SBMAX_l);for(var F=0;F<a.SBMAX_s;F++)for(var g=0;g<3;g++)v.s[F][g]=N.s[F][g]}}function ue(){this.last_en_subshort=ee([4,9]),this.lastAttacks=T(4),this.pefirbuf=y(19),this.longfact=y(a.SBMAX_l),this.shortfact=y(a.SBMAX_s),this.attackthre=0,this.attackthre_s=0}Ee.MFSIZE=3*1152+a.ENCDELAY-a.MDCTDELAY,Ee.MAX_HEADER_BUF=256,Ee.MAX_BITS_PER_CHANNEL=4095,Ee.MAX_BITS_PER_GRANULE=7680,Ee.BPC=320;function Ee(){var v=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=ee([2,Ee.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new $,this.ms_ratio=y(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=T(2),this.CurrentStep=T(2),this.masking_lower=0,this.bv_scf=T(576),this.pseudohalf=T(ve.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Ee.BPC+1),this.itime=se(2),this.sideinfo_len=0,this.sb_sample=ee([2,2,18,a.SBLIMIT]),this.amp_filter=y(32);function N(){this.write_timing=0,this.ptr=0,this.buf=P(v)}this.header=new Array(Ee.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new Ye,this.minval_l=y(a.CBANDS),this.minval_s=y(a.CBANDS),this.nb_1=ee([4,a.CBANDS]),this.nb_2=ee([4,a.CBANDS]),this.nb_s1=ee([4,a.CBANDS]),this.nb_s2=ee([4,a.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=y(4),this.loudness_sq=ee([2,2]),this.loudness_sq_save=y(2),this.mld_l=y(a.SBMAX_l),this.mld_s=y(a.SBMAX_s),this.bm_l=T(a.SBMAX_l),this.bo_l=T(a.SBMAX_l),this.bm_s=T(a.SBMAX_s),this.bo_s=T(a.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=oe([a.CBANDS,2]),this.s3ind_s=oe([a.CBANDS,2]),this.numlines_s=T(a.CBANDS),this.numlines_l=T(a.CBANDS),this.rnumlines_l=y(a.CBANDS),this.mld_cb_l=y(a.CBANDS),this.mld_cb_s=y(a.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=y(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=T(2),this.nsPsy=new ue,this.VBR_seek_table=new O,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=oe([16,5]),this.bitrate_blockType_Hist=oe([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var F=0;F<this.en.length;F++)this.en[F]=new ce;for(var F=0;F<this.thm.length;F++)this.thm[F]=new ce;for(var F=0;F<this.header.length;F++)this.header[F]=new N}function Be(){var v=y(a.BLKSIZE),N=y(a.BLKSIZE_s/2),F=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function g(p,k,te){var I=0,Z,M,ae;te<<=1;var B=k+te;Z=4;do{var C,e,i,h,V,d,l;l=Z>>1,h=Z,V=Z<<1,d=V+h,Z=V<<1,M=k,ae=M+l;do{var _,s,S,r;s=p[M+0]-p[M+h],_=p[M+0]+p[M+h],r=p[M+V]-p[M+d],S=p[M+V]+p[M+d],p[M+V]=_-S,p[M+0]=_+S,p[M+d]=s-r,p[M+h]=s+r,s=p[ae+0]-p[ae+h],_=p[ae+0]+p[ae+h],r=G.SQRT2*p[ae+d],S=G.SQRT2*p[ae+V],p[ae+V]=_-S,p[ae+0]=_+S,p[ae+d]=s-r,p[ae+h]=s+r,ae+=Z,M+=Z}while(M<B);for(e=F[I+0],C=F[I+1],i=1;i<l;i++){var D,o;D=1-2*C*C,o=2*C*e,M=k+i,ae=k+h-i;do{var c,f,b,_,s,R,S,t,r,n;f=o*p[M+h]-D*p[ae+h],c=D*p[M+h]+o*p[ae+h],s=p[M+0]-c,_=p[M+0]+c,R=p[ae+0]-f,b=p[ae+0]+f,f=o*p[M+d]-D*p[ae+d],c=D*p[M+d]+o*p[ae+d],r=p[M+V]-c,S=p[M+V]+c,n=p[ae+V]-f,t=p[ae+V]+f,f=C*S-e*n,c=e*S+C*n,p[M+V]=_-c,p[M+0]=_+c,p[ae+d]=R-f,p[ae+h]=R+f,f=e*t-C*r,c=C*t+e*r,p[ae+V]=b-c,p[ae+0]=b+c,p[M+d]=s-f,p[M+h]=s+f,ae+=Z,M+=Z}while(M<B);D=e,e=D*F[I+0]-C*F[I+1],C=D*F[I+1]+C*F[I+0]}I+=2}while(Z<te)}var le=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(p,k,te,I,Z){for(var M=0;M<3;M++){var ae=a.BLKSIZE_s/2,B=65535&576/3*(M+1),C=a.BLKSIZE_s/8-1;do{var e,i,h,V,d,l=le[C<<2]&255;e=N[l]*I[te][Z+l+B],d=N[127-l]*I[te][Z+l+B+128],i=e-d,e=e+d,h=N[l+64]*I[te][Z+l+B+64],d=N[63-l]*I[te][Z+l+B+192],V=h-d,h=h+d,ae-=4,k[M][ae+0]=e+h,k[M][ae+2]=e-h,k[M][ae+1]=i+V,k[M][ae+3]=i-V,e=N[l+1]*I[te][Z+l+B+1],d=N[126-l]*I[te][Z+l+B+129],i=e-d,e=e+d,h=N[l+65]*I[te][Z+l+B+65],d=N[62-l]*I[te][Z+l+B+193],V=h-d,h=h+d,k[M][ae+a.BLKSIZE_s/2+0]=e+h,k[M][ae+a.BLKSIZE_s/2+2]=e-h,k[M][ae+a.BLKSIZE_s/2+1]=i+V,k[M][ae+a.BLKSIZE_s/2+3]=i-V}while(--C>=0);g(k[M],ae,a.BLKSIZE_s/2)}},this.fft_long=function(p,k,te,I,Z){var M=a.BLKSIZE/8-1,ae=a.BLKSIZE/2;do{var B,C,e,i,h,V=le[M]&255;B=v[V]*I[te][Z+V],h=v[V+512]*I[te][Z+V+512],C=B-h,B=B+h,e=v[V+256]*I[te][Z+V+256],h=v[V+768]*I[te][Z+V+768],i=e-h,e=e+h,ae-=4,k[ae+0]=B+e,k[ae+2]=B-e,k[ae+1]=C+i,k[ae+3]=C-i,B=v[V+1]*I[te][Z+V+1],h=v[V+513]*I[te][Z+V+513],C=B-h,B=B+h,e=v[V+257]*I[te][Z+V+257],h=v[V+769]*I[te][Z+V+769],i=e-h,e=e+h,k[ae+a.BLKSIZE/2+0]=B+e,k[ae+a.BLKSIZE/2+2]=B-e,k[ae+a.BLKSIZE/2+1]=C+i,k[ae+a.BLKSIZE/2+3]=C-i}while(--M>=0);g(k,ae,a.BLKSIZE/2)},this.init_fft=function(p){for(var k=0;k<a.BLKSIZE;k++)v[k]=.42-.5*Math.cos(2*Math.PI*(k+.5)/a.BLKSIZE)+.08*Math.cos(4*Math.PI*(k+.5)/a.BLKSIZE);for(var k=0;k<a.BLKSIZE_s/2;k++)N[k]=.5*(1-Math.cos(2*Math.PI*(k+.5)/a.BLKSIZE_s))}}function Re(){var v=new Be,N=2.302585092994046,F=2,g=16,le=2,p=16,k=.34,te=1/(14752*14752)/(a.BLKSIZE/2),I=.01,Z=.8,M=.6,ae=.3,B=3.5,C=21,e=.2302585093;function i(q,H){for(var X=0,Me=0;Me<a.BLKSIZE/2;++Me)X+=q[Me]*H.ATH.eql_w[Me];return X*=te,X}function h(q,H,X,Me,xe,ne,be,pe,Ce,We,Te){var b0=q.internal_flags;Ce<2?(v.fft_long(b0,Me[xe],Ce,We,Te),v.fft_short(b0,ne[be],Ce,We,Te)):Ce==2&&m(),H[0]=Me[xe+0][0],H[0]*=H[0];for(var o0=a.BLKSIZE/2-1;o0>=0;--o0){var d0=Me[xe+0][a.BLKSIZE/2-o0],S0=Me[xe+0][a.BLKSIZE/2+o0];H[a.BLKSIZE/2-o0]=(d0*d0+S0*S0)*.5}for(var c0=2;c0>=0;--c0){X[c0][0]=ne[be+0][c0][0],X[c0][0]*=X[c0][0];for(var o0=a.BLKSIZE_s/2-1;o0>=0;--o0){var d0=ne[be+0][c0][a.BLKSIZE_s/2-o0],S0=ne[be+0][c0][a.BLKSIZE_s/2+o0];X[c0][a.BLKSIZE_s/2-o0]=(d0*d0+S0*S0)*.5}}{for(var Ge=0,o0=11;o0<a.HBLKSIZE;o0++)Ge+=H[o0];b0.tot_ener[Ce]=Ge}q.analysis&&m(),q.athaa_loudapprox==2&&Ce<2&&(b0.loudness_sq[pe][Ce]=b0.loudness_sq_save[Ce],b0.loudness_sq_save[Ce]=i(H,b0))}var V=8,d=23,l=15,_,s,S,r=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function D(){_=Math.pow(10,(V+1)/16),s=Math.pow(10,(d+1)/16),S=Math.pow(10,l/10)}var o=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],c=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],f=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function b(q,H,X,Me,xe,ne){var be;if(H>q)if(H<q*s)be=H/q;else return q+H;else{if(q>=H*s)return q+H;be=q/H}if(q+=H,Me+3<=6){if(be>=_)return q;var pe=0|G.FAST_LOG10_X(be,16);return q*c[pe]}var pe=0|G.FAST_LOG10_X(be,16);if(H=xe.ATH.cb_l[X]*xe.ATH.adjust,q<S*H){if(q>H){var Ce,We;return Ce=1,pe<=13&&(Ce=f[pe]),We=G.FAST_LOG10_X(q/H,10/15),q*((o[pe]-Ce)*We+Ce)}return pe>13?q:q*f[pe]}return q*o[pe]}function R(q,H,X,Me,xe){var ne,be,pe=0,Ce=0;for(ne=be=0;ne<a.SBMAX_s;++be,++ne){for(var We=q.bo_s[ne],Te=q.npart_s,b0=We<Te?We:Te;be<b0;)pe+=H[be],Ce+=X[be],be++;if(q.en[Me].s[ne][xe]=pe,q.thm[Me].s[ne][xe]=Ce,be>=Te){++ne;break}{var o0=q.PSY.bo_s_weight[ne],d0=1-o0;pe=o0*H[be],Ce=o0*X[be],q.en[Me].s[ne][xe]+=pe,q.thm[Me].s[ne][xe]+=Ce,pe=d0*H[be],Ce=d0*X[be]}}for(;ne<a.SBMAX_s;++ne)q.en[Me].s[ne][xe]=0,q.thm[Me].s[ne][xe]=0}function t(q,H,X,Me){var xe,ne,be=0,pe=0;for(xe=ne=0;xe<a.SBMAX_l;++ne,++xe){for(var Ce=q.bo_l[xe],We=q.npart_l,Te=Ce<We?Ce:We;ne<Te;)be+=H[ne],pe+=X[ne],ne++;if(q.en[Me].l[xe]=be,q.thm[Me].l[xe]=pe,ne>=We){++xe;break}{var b0=q.PSY.bo_l_weight[xe],o0=1-b0;be=b0*H[ne],pe=b0*X[ne],q.en[Me].l[xe]+=be,q.thm[Me].l[xe]+=pe,be=o0*H[ne],pe=o0*X[ne]}}for(;xe<a.SBMAX_l;++xe)q.en[Me].l[xe]=0,q.thm[Me].l[xe]=0}function n(q,H,X,Me,xe,ne){var be=q.internal_flags,pe,Ce;for(Ce=pe=0;Ce<be.npart_s;++Ce){for(var We=0,Te=be.numlines_s[Ce],b0=0;b0<Te;++b0,++pe){var o0=H[ne][pe];We+=o0}X[Ce]=We}for(pe=Ce=0;Ce<be.npart_s;Ce++){var d0=be.s3ind_s[Ce][0],S0=be.s3_ss[pe++]*X[d0];for(++d0;d0<=be.s3ind_s[Ce][1];)S0+=be.s3_ss[pe]*X[d0],++pe,++d0;{var c0=le*be.nb_s1[xe][Ce];Me[Ce]=Math.min(S0,c0)}if(be.blocktype_old[xe&1]==a.SHORT_TYPE){var c0=p*be.nb_s2[xe][Ce],Ge=Me[Ce];Me[Ce]=Math.min(c0,Ge)}be.nb_s2[xe][Ce]=be.nb_s1[xe][Ce],be.nb_s1[xe][Ce]=S0}for(;Ce<=a.CBANDS;++Ce)X[Ce]=0,Me[Ce]=0}function z(q,H,X,Me){var xe=q.internal_flags;q.short_blocks==ie.short_block_coupled&&!(H[0]!=0&&H[1]!=0)&&(H[0]=H[1]=0);for(var ne=0;ne<xe.channels_out;ne++)Me[ne]=a.NORM_TYPE,q.short_blocks==ie.short_block_dispensed&&(H[ne]=1),q.short_blocks==ie.short_block_forced&&(H[ne]=0),H[ne]!=0?xe.blocktype_old[ne]==a.SHORT_TYPE&&(Me[ne]=a.STOP_TYPE):(Me[ne]=a.SHORT_TYPE,xe.blocktype_old[ne]==a.NORM_TYPE&&(xe.blocktype_old[ne]=a.START_TYPE),xe.blocktype_old[ne]==a.STOP_TYPE&&(xe.blocktype_old[ne]=a.SHORT_TYPE)),X[ne]=xe.blocktype_old[ne],xe.blocktype_old[ne]=Me[ne]}function L(q,H,X){return X>=1?q:X<=0?H:H>0?Math.pow(q/H,X)*H:0}var U=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function re(q,H){for(var X=309.07,Me=0;Me<a.SBMAX_s-1;Me++)for(var xe=0;xe<3;xe++){var ne=q.thm.s[Me][xe];if(ne>0){var be=ne*H,pe=q.en.s[Me][xe];pe>be&&(pe>be*1e10?X+=U[Me]*(10*N):X+=U[Me]*G.FAST_LOG10(pe/be))}}return X}var _e=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function de(q,H){for(var X=281.0575,Me=0;Me<a.SBMAX_l-1;Me++){var xe=q.thm.l[Me];if(xe>0){var ne=xe*H,be=q.en.l[Me];be>ne&&(be>ne*1e10?X+=_e[Me]*(10*N):X+=_e[Me]*G.FAST_LOG10(be/ne))}}return X}function Ne(q,H,X,Me,xe){var ne,be;for(ne=be=0;ne<q.npart_l;++ne){var pe=0,Ce=0,We;for(We=0;We<q.numlines_l[ne];++We,++be){var Te=H[be];pe+=Te,Ce<Te&&(Ce=Te)}X[ne]=pe,Me[ne]=Ce,xe[ne]=pe*q.rnumlines_l[ne]}}function je(q,H,X,Me){var xe=r.length-1,ne=0,be=X[ne]+X[ne+1];if(be>0){var pe=H[ne];pe<H[ne+1]&&(pe=H[ne+1]),be=20*(pe*2-be)/(be*(q.numlines_l[ne]+q.numlines_l[ne+1]-1));var Ce=0|be;Ce>xe&&(Ce=xe),Me[ne]=Ce}else Me[ne]=0;for(ne=1;ne<q.npart_l-1;ne++)if(be=X[ne-1]+X[ne]+X[ne+1],be>0){var pe=H[ne-1];pe<H[ne]&&(pe=H[ne]),pe<H[ne+1]&&(pe=H[ne+1]),be=20*(pe*3-be)/(be*(q.numlines_l[ne-1]+q.numlines_l[ne]+q.numlines_l[ne+1]-1));var Ce=0|be;Ce>xe&&(Ce=xe),Me[ne]=Ce}else Me[ne]=0;if(be=X[ne-1]+X[ne],be>0){var pe=H[ne-1];pe<H[ne]&&(pe=H[ne]),be=20*(pe*2-be)/(be*(q.numlines_l[ne-1]+q.numlines_l[ne]-1));var Ce=0|be;Ce>xe&&(Ce=xe),Me[ne]=Ce}else Me[ne]=0}var Xe=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(q,H,X,Me,xe,ne,be,pe,Ce,We){var Te=q.internal_flags,b0=ee([2,a.BLKSIZE]),o0=ee([2,3,a.BLKSIZE_s]),d0=y(a.CBANDS+1),S0=y(a.CBANDS+1),c0=y(a.CBANDS+2),Ge=T(2),v0=T(2),E0,Ve,t0,Ke,p0,$0,N0,f0,Et=ee([2,576]),P0,rt=T(a.CBANDS+2),ot=T(a.CBANDS+2);for(ge.fill(ot,0),E0=Te.channels_out,q.mode==he.JOINT_STEREO&&(E0=4),q.VBR==Y.vbr_off?P0=Te.ResvMax==0?0:Te.ResvSize/Te.ResvMax*.5:q.VBR==Y.vbr_rh||q.VBR==Y.vbr_mtrh||q.VBR==Y.vbr_mt?P0=.6:P0=1,Ve=0;Ve<Te.channels_out;Ve++){var _t=H[Ve],ft=X+576-350-C+192;for(Ke=0;Ke<576;Ke++){var Yt,jt;for(Yt=_t[ft+Ke+10],jt=0,p0=0;p0<(C-1)/2-1;p0+=2)Yt+=Xe[p0]*(_t[ft+Ke+p0]+_t[ft+Ke+C-p0]),jt+=Xe[p0+1]*(_t[ft+Ke+p0+1]+_t[ft+Ke+C-p0-1]);Et[Ve][Ke]=Yt+jt}xe[Me][Ve].en.assign(Te.en[Ve]),xe[Me][Ve].thm.assign(Te.thm[Ve]),E0>2&&m()}for(Ve=0;Ve<E0;Ve++){var _a,fa,U0=y(12),Q0=[0,0,0,0],Gt=y(12),va=1,da,ha=y(a.CBANDS),ma=y(a.CBANDS),A0=[0,0,0,0],ba=y(a.HBLKSIZE),pa=ee([3,a.HBLKSIZE_s]);for(Ke=0;Ke<3;Ke++)U0[Ke]=Te.nsPsy.last_en_subshort[Ve][Ke+6],Gt[Ke]=U0[Ke]/Te.nsPsy.last_en_subshort[Ve][Ke+4],Q0[0]+=U0[Ke];Ve==2&&m();{var xa=Et[Ve&1],vt=0;for(Ke=0;Ke<9;Ke++){for(var Za=vt+64,R0=1;vt<Za;vt++)R0<Math.abs(xa[vt])&&(R0=Math.abs(xa[vt]));Te.nsPsy.last_en_subshort[Ve][Ke]=U0[Ke+3]=R0,Q0[1+Ke/3]+=R0,R0>U0[Ke+3-2]?R0=R0/U0[Ke+3-2]:U0[Ke+3-2]>R0*10?R0=U0[Ke+3-2]/(R0*10):R0=0,Gt[Ke+3]=R0}}for(q.analysis&&m(),da=Ve==3?Te.nsPsy.attackthre_s:Te.nsPsy.attackthre,Ke=0;Ke<12;Ke++)A0[Ke/3]==0&&Gt[Ke]>da&&(A0[Ke/3]=Ke%3+1);for(Ke=1;Ke<4;Ke++){var qt;Q0[Ke-1]>Q0[Ke]?qt=Q0[Ke-1]/Q0[Ke]:qt=Q0[Ke]/Q0[Ke-1],qt<1.7&&(A0[Ke]=0,Ke==1&&(A0[0]=0))}for(A0[0]!=0&&Te.nsPsy.lastAttacks[Ve]!=0&&(A0[0]=0),(Te.nsPsy.lastAttacks[Ve]==3||A0[0]+A0[1]+A0[2]+A0[3]!=0)&&(va=0,A0[1]!=0&&A0[0]!=0&&(A0[1]=0),A0[2]!=0&&A0[1]!=0&&(A0[2]=0),A0[3]!=0&&A0[2]!=0&&(A0[3]=0)),Ve<2?v0[Ve]=va:m(),Ce[Ve]=Te.tot_ener[Ve],fa=o0,_a=b0,h(q,ba,pa,_a,Ve&1,fa,Ve&1,Me,Ve,H,X),Ne(Te,ba,d0,ha,ma),je(Te,ha,ma,rt),f0=0;f0<3;f0++){var Zt,O0;for(n(q,pa,S0,c0,Ve,f0),R(Te,S0,c0,Ve,f0),N0=0;N0<a.SBMAX_s;N0++){if(O0=Te.thm[Ve].s[N0][f0],O0*=Z,A0[f0]>=2||A0[f0+1]==1){var dt=f0!=0?f0-1:2,R0=L(Te.thm[Ve].s[N0][dt],O0,M*P0);O0=Math.min(O0,R0)}if(A0[f0]==1){var dt=f0!=0?f0-1:2,R0=L(Te.thm[Ve].s[N0][dt],O0,ae*P0);O0=Math.min(O0,R0)}else if(f0!=0&&A0[f0-1]==3||f0==0&&Te.nsPsy.lastAttacks[Ve]==3){var dt=f0!=2?f0+1:0,R0=L(Te.thm[Ve].s[N0][dt],O0,ae*P0);O0=Math.min(O0,R0)}Zt=U0[f0*3+3]+U0[f0*3+4]+U0[f0*3+5],U0[f0*3+5]*6<Zt&&(O0*=.5,U0[f0*3+4]*6<Zt&&(O0*=.5)),Te.thm[Ve].s[N0][f0]=O0}}for(Te.nsPsy.lastAttacks[Ve]=A0[2],$0=0,t0=0;t0<Te.npart_l;t0++){for(var nt=Te.s3ind[t0][0],Wt=d0[nt]*r[rt[nt]],st=Te.s3_ll[$0++]*Wt;++nt<=Te.s3ind[t0][1];)Wt=d0[nt]*r[rt[nt]],st=b(st,Te.s3_ll[$0++]*Wt,nt,nt-t0,Te);st*=.158489319246111,Te.blocktype_old[Ve&1]==a.SHORT_TYPE?c0[t0]=st:c0[t0]=L(Math.min(st,Math.min(F*Te.nb_1[Ve][t0],g*Te.nb_2[Ve][t0])),st,P0),Te.nb_2[Ve][t0]=Te.nb_1[Ve][t0],Te.nb_1[Ve][t0]=st}for(;t0<=a.CBANDS;++t0)d0[t0]=0,c0[t0]=0;t(Te,d0,c0,Ve)}for((q.mode==he.STEREO||q.mode==he.JOINT_STEREO)&&m(),q.mode==he.JOINT_STEREO&&m(),z(q,v0,We,Ge),Ve=0;Ve<E0;Ve++){var Bt,Rt=0,wa,$t;Ve>1?m():(Bt=be,Rt=0,wa=We[Ve],$t=xe[Me][Ve]),wa==a.SHORT_TYPE?Bt[Rt+Ve]=re($t,Te.masking_lower):Bt[Rt+Ve]=de($t,Te.masking_lower),q.analysis&&(Te.pinfo.pe[Me][Ve]=Bt[Rt+Ve])}return 0};function y0(q){var H,X,Me,xe;return H=q,H>=0?H*=3:H*=1.5,H>=.5&&H<=2.5?(xe=H-.5,X=8*(xe*xe-2*xe)):X=0,H+=.474,Me=15.811389+7.5*H-17.5*Math.sqrt(1+H*H),Me<=-60?0:(H=Math.exp((X+Me)*e),H/=.6609193,H)}function g0(q){return q<0&&(q=0),q=q*.001,13*Math.atan(.76*q)+3.5*Math.atan(q*q/(7.5*7.5))}function m0(q,H,X,Me,xe,ne,be,pe,Ce,We,Te,b0){var o0=y(a.CBANDS+1),d0=pe/(b0>15?2*576:2*192),S0=T(a.HBLKSIZE),c0;pe/=Ce;var Ge=0,v0=0;for(c0=0;c0<a.CBANDS;c0++){var E0,Ve;for(E0=g0(pe*Ge),o0[c0]=pe*Ge,Ve=Ge;g0(pe*Ve)-E0<k&&Ve<=Ce/2;Ve++);for(q[c0]=Ve-Ge,v0=c0+1;Ge<Ve;)S0[Ge++]=c0;if(Ge>Ce/2){Ge=Ce/2,++c0;break}}o0[c0]=pe*Ge;for(var t0=0;t0<b0;t0++){var Ke,p0,$0,N0,f0;$0=We[t0],N0=We[t0+1],Ke=0|Math.floor(.5+Te*($0-.5)),Ke<0&&(Ke=0),p0=0|Math.floor(.5+Te*(N0-.5)),p0>Ce/2&&(p0=Ce/2),X[t0]=(S0[Ke]+S0[p0])/2,H[t0]=S0[p0];var Et=d0*N0;be[t0]=(Et-o0[H[t0]])/(o0[H[t0]+1]-o0[H[t0]]),be[t0]<0?be[t0]=0:be[t0]>1&&(be[t0]=1),f0=g0(pe*We[t0]*Te),f0=Math.min(f0,15.5)/15.5,ne[t0]=Math.pow(10,1.25*(1-Math.cos(Math.PI*f0))-2.5)}Ge=0;for(var P0=0;P0<v0;P0++){var rt=q[P0],E0,ot;E0=g0(pe*Ge),ot=g0(pe*(Ge+rt-1)),Me[P0]=.5*(E0+ot),E0=g0(pe*(Ge-.5)),ot=g0(pe*(Ge+rt-.5)),xe[P0]=ot-E0,Ge+=rt}return v0}function w0(q,H,X,Me,xe,ne){var be=ee([a.CBANDS,a.CBANDS]),pe,Ce=0;if(ne)for(var We=0;We<H;We++)for(pe=0;pe<H;pe++){var Te=y0(X[We]-X[pe])*Me[pe];be[We][pe]=Te*xe[We]}else m();for(var We=0;We<H;We++){for(pe=0;pe<H&&!(be[We][pe]>0);pe++);for(q[We][0]=pe,pe=H-1;pe>0&&!(be[We][pe]>0);pe--);q[We][1]=pe,Ce+=q[We][1]-q[We][0]+1}for(var b0=y(Ce),o0=0,We=0;We<H;We++)for(pe=q[We][0];pe<=q[We][1];pe++)b0[o0++]=be[We][pe];return b0}function k0(q){var H=g0(q);return H=Math.min(H,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*H))-2.5)}this.psymodel_init=function(q){var H=q.internal_flags,X,Me=!0,xe=13,ne=24,be=0,pe=0,Ce=-8.25,We=-4.5,Te=y(a.CBANDS),b0=y(a.CBANDS),o0=y(a.CBANDS),d0=q.out_samplerate;switch(q.experimentalZ){default:case 0:Me=!0;break;case 1:Me=!(q.VBR==Y.vbr_mtrh||q.VBR==Y.vbr_mt);break;case 2:Me=!1;break;case 3:xe=8,be=-1.75,pe=-.0125,Ce=-8.25,We=-2.25;break}for(H.ms_ener_ratio_old=.25,H.blocktype_old[0]=H.blocktype_old[1]=a.NORM_TYPE,X=0;X<4;++X){for(var Ge=0;Ge<a.CBANDS;++Ge)H.nb_1[X][Ge]=1e20,H.nb_2[X][Ge]=1e20,H.nb_s1[X][Ge]=H.nb_s2[X][Ge]=1;for(var S0=0;S0<a.SBMAX_l;S0++)H.en[X].l[S0]=1e20,H.thm[X].l[S0]=1e20;for(var Ge=0;Ge<3;++Ge){for(var S0=0;S0<a.SBMAX_s;S0++)H.en[X].s[S0][Ge]=1e20,H.thm[X].s[S0][Ge]=1e20;H.nsPsy.lastAttacks[X]=0}for(var Ge=0;Ge<9;Ge++)H.nsPsy.last_en_subshort[X][Ge]=10}for(H.loudness_sq_save[0]=H.loudness_sq_save[1]=0,H.npart_l=m0(H.numlines_l,H.bo_l,H.bm_l,Te,b0,H.mld_l,H.PSY.bo_l_weight,d0,a.BLKSIZE,H.scalefac_band.l,a.BLKSIZE/(2*576),a.SBMAX_l),X=0;X<H.npart_l;X++){var c0=be;Te[X]>=xe&&(c0=pe*(Te[X]-xe)/(ne-xe)+be*(ne-Te[X])/(ne-xe)),o0[X]=Math.pow(10,c0/10),H.numlines_l[X]>0?H.rnumlines_l[X]=1/H.numlines_l[X]:H.rnumlines_l[X]=0}H.s3_ll=w0(H.s3ind,H.npart_l,Te,b0,o0,Me);var Ge=0;for(X=0;X<H.npart_l;X++){var v0;v0=ye.MAX_VALUE;for(var E0=0;E0<H.numlines_l[X];E0++,Ge++){var Ve=d0*Ge/(1e3*a.BLKSIZE),t0;t0=this.ATHformula(Ve*1e3,q)-20,t0=Math.pow(10,.1*t0),t0*=H.numlines_l[X],v0>t0&&(v0=t0)}H.ATH.cb_l[X]=v0,v0=-20+Te[X]*20/10,v0>6&&(v0=100),v0<-15&&(v0=-15),v0-=8,H.minval_l[X]=Math.pow(10,v0/10)*H.numlines_l[X]}for(H.npart_s=m0(H.numlines_s,H.bo_s,H.bm_s,Te,b0,H.mld_s,H.PSY.bo_s_weight,d0,a.BLKSIZE_s,H.scalefac_band.s,a.BLKSIZE_s/(2*192),a.SBMAX_s),Ge=0,X=0;X<H.npart_s;X++){var v0,c0=Ce;Te[X]>=xe&&(c0=We*(Te[X]-xe)/(ne-xe)+Ce*(ne-Te[X])/(ne-xe)),o0[X]=Math.pow(10,c0/10),v0=ye.MAX_VALUE;for(var E0=0;E0<H.numlines_s[X];E0++,Ge++){var Ve=d0*Ge/(1e3*a.BLKSIZE_s),t0;t0=this.ATHformula(Ve*1e3,q)-20,t0=Math.pow(10,.1*t0),t0*=H.numlines_s[X],v0>t0&&(v0=t0)}H.ATH.cb_s[X]=v0,v0=-7+Te[X]*7/12,Te[X]>12&&(v0*=1+Math.log(1+v0)*3.1),Te[X]<12&&(v0*=1+Math.log(1-v0)*2.3),v0<-15&&(v0=-15),v0-=8,H.minval_s[X]=Math.pow(10,v0/10)*H.numlines_s[X]}H.s3_ss=w0(H.s3ind_s,H.npart_s,Te,b0,o0,Me),D(),v.init_fft(H),H.decay=Math.exp(-1*N/(I*d0/192));{var Ke;Ke=B,q.exp_nspsytune&2&&(Ke=1),Math.abs(q.msfix)>0&&(Ke=q.msfix),q.msfix=Ke;for(var p0=0;p0<H.npart_l;p0++)H.s3ind[p0][1]>H.npart_l-1&&(H.s3ind[p0][1]=H.npart_l-1)}var $0=576*H.mode_gr/d0;if(H.ATH.decay=Math.pow(10,-12/10*$0),H.ATH.adjust=.01,H.ATH.adjustLimit=1,q.ATHtype!=-1){var Ve,N0=q.out_samplerate/a.BLKSIZE,f0=0;for(Ve=0,X=0;X<a.BLKSIZE/2;++X)Ve+=N0,H.ATH.eql_w[X]=1/Math.pow(10,this.ATHformula(Ve,q)/10),f0+=H.ATH.eql_w[X];for(f0=1/f0,X=a.BLKSIZE/2;--X>=0;)H.ATH.eql_w[X]*=f0}{for(var p0=Ge=0;p0<H.npart_s;++p0)for(X=0;X<H.numlines_s[p0];++X)++Ge;for(var p0=Ge=0;p0<H.npart_l;++p0)for(X=0;X<H.numlines_l[p0];++X)++Ge}for(Ge=0,X=0;X<H.npart_l;X++){var Ve=d0*(Ge+H.numlines_l[X]/2)/(1*a.BLKSIZE);H.mld_cb_l[X]=k0(Ve),Ge+=H.numlines_l[X]}for(;X<a.CBANDS;++X)H.mld_cb_l[X]=1;for(Ge=0,X=0;X<H.npart_s;X++){var Ve=d0*(Ge+H.numlines_s[X]/2)/(1*a.BLKSIZE_s);H.mld_cb_s[X]=k0(Ve),Ge+=H.numlines_s[X]}for(;X<a.CBANDS;++X)H.mld_cb_s[X]=1;return 0};function q0(q,H){q<-.3&&(q=3410),q/=1e3,q=Math.max(.1,q);var X=3.64*Math.pow(q,-.8)-6.8*Math.exp(-.6*Math.pow(q-3.4,2))+6*Math.exp(-.15*Math.pow(q-8.7,2))+(.6+.04*H)*.001*Math.pow(q,4);return X}this.ATHformula=function(q,H){var X;switch(H.ATHtype){case 0:X=q0(q,9);break;case 1:X=q0(q,-1);break;case 2:X=q0(q,0);break;case 3:X=q0(q,1)+6;break;case 4:X=q0(q,H.ATHcurve);break;default:X=q0(q,0);break}return X}}function Se(){var v=this,N=128*1024;Se.V9=410,Se.V8=420,Se.V7=430,Se.V6=440,Se.V5=450,Se.V4=460,Se.V3=470,Se.V2=480,Se.V1=490,Se.V0=500,Se.R3MIX=1e3,Se.STANDARD=1001,Se.EXTREME=1002,Se.INSANE=1003,Se.STANDARD_FAST=1004,Se.EXTREME_FAST=1005,Se.MEDIUM=1006,Se.MEDIUM_FAST=1007;var F=16384+N;Se.LAME_MAXMP3BUFFER=F;var g,le,p,k,te,I=new Re,Z,M;this.enc=new a,this.setModules=function(t,n,z,L,U,re,_e,de,Ne){g=t,le=n,p=z,k=L,te=U,Z=re,M=de,this.enc.setModules(le,I,k,Z)};function ae(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=y(a.SBMAX_l),this.bo_s_weight=y(a.SBMAX_s)}function B(){this.lowerlimit=0}function C(t,n){this.lowpass=n}var e=4294479419;function i(t){var n;return t.class_id=e,n=t.internal_flags=new Ee,t.mode=he.NOT_SET,t.original=1,t.in_samplerate=44100,t.num_channels=2,t.num_samples=-1,t.bWriteVbrTag=!0,t.quality=-1,t.short_blocks=null,n.subblock_gain=-1,t.lowpassfreq=0,t.highpassfreq=0,t.lowpasswidth=-1,t.highpasswidth=-1,t.VBR=Y.vbr_off,t.VBR_q=4,t.ATHcurve=-1,t.VBR_mean_bitrate_kbps=128,t.VBR_min_bitrate_kbps=0,t.VBR_max_bitrate_kbps=0,t.VBR_hard_min=0,n.VBR_min_bitrate=1,n.VBR_max_bitrate=13,t.quant_comp=-1,t.quant_comp_short=-1,t.msfix=-1,n.resample_ratio=1,n.OldValue[0]=180,n.OldValue[1]=180,n.CurrentStep[0]=4,n.CurrentStep[1]=4,n.masking_lower=1,n.nsPsy.attackthre=-1,n.nsPsy.attackthre_s=-1,t.scale=-1,t.athaa_type=-1,t.ATHtype=-1,t.athaa_loudapprox=-1,t.athaa_sensitivity=0,t.useTemporal=null,t.interChRatio=-1,n.mf_samples_to_encode=a.ENCDELAY+a.POSTDELAY,t.encoder_padding=0,n.mf_size=a.ENCDELAY-a.MDCTDELAY,t.findReplayGain=!1,t.decode_on_the_fly=!1,n.decode_on_the_fly=!1,n.findReplayGain=!1,n.findPeakSample=!1,n.RadioGain=0,n.AudiophileGain=0,n.noclipGainChange=0,n.noclipScale=-1,t.preset=0,t.write_id3tag_automatic=!0,0}this.lame_init=function(){var t=new Ue;return i(t),t.lame_allocated_gfp=1,t};function h(t){return t>1?0:t<=0?1:Math.cos(Math.PI/2*t)}this.nearestBitrateFullIndex=function(t){var n=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],z=0,L=0,U=0,re=0;re=n[16],U=16,L=n[16],z=16;for(var _e=0;_e<16;_e++)if(Math.max(t,n[_e+1])!=t){re=n[_e+1],U=_e+1,L=n[_e],z=_e;break}return re-t>t-L?z:U};function V(t,n){switch(t){case 44100:return n.version=1,0;case 48e3:return n.version=1,1;case 32e3:return n.version=1,2;case 22050:return n.version=0,0;case 24e3:return n.version=0,1;case 16e3:return n.version=0,2;case 11025:return n.version=0,0;case 12e3:return n.version=0,1;case 8e3:return n.version=0,2;default:return n.version=0,-1}}function d(t,n,z){z<16e3&&(n=2);for(var L=E.bitrate_table[n][1],U=2;U<=14;U++)E.bitrate_table[n][U]>0&&Math.abs(E.bitrate_table[n][U]-t)<Math.abs(L-t)&&(L=E.bitrate_table[n][U]);return L}function l(t,n,z){z<16e3&&(n=2);for(var L=0;L<=14;L++)if(E.bitrate_table[n][L]>0&&E.bitrate_table[n][L]==t)return L;return-1}function _(t,n){var z=[new C(8,2e3),new C(16,3700),new C(24,3900),new C(32,5500),new C(40,7e3),new C(48,7500),new C(56,1e4),new C(64,11e3),new C(80,13500),new C(96,15100),new C(112,15600),new C(128,17e3),new C(160,17500),new C(192,18600),new C(224,19400),new C(256,19700),new C(320,20500)],L=v.nearestBitrateFullIndex(n);t.lowerlimit=z[L].lowpass}function s(t){var n=t.internal_flags,z=32;if(n.lowpass1>0){for(var L=999,U=0;U<=31;U++){var re=U/31;re>=n.lowpass2&&(z=Math.min(z,U)),n.lowpass1<re&&re<n.lowpass2&&(L=Math.min(L,U))}L==999?n.lowpass1=(z-.75)/31:n.lowpass1=(L-.75)/31,n.lowpass2=z/31}n.highpass2>0&&m(),n.highpass2>0&&m();for(var U=0;U<32;U++){var _e,de,re=U/31;n.highpass2>n.highpass1?m():_e=1,n.lowpass2>n.lowpass1?de=h((re-n.lowpass1)/(n.lowpass2-n.lowpass1+1e-20)):de=1,n.amp_filter[U]=_e*de}}function S(t){var n=t.internal_flags;switch(t.quality){default:case 9:n.psymodel=0,n.noise_shaping=0,n.noise_shaping_amp=0,n.noise_shaping_stop=0,n.use_best_huffman=0,n.full_outer_loop=0;break;case 8:t.quality=7;case 7:n.psymodel=1,n.noise_shaping=0,n.noise_shaping_amp=0,n.noise_shaping_stop=0,n.use_best_huffman=0,n.full_outer_loop=0;break;case 6:n.psymodel=1,n.noise_shaping==0&&(n.noise_shaping=1),n.noise_shaping_amp=0,n.noise_shaping_stop=0,n.subblock_gain==-1&&(n.subblock_gain=1),n.use_best_huffman=0,n.full_outer_loop=0;break;case 5:n.psymodel=1,n.noise_shaping==0&&(n.noise_shaping=1),n.noise_shaping_amp=0,n.noise_shaping_stop=0,n.subblock_gain==-1&&(n.subblock_gain=1),n.use_best_huffman=0,n.full_outer_loop=0;break;case 4:n.psymodel=1,n.noise_shaping==0&&(n.noise_shaping=1),n.noise_shaping_amp=0,n.noise_shaping_stop=0,n.subblock_gain==-1&&(n.subblock_gain=1),n.use_best_huffman=1,n.full_outer_loop=0;break;case 3:n.psymodel=1,n.noise_shaping==0&&(n.noise_shaping=1),n.noise_shaping_amp=1,n.noise_shaping_stop=1,n.subblock_gain==-1&&(n.subblock_gain=1),n.use_best_huffman=1,n.full_outer_loop=0;break;case 2:n.psymodel=1,n.noise_shaping==0&&(n.noise_shaping=1),n.substep_shaping==0&&(n.substep_shaping=2),n.noise_shaping_amp=1,n.noise_shaping_stop=1,n.subblock_gain==-1&&(n.subblock_gain=1),n.use_best_huffman=1,n.full_outer_loop=0;break;case 1:n.psymodel=1,n.noise_shaping==0&&(n.noise_shaping=1),n.substep_shaping==0&&(n.substep_shaping=2),n.noise_shaping_amp=2,n.noise_shaping_stop=1,n.subblock_gain==-1&&(n.subblock_gain=1),n.use_best_huffman=1,n.full_outer_loop=0;break;case 0:n.psymodel=1,n.noise_shaping==0&&(n.noise_shaping=1),n.substep_shaping==0&&(n.substep_shaping=2),n.noise_shaping_amp=2,n.noise_shaping_stop=1,n.subblock_gain==-1&&(n.subblock_gain=1),n.use_best_huffman=1,n.full_outer_loop=0;break}}function r(t){var n=t.internal_flags;t.frameNum=0,t.write_id3tag_automatic&&M.id3tag_write_v2(t),n.bitrate_stereoMode_Hist=oe([16,5]),n.bitrate_blockType_Hist=oe([16,6]),n.PeakSample=0,t.bWriteVbrTag&&Z.InitVbrTag(t)}this.lame_init_params=function(t){var n=t.internal_flags;if(n.Class_ID=0,n.ATH==null&&(n.ATH=new De),n.PSY==null&&(n.PSY=new ae),n.rgdata==null&&(n.rgdata=new Ze),n.channels_in=t.num_channels,n.channels_in==1&&(t.mode=he.MONO),n.channels_out=t.mode==he.MONO?1:2,n.mode_ext=a.MPG_MD_MS_LR,t.mode==he.MONO&&(t.force_ms=!1),t.VBR==Y.vbr_off&&t.VBR_mean_bitrate_kbps!=128&&t.brate==0&&(t.brate=t.VBR_mean_bitrate_kbps),t.VBR==Y.vbr_off||t.VBR==Y.vbr_mtrh||t.VBR==Y.vbr_mt||(t.free_format=!1),t.VBR==Y.vbr_off&&t.brate==0&&m(),t.VBR==Y.vbr_off&&t.compression_ratio>0&&m(),t.out_samplerate!=0&&(t.out_samplerate<16e3?(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,8),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,64)):t.out_samplerate<32e3?(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,8),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,160)):(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,32),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,320))),t.lowpassfreq==0){var z=16e3;switch(t.VBR){case Y.vbr_off:{var L=new B;_(L,t.brate),z=L.lowerlimit;break}case Y.vbr_abr:{var L=new B;_(L,t.VBR_mean_bitrate_kbps),z=L.lowerlimit;break}case Y.vbr_rh:m();default:m()}t.mode==he.MONO&&(t.VBR==Y.vbr_off||t.VBR==Y.vbr_abr)&&(z*=1.5),t.lowpassfreq=z|0}switch(t.out_samplerate==0&&m(),t.lowpassfreq=Math.min(20500,t.lowpassfreq),t.lowpassfreq=Math.min(t.out_samplerate/2,t.lowpassfreq),t.VBR==Y.vbr_off&&(t.compression_ratio=t.out_samplerate*16*n.channels_out/(1e3*t.brate)),t.VBR==Y.vbr_abr&&m(),t.bWriteVbrTag||(t.findReplayGain=!1,t.decode_on_the_fly=!1,n.findPeakSample=!1),n.findReplayGain=t.findReplayGain,n.decode_on_the_fly=t.decode_on_the_fly,n.decode_on_the_fly&&(n.findPeakSample=!0),n.findReplayGain&&m(),n.decode_on_the_fly&&!t.decode_only&&m(),n.mode_gr=t.out_samplerate<=24e3?1:2,t.framesize=576*n.mode_gr,t.encoder_delay=a.ENCDELAY,n.resample_ratio=t.in_samplerate/t.out_samplerate,t.VBR){case Y.vbr_mt:case Y.vbr_rh:case Y.vbr_mtrh:{var U=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];t.compression_ratio=U[t.VBR_q]}break;case Y.vbr_abr:t.compression_ratio=t.out_samplerate*16*n.channels_out/(1e3*t.VBR_mean_bitrate_kbps);break;default:t.compression_ratio=t.out_samplerate*16*n.channels_out/(1e3*t.brate);break}t.mode==he.NOT_SET&&(t.mode=he.JOINT_STEREO),t.highpassfreq>0?m():(n.highpass1=0,n.highpass2=0),t.lowpassfreq>0?(n.lowpass2=2*t.lowpassfreq,t.lowpasswidth>=0?m():n.lowpass1=1*2*t.lowpassfreq,n.lowpass1/=t.out_samplerate,n.lowpass2/=t.out_samplerate):m(),s(t),n.samplerate_index=V(t.out_samplerate,t),n.samplerate_index<0&&m(),t.VBR==Y.vbr_off?t.free_format?n.bitrate_index=0:(t.brate=d(t.brate,t.version,t.out_samplerate),n.bitrate_index=l(t.brate,t.version,t.out_samplerate),n.bitrate_index<=0&&m()):n.bitrate_index=1,t.analysis&&(t.bWriteVbrTag=!1),n.pinfo!=null&&(t.bWriteVbrTag=!1),le.init_bit_stream_w(n);for(var re=n.samplerate_index+3*t.version+6*(t.out_samplerate<16e3?1:0),_e=0;_e<a.SBMAX_l+1;_e++)n.scalefac_band.l[_e]=k.sfBandIndex[re].l[_e];for(var _e=0;_e<a.PSFB21+1;_e++){var de=(n.scalefac_band.l[22]-n.scalefac_band.l[21])/a.PSFB21,Ne=n.scalefac_band.l[21]+_e*de;n.scalefac_band.psfb21[_e]=Ne}n.scalefac_band.psfb21[a.PSFB21]=576;for(var _e=0;_e<a.SBMAX_s+1;_e++)n.scalefac_band.s[_e]=k.sfBandIndex[re].s[_e];for(var _e=0;_e<a.PSFB12+1;_e++){var de=(n.scalefac_band.s[13]-n.scalefac_band.s[12])/a.PSFB12,Ne=n.scalefac_band.s[12]+_e*de;n.scalefac_band.psfb12[_e]=Ne}n.scalefac_band.psfb12[a.PSFB12]=192,t.version==1?n.sideinfo_len=n.channels_out==1?21:36:n.sideinfo_len=n.channels_out==1?13:21,t.error_protection&&(n.sideinfo_len+=2),r(t),n.Class_ID=e;{var je;for(je=0;je<19;je++)n.nsPsy.pefirbuf[je]=700*n.mode_gr*n.channels_out;t.ATHtype==-1&&(t.ATHtype=4)}switch(t.VBR){case Y.vbr_mt:t.VBR=Y.vbr_mtrh;case Y.vbr_mtrh:{t.useTemporal==null&&(t.useTemporal=!1),p.apply_preset(t,500-t.VBR_q*10,0),t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),t.quality<5&&(t.quality=0),t.quality>5&&(t.quality=5),n.PSY.mask_adjust=t.maskingadjust,n.PSY.mask_adjust_short=t.maskingadjust_short,t.experimentalY?n.sfb21_extra=!1:n.sfb21_extra=t.out_samplerate>44e3,n.iteration_loop=new VBRNewIterationLoop(te);break}case Y.vbr_rh:{p.apply_preset(t,500-t.VBR_q*10,0),n.PSY.mask_adjust=t.maskingadjust,n.PSY.mask_adjust_short=t.maskingadjust_short,t.experimentalY?n.sfb21_extra=!1:n.sfb21_extra=t.out_samplerate>44e3,t.quality>6&&(t.quality=6),t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),n.iteration_loop=new VBROldIterationLoop(te);break}default:{var Xe;n.sfb21_extra=!1,t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),Xe=t.VBR,Xe==Y.vbr_off&&(t.VBR_mean_bitrate_kbps=t.brate),p.apply_preset(t,t.VBR_mean_bitrate_kbps,0),t.VBR=Xe,n.PSY.mask_adjust=t.maskingadjust,n.PSY.mask_adjust_short=t.maskingadjust_short,Xe==Y.vbr_off?n.iteration_loop=new u0(te):m();break}}return t.VBR!=Y.vbr_off&&m(),t.tune&&m(),S(t),t.athaa_type<0?n.ATH.useAdjust=3:n.ATH.useAdjust=t.athaa_type,n.ATH.aaSensitivityP=Math.pow(10,t.athaa_sensitivity/-10),t.short_blocks==null&&(t.short_blocks=ie.short_block_allowed),t.short_blocks==ie.short_block_allowed&&(t.mode==he.JOINT_STEREO||t.mode==he.STEREO)&&(t.short_blocks=ie.short_block_coupled),t.quant_comp<0&&(t.quant_comp=1),t.quant_comp_short<0&&(t.quant_comp_short=0),t.msfix<0&&(t.msfix=0),t.exp_nspsytune=t.exp_nspsytune|1,t.internal_flags.nsPsy.attackthre<0&&(t.internal_flags.nsPsy.attackthre=Re.NSATTACKTHRE),t.internal_flags.nsPsy.attackthre_s<0&&(t.internal_flags.nsPsy.attackthre_s=Re.NSATTACKTHRE_S),t.scale<0&&(t.scale=1),t.ATHtype<0&&(t.ATHtype=4),t.ATHcurve<0&&(t.ATHcurve=4),t.athaa_loudapprox<0&&(t.athaa_loudapprox=2),t.interChRatio<0&&(t.interChRatio=0),t.useTemporal==null&&(t.useTemporal=!0),n.slot_lag=n.frac_SpF=0,t.VBR==Y.vbr_off&&(n.slot_lag=n.frac_SpF=(t.version+1)*72e3*t.brate%t.out_samplerate|0),k.iteration_init(t),I.psymodel_init(t),0};function D(t,n){(t.in_buffer_0==null||t.in_buffer_nsamples<n)&&(t.in_buffer_0=y(n),t.in_buffer_1=y(n),t.in_buffer_nsamples=n)}this.lame_encode_flush=function(t,n,z,L){var U=t.internal_flags,re=fe([2,1152]),_e=0,de,Ne,je,Xe,y0=U.mf_samples_to_encode-a.POSTDELAY,g0=o(t);if(U.mf_samples_to_encode<1)return 0;for(de=0,t.in_samplerate!=t.out_samplerate&&m(),je=t.framesize-y0%t.framesize,je<576&&(je+=t.framesize),t.encoder_padding=je,Xe=(y0+je)/t.framesize;Xe>0&&_e>=0;){var m0=g0-U.mf_size,w0=t.frameNum;m0*=t.in_samplerate,m0/=t.out_samplerate,m0>1152&&(m0=1152),m0<1&&(m0=1),Ne=L-de,L==0&&(Ne=0),_e=this.lame_encode_buffer(t,re[0],re[1],m0,n,z,Ne),z+=_e,de+=_e,Xe-=w0!=t.frameNum?1:0}return U.mf_samples_to_encode=0,_e<0||(Ne=L-de,L==0&&(Ne=0),le.flush_bitstream(t),_e=le.copy_buffer(U,n,z,Ne,1),_e<0)?_e:(z+=_e,de+=_e,Ne=L-de,L==0&&(Ne=0),t.write_id3tag_automatic&&m(),de)},this.lame_encode_buffer=function(t,n,z,L,U,re,_e){var de=t.internal_flags,Ne=[null,null];if(de.Class_ID!=e)return-3;if(L==0)return 0;D(de,L),Ne[0]=de.in_buffer_0,Ne[1]=de.in_buffer_1;for(var je=0;je<L;je++)Ne[0][je]=n[je],de.channels_in>1&&(Ne[1][je]=z[je]);return c(t,Ne[0],Ne[1],L,U,re,_e)};function o(t){var n=a.BLKSIZE+t.framesize-a.FFTOFFSET;return n=Math.max(n,512+t.framesize-32),n}function c(t,n,z,L,U,re,_e){var de=t.internal_flags,Ne=0,je,Xe,y0,g0,m0,w0=[null,null],k0=[null,null];if(de.Class_ID!=e)return-3;if(L==0)return 0;if(m0=le.copy_buffer(de,U,re,_e,0),m0<0)return m0;if(re+=m0,Ne+=m0,k0[0]=n,k0[1]=z,Le.NEQ(t.scale,0)&&Le.NEQ(t.scale,1))for(Xe=0;Xe<L;++Xe)k0[0][Xe]*=t.scale,de.channels_out==2&&(k0[1][Xe]*=t.scale);if(Le.NEQ(t.scale_left,0)&&Le.NEQ(t.scale_left,1))for(Xe=0;Xe<L;++Xe)k0[0][Xe]*=t.scale_left;if(Le.NEQ(t.scale_right,0)&&Le.NEQ(t.scale_right,1))for(Xe=0;Xe<L;++Xe)k0[1][Xe]*=t.scale_right;t.num_channels==2&&de.channels_out==1&&m(),g0=o(t),w0[0]=de.mfbuf[0],w0[1]=de.mfbuf[1];for(var q0=0;L>0;){var q=[null,null],H=0,X=0;q[0]=k0[0],q[1]=k0[1];var Me=new b;if(R(t,w0,q,q0,L,Me),H=Me.n_in,X=Me.n_out,de.findReplayGain&&!de.decode_on_the_fly&&g.AnalyzeSamples(de.rgdata,w0[0],de.mf_size,w0[1],de.mf_size,X,de.channels_out)==ke.GAIN_ANALYSIS_ERROR)return-6;if(L-=H,q0+=H,de.channels_out==2,de.mf_size+=X,de.mf_samples_to_encode<1&&m(),de.mf_samples_to_encode+=X,de.mf_size>=g0){var xe=_e-Ne;if(_e==0&&(xe=0),je=f(t,w0[0],w0[1],U,re,xe),je<0)return je;for(re+=je,Ne+=je,de.mf_size-=t.framesize,de.mf_samples_to_encode-=t.framesize,y0=0;y0<de.channels_out;y0++)for(Xe=0;Xe<de.mf_size;Xe++)w0[y0][Xe]=w0[y0][Xe+t.framesize]}}return Ne}function f(t,n,z,L,U,re){var _e=v.enc.lame_encode_mp3_frame(t,n,z,L,U,re);return t.frameNum++,_e}function b(){this.n_in=0,this.n_out=0}function R(t,n,z,L,U,re){var _e=t.internal_flags;if(_e.resample_ratio<.9999||_e.resample_ratio>1.0001)m();else{re.n_out=Math.min(t.framesize,U),re.n_in=re.n_out;for(var de=0;de<re.n_out;++de)n[0][_e.mf_size+de]=z[0][L+de],_e.channels_out==2&&(n[1][_e.mf_size+de]=z[1][L+de])}}}function h0(){this.setModules=function(v,N){}}function Je(){this.setModules=function(v,N,F){}}function n0(){}function Fe(){this.setModules=function(v,N){}}function _0(v,N,F){v!=1&&m("fix cc: only supports mono");var g=new Se,le=new h0,p=new ke,k=new Le,te=new i0,I=new Qe,Z=new F0,M=new l0,ae=new Ae,B=new Fe,C=new a0,e=new Pe,i=new Je,h=new n0;g.setModules(p,k,te,I,Z,M,ae,B,h),k.setModules(p,h,ae,M),B.setModules(k,ae),te.setModules(g),Z.setModules(k,C,I,e),I.setModules(e,C,g.enc.psy),C.setModules(k),e.setModules(I),M.setModules(g,k,ae),le.setModules(i,h),i.setModules(ae,B,te);var V=g.lame_init();V.num_channels=v,V.in_samplerate=N,V.out_samplerate=N,V.brate=F,V.mode=he.STEREO,V.quality=3,V.bWriteVbrTag=!1,V.disable_reservoir=!0,V.write_id3tag_automatic=!1,g.lame_init_params(V);var d=1152,l=0|1.25*d+7200,_=P(l);this.encodeBuffer=function(s,S){v==1&&(S=s),s.length>d&&(d=s.length,l=0|1.25*d+7200,_=P(l));var r=g.lame_encode_buffer(V,s,S,s.length,_,0,l);return new Int8Array(_.subarray(0,r))},this.flush=function(){var s=g.lame_encode_flush(V,_,0,l);return new Int8Array(_.subarray(0,s))}}ve.SFBMAX=a.SBMAX_s*3,A.Mp3Encoder=_0}A(),u.lamejs=A});(function(u){var A=typeof window=="object"&&!!window.document,K=A?window:Object,m=K.Recorder,P=m.i18n;u(m,P,P.$T,A)})(function(u,A,K,m){var P=function(y){return new T(y)},Q="WaveView",T=function(y){var se=this,ee={scale:2,speed:9,phase:21.8,fps:20,keep:!0,lineWidth:3,linear1:[0,"rgba(150,96,238,1)",.2,"rgba(170,79,249,1)",1,"rgba(53,199,253,1)"],linear2:[0,"rgba(209,130,255,0.6)",1,"rgba(53,199,255,0.6)"],linearBg:[0,"rgba(255,255,255,0.2)",1,"rgba(54,197,252,0.2)"]};for(var oe in y)ee[oe]=y[oe];se.set=y=ee;var fe="compatibleCanvas";if(y[fe])var me=se.canvas=y[fe];else{if(!m)throw new Error(K.G("NonBrowser-1",[Q]));var ge=y.elem;ge&&(typeof ge=="string"?ge=document.querySelector(ge):ge.length&&(ge=ge[0])),ge&&(y.width=ge.offsetWidth,y.height=ge.offsetHeight);var j=se.elem=document.createElement("div");j.style.fontSize=0,j.innerHTML='<canvas style="width:100%;height:100%;"/>';var me=se.canvas=j.querySelector("canvas");ge&&(ge.innerHTML="",ge.appendChild(j))}var G=y.scale,ie=y.width*G,ye=y.height*G;if(!ie||!ye)throw new Error(K.G("IllegalArgs-1",[Q+" width=0 height=0"]));me.width=ie,me.height=ye;var Y=se.ctx=me.getContext("2d");se.linear1=se.genLinear(Y,ie,y.linear1),se.linear2=se.genLinear(Y,ie,y.linear2),se.linearBg=se.genLinear(Y,ye,y.linearBg,!0),se._phase=0};T.prototype=P.prototype={genLinear:function(y,se,ee,oe){for(var fe=y.createLinearGradient(0,0,oe?0:se,oe?se:0),me=0;me<ee.length;)fe.addColorStop(ee[me++],ee[me++]);return fe},genPath:function(y,se,ee){for(var oe=[],fe=this,me=fe.set,ge=me.scale,j=me.width*ge,G=me.height*ge/2,ie=0;ie<=j;ie+=ge){var ye=(1+Math.cos(Math.PI+ie/j*2*Math.PI))/2,Y=ye*G*se*Math.sin(2*Math.PI*(ie/j)*y+ee)+G;oe.push(Y)}return oe},input:function(y,se,ee){var oe=this;oe.sampleRate=ee,oe.pcmData=y,oe.pcmPos=0,oe.inputTime=Date.now(),oe.schedule()},schedule:function(){var y=this,se=y.set,ee=Math.floor(1e3/se.fps);y.timer||(y.timer=setInterval(function(){y.schedule()},ee));var oe=Date.now(),fe=y.drawTime||0;if(!(oe-fe<ee)){y.drawTime=oe;for(var me=y.sampleRate/se.fps,ge=y.pcmData,j=y.pcmPos,G=Math.max(0,Math.min(me,ge.length-j)),ie=0,ye=0;ye<G;ye++,j++)ie+=Math.abs(ge[j]);y.pcmPos=j,(G||!se.keep)&&y.draw(u.PowerLevel(ie,G)),!G&&oe-y.inputTime>1300&&(clearInterval(y.timer),y.timer=0)}},draw:function(y){var se=this,ee=se.set,oe=se.ctx,fe=ee.scale,me=ee.width*fe,ge=ee.height*fe,j=ee.speed/ee.fps,G=se._phase-=j,ie=G+j*ee.phase,ye=y/100,Y=se.genPath(2,ye,G),he=se.genPath(1.8,ye,ie);oe.clearRect(0,0,me,ge),oe.beginPath();for(var Ae=0,Pe=0;Pe<=me;Ae++,Pe+=fe)Pe==0?oe.moveTo(Pe,Y[Ae]):oe.lineTo(Pe,Y[Ae]);Ae--;for(var Pe=me-1;Pe>=0;Ae--,Pe-=fe)oe.lineTo(Pe,he[Ae]);oe.closePath(),oe.fillStyle=se.linearBg,oe.fill(),se.drawPath(he,se.linear2),se.drawPath(Y,se.linear1)},drawPath:function(y,se){var ee=this,oe=ee.set,fe=ee.ctx,me=oe.scale,ge=oe.width*me;fe.beginPath();for(var j=0,G=0;G<=ge;j++,G+=me)G==0?fe.moveTo(G,y[j]):fe.lineTo(G,y[j]);fe.lineWidth=oe.lineWidth*me,fe.strokeStyle=se,fe.stroke()}},u[Q]=P});const pn={class:"w-full h-full overflow-hidden flex flex-col gap-4"},xn={class:"flex-1 w-full overflow-auto"},wn={key:0,class:"text-xs text-left"},Sn={class:"flex items-center w-full gap-2"},yn={class:"w-20 shrink-0"},Mn={class:"flex-1"},gn={class:"flex items-center cursor-pointer gap-2"},An=X0({__name:"SpeechGenerate",setup(u){const A=Mt(),K=C0(!1),m=C0([]),P=at({prompt:"",voiceUrl:""}),Q=C0(""),T=C0(null),y=C0(),se=C0(!1),ee=()=>{T.value=bn({type:"mp3",sampleRate:16e3,bitRate:16}),T.value.open(()=>{console.log("录音已打开"),T.value.start(),se.value=!0,console.log("已开始录音")},(G,ie)=>{console.log((ie?"UserNotAllow，":"")+"无法录音:"+G)})},oe=()=>{if(!T.value){console.error("未打开录音");return}T.value.stop((G,ie)=>{se.value=!1,y.value=G;var ye=(window.URL||webkitURL).createObjectURL(G);console.log("录音成功",G,ye,"时长:"+ie+"ms"),T.value.close(),T.value=null},G=>{console.error("结束录音出错："+G),T.value.close(),T.value=null})},fe=()=>{var G=URL.createObjectURL(y.value),ie=document.createElement("audio");ie.controls=!0,document.body.appendChild(ie),ie.src=G,ie.play(),setTimeout(function(){URL.revokeObjectURL(ie.src)},5e3)},me=()=>{if(!Q.value){z0.error("请先填写音色名称");return}z0.info("前端模式下暂不支持音色克隆功能")},ge=()=>{if(!P.prompt){z0.error("请输入文字描述");return}z0.info("前端模式下暂不支持AI语音生成功能")},j=()=>{m.value=[{voiceName:"默认音色1",voiceUrl:"default1"},{voiceName:"默认音色2",voiceUrl:"default2"}],m.value.push({voiceName:"自定义",voiceUrl:"custom"}),P.voiceUrl=m.value[0].voiceUrl};return la(()=>{j()}),(G,ie)=>{const ye=Kt,Y=zt,he=Xt,Ae=ct,Pe=gt,ke=At,i0=b1,a0=tt,l0=Ia,Le=p1,we=x1,E=w1,$e=Ct;return Oe(),r0("div",pn,[s0("div",xn,[Ie(ye,{"list-data":J(A).speechList,type:"speech"},null,8,["list-data"])]),P.voiceUrl==="custom"?(Oe(),r0("div",wn," 朗读内容：清晨的阳光透过窗帘洒在桌上，温暖而明亮 ")):I0("",!0),lt((Oe(),r0("div",Sn,[s0("div",yn,[Ie(he,{modelValue:P.voiceUrl,"onUpdate:modelValue":ie[0]||(ie[0]=He=>P.voiceUrl=He),placeholder:"音色"},{default:qe(()=>[(Oe(!0),r0(H0,null,K0(m.value,(He,W)=>(Oe(),V0(Y,{key:W,value:He.voiceUrl,label:He.voiceName},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),P.voiceUrl!=="custom"?(Oe(),r0(H0,{key:0},[s0("div",Mn,[Ie(Ae,{modelValue:P.prompt,"onUpdate:modelValue":ie[1]||(ie[1]=He=>P.prompt=He),placeholder:"请输入提示词",onKeyup:W0(ge,["enter"])},null,8,["modelValue"])]),s0("div",null,[Ie(ke,{class:"dark:bg-purple-heavy",circle:"",onClick:ge},{default:qe(()=>[Ie(Pe)]),_:1})])],64)):(Oe(),r0(H0,{key:1},[Ie(Ae,{modelValue:Q.value,"onUpdate:modelValue":ie[2]||(ie[2]=He=>Q.value=He),placeholder:"请输入音色名称"},null,8,["modelValue"]),s0("div",gn,[se.value?(Oe(),V0(l0,{key:1,content:"停止录音"},{default:qe(()=>[Ie(a0,{size:"18",onClick:oe},{default:qe(()=>[Ie(Le)]),_:1})]),_:1})):(Oe(),V0(l0,{key:0,content:"开始/重新录音"},{default:qe(()=>[Ie(a0,{size:"18",onClick:ee},{default:qe(()=>[Ie(i0)]),_:1})]),_:1})),y.value?(Oe(),V0(l0,{key:2,content:"试听录音"},{default:qe(()=>[Ie(a0,{size:"18",onClick:fe},{default:qe(()=>[Ie(we)]),_:1})]),_:1})):I0("",!0),y.value?(Oe(),V0(l0,{key:3,content:"克隆录音"},{default:qe(()=>[Ie(ke,{type:"primary",circle:"",onClick:me},{default:qe(()=>[Ie(E),ie[3]||(ie[3]=m1(" >"))]),_:1})]),_:1})):I0("",!0)])],64))])),[[$e,K.value]])])}}}),Cn=Tt(An,[["__scopeId","data-v-6a0d04d6"]]),Kn=[{title:"文本",key:"text",icon:"TextIcon",component:Fr},{title:"图片",key:"image",fileType:"image/*",icon:"ImageIcon",component:Pa},{title:"音频",key:"audio",fileType:"audio/*",icon:"AudioIcon",component:Ua},{title:"旁白",key:"speech",fileType:"audio/*",icon:"VoiceIcon",component:Cn},{title:"视频",key:"video",fileType:"video/*",icon:"VideoIcon",component:za}],Yn=[{title:"图片",key:"image",fileType:"image/*",icon:"ImageIcon",component:Pa},{title:"音频",key:"audio",fileType:"audio/*",icon:"AudioIcon",component:Ua},{title:"视频",key:"video",fileType:"video/*",icon:"VideoIcon",component:za}],jn=[],Jt=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function ea(u,A,K,m){u.addEventListener?u.addEventListener(A,K,m):u.attachEvent&&u.attachEvent("on".concat(A),K)}function ht(u,A,K,m){u.removeEventListener?u.removeEventListener(A,K,m):u.detachEvent&&u.detachEvent("on".concat(A),K)}function Ka(u,A){const K=A.slice(0,A.length-1);for(let m=0;m<K.length;m++)K[m]=u[K[m].toLowerCase()];return K}function Ya(u){typeof u!="string"&&(u=""),u=u.replace(/\s/g,"");const A=u.split(",");let K=A.lastIndexOf("");for(;K>=0;)A[K-1]+=",",A.splice(K,1),K=A.lastIndexOf("");return A}function Tn(u,A){const K=u.length>=A.length?u:A,m=u.length>=A.length?A:u;let P=!0;for(let Q=0;Q<K.length;Q++)m.indexOf(K[Q])===-1&&(P=!1);return P}const St={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":Jt?173:189,"=":Jt?61:187,";":Jt?59:186,"'":222,"[":219,"]":221,"\\":220},G0={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},ia={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},L0={16:!1,18:!1,17:!1,91:!1},T0={};for(let u=1;u<20;u++)St["f".concat(u)]=111+u;let M0=[],wt=null,ja="all";const Z0=new Map,kt=u=>St[u.toLowerCase()]||G0[u.toLowerCase()]||u.toUpperCase().charCodeAt(0),kn=u=>Object.keys(St).find(A=>St[A]===u),En=u=>Object.keys(G0).find(A=>G0[A]===u);function Ga(u){ja=u||"all"}function yt(){return ja||"all"}function Bn(){return M0.slice(0)}function Rn(){return M0.map(u=>kn(u)||En(u)||String.fromCharCode(u))}function Vn(){const u=[];return Object.keys(T0).forEach(A=>{T0[A].forEach(K=>{let{key:m,scope:P,mods:Q,shortcut:T}=K;u.push({scope:P,shortcut:T,mods:Q,keys:m.split("+").map(y=>kt(y))})})}),u}function Ln(u){const A=u.target||u.srcElement,{tagName:K}=A;let m=!0;const P=K==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(A.type);return(A.isContentEditable||(P||K==="TEXTAREA"||K==="SELECT")&&!A.readOnly)&&(m=!1),m}function In(u){return typeof u=="string"&&(u=kt(u)),M0.indexOf(u)!==-1}function Hn(u,A){let K,m;u||(u=yt());for(const P in T0)if(Object.prototype.hasOwnProperty.call(T0,P))for(K=T0[P],m=0;m<K.length;)K[m].scope===u?K.splice(m,1).forEach(T=>{let{element:y}=T;return ca(y)}):m++;yt()===u&&Ga(A||"all")}function Nn(u){let A=u.keyCode||u.which||u.charCode;const K=M0.indexOf(A);if(K>=0&&M0.splice(K,1),u.key&&u.key.toLowerCase()==="meta"&&M0.splice(0,M0.length),(A===93||A===224)&&(A=91),A in L0){L0[A]=!1;for(const m in G0)G0[m]===A&&(et[m]=!1)}}function qa(u){if(typeof u>"u")Object.keys(T0).forEach(P=>{Array.isArray(T0[P])&&T0[P].forEach(Q=>It(Q)),delete T0[P]}),ca(null);else if(Array.isArray(u))u.forEach(P=>{P.key&&It(P)});else if(typeof u=="object")u.key&&It(u);else if(typeof u=="string"){for(var A=arguments.length,K=new Array(A>1?A-1:0),m=1;m<A;m++)K[m-1]=arguments[m];let[P,Q]=K;typeof P=="function"&&(Q=P,P=""),It({key:u,scope:P,method:Q,splitKey:"+"})}}const It=u=>{let{key:A,scope:K,method:m,splitKey:P="+"}=u;Ya(A).forEach(T=>{const y=T.split(P),se=y.length,ee=y[se-1],oe=ee==="*"?"*":kt(ee);if(!T0[oe])return;K||(K=yt());const fe=se>1?Ka(G0,y):[],me=[];T0[oe]=T0[oe].filter(ge=>{const G=(m?ge.method===m:!0)&&ge.scope===K&&Tn(ge.mods,fe);return G&&me.push(ge.element),!G}),me.forEach(ge=>ca(ge))})};function Aa(u,A,K,m){if(A.element!==m)return;let P;if(A.scope===K||A.scope==="all"){P=A.mods.length>0;for(const Q in L0)Object.prototype.hasOwnProperty.call(L0,Q)&&(!L0[Q]&&A.mods.indexOf(+Q)>-1||L0[Q]&&A.mods.indexOf(+Q)===-1)&&(P=!1);(A.mods.length===0&&!L0[16]&&!L0[18]&&!L0[17]&&!L0[91]||P||A.shortcut==="*")&&(A.keys=[],A.keys=A.keys.concat(M0),A.method(u,A)===!1&&(u.preventDefault?u.preventDefault():u.returnValue=!1,u.stopPropagation&&u.stopPropagation(),u.cancelBubble&&(u.cancelBubble=!0)))}}function Ca(u,A){const K=T0["*"];let m=u.keyCode||u.which||u.charCode;if(!et.filter.call(this,u))return;if((m===93||m===224)&&(m=91),M0.indexOf(m)===-1&&m!==229&&M0.push(m),["ctrlKey","altKey","shiftKey","metaKey"].forEach(y=>{const se=ia[y];u[y]&&M0.indexOf(se)===-1?M0.push(se):!u[y]&&M0.indexOf(se)>-1?M0.splice(M0.indexOf(se),1):y==="metaKey"&&u[y]&&M0.length===3&&(u.ctrlKey||u.shiftKey||u.altKey||(M0=M0.slice(M0.indexOf(se))))}),m in L0){L0[m]=!0;for(const y in G0)G0[y]===m&&(et[y]=!0);if(!K)return}for(const y in L0)Object.prototype.hasOwnProperty.call(L0,y)&&(L0[y]=u[ia[y]]);u.getModifierState&&!(u.altKey&&!u.ctrlKey)&&u.getModifierState("AltGraph")&&(M0.indexOf(17)===-1&&M0.push(17),M0.indexOf(18)===-1&&M0.push(18),L0[17]=!0,L0[18]=!0);const P=yt();if(K)for(let y=0;y<K.length;y++)K[y].scope===P&&(u.type==="keydown"&&K[y].keydown||u.type==="keyup"&&K[y].keyup)&&Aa(u,K[y],P,A);if(!(m in T0))return;const Q=T0[m],T=Q.length;for(let y=0;y<T;y++)if((u.type==="keydown"&&Q[y].keydown||u.type==="keyup"&&Q[y].keyup)&&Q[y].key){const se=Q[y],{splitKey:ee}=se,oe=se.key.split(ee),fe=[];for(let me=0;me<oe.length;me++)fe.push(kt(oe[me]));fe.sort().join("")===M0.sort().join("")&&Aa(u,se,P,A)}}function et(u,A,K){M0=[];const m=Ya(u);let P=[],Q="all",T=document,y=0,se=!1,ee=!0,oe="+",fe=!1,me=!1;for(K===void 0&&typeof A=="function"&&(K=A),Object.prototype.toString.call(A)==="[object Object]"&&(A.scope&&(Q=A.scope),A.element&&(T=A.element),A.keyup&&(se=A.keyup),A.keydown!==void 0&&(ee=A.keydown),A.capture!==void 0&&(fe=A.capture),typeof A.splitKey=="string"&&(oe=A.splitKey),A.single===!0&&(me=!0)),typeof A=="string"&&(Q=A),me&&qa(u,Q);y<m.length;y++)u=m[y].split(oe),P=[],u.length>1&&(P=Ka(G0,u)),u=u[u.length-1],u=u==="*"?"*":kt(u),u in T0||(T0[u]=[]),T0[u].push({keyup:se,keydown:ee,scope:Q,mods:P,shortcut:m[y],method:K,key:m[y],splitKey:oe,element:T});if(typeof T<"u"&&window){if(!Z0.has(T)){const ge=function(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return Ca(G,T)},j=function(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;Ca(G,T),Nn(G)};Z0.set(T,{keydownListener:ge,keyupListenr:j,capture:fe}),ea(T,"keydown",ge,fe),ea(T,"keyup",j,fe)}if(!wt){const ge=()=>{M0=[]};wt={listener:ge,capture:fe},ea(window,"focus",ge,fe)}}}function On(u){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(T0).forEach(K=>{T0[K].filter(P=>P.scope===A&&P.shortcut===u).forEach(P=>{P&&P.method&&P.method()})})}function ca(u){const A=Object.values(T0).flat();if(A.findIndex(m=>{let{element:P}=m;return P===u})<0){const{keydownListener:m,keyupListenr:P,capture:Q}=Z0.get(u)||{};m&&P&&(ht(u,"keyup",P,Q),ht(u,"keydown",m,Q),Z0.delete(u))}if((A.length<=0||Z0.size<=0)&&(Object.keys(Z0).forEach(P=>{const{keydownListener:Q,keyupListenr:T,capture:y}=Z0.get(P)||{};Q&&T&&(ht(P,"keyup",T,y),ht(P,"keydown",Q,y),Z0.delete(P))}),Z0.clear(),Object.keys(T0).forEach(P=>delete T0[P]),wt)){const{listener:P,capture:Q}=wt;ht(window,"focus",P,Q),wt=null}}const ta={getPressedKeyString:Rn,setScope:Ga,getScope:yt,deleteScope:Hn,getPressedKeyCodes:Bn,getAllKeyCodes:Vn,isPressed:In,filter:Ln,trigger:On,unbind:qa,keyMap:St,modifier:G0,modifierMap:ia};for(const u in ta)Object.prototype.hasOwnProperty.call(ta,u)&&(et[u]=ta[u]);if(typeof window<"u"){const u=window.hotkeys;et.noConflict=A=>(A&&window.hotkeys===et&&(window.hotkeys=u),et),window.hotkeys=et}export{zn as C,jn as D,Pn as E,xr as G,Xn as _,E1 as a,Kn as b,Yn as c,Un as d,et as h};
