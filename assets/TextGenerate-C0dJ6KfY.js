import{d as z,X as D,r as f,a as N,g as l,k as a,Q as $,R as A,c as v,w as i,h as _,n as S,f as t,as as G,E as w,t as K,j as P,v as j,e as s,L as J,I as V,u as C,a1 as O,aT as Q,aU as X,aV as q,i as W,aE as Y,aD as ee,aA as te}from"./index-DnwN-RZ1.js";/* empty css                   */import{E as se}from"./el-tag-DEIq6Q_k.js";import{u as oe}from"./index-Cp1P3COd.js";const le="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='44'%20height='44'%20viewBox='0%200%2044%2044'%20fill='none'%3e%3cpath%20d='M22%204C19.6362%204%2017.2956%204.46558%2015.1117%205.37017C12.9278%206.27475%2010.9435%207.60062%209.27208%209.27208C7.60062%2010.9435%206.27475%2012.9278%205.37017%2015.1117C4.46558%2017.2956%204%2019.6362%204%2022C4%2024.3638%204.46558%2026.7044%205.37017%2028.8883C6.27475%2031.0722%207.60062%2033.0565%209.27208%2034.7279C10.9435%2036.3994%2012.9278%2037.7253%2015.1117%2038.6298C17.2956%2039.5344%2019.6362%2040%2022%2040C26.7739%2040%2031.3523%2038.1036%2034.7279%2034.7279C38.1036%2031.3523%2040%2026.7739%2040%2022C40%2017.2261%2038.1036%2012.6477%2034.7279%209.27208C31.3523%205.89642%2026.7739%204%2022%204ZM0%2022C0%209.85%209.85%200%2022%200C34.15%200%2044%209.85%2044%2022C44%2034.15%2034.15%2044%2022%2044C9.85%2044%200%2034.15%200%2022ZM16%2014V22H12V14H16ZM32%2014V22H28V14H32ZM31.436%2025.56L30.936%2027.5C30.398%2029.59%2029.35%2031.29%2027.71%2032.434C26.098%2033.56%2024.126%2034%2022%2034H20V30H22C23.6%2030%2024.686%2029.666%2025.42%2029.154C26.126%2028.662%2026.714%2027.862%2027.064%2026.502L27.562%2024.564L31.436%2025.56Z'%20fill='%234D5FFF'/%3e%3c/svg%3e",ae=""+new URL("thinking-CeJ7EOuC.gif",import.meta.url).href,ne={class:"w-full h-full overflow-hidden flex flex-col items-center gap-4"},ce={ref:"contentChatText",class:"flex-1 w-full flex flex-col mt-4 overflow-auto gap-4"},re={class:"avatar"},ie={key:0,src:le},ue={key:1,src:ae},de={class:"chat-textbox"},_e=["onClick"],pe={key:2,class:"flex items-center mt-2 gap-3"},fe=["onClick"],me=["onClick"],ge={class:"w-full"},he={class:"flex items-center w-full gap-2"},ve={class:"flex-1"},Ce=z({__name:"TextGenerate",setup(xe){const{toClipboard:I}=oe();D();const b=f(!1),d=f(""),x=f(null),u=f(),m=f(""),n=N({style:"Promotional video",messages:[]}),E=()=>{var c;(c=x.value)==null||c.click()},F=c=>{var r;const p=(r=c.target.files)==null?void 0:r[0];p&&(u.value=p,m.value=p.name)},g=()=>{if(!u.value&&!d.value){w.warning("请输入文字或上传文件");return}d.value?n.messages.push({role:"user",content:d.value}):n.messages.push({role:"user",content:"请解析该文件并扩写"}),n.messages.push({role:"system",content:"这是一个扩写后的文本内容示例。在前端模式下，暂不支持AI生成功能。",loading:0}),d.value="",u.value=null,m.value=""},M=c=>{n.messages.push({role:"user",content:"请输出分镜头脚本"}),n.messages.push({role:"system",content:"这是一个分镜头脚本示例。在前端模式下，暂不支持AI分镜头脚本生成功能。",loading:0})},T=async c=>{try{await I(c),w.success("复制成功")}catch(o){console.error(o)}},B=()=>{n.messages.pop(),g()};return(c,o)=>{const p=q,r=W,y=K,L=se,U=Y,H=ee,R=P,Z=j;return s(),l("div",ne,[a("div",ce,[(s(!0),l($,null,A(n.messages,(e,k)=>(s(),l("div",{key:k,class:J(["chat-item text-sm","chat-item-"+e.role])},[a("div",re,[e.role==="system"&&!e.loading?(s(),l("img",ie)):_("",!0),e.role==="system"&&e.loading?(s(),l("img",ue)):_("",!0),e.role==="user"?(s(),v(r,{key:2,size:"20",class:"mt-[-2px]"},{default:i(()=>[t(p)]),_:1})):_("",!0)]),a("div",de,[e.edit?(s(),v(y,{key:1,type:"textarea",modelValue:e.content,"onUpdate:modelValue":h=>e.content=h,autosize:"",onMouseleave:h=>e.edit=!1,class:"text-xs text-white w-[250px]"},null,8,["modelValue","onUpdate:modelValue","onMouseleave"])):(s(),l("div",{key:0,class:"text-xs select-text text-white",onClick:h=>e.edit=!0},V(e.content),9,_e)),e.role==="system"?(s(),l("div",pe,[a("button",{onClick:()=>T(e.content)},[t(r,{color:"white"},{default:i(()=>[t(C(O))]),_:1})],8,fe),k===n.messages.length-1?(s(),l("button",{key:0,onClick:o[0]||(o[0]=()=>B())},[t(r,{color:"white"},{default:i(()=>[t(C(Q))]),_:1})])):_("",!0),a("button",{onClick:()=>M(e.content)},[t(r,{color:"white"},{default:i(()=>[t(C(X))]),_:1})],8,me)])):_("",!0)])],2))),128))],512),a("div",ge,[u.value?(s(),v(L,{key:0,type:"primary",class:"my-2 text-xs dark:text-white",closable:"",onClose:o[1]||(o[1]=e=>u.value=null)},{default:i(()=>[a("span",null,"上传文件："+V(m.value),1)]),_:1})):_("",!0),S((s(),l("div",he,[a("div",ve,[t(y,{modelValue:d.value,"onUpdate:modelValue":o[2]||(o[2]=e=>d.value=e),class:"mr-4",placeholder:u.value?`上传文件：${m.value}`:"输入提示词",disabled:u.value,onKeyup:G(g,["enter"])},{suffix:i(()=>[t(r,{class:"cursor-pointer",size:"18",onClick:E},{default:i(()=>[t(U)]),_:1}),a("input",{ref_key:"fileInputRef",ref:x,class:"file-input",type:"file",name:"file",accept:".txt, .pdf, .doc, .docx",hidden:"",onChange:F},null,544)]),_:1},8,["modelValue","placeholder","disabled"])]),t(R,{class:"dark:bg-purple-heavy",circle:"",onClick:g},{default:i(()=>[t(H)]),_:1})])),[[Z,b.value]])])])}}}),Ie=te(Ce,[["__scopeId","data-v-dc580a13"]]);export{Ie as default};
