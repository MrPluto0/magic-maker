import{p as z,c as q,m as S}from"./index-D1slywUk.js";var L=z((T,Y)=>{q(),function(w){if(typeof T=="object"&&typeof Y<"u")Y.exports=w();else if(typeof define=="function"&&define.amd)define([],w);else{var m;typeof window<"u"?m=window:typeof global<"u"?m=global:typeof self<"u"?m=self:m=this,m.pica=w()}}(function(){return function(){function w(m,j,u){function i(n,t){if(!j[n]){if(!m[n]){var A=typeof S=="function"&&S;if(!t&&A)return A(n,!0);if(o)return o(n,!0);var h=new Error("Cannot find module '"+n+"'");throw h.code="MODULE_NOT_FOUND",h}var s=j[n]={exports:{}};m[n][0].call(s.exports,function(c){var l=m[n][1][c];return i(l||c)},s,s.exports,w,m,j,u)}return j[n].exports}for(var o=typeof S=="function"&&S,e=0;e<u.length;e++)i(u[e]);return i}return w}()({1:[function(w,m,j){var u=w("inherits"),i=w("multimath"),o=w("./mm_unsharp_mask"),e=w("./mm_resize");function n(t){var A=t||[],h={js:A.indexOf("js")>=0,wasm:A.indexOf("wasm")>=0};i.call(this,h),this.features={js:h.js,wasm:h.wasm&&this.has_wasm()},this.use(o),this.use(e)}u(n,i),n.prototype.resizeAndUnsharp=function(t,A){var h=this.resize(t,A);return t.unsharpAmount&&this.unsharp_mask(h,t.toWidth,t.toHeight,t.unsharpAmount,t.unsharpRadius,t.unsharpThreshold),h},m.exports=n},{"./mm_resize":4,"./mm_unsharp_mask":9,inherits:19,multimath:20}],2:[function(w,m,j){function u(e){return e<0?0:e>255?255:e}function i(e,n,t,A,h,s){var c,l,I,d,_,B,C,Q,E,v,M,D=0,b=0;for(E=0;E<A;E++){for(_=0,v=0;v<h;v++){for(B=s[_++],C=s[_++],Q=D+B*4|0,c=l=I=d=0;C>0;C--)M=s[_++],d=d+M*e[Q+3]|0,I=I+M*e[Q+2]|0,l=l+M*e[Q+1]|0,c=c+M*e[Q]|0,Q=Q+4|0;n[b+3]=u(d+8192>>14),n[b+2]=u(I+8192>>14),n[b+1]=u(l+8192>>14),n[b]=u(c+8192>>14),b=b+A*4|0}b=(E+1)*4|0,D=(E+1)*t*4|0}}function o(e,n,t,A,h,s){var c,l,I,d,_,B,C,Q,E,v,M,D=0,b=0;for(E=0;E<A;E++){for(_=0,v=0;v<h;v++){for(B=s[_++],C=s[_++],Q=D+B*4|0,c=l=I=d=0;C>0;C--)M=s[_++],d=d+M*e[Q+3]|0,I=I+M*e[Q+2]|0,l=l+M*e[Q+1]|0,c=c+M*e[Q]|0,Q=Q+4|0;n[b+3]=u(d+8192>>14),n[b+2]=u(I+8192>>14),n[b+1]=u(l+8192>>14),n[b]=u(c+8192>>14),b=b+A*4|0}b=(E+1)*4|0,D=(E+1)*t*4|0}}m.exports={convolveHorizontally:i,convolveVertically:o}},{}],3:[function(w,m,j){m.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEXA2AAAGAGf39/f39/AGAHf39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMEAwABAgYGAX8AQQALB1cFEV9fd2FzbV9jYWxsX2N0b3JzAAAIY29udm9sdmUAAQpjb252b2x2ZUhWAAIMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAK7AMDAwABC8YDAQ9/AkAgA0UNACAERQ0AA0AgDCENQQAhE0EAIQcDQCAHQQJqIQYCfyAHQQF0IAVqIgcuAQIiFEUEQEGAwAAhCEGAwAAhCUGAwAAhCkGAwAAhCyAGDAELIBIgBy4BAGohCEEAIQsgFCEHQQAhDiAGIQlBACEPQQAhEANAIAUgCUEBdGouAQAiESAAIAhBAnRqKAIAIgpBGHZsIBBqIRAgCkH/AXEgEWwgC2ohCyAKQRB2Qf8BcSARbCAPaiEPIApBCHZB/wFxIBFsIA5qIQ4gCEEBaiEIIAlBAWohCSAHQQFrIgcNAAsgC0GAQGshCCAOQYBAayEJIA9BgEBrIQogEEGAQGshCyAGIBRqCyEHIAEgDUECdGogCUEOdSIGQf8BIAZB/wFIGyIGQQAgBkEAShtBCHRBgP4DcSAKQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EQdEGAgPwHcSALQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobcjYCACADIA1qIQ0gE0EBaiITIARHDQALIAxBAWoiDCACbCESIAMgDEcNAAsLCx4AQQAgAiADIAQgBSAAEAEgAkEAIAQgBSAGIAEQAQs="},{}],4:[function(w,m,j){m.exports={name:"resize",fn:w("./resize"),wasm_fn:w("./resize_wasm"),wasm_src:w("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(w,m,j){var u=w("./resize_filter_gen"),i=w("./convolve").convolveHorizontally,o=w("./convolve").convolveVertically;function e(n,t,A){for(var h=3,s=t*A*4|0;h<s;)n[h]=255,h=h+4|0}m.exports=function(n){var t=n.src,A=n.width,h=n.height,s=n.toWidth,c=n.toHeight,l=n.scaleX||n.toWidth/n.width,I=n.scaleY||n.toHeight/n.height,d=n.offsetX||0,_=n.offsetY||0,B=n.dest||new Uint8Array(s*c*4),C=typeof n.quality>"u"?3:n.quality,Q=n.alpha||!1,E=u(C,A,s,l,d),v=u(C,h,c,I,_),M=new Uint8Array(s*h*4);return i(t,M,A,h,s,E),o(M,B,h,s,c,v),Q||e(B,s,c),B}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(w,m,j){var u=w("./resize_filter_info"),i=14;function o(e){return Math.round(e*((1<<i)-1))}m.exports=function(e,n,t,A,h){var s=u[e].filter,c=1/A,l=Math.min(1,A),I=u[e].win/l,d,_,B,C,Q,E,v,M,D,b,k,H,O,R,r,f,a,p=Math.floor((I+1)*2),g=new Int16Array((p+2)*t),x=0,y=!g.subarray||!g.set;for(d=0;d<t;d++){for(_=(d+.5)*c+h,B=Math.max(0,Math.floor(_-I)),C=Math.min(n-1,Math.ceil(_+I)),Q=C-B+1,E=new Float32Array(Q),v=new Int16Array(Q),M=0,D=B,b=0;D<=C;D++,b++)k=s((D+.5-_)*l),M+=k,E[b]=k;for(H=0,b=0;b<E.length;b++)O=E[b]/M,H+=O,v[b]=o(O);for(v[t>>1]+=o(1-H),R=0;R<v.length&&v[R]===0;)R++;if(R<v.length){for(r=v.length-1;r>0&&v[r]===0;)r--;if(f=B+R,a=r-R+1,g[x++]=f,g[x++]=a,!y)g.set(v.subarray(R,r+1),x),x+=a;else for(b=R;b<=r;b++)g[x++]=v[b]}else g[x++]=0,g[x++]=0}return g}},{"./resize_filter_info":7}],7:[function(w,m,j){m.exports=[{win:.5,filter:function(u){return u>=-.5&&u<.5?1:0}},{win:1,filter:function(u){if(u<=-1||u>=1)return 0;if(u>-11920929e-14&&u<11920929e-14)return 1;var i=u*Math.PI;return Math.sin(i)/i*(.54+.46*Math.cos(i/1))}},{win:2,filter:function(u){if(u<=-2||u>=2)return 0;if(u>-11920929e-14&&u<11920929e-14)return 1;var i=u*Math.PI;return Math.sin(i)/i*Math.sin(i/2)/(i/2)}},{win:3,filter:function(u){if(u<=-3||u>=3)return 0;if(u>-11920929e-14&&u<11920929e-14)return 1;var i=u*Math.PI;return Math.sin(i)/i*Math.sin(i/3)/(i/3)}}]},{}],8:[function(w,m,j){var u=w("./resize_filter_gen");function i(t,A,h){for(var s=3,c=A*h*4|0;s<c;)t[s]=255,s=s+4|0}function o(t){return new Uint8Array(t.buffer,0,t.byteLength)}var e=!0;try{e=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1}catch{}function n(t,A,h){if(e){A.set(o(t),h);return}for(var s=h,c=0;c<t.length;c++){var l=t[c];A[s++]=l&255,A[s++]=l>>8&255}}m.exports=function(t){var A=t.src,h=t.width,s=t.height,c=t.toWidth,l=t.toHeight,I=t.scaleX||t.toWidth/t.width,d=t.scaleY||t.toHeight/t.height,_=t.offsetX||0,B=t.offsetY||0,C=t.dest||new Uint8Array(c*l*4),Q=typeof t.quality>"u"?3:t.quality,E=t.alpha||!1,v=u(Q,h,c,I,_),M=u(Q,s,l,d,B),D=0,b=this.__align(D+Math.max(A.byteLength,C.byteLength)),k=this.__align(b+s*c*4),H=this.__align(k+v.byteLength),O=H+M.byteLength,R=this.__instance("resize",O),r=new Uint8Array(this.__memory.buffer),f=new Uint32Array(this.__memory.buffer),a=new Uint32Array(A.buffer);f.set(a),n(v,r,k),n(M,r,H);var p=R.exports.convolveHV||R.exports._convolveHV;p(k,H,b,h,s,c,l);var g=new Uint32Array(C.buffer);return g.set(new Uint32Array(this.__memory.buffer,0,l*c)),E||i(C,c,l),C}},{"./resize_filter_gen":6}],9:[function(w,m,j){m.exports={name:"unsharp_mask",fn:w("./unsharp_mask"),wasm_fn:w("./unsharp_mask_wasm"),wasm_src:w("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(w,m,j){var u=w("glur/mono16");function i(o,e,n){for(var t=e*n,A=new Uint16Array(t),h,s,c,l,I=0;I<t;I++)h=o[4*I],s=o[4*I+1],c=o[4*I+2],l=h>=s&&h>=c?h:s>=c&&s>=h?s:c,A[I]=l<<8;return A}m.exports=function(o,e,n,t,A,h){var s,c,l,I,d;if(!(t===0||A<.5)){A>2&&(A=2);var _=i(o,e,n),B=new Uint16Array(_);u(B,e,n,A);for(var C=t/100*4096+.5|0,Q=h<<8,E=e*n,v=0;v<E;v++)s=_[v],I=s-B[v],Math.abs(I)>=Q&&(c=s+(C*I+2048>>12),c=c>65280?65280:c,c=c<0?0:c,s=s!==0?s:1,l=(c<<12)/s|0,d=v*4,o[d]=o[d]*l+2048>>12,o[d+1]=o[d+1]*l+2048>>12,o[d+2]=o[d+2]*l+2048>>12)}}},{"glur/mono16":18}],11:[function(w,m,j){m.exports=function(u,i,o,e,n,t){if(!(e===0||n<.5)){n>2&&(n=2);var A=i*o,h=A*4,s=A*2,c=A*2,l=Math.max(i,o)*4,I=8*4,d=0,_=h,B=_+s,C=B+c,Q=C+c,E=Q+l,v=this.__instance("unsharp_mask",h+s+c*2+l+I,{exp:Math.exp}),M=new Uint32Array(u.buffer),D=new Uint32Array(this.__memory.buffer);D.set(M);var b=v.exports.hsv_v16||v.exports._hsv_v16;b(d,_,i,o),b=v.exports.blurMono16||v.exports._blurMono16,b(_,B,C,Q,E,i,o,n),b=v.exports.unsharp||v.exports._unsharp,b(d,d,_,B,i,o,e,t),M.set(new Uint32Array(this.__memory.buffer,0,A))}}},{}],12:[function(w,m,j){m.exports="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"},{}],13:[function(w,m,j){var u=100;function i(o,e){this.create=o,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=e||2e3}i.prototype.acquire=function(){var o=this,e;return this.available.length!==0?e=this.available.pop():(e=this.create(),e.id=this.lastId++,e.release=function(){return o.release(e)}),this.acquired[e.id]=e,e},i.prototype.release=function(o){var e=this;delete this.acquired[o.id],o.lastUsed=Date.now(),this.available.push(o),this.timeoutId===0&&(this.timeoutId=setTimeout(function(){return e.gc()},u))},i.prototype.gc=function(){var o=this,e=Date.now();this.available=this.available.filter(function(n){return e-n.lastUsed>o.idle?(n.destroy(),!1):!0}),this.available.length!==0?this.timeoutId=setTimeout(function(){return o.gc()},u):this.timeoutId=0},m.exports=i},{}],14:[function(w,m,j){var u=2;m.exports=function(i,o,e,n,t,A){var h=e/i,s=n/o,c=(2*A+u+1)/t;if(c>.5)return[[e,n]];var l=Math.ceil(Math.log(Math.min(h,s))/Math.log(c));if(l<=1)return[[e,n]];for(var I=[],d=0;d<l;d++){var _=Math.round(Math.pow(Math.pow(i,l-d-1)*Math.pow(e,d+1),1/l)),B=Math.round(Math.pow(Math.pow(o,l-d-1)*Math.pow(n,d+1),1/l));I.push([_,B])}return I}},{}],15:[function(w,m,j){var u=1e-5;function i(e){var n=Math.round(e);return Math.abs(e-n)<u?n:Math.floor(e)}function o(e){var n=Math.round(e);return Math.abs(e-n)<u?n:Math.ceil(e)}m.exports=function(e){var n=e.toWidth/e.width,t=e.toHeight/e.height,A=i(e.srcTileSize*n)-2*e.destTileBorder,h=i(e.srcTileSize*t)-2*e.destTileBorder;if(A<1||h<1)throw new Error("Internal error in pica: target tile width/height is too small.");var s,c,l,I,d,_,B=[],C;for(I=0;I<e.toHeight;I+=h)for(l=0;l<e.toWidth;l+=A)s=l-e.destTileBorder,s<0&&(s=0),d=l+A+e.destTileBorder-s,s+d>=e.toWidth&&(d=e.toWidth-s),c=I-e.destTileBorder,c<0&&(c=0),_=I+h+e.destTileBorder-c,c+_>=e.toHeight&&(_=e.toHeight-c),C={toX:s,toY:c,toWidth:d,toHeight:_,toInnerX:l,toInnerY:I,toInnerWidth:A,toInnerHeight:h,offsetX:s/n-i(s/n),offsetY:c/t-i(c/t),scaleX:n,scaleY:t,x:i(s/n),y:i(c/t),width:o(d/n),height:o(_/t)},B.push(C);return B}},{}],16:[function(w,m,j){function u(i){return Object.prototype.toString.call(i)}m.exports.isCanvas=function(i){var o=u(i);return o==="[object HTMLCanvasElement]"||o==="[object OffscreenCanvas]"||o==="[object Canvas]"},m.exports.isImage=function(i){return u(i)==="[object HTMLImageElement]"},m.exports.isImageBitmap=function(i){return u(i)==="[object ImageBitmap]"},m.exports.limiter=function(i){var o=0,e=[];function n(){o<i&&e.length&&(o++,e.shift()())}return function(t){return new Promise(function(A,h){e.push(function(){t().then(function(s){A(s),o--,n()},function(s){h(s),o--,n()})}),n()})}},m.exports.cib_quality_name=function(i){switch(i){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},m.exports.cib_support=function(i){return Promise.resolve().then(function(){if(typeof createImageBitmap>"u")return!1;var o=i(100,100);return createImageBitmap(o,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(e){var n=e.width===10;return e.close(),o=null,n})}).catch(function(){return!1})},m.exports.worker_offscreen_canvas_support=function(){return new Promise(function(i,o){if(typeof OffscreenCanvas>"u"){i(!1);return}function e(A){if(typeof createImageBitmap>"u"){A.postMessage(!1);return}Promise.resolve().then(function(){var h=new OffscreenCanvas(10,10),s=h.getContext("2d");return s.rect(0,0,1,1),createImageBitmap(h,0,0,1,1)}).then(function(){return A.postMessage(!0)},function(){return A.postMessage(!1)})}var n=btoa("(".concat(e.toString(),")(self);")),t=new Worker("data:text/javascript;base64,".concat(n));t.onmessage=function(A){return i(A.data)},t.onerror=o}).then(function(i){return i},function(){return!1})},m.exports.can_use_canvas=function(i){var o=!1;try{var e=i(2,1),n=e.getContext("2d"),t=n.createImageData(2,1);t.data[0]=12,t.data[1]=23,t.data[2]=34,t.data[3]=255,t.data[4]=45,t.data[5]=56,t.data[6]=67,t.data[7]=255,n.putImageData(t,0,0),t=null,t=n.getImageData(0,0,2,1),t.data[0]===12&&t.data[1]===23&&t.data[2]===34&&t.data[3]===255&&t.data[4]===45&&t.data[5]===56&&t.data[6]===67&&t.data[7]===255&&(o=!0)}catch{}return o},m.exports.cib_can_use_region=function(){return new Promise(function(i){if(typeof createImageBitmap>"u"){i(!1);return}var o=new Image;o.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",o.onload=function(){createImageBitmap(o,0,0,o.width,o.height).then(function(e){e.width===o.width&&e.height===o.height?i(!0):i(!1)},function(){return i(!1)})},o.onerror=function(){return i(!1)}})}},{}],17:[function(w,m,j){m.exports=function(){var u=w("./mathlib"),i;onmessage=function(o){var e=o.data.opts;if(!e.src&&e.srcBitmap){var n=new OffscreenCanvas(e.width,e.height),t=n.getContext("2d",{alpha:!!e.alpha});t.drawImage(e.srcBitmap,0,0),e.src=t.getImageData(0,0,e.width,e.height).data,n.width=n.height=0,n=null,e.srcBitmap.close(),e.srcBitmap=null}i||(i=new u(o.data.features));var A=i.resizeAndUnsharp(e);postMessage({data:A},[A.buffer])}}},{"./mathlib":1}],18:[function(w,m,j){var u,i,o,e,n,t,A,h;function s(I){I<.5&&(I=.5);var d=Math.exp(.726*.726)/I,_=Math.exp(-d),B=Math.exp(-2*d),C=(1-_)*(1-_)/(1+2*d*_-B);return u=C,i=C*(d-1)*_,o=C*(d+1)*_,e=-C*B,n=2*_,t=-B,A=(u+i)/(1-n-t),h=(o+e)/(1-n-t),new Float32Array([u,i,o,e,n,t,A,h])}function c(I,d,_,B,C,Q){var E,v,M,D,b,k,H,O,R,r,f,a,p,g;for(R=0;R<Q;R++){for(k=R*C,H=R,O=0,E=I[k],b=E*B[6],D=b,f=B[0],a=B[1],p=B[4],g=B[5],r=0;r<C;r++)v=I[k],M=v*f+E*a+D*p+b*g,b=D,D=M,E=v,_[O]=D,O++,k++;for(k--,O--,H+=Q*(C-1),E=I[k],b=E*B[7],D=b,v=E,f=B[2],a=B[3],r=C-1;r>=0;r--)M=v*f+E*a+D*p+b*g,b=D,D=M,E=v,v=I[k],d[H]=_[O]+D,k--,O--,H-=Q}}function l(I,d,_,B){if(B){var C=new Uint16Array(I.length),Q=new Float32Array(Math.max(d,_)),E=s(B);c(I,C,Q,E,d,_),c(C,I,Q,E,_,d)}}m.exports=l},{}],19:[function(w,m,j){typeof Object.create=="function"?m.exports=function(u,i){i&&(u.super_=i,u.prototype=Object.create(i.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}))}:m.exports=function(u,i){if(i){u.super_=i;var o=function(){};o.prototype=i.prototype,u.prototype=new o,u.prototype.constructor=u}}},{}],20:[function(w,m,j){var u=w("object-assign"),i=w("./lib/base64decode"),o=w("./lib/wa_detect"),e={js:!0,wasm:!0};function n(t){if(!(this instanceof n))return new n(t);var A=u({},e,t||{});if(this.options=A,this.__cache={},this.__init_promise=null,this.__modules=A.modules||{},this.__memory=null,this.__wasm={},this.__isLE=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1,!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}n.prototype.has_wasm=o,n.prototype.use=function(t){return this.__modules[t.name]=t,this.options.wasm&&this.has_wasm()&&t.wasm_fn?this[t.name]=t.wasm_fn:this[t.name]=t.fn,this},n.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error(`mathlib: only "wasm" was enabled, but it's not supported`));var t=this;return this.__init_promise=Promise.all(Object.keys(t.__modules).map(function(A){var h=t.__modules[A];return!t.options.wasm||!t.has_wasm()||!h.wasm_fn||t.__wasm[A]?null:WebAssembly.compile(t.__base64decode(h.wasm_src)).then(function(s){t.__wasm[A]=s})})).then(function(){return t}),this.__init_promise},n.prototype.__base64decode=i,n.prototype.__reallocate=function(t){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(t/(64*1024))}),this.__memory;var A=this.__memory.buffer.byteLength;return A<t&&this.__memory.grow(Math.ceil((t-A)/(64*1024))),this.__memory},n.prototype.__instance=function(t,A,h){if(A&&this.__reallocate(A),!this.__wasm[t]){var s=this.__modules[t];this.__wasm[t]=new WebAssembly.Module(this.__base64decode(s.wasm_src))}if(!this.__cache[t]){var c={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[t]=new WebAssembly.Instance(this.__wasm[t],{env:u(c,h||{})})}return this.__cache[t]},n.prototype.__align=function(t,A){A=A||8;var h=t%A;return t+(h?A-h:0)},m.exports=n},{"./lib/base64decode":21,"./lib/wa_detect":22,"object-assign":23}],21:[function(w,m,j){var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";m.exports=function(i){for(var o=i.replace(/[\r\n=]/g,""),e=o.length,n=new Uint8Array(e*3>>2),t=0,A=0,h=0;h<e;h++)h%4===0&&h&&(n[A++]=t>>16&255,n[A++]=t>>8&255,n[A++]=t&255),t=t<<6|u.indexOf(o.charAt(h));var s=e%4*6;return s===0?(n[A++]=t>>16&255,n[A++]=t>>8&255,n[A++]=t&255):s===18?(n[A++]=t>>10&255,n[A++]=t>>2&255):s===12&&(n[A++]=t>>4&255),n}},{}],22:[function(w,m,j){var u;m.exports=function(){if(typeof u<"u"||(u=!1,typeof WebAssembly>"u"))return u;try{var i=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),o=new WebAssembly.Module(i),e=new WebAssembly.Instance(o,{});return e.exports.test(4)!==0&&(u=!0),u}catch{}return u}},{}],23:[function(w,m,j){var u=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function e(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function n(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var A={},h=0;h<10;h++)A["_"+String.fromCharCode(h)]=h;var s=Object.getOwnPropertyNames(A).map(function(l){return A[l]});if(s.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(l){c[l]=l}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}m.exports=n()?Object.assign:function(t,A){for(var h,s=e(t),c,l=1;l<arguments.length;l++){h=Object(arguments[l]);for(var I in h)i.call(h,I)&&(s[I]=h[I]);if(u){c=u(h);for(var d=0;d<c.length;d++)o.call(h,c[d])&&(s[c[d]]=h[c[d]])}}return s}},{}],24:[function(w,m,j){var u=arguments[3],i=arguments[4],o=arguments[5],e=JSON.stringify;m.exports=function(n,t){for(var A,h=Object.keys(o),s=0,c=h.length;s<c;s++){var l=h[s],I=o[l].exports;if(I===n||I&&I.default===n){A=l;break}}if(!A){A=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var d={},s=0,c=h.length;s<c;s++){var l=h[s];d[l]=l}i[A]=["function(require,module,exports){"+n+"(self); }",d]}var _=Math.floor(Math.pow(16,8)*Math.random()).toString(16),B={};B[A]=A,i[_]=["function(require,module,exports){var f = require("+e(A)+");(f.default ? f.default : f)(self);}",B];var C={};Q(_);function Q(k){C[k]=!0;for(var H in i[k][1]){var O=i[k][1][H];C[O]||Q(O)}}var E="("+u+")({"+Object.keys(C).map(function(k){return e(k)+":["+i[k][0]+","+e(i[k][1])+"]"}).join(",")+"},{},["+e(_)+"])",v=window.URL||window.webkitURL||window.mozURL||window.msURL,M=new Blob([E],{type:"text/javascript"});if(t&&t.bare)return M;var D=v.createObjectURL(M),b=new Worker(D);return b.objectURL=D,b}},{}],"/index.js":[function(w,m,j){function u(r,f){return t(r)||n(r,f)||o(r,f)||i()}function i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o(r,f){if(r){if(typeof r=="string")return e(r,f);var a=Object.prototype.toString.call(r).slice(8,-1);if(a==="Object"&&r.constructor&&(a=r.constructor.name),a==="Map"||a==="Set")return Array.from(r);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return e(r,f)}}function e(r,f){(f==null||f>r.length)&&(f=r.length);for(var a=0,p=new Array(f);a<f;a++)p[a]=r[a];return p}function n(r,f){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var p=[],g=!0,x=!1,y,G;try{for(a=a.call(r);!(g=(y=a.next()).done)&&(p.push(y.value),!(f&&p.length===f));g=!0);}catch(U){x=!0,G=U}finally{try{!g&&a.return!=null&&a.return()}finally{if(x)throw G}}return p}}function t(r){if(Array.isArray(r))return r}var A=w("object-assign"),h=w("webworkify"),s=w("./lib/mathlib"),c=w("./lib/pool"),l=w("./lib/utils"),I=w("./lib/worker"),d=w("./lib/stepper"),_=w("./lib/tiler"),B={},C=!1;try{typeof navigator<"u"&&navigator.userAgent&&(C=navigator.userAgent.indexOf("Safari")>=0)}catch{}var Q=1;typeof navigator<"u"&&(Q=Math.min(navigator.hardwareConcurrency||1,4));var E={tile:1024,concurrency:Q,features:["js","wasm","ww"],idle:2e3,createCanvas:function(r,f){var a=document.createElement("canvas");return a.width=r,a.height=f,a}},v={quality:3,alpha:!1,unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},M=!1,D=!1,b=!1,k=!1,H=!1;function O(){return{value:h(I),destroy:function(){if(this.value.terminate(),typeof window<"u"){var r=window.URL||window.webkitURL||window.mozURL||window.msURL;r&&r.revokeObjectURL&&this.value.objectURL&&r.revokeObjectURL(this.value.objectURL)}}}}function R(r){if(!(this instanceof R))return new R(r);this.options=A({},E,r||{});var f="lk_".concat(this.options.concurrency);this.__limit=B[f]||l.limiter(this.options.concurrency),B[f]||(B[f]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}R.prototype.init=function(){var r=this;if(this.__initPromise)return this.__initPromise;if(typeof ImageData<"u"&&typeof Uint8ClampedArray<"u")try{new ImageData(new Uint8ClampedArray(400),10,10),M=!0}catch{}typeof ImageBitmap<"u"&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?D=!0:this.debug("ImageBitmap does not support .close(), disabled"));var f=this.options.features.slice();if(f.indexOf("all")>=0&&(f=["cib","wasm","js","ww"]),this.__requested_features=f,this.__mathlib=new s(f),f.indexOf("ww")>=0&&typeof window<"u"&&"Worker"in window)try{var a=w("webworkify")(function(){});a.terminate(),this.features.ww=!0;var p="wp_".concat(JSON.stringify(this.options));B[p]?this.__workersPool=B[p]:(this.__workersPool=new c(O,this.options.idle),B[p]=this.__workersPool)}catch{}var g=this.__mathlib.init().then(function(U){A(r.features,U.features)}),x;D?x=l.cib_support(this.options.createCanvas).then(function(U){if(r.features.cib&&f.indexOf("cib")<0){r.debug("createImageBitmap() resize supported, but disabled by config");return}f.indexOf("cib")>=0&&(r.features.cib=U)}):x=Promise.resolve(!1),b=l.can_use_canvas(this.options.createCanvas);var y;D&&M&&f.indexOf("ww")!==-1?y=l.worker_offscreen_canvas_support():y=Promise.resolve(!1),y=y.then(function(U){k=U});var G=l.cib_can_use_region().then(function(U){H=U});return this.__initPromise=Promise.all([g,x,y,G]).then(function(){return r}),this.__initPromise},R.prototype.__invokeResize=function(r,f){var a=this;return f.__mathCache=f.__mathCache||{},Promise.resolve().then(function(){return a.features.ww?new Promise(function(p,g){var x=a.__workersPool.acquire();f.cancelToken&&f.cancelToken.catch(function(G){return g(G)}),x.value.onmessage=function(G){x.release(),G.data.err?g(G.data.err):p(G.data)};var y=[];r.src&&y.push(r.src.buffer),r.srcBitmap&&y.push(r.srcBitmap),x.value.postMessage({opts:r,features:a.__requested_features,preload:{wasm_nodule:a.__mathlib.__}},y)}):{data:a.__mathlib.resizeAndUnsharp(r,f.__mathCache)}})},R.prototype.__extractTileData=function(r,f,a,p,g){if(this.features.ww&&k&&(l.isCanvas(f)||H))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(p.srcImageBitmap||f,r.x,r.y,r.width,r.height).then(function(G){return g.srcBitmap=G,g});if(l.isCanvas(f))return p.srcCtx||(p.srcCtx=f.getContext("2d",{alpha:!!a.alpha})),this.debug("Get tile pixel data"),g.src=p.srcCtx.getImageData(r.x,r.y,r.width,r.height).data,g;this.debug("Draw tile imageBitmap/image to temporary canvas");var x=this.options.createCanvas(r.width,r.height),y=x.getContext("2d",{alpha:!!a.alpha});return y.globalCompositeOperation="copy",y.drawImage(p.srcImageBitmap||f,r.x,r.y,r.width,r.height,0,0,r.width,r.height),this.debug("Get tile pixel data"),g.src=y.getImageData(0,0,r.width,r.height).data,x.width=x.height=0,g},R.prototype.__landTileData=function(r,f,a){var p;if(this.debug("Convert raw rgba tile result to ImageData"),f.bitmap)return a.toCtx.drawImage(f.bitmap,r.toX,r.toY),null;if(M)p=new ImageData(new Uint8ClampedArray(f.data),r.toWidth,r.toHeight);else if(p=a.toCtx.createImageData(r.toWidth,r.toHeight),p.data.set)p.data.set(f.data);else for(var g=p.data.length-1;g>=0;g--)p.data[g]=f.data[g];return this.debug("Draw tile"),C?a.toCtx.putImageData(p,r.toX,r.toY,r.toInnerX-r.toX,r.toInnerY-r.toY,r.toInnerWidth+1e-5,r.toInnerHeight+1e-5):a.toCtx.putImageData(p,r.toX,r.toY,r.toInnerX-r.toX,r.toInnerY-r.toY,r.toInnerWidth,r.toInnerHeight),null},R.prototype.__tileAndResize=function(r,f,a){var p=this,g={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null},x=function(y){return p.__limit(function(){if(a.canceled)return a.cancelToken;var G={width:y.width,height:y.height,toWidth:y.toWidth,toHeight:y.toHeight,scaleX:y.scaleX,scaleY:y.scaleY,offsetX:y.offsetX,offsetY:y.offsetY,quality:a.quality,alpha:a.alpha,unsharpAmount:a.unsharpAmount,unsharpRadius:a.unsharpRadius,unsharpThreshold:a.unsharpThreshold};return p.debug("Invoke resize math"),Promise.resolve(G).then(function(U){return p.__extractTileData(y,r,a,g,U)}).then(function(U){return p.debug("Invoke resize math"),p.__invokeResize(U,a)}).then(function(U){return a.canceled?a.cancelToken:(g.srcImageData=null,p.__landTileData(y,U,g))})})};return Promise.resolve().then(function(){if(g.toCtx=f.getContext("2d",{alpha:!!a.alpha}),l.isCanvas(r))return null;if(l.isImageBitmap(r))return g.srcImageBitmap=r,g.isImageBitmapReused=!0,null;if(l.isImage(r))return D?(p.debug("Decode image via createImageBitmap"),createImageBitmap(r).then(function(y){g.srcImageBitmap=y}).catch(function(y){return null})):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(a.canceled)return a.cancelToken;p.debug("Calculate tiles");var y=_({width:a.width,height:a.height,srcTileSize:p.options.tile,toWidth:a.toWidth,toHeight:a.toHeight,destTileBorder:a.__destTileBorder}),G=y.map(function(F){return x(F)});function U(F){F.srcImageBitmap&&(F.isImageBitmapReused||F.srcImageBitmap.close(),F.srcImageBitmap=null)}return p.debug("Process tiles"),Promise.all(G).then(function(){return p.debug("Finished!"),U(g),f},function(F){throw U(g),F})})},R.prototype.__processStages=function(r,f,a,p){var g=this;if(p.canceled)return p.cancelToken;var x=r.shift(),y=u(x,2),G=y[0],U=y[1],F=r.length===0;p=A({},p,{toWidth:G,toHeight:U,quality:F?p.quality:Math.min(1,p.quality)});var W;return F||(W=this.options.createCanvas(G,U)),this.__tileAndResize(f,F?a:W,p).then(function(){return F?a:(p.width=G,p.height=U,g.__processStages(r,W,a,p))}).then(function(P){return W&&(W.width=W.height=0),P})},R.prototype.__resizeViaCreateImageBitmap=function(r,f,a){var p=this,g=f.getContext("2d",{alpha:!!a.alpha});return this.debug("Resize via createImageBitmap()"),createImageBitmap(r,{resizeWidth:a.toWidth,resizeHeight:a.toHeight,resizeQuality:l.cib_quality_name(a.quality)}).then(function(x){if(a.canceled)return a.cancelToken;if(!a.unsharpAmount)return g.drawImage(x,0,0),x.close(),g=null,p.debug("Finished!"),f;p.debug("Unsharp result");var y=p.options.createCanvas(a.toWidth,a.toHeight),G=y.getContext("2d",{alpha:!!a.alpha});G.drawImage(x,0,0),x.close();var U=G.getImageData(0,0,a.toWidth,a.toHeight);return p.__mathlib.unsharp_mask(U.data,a.toWidth,a.toHeight,a.unsharpAmount,a.unsharpRadius,a.unsharpThreshold),g.putImageData(U,0,0),y.width=y.height=0,U=G=y=g=null,p.debug("Finished!"),f})},R.prototype.resize=function(r,f,a){var p=this;this.debug("Start resize...");var g=A({},v);if(isNaN(a)?a&&(g=A(g,a)):g=A(g,{quality:a}),g.toWidth=f.width,g.toHeight=f.height,g.width=r.naturalWidth||r.width,g.height=r.naturalHeight||r.height,f.width===0||f.height===0)return Promise.reject(new Error("Invalid output size: ".concat(f.width,"x").concat(f.height)));g.unsharpRadius>2&&(g.unsharpRadius=2),g.canceled=!1,g.cancelToken&&(g.cancelToken=g.cancelToken.then(function(y){throw g.canceled=!0,y},function(y){throw g.canceled=!0,y}));var x=3;return g.__destTileBorder=Math.ceil(Math.max(x,2.5*g.unsharpRadius|0)),this.init().then(function(){if(g.canceled)return g.cancelToken;if(p.features.cib)return p.__resizeViaCreateImageBitmap(r,f,g);if(!b){var y=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw y.code="ERR_GET_IMAGE_DATA",y}var G=d(g.width,g.height,g.toWidth,g.toHeight,p.options.tile,g.__destTileBorder);return p.__processStages(G,r,f,g)})},R.prototype.resizeBuffer=function(r){var f=this,a=A({},v,r);return this.init().then(function(){return f.__mathlib.resizeAndUnsharp(a)})},R.prototype.toBlob=function(r,f,a){return f=f||"image/png",new Promise(function(p){if(r.toBlob){r.toBlob(function(U){return p(U)},f,a);return}if(r.convertToBlob){p(r.convertToBlob({type:f,quality:a}));return}for(var g=atob(r.toDataURL(f,a).split(",")[1]),x=g.length,y=new Uint8Array(x),G=0;G<x;G++)y[G]=g.charCodeAt(G);p(new Blob([y],{type:f}))})},R.prototype.debug=function(){},m.exports=R},{"./lib/mathlib":1,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":23,webworkify:24}]},{},[])("/index.js")})});const K=L();/*! Bundled license information:

pica/dist/pica.js:
  (*!
  
  pica
  https://github.com/nodeca/pica
  
  *)
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)
*/export{K as default};
